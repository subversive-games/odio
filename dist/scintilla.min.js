!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Scintilla",[],e):"object"==typeof exports?exports.Scintilla=e():t.Scintilla=e()}(window,function(){return function(i){var n={};function a(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,a),e.l=!0,e.exports}return a.m=i,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},a.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=365)}([function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,i){"use strict";e.__esModule=!0;var n,a=(n=i(336))&&n.__esModule?n:{default:n};e.default=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,a.default)(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}()},function(t,e,i){t.exports={default:i(307),__esModule:!0}},function(t,e,i){"use strict";e.__esModule=!0;var n=r(i(305)),a=r(i(301)),u=r(i(12));function r(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,u.default)(e)));t.prototype=(0,a.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(n.default?(0,n.default)(t,e):t.__proto__=e)}},function(t,e,i){"use strict";e.__esModule=!0;var n,a=(n=i(12))&&n.__esModule?n:{default:n};e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,a.default)(e))&&"function"!=typeof e?t:e}},function(t,e,i){t.exports={default:i(338),__esModule:!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={NONE:0,IDLE:1,PENDING:2,LOADING:3,PROCESSING:4,ERROR:5,FINISHED:6,DONE:7}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(i(0)),u=n(i(1)),r=n(i(69));function n(t){return t&&t.__esModule?t:{default:t}}var s=function(){function n(t,e){if((0,a.default)(this,n),this.unique=e||!0,this.childs=[],null!==t&&Array.isArray(t))for(var i=0;i<t.length;i++)this.push(t[i])}return(0,u.default)(n,[{key:"first",value:function(){return 0<this.childs.length?this.childs[0]:null}},{key:"last",value:function(){if(0<this.childs.length){var t=this.childs.length-1;return this.childs[t]}return null}},{key:"push",value:function(t){return this.unique?-1===this.indexOf(t)&&this.childs.push(t):this.childs.push(t),t}},{key:"pushFront",value:function(t){return this.unique?-1===this.indexOf(t)&&this.childs.unshift(t):this.childs.unshift(t),t}},{key:"insert",value:function(t,e){return void 0===e&&(e=0),0===this.childs.length?this.push(t):(0<=e&&e<=this.childs.length&&(this.unique?-1===this.indexOf(t)&&this.childs.splice(e,0,t):this.childs.splice(e,0,t)),t)}},{key:"indexOf",value:function(t){return this.childs.indexOf(t)}},{key:"get",value:function(t){return this.childs[t]}},{key:"at",value:function(t){return this.childs[t]}},{key:"erase",value:function(t){var e=this.childs.indexOf(t),i=null;return-1!==e&&(i=this.childs.splice(e,1)),i}},{key:"eraseAt",value:function(t){var e=this.childs[t];return e&&this.childs.splice(t,1),e}},{key:"eraseList",value:function(t,e,i){if(void 0===i&&(i=!1),Array.isArray(t)){void 0===e&&(e=t.length);for(var n=0;n<e;n++){var a=t[n];this.erase(a)}}else{void 0===e&&(e=t.size);for(var u=0;u<e;u++){var r=t.childs[u];this.erase(r)}}}},{key:"eraseIndexedList",value:function(t){var e=t.length;if(Array.isArray(t))for(var i=0;i<e;i++){var n=t[i];this.eraseAt(n)}else for(var a=0;a<e;a++){var u=t.childs[a];this.eraseAt(u)}return this}},{key:"pop",value:function(){return this.childs.pop()}},{key:"popFront",value:function(){return this.childs.shift()}},{key:"has",value:function(t){return-1<this.childs.indexOf(t)}},{key:"hasAt",value:function(t){return void 0!==this.childs[t]}},{key:"empty",value:function(){return 0===this.childs.length}},{key:"clear",value:function(){return this.childs.length=0,this}},{key:"splice",value:function(t,e,i){return void 0===i?this.childs.splice(t,e):this.childs.splice(t,e,i)}},{key:"destroy",value:function(){this.clear(),this.childs=[],this.parent=null}},{key:"concat",value:function(t,e){return void 0===e&&(e=!1),this.childs=e?this.childs.concat(t.childs.splice(0)):this.childs.concat(t.childs),this}},{key:"each",value:function(t){for(var e=[],i=this.childs,n=void 0,a=1;a<arguments.length;a++)e.push(arguments[a]);for(var u=0;u<i.length;u++)if(void 0!==(n=t(i[u],u,e)))return n;return n}},{key:"sort",value:function(t){if(void 0!==t)return(0,r.default)(this.childs,t)}},{key:"find",value:function(t){if(void 0!==t){for(var e=this.childs.length,i=0;i<e;i++)if(t(this.childs[i]))return this.childs[i];return null}}},{key:"swap",value:function(t,e){if(t!==e){var i=this.indexOf(t),n=this.indexOf(e);if(i<0||n<0)throw new Error("DataList.swap: Could not swap childrens. The objects are not in the list.");return this.list[i]=t,this.list[n]=e,this}}},{key:"swapByIndex",value:function(t,e){if(t!==e){var i=this.at(t),n=this.at(e);if(void 0===i||void 0===n)throw new Error("DataList.swapByIndex: Could not swap childrens by index. The objects are not in the list.");return this.list[t]=i,this.list[e]=n,this}}},{key:"reverse",value:function(){return this.childs.reverse(),this}},{key:"content",value:function(){return this.childs}},{key:"size",get:function(){return this.childs.length}},{key:"length",get:function(){return this.childs.length}}]),n}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=(n=i(5))&&n.__esModule?n:{default:n},u={toRadian:Math.PI/180,toDegree:180/Math.PI,TAU:2*Math.PI,EPSILON:Math.pow(2,-52),HALFPI:1.5707963267948966,floor:function(t){return t>>0},round:function(t){return~~(.5+t)},abs:function(t){return t<0?-t:t},max:function(t,e){return t<e?e:t},min:function(t,e){return e<t?e:t},sign:function(t){return t<0?-1:0<t?1:0},clamp:function(t,e,i){return e<t?t<i?t:i:e},lerp:function(t,e,i){return(1-i)*t+i*e},clampedLerp:function(t,e,i){return i=u.clamp(i,0,1),u.lerp(t,e,i)},impreciseLerp:function(t,e,i){return t+i*(e-t)},distance:function(t,e,i,n){return Math.sqrt((t-=i)*t+(e-=n)*e)},angleBetween:function(t,e,i,n){var a=this.toDegree(Math.atan2(n-e,i-t));return a<0&&-180<=a&&(a=360+a),a},radianToDegree:function(t){return t*u.toDegree},degreeToRadian:function(t){return t*u.toRadian},manhattan:function(t,e,i,n){return{x:u.abs(i-t),y:u.abs(n-e)}},inManhattanRadius:function(t,e,i,n,a,u){void 0===u&&(u=a);var r=this.manhattan(t,e,i,n);return r.x<=a&&r.y<=u},average:function(){var t=arguments.length;return 0===t?0:this.sum.apply(this,arguments)/t},sum:function(){var t=arguments.length;if(0===t)return 0;for(var e=arguments[0],i=1;i<t;i++)e+=arguments[i];return e},sub:function(){var t=arguments.length;if(0===t)return 0;for(var e=arguments[0],i=1;i<t;i++)e-=arguments[i];return e},lerpAngle:function(t,e,i){var n=e,a=t;180<Math.abs(n-a)&&(a<n?a+=360:n+=360);var u=a+(n-a)*i;return 0<=u&&u<=360?u:u%360}};(0,a.default)(u),e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(5)),a=s(i(12)),u=s(i(0)),r=s(i(1));function s(t){return t&&t.__esModule?t:{default:t}}var o=new(function(){function t(){(0,u.default)(this,t)}return(0,r.default)(t,[{key:"value",value:function(t,e,i){var n=void 0===t?"undefined":(0,a.default)(t);return t&&"number"!==n&&"string"!==n&&t.hasOwnProperty(e)&&void 0!==t[e]?t[e]:i}},{key:"propertyValue",value:function(t,e,i){if(t&&"number"!=typeof t){if(t.hasOwnProperty(e))return t[e];if(e.indexOf(".")){for(var n=e.split("."),a=t,u=i,r=0;r<n.length;r++){if(!a.hasOwnProperty(n[r])){u=i;break}u=a[n[r]],a=a[n[r]]}return u}return i}return i}}]),t}());(0,n.default)(o),e.default=o},function(t,e,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.GameSystems=void 0,(n=i(50))&&n.__esModule;var a=e.GameSystems={},u={register:function(t,e,i,n){a[t]={name:i,system:e,init:n}}};e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={none:0,image:1,audio:2,text:3,svg:4,script:5,json:6,webFont:7,tilemapJSON:8,spritesheet:9,animMachine:10};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var n=r(i(363)),a=r(i(347)),u="function"==typeof a.default&&"symbol"==typeof n.default?function(t){return typeof t}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":typeof t};function r(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof a.default&&"symbol"===u(n.default)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":void 0===t?"undefined":u(t)}},function(t,e){var i=t.exports={version:"2.5.4"};"number"==typeof __e&&(__e=i)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=new(((n=i(182))&&n.__esModule?n:{default:n}).default);e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o(i(0)),n=o(i(1)),u=o(i(8)),r=o(i(267)),l=o(i(65)),d=o(i(27)),s=(o(i(262)),o(i(261)));function o(t){return t&&t.__esModule?t:{default:t}}function f(t){t._css="rgba("+t._r+","+t._g+","+t._b+","+t._a+")"}var c=function(){function o(t,e,i,n){(0,a.default)(this,o),this._r=t||0,this._g=e||0,this._b=i||0,this._a=n||1,this._css=null,f(this)}return(0,n.default)(o,[{key:"set",value:function(t){return(0,s.default)(this,t),f(this),this}},{key:"setNorm",value:function(t,e,i,n){if(void 0!==t)return this._r=Math.round(255*t),this._g=Math.round(255*e),this._b=Math.round(255*i),void 0!==n&&(this._a=Math.round(255*n)),f(this),this}},{key:"setRGB",value:function(t,e,i){return this.setRGBA(t,e,i,255)}},{key:"setRGBA",value:function(t,e,i,n){return void 0===t||(this._r=t||0,this._g=e||0,this._b=i||0,void 0!==n&&(this._a=n),f(this)),this}},{key:"setColor",value:function(t,e){return this._r=t.r,this._g=t.g,this._b=t.b,this._a=void 0!==e?e:t.a,f(this),this}},{key:"parse",value:function(t){var e=(0,r.default)(t);return this._r=e.r,this._g=e.g,this._b=e.b,this._a=e.a,f(this),this}},{key:"lerp",value:function(t,e){return this._r=u.default.lerp(this._r,t.r),this._g=u.default.lerp(this._g,t.g),this._b=u.default.lerp(this._b,t.b),this._a=u.default.lerp(this._a,t.a),f(this),this}},{key:"to32",value:function(){}},{key:"toCSS",value:function(){}},{key:"toInt",value:function(){}},{key:"toHex",value:function(){}},{key:"rgba",get:function(){return this._css}},{key:"r",get:function(){return this._r}},{key:"g",get:function(){return this._g}},{key:"b",get:function(){return this._b}},{key:"a",get:function(){return this._a},set:function(t){this._a=t,f(this)}}],[{key:"ease",value:function(t,e,i,n,a,u,r){void 0===n&&(n=d.default.LINEAR),void 0===a&&(a=0),void 0===u&&(u=3);var s=l.default.in;switch(a){case 1:s=l.default.out;break;case 2:s=l.default.inout}return void 0===r&&(r=new o),r.set(s.by(n,t.r,e.r,i,u),s.by(n,t.g,e.g,i,u),s.by(n,t.b,e.b,i,u),s.by(n,t.a,e.a,i,u)),r}},{key:"red",get:function(){return new o(255,0,0)}},{key:"green",get:function(){return new o(0,255,0)}},{key:"blue",get:function(){return new o(0,0,255)}},{key:"cyan",get:function(){return new o(0,255,255)}},{key:"magenta",get:function(){return new o(255,0,255)}},{key:"yellow",get:function(){return new o(255,255,0)}},{key:"black",get:function(){return new o(0)}},{key:"white",get:function(){return new o(255)}},{key:"gray",get:function(){return new o(127.5)}},{key:"transparent",get:function(){return new o(0,0,0,0)}}]),o}();e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={None:-1,Image:0,Tilemap:1,Animation:2,Spritesheet:3,AnimationMachine:4};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(297)),a=r(i(0)),u=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){(0,a.default)(this,t),this._content={},this._size=0}return(0,u.default)(t,[{key:"set",value:function(t,e){return this.has(t)||this._size++,this._content[t]=e,this}},{key:"get",value:function(t){return void 0===t?null:this.has(t)?this._content[t]:null}},{key:"at",value:function(t){var e=0;for(var i in this._content){if(t===e)return this._content[i];e++}return null}},{key:"has",value:function(t){return this._content.hasOwnProperty(t)}},{key:"contains",value:function(t){for(var e in this._content)if(entries[e]===t)return!0;return!1}},{key:"keys",value:function(){return(0,n.default)(this._content)}},{key:"values",value:function(){var t=[],e=this._content;for(var i in e)t.push(entries[i]);return t}},{key:"remove",value:function(t){if(!this.has(t))return null;var e=this._content[t];return delete this._content[t],this._size--,e}},{key:"erase",value:function(t){return!!this.has(t)&&(delete this._content[t],this._size--,!0)}},{key:"eraseList",value:function(t){if(void 0===t)return this;var e=t.length;if(Array.isArray(t))for(var i=0;i<e;i++){var n=t[i];this.erase(n)}return this}},{key:"clear",value:function(){for(var t in this._content)delete this._content[t];return this._size=0,this}},{key:"slowSize",value:function(){return(0,n.default)(_contents).length}},{key:"each",value:function(t){var e=this._content;for(var i in e)if(!1===t(i,e[i]))break;return this}},{key:"find",value:function(t){if(void 0!==t){var e=this._content;for(var i in e)if(t(i,e[i]))return e[i];return null}}},{key:"size",get:function(){return this._size}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=f(i(0)),a=f(i(1)),u=f(i(9)),r=f(i(56)),s=f(i(6)),o=f(i(11)),l=f(i(55)),d=f(i(22));function f(t){return t&&t.__esModule?t:{default:t}}var c=function(){function e(t){if((0,n.default)(this,e),this.type=u.default.value(t,"type",null),this.tag=u.default.value(t,"tag",null),this.useExternal=u.default.value(t,"useExternal",!1),null===this.type||null===this.tag)throw new Error("Loader.File: Invalid tag.");this.url=u.default.value(t,"url",void 0),void 0===this.url?this.url=u.default.value(t,"path","")+this.tag+"."+u.default.value(t,"ext",""):"function"!=typeof this.url&&(this.useExternal&&void 0===this.useExternal||(this.url=u.default.value(t,"path","").concat(this.url))),this.type===o.default.webFont&&this.type===o.default.spritesheet||(this.xhrSettings=r.default.createSettings(u.default.value(t,"responseType",void 0)),u.default.value(t,"xhrSettings",!1)&&(this.xhrSettings=r.default.merge(this.xhrSettings,u.default.value(t,"xhrSettings",{})))),this.loader=null,this.state=s.default.PENDING,this.totalBytes=0,this.loadedBytes=0,this.progress=0,this.data=void 0,this.source=null,this.xhrRequest=null,this.config=u.default.value(t,"config",{}),this.crossOrigin=void 0,this.onComplete=void 0}return(0,a.default)(e,[{key:"load",value:function(t){this.loader=t,this.state===s.default.FINISHED?(this.onDone(),l.default.call(this.loader,this)):(this.source=d.default.getURL(this.url,t.baseURL),0===this.source.indexOf("data:")||null==this.source?console.warn("Loader.File.load: unsupported URI."):this.xhrRequest=r.default.createFileRequest(this,t.xhr))}},{key:"onLoad",value:function(t){this.clearXHR(),t.target&&200!==t.target.status||void 0!==this.onPostLoad&&this.onPostLoad(this.loader,this.xhrRequest),l.default.call(this.loader,this)}},{key:"onError",value:function(t){console.error('Loader.File: Error on load file: "'+this.url+'".'),this.clearXHR(),l.default.call(this.loader,this)}},{key:"onProgress",value:function(t){t.lengthComputable&&(this.loadedBytes=t.loaded,this.totalBytes=t.total,this.progress=Math.min(this.loadedBytes/this.totalBytes,1))}},{key:"onDone",value:function(){this.state=s.default.DONE,this.loader.game.events.dispatch("file_complete_"+this.tag)}},{key:"onProcessing",value:function(t){this.state=s.default.PROCESSING,this.onDone(),t(this)}},{key:"clearXHR",value:function(){this.xhrRequest&&(this.xhrRequest.onload=void 0,this.xhrRequest.onerror=void 0,this.xhrRequest.onprogress=void 0)}}]),e}();e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return void 0===e&&(e=!0),!this.isOK()&&e?-1:(t.type===n.default.webFont&&void 0===this.webFontLoader&&(this.webFontLoader=new a.default("webFontLoader","https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"),this._filesQueue.insert(this.webFontLoader),this._filesQueueCount++,this.game.events.create("file_postload_webFontLoader").subscribeOnce(function(){t.fontLoad()})),t.path=this.path,this._filesQueue.insert(t),this._filesQueueCount++,t)};var n=u(i(11)),a=u(i(91));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(i(2)),u=n(i(0)),r=n(i(1)),s=n(i(4)),o=n(i(3)),l=n(i(49));function n(t){return t&&t.__esModule?t:{default:t}}n(i(33));var d=function(t){function n(t,e){(0,u.default)(this,n);var i=(0,s.default)(this,(n.__proto__||(0,a.default)(n)).call(this,"render",t||"renderable",e));return i._layerID=0,i._depth=0,i._alpha=1,i._depthSorting=0,i._bounds=new l.default,i._originInPixels={x:0,y:0},i._originIsDirty=!0,i}return(0,o.default)(n,t),(0,r.default)(n,[{key:"bounds",get:function(){return this._bounds}},{key:"depth",get:function(){return this._depthSorting},set:function(t){return void 0!==this.entity.game&&t!==this._depthSorting&&(this._depthSorting=t,this.entity.game.system.events.dispatch("__render_layersorting",this._layerID)),this}},{key:"layerName",get:function(){}},{key:"layer",get:function(){return this._layerID},set:function(t){this.game}},{key:"alpha",get:function(){return this._alpha},set:function(t){this._alpha=t}}]),n}(n(i(48)).default);e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={isFunction:function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},isClass:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},isArray:function(t){return Array.isArray(t)},isNumber:function(t){return!isNaN(t)},isString:function(t){return"string"==typeof t||t instanceof String}};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={getExtension:function(t){return t.substring(t.lastIndexOf(".")+1,t.length)||""},getFilename:function(t){return t.split("\\").pop().split("/").pop()||t},getFilenameWithoutExtension:function(t){return this.removeExtension(this.getFilename(t))},removeExtension:function(t){return t.substr(0,t.lastIndexOf("."))||t},getPath:function(t){return t.substr(0,t.lastIndexOf("/")+1)||""},getRootPath:function(t){return t.substr(0,t.indexOf("/")+1)||t},getPathWithoutRoot:function(t){var e=t.indexOf("/")+1||0,i=t.lastIndexOf("/")-e+1||t.length;return t.substr(e,i)||t},getDirectoryName:function(t){var e=t.split("/");return e.length<=1?e[e.length-1]:e[e.length-2]},getURL:function(t,e){return t?t.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t:e+t:null}};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),a=s(i(1)),u=s(i(17)),r=s(i(130));function s(t){return t&&t.__esModule?t:{default:t}}var o=new(function(){function t(){(0,n.default)(this,t),this.proxyModules=new u.default}return(0,a.default)(t,[{key:"attach",value:function(t,e,i){var n=t.attached;if(n.has(e))throw new Error("ModuleManager.attach: Could not attach module "+e+". Already exists");if(!this.proxyModules.has(e))throw new Error("ModuleManager.attach: Module type "+e+" don't exists.");var a=this.proxyModules.get(e)(t,i);return(0,r.default)(a,t.entity),n.set(a.type,a),"render"===a.type&&t._pendingModulesInitialization.push(a),a}},{key:"register",value:function(t,e){o.proxyModules.has(t)||o.proxyModules.set(t,e)}}]),t}());e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={NONE:0,FADEIN:1,FADEOUT:2,FADEINOUT:3,IDLE:4};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EASE_BACK_CONST=void 0;var n,a=(n=i(5))&&n.__esModule?n:{default:n},u={NONE:0,STEPPED:1,LINEAR:2,CUT:3,SINE:4,QUADRATIC:5,CUBIC:6,QUARTIC:7,QUINTIC:8,POWER:9,EXPONENTIAL:10,CIRC:11,BACK:12,ELASTIC:13,BOUNCE:14};e.EASE_BACK_CONST=1.70158,(0,a.default)(u),e.default=u},function(t,e,i){var n=i(356),a=i(86);t.exports=function(t){return n(a(t))}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){t.exports=!i(40)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,i){var n=i(41),a=i(150),u=i(84),r=Object.defineProperty;e.f=i(30)?Object.defineProperty:function(t,e,i){if(n(t),e=u(e,!0),n(i),a)try{return r(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(i(0)),n=u(i(1));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(){function u(t,e,i,n){(0,r.default)(this,u),this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0}return(0,n.default)(u,[{key:"set",value:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this}},{key:"setPostion",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setSize",value:function(t,e){return this.width=t,this.height=e,this}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}},{key:"intersects",value:function(t){return u.intersects(this,t)}},{key:"contains",value:function(t,e){return u.contains(this,t,e)}},{key:"center",get:function(){var t={};return t.x=this.x+this.width/2,t.y=this.y+this.height/2,t}}],[{key:"intersects",value:function(t,e){return!(t.width<=0||t.height<=0||e.width<=0||e.height<=0||t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)}},{key:"contains",value:function(t,e,i){return!(t.width<=0&&t.height<=0)&&e>t.x&&e<t.x+t.width&&i>=t.y&&i<t.y+t.height}},{key:"intersectionArea",value:function(t,e){var i=new scintilla.Rect;return scintilla.Rect.intersects(t,e)&&(i.y=Math.max(a.y,b.y),i.x=Math.max(a.x,b.x),i.width=Math.min(a.x+a.width,b.x+b.width)-i.x,i.height=Math.min(a.y+a.height,b.y+b.height)-i.y),i}}]),u}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(i(0)),u=n(i(1)),r=n(i(8));function n(t){return t&&t.__esModule?t:{default:t}}var s=function(){function n(t,e,i){(0,a.default)(this,n),this.x=t||0,this.y=e||0,this.managed=i||void 0}return(0,u.default)(n,[{key:"set",value:function(t,e){return this.x=t,this.y=e||t,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"move",value:function(t,e){return this.x+=t,this.y+=e,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"scale",value:function(t,e){return this.x*=t,this.y*=e||t,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"rotate",value:function(t){var e=this.x,i=this.y;return this.x=e*Math.cos(t)-i*Math.sin(t),this.y=e*Math.sin(t)+i*Math.cos(t),void 0!==this.managed&&this.managed.markDirty(),this}},{key:"rotateAround",value:function(t,e){var i=this.x-e.x,n=this.y-e.y,a=Math.cos(t),u=Math.sin(t);return this.x=e.x+(a*i-u*n),this.y=e.y+(u*i+a*n),void 0!==this.managed&&this.managed.markDirty(),this}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"normalize",value:function(){var t=this.length();return 0<t&&(this.x=this.x/t,this.y=this.y/t),void 0!==this.managed&&this.managed.markDirty(),this}},{key:"round",value:function(){return this.x=r.default.round(this.x),this.y=r.default.round(this.y),this}},{key:"reverse",value:function(){return this.x=-this.x,this.y=-this.y,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"perp",value:function(){var t=this.x;return this.x=this.y,this.y=-t,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"dot",value:function(t){return n.dot(this,t)}},{key:"project",value:function(t){return n.project(this,t)}},{key:"clone",value:function(){return new n(this.x,this.y)}},{key:"length",value:function(){return Math.sqrt(this.squaredLenght())}},{key:"toString",value:function(){return"{ x: "+this.x+", y: "+this.y+" }"}},{key:"squaredLenght",value:function(){return n.dot(this,this)}},{key:"magnitude",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"normal",get:function(){var t=this.magnitude;return new n(this.x/t,this.y/t)}}],[{key:"abs",value:function(t){return new n(Math.abs(t.x),Math.abs(t.y))}},{key:"scalar",value:function(t,e){return t.x*e.y-t.y*e.x}},{key:"distance",value:function(t,e){return r.default.distance(t.x,t.y,e.x,e.y)}},{key:"angleBetween",value:function(t,e){return r.default.angleBetween(t.x,t.y,e.x,e.y)}},{key:"dot",value:function(t,e){return t.x*e.x+t.y*e.y}},{key:"project",value:function(t,e){var i=n.dot(t,e);return new n(i/(e.x*e.x+e.y*e.y)*e.x,i/(e.x*e.x+e.y*e.y)*e.y)}},{key:"projectNormal",value:function(t,e){var i=n.dot(t,e);return new n(i/e.x,i/e.y)}},{key:"reflect",value:function(t,e){var i=n.project(t,e);return i.scale(2),i.sub(t),i}},{key:"reflectNormal",value:function(t,e){var i=n.projectNormal(t,e);return i.scale(2),i.sub(t),i}},{key:"lerp",value:function(t,e,i){return new n(r.default.lerp(t.x,e.x,i),r.default.lerp(t.y,e.y,i))}}]),n}();e.default=s,t.exports=s},function(t,e,i){var a=i(37),u=i(13),r=i(40);t.exports=function(t,e){var i=(u.Object||{})[t]||Object[t],n={};n[t]=e(i),a(a.S+a.F*r(function(){i(1)}),"Object",n)}},function(t,e,i){var n=i(80)("wks"),a=i(51),u=i(26).Symbol,r="function"==typeof u;(t.exports=function(t){return n[t]||(n[t]=r&&u[t]||(r?u:a)("Symbol."+t))}).store=n},function(t,e,i){var n=i(31),a=i(53);t.exports=i(30)?function(t,e,i){return n.f(t,e,a(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var y=i(26),_=i(13),p=i(151),m=i(36),g=i(29),M=function(t,e,i){var n,a,u,r=t&M.F,s=t&M.G,o=t&M.S,l=t&M.P,d=t&M.B,f=t&M.W,c=s?_:_[e]||(_[e]={}),h=c.prototype,v=s?y:o?y[e]:(y[e]||{}).prototype;for(n in s&&(i=e),i)(a=!r&&v&&void 0!==v[n])&&g(c,n)||(u=a?v[n]:i[n],c[n]=s&&"function"!=typeof v[n]?i[n]:d&&a?p(u,y):f&&v[n]==u?function(n){var t=function(t,e,i){if(this instanceof n){switch(arguments.length){case 0:return new n;case 1:return new n(t);case 2:return new n(t,e)}return new n(t,e,i)}return n.apply(this,arguments)};return t.prototype=n.prototype,t}(u):l&&"function"==typeof u?p(Function.call,u):u,l&&((c.virtual||(c.virtual={}))[n]=u,t&M.R&&h&&!h[n]&&m(h,n,u)))};M.F=1,M.G=2,M.S=4,M.P=8,M.B=16,M.W=32,M.U=64,M.R=128,t.exports=M},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),a=u(i(1));function u(t){return t&&t.__esModule?t:{default:t}}var r=function(){function s(t,e){(0,n.default)(this,s),t=t||0,e=e||0,this.a=[],this.a[0]=t,this.a[1]=e,this.a[2]=e,this.a[3]=e,this.a[4]=t,this.a[5]=e,this.a[6]=e,this.a[7]=e,this.a[8]=t}return(0,a.default)(s,[{key:"at",value:function(t,e){return this.a[t+3*e]}},{key:"set",value:function(t,e,i){return this.a[t+3*e]=i,this}},{key:"setIdentity",value:function(){return this.setTransform(1,0,0,0,1,0,0,0,1)}},{key:"setTransform",value:function(t,e,i,n,a,u,r,s,o){return this.a[0]=t,this.a[1]=e,this.a[2]=i,this.a[3]=n,this.a[4]=a,this.a[5]=u,this.a[6]=r,this.a[7]=s,this.a[8]=o,this}},{key:"translate",value:function(t,e){return this.a[6]=this.a[0]*t+this.a[3]*e+this.a[6],this.a[7]=this.a[1]*t+this.a[4]*e+this.a[7],this}},{key:"scale",value:function(t,e){return this.a[0]*=t,this.a[1]*=t,this.a[3]*=e,this.a[4]*=e,this.a[6]*=t,this.a[7]*=e,this}},{key:"rotate",value:function(t){var e=Math.cos(t),i=Math.sin(t);return this.radianRotate(e,i)}},{key:"radianRotate",value:function(t,e){return this.transform(t,e,-e,t,0,0)}},{key:"transform",value:function(t,e,i,n,a,u){var r=this.a[0],s=this.a[1],o=this.a[3],l=this.a[4],d=this.a[6],f=this.a[7];return this.a[0]=t*r+e*o,this.a[1]=t*s+e*l,this.a[3]=i*r+n*o,this.a[4]=i*s+n*l,this.a[6]=a*r+u*o+d,this.a[7]=a*s+u*l+f,this}},{key:"setModelMatrix",value:function(t,e,i,n){return this.a[0]=i.x*e.x,this.a[1]=i.y*e.x,this.a[3]=-i.y*e.y,this.a[4]=i.x*e.y,this.a[6]=t.x,this.a[7]=t.y,this}},{key:"multiply",value:function(t){var e=this.a[0],i=this.a[1],n=this.a[3],a=this.a[4],u=this.a[6],r=this.a[7];return this.a[0]=t.a[0]*e+t.a[1]*n,this.a[1]=t.a[0]*i+t.a[1]*a,this.a[3]=t.a[3]*e+t.a[4]*n,this.a[4]=t.a[3]*i+t.a[4]*a,this.a[6]=t.a[6]*e+t.a[7]*n+u,this.a[7]=t.a[6]*i+t.a[7]*a+r,this}},{key:"concat",value:function(t){var e=this.a[0],i=this.a[1],n=this.a[3],a=this.a[4],u=this.a[6],r=this.a[7];return this.a[0]=e*t.a[0]+i*t.a[3],this.a[1]=e*t.a[1]+i*t.a[4],this.a[3]=n*t.a[0]+a*t.a[3],this.a[4]=n*t.a[1]+a*t.a[4],this.a[6]=u*t.a[0]+r*t.a[3]+t.a[6],this.a[7]=u*t.a[1]+r*t.a[4]+t.a[7],this}},{key:"transformPoint",value:function(t,e){var i={x:0,y:0};return i.x=t*this.a[0]+e*this.a[3]+this.a[6],i.y=t*this.a[1]+e*this.a[4]+this.a[7],i}},{key:"transpose",value:function(){return this.setAll(mat.a[0],mat.a[3],mat.a[6],mat.a[1],mat.a[4],mat.a[7],mat.a[2],mat.a[5],mat.a[8])}},{key:"toString",value:function(){for(var t="",e=0;e<3;e++){for(var i=0;i<3;i++)t+=this.at(i,e)+" ";t+="\n"}return t}}],[{key:"identity",value:function(){return new s(1)}},{key:"zero",value:function(){return new s(0)}},{key:"transpose",value:function(t){return s.zero.setAll(t.a[0],t.a[3],t.a[6],t.a[1],t.a[4],t.a[7],t.a[2],t.a[5],t.a[8])}},{key:"multiplySlow",value:function(t,e){for(var i=s.zero(),n=void 0,a=0;a<3;++a)for(var u=0;u<3;++u)for(var r=0;r<3;++r)n=i.at(a,r),n+=t.at(a,u)*e.at(u,r),i.set(a,r,n);return i}}]),s}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=f(i(0)),a=f(i(1)),u=f(i(333)),r=f(i(331)),s=f(i(330)),o=f(i(329)),l=f(i(141)),d=f(i(325));function f(t){return t&&t.__esModule?t:{default:t}}var c=new(function(){function t(){(0,n.default)(this,t),this._userAgent=navigator.userAgent,this._osInfo=(0,u.default)(this._userAgent),this._browser=(0,r.default)(this._userAgent),this._features=(0,s.default)(this._osInfo),this._audio=(0,o.default)(this._browser),this._fullscreen=(0,d.default)()}return(0,a.default)(t,[{key:"info",get:function(){return this._userAgent}},{key:"platformName",get:function(){return this._osInfo.name}},{key:"mobile",get:function(){return this._osInfo.mobile}},{key:"desktop",get:function(){return this._osInfo.desktop}},{key:"os",get:function(){return this._osInfo.os}},{key:"environment",get:function(){return this._osInfo.environment}},{key:"browserName",get:function(){return this._browser.name}},{key:"browserVersion",get:function(){return this._browser.version}},{key:"features",get:function(){return this._features}},{key:"fullscreenInfo",get:function(){return this._fullscreen}},{key:"supportFullscreen",get:function(){return this._fullscreen.available}},{key:"supportAudio",get:function(){return this._audio.audioData}},{key:"supportWebAudio",get:function(){return this._audio.webAudio}},{key:"audioFormats",get:function(){return this._audio.format}}]),t}());(0,l.default)(c),e.default=c},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){var n=i(25);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){null!==t&&void 0!==e.image&&null!==e.image&&(null!==t.resource&&t.resource===e.image||t.setImage(e.image,!1),t.setFrameRect(e.frame))}},function(t,e,i){"use strict";e.__esModule=!0;var s=n(i(2)),o=n(i(220));function n(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e,i,n){null===e&&(e=Function.prototype);var a=(0,o.default)(e,i);if(void 0===a){var u=(0,s.default)(e);return null===u?void 0:t(u,i,n)}if("value"in a)return a.value;var r=a.get;return void 0!==r?r.call(n):void 0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(1)),u=r(i(237));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){function e(t){(0,n.default)(this,e),this.name=t||"New Scene"}return(0,a.default)(e,[{key:"preloadDone",value:function(t){void 0!==this.scene&&(0,u.default)(this.scene,t)}},{key:"instanceDestroy",value:function(t){t.destroy&&t.destroy();var e=this.instances.indexOf(t);this.instances.splice(e,1)}},{key:"addGameObject",value:function(t,e){var i=void 0;return(i=0==arguments.length?new scintilla.GameObject:void 0!==e&&e?t.clone():t)._id=this.instances.length,i._game=this.game,this.instances.push(i),i.start(),i}},{key:"setBounds",value:function(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}}]),e}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={NONE:0,IDLE:1,PRESSED:2,IDLEPRESSED:3,RELEASED:4}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={NONE:0,IN:1,OUT:2,WAIT:3,IDLE:4};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),a=u(i(16));function u(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e,i){(0,n.default)(this,t),this.name=e||"Resource",this.type=i||a.default.None}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(i(5)),u=n(i(0)),r=n(i(1));function n(t){return t&&t.__esModule?t:{default:t}}var s=function(){function n(t,e,i){(0,u.default)(this,n),this._moduleType=t||"none",this._moduleName=e||"noName",this._enabled=!0,this.entity=null,this.moduleManager=i||null,(0,a.default)(this._moduleType),(0,a.default)(this._moduleName),null!==i&&(this.entity=i.entity)}return(0,r.default)(n,[{key:"type",get:function(){return this._moduleType}},{key:"name",get:function(){return this._moduleName}},{key:"enabled",get:function(){return this._enabled},set:function(t){(t=!!t)!==this._enabled&&(this._enabled=t)}}]),n}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=a(i(0)),n=a(i(1)),r=a(i(33));function a(t){return t&&t.__esModule?t:{default:t}}a(i(32));var s=function(){function a(t,e,i,n){(0,u.default)(this,a),t=t||1/0,e=e||1/0,i=i||-1/0,n=n||-1/0,this.min=new r.default(t,e),this.max=new r.default(t+i,e+n)}return(0,n.default)(a,[{key:"set",value:function(t,e,i,n){return this.min.set(t,e),this.max.set(i,n),this}},{key:"setMin",value:function(t,e){return this.min.x=t,this.min.y=e,this}},{key:"setMax",value:function(t,e){return this.max.x=t,this.max.y=e,this}},{key:"move",value:function(t,e){this.min.x+=t,this.min.y+=e,this.max.x+=t,this.max.y+=e}},{key:"intersects",value:function(t){return this.max.x>=t.min.x&&this.max.y>=t.min.y&&this.min.x<=t.max.x&&this.min.y<=t.max.y||this.min.x>=t.max.x&&this.min.y>=t.max.y&&this.max.x<=t.min.x&&this.max.y<=t.min.y}},{key:"contains",value:function(t,e){return t>this.min.x&&e>this.min.y&&t<this.max.x&&e<this.max.y}},{key:"expand",value:function(t,e){e=e||t,this.max.x>this.min.x?(this.min.x-=t,this.max.x+=t):(this.min.x+=t,this.max.x-=t),this.max.y>this.min.y?(this.min.y-=e,this.max.y+=e):(this.min.y+=e,this.max.y-=e)}},{key:"merge",value:function(t){return t instanceof a?(this.min.x=Math.min(this.min.x,t.min.x),this.min.y=Math.min(this.min.y,t.min.y),this.max.x=Math.max(this.max.x,t.max.x),this.max.y=Math.max(this.max.y,t.max.y),this):t instanceof r.default?this.mergeWithPoint(t.x,t.y):(this.min.x=Math.min(this.min.x,t),this.min.y=Math.min(this.min.y,t),this.max.x=Math.max(this.max.x,t),this.max.y=Math.max(this.max.y,t),this)}},{key:"mergeWithPoint",value:function(t,e){return this.min.x=Math.min(this.min.x,t),this.min.y=Math.min(this.min.y,e),this.max.x=Math.max(this.max.x,t),this.max.y=Math.max(this.max.y,e),this}},{key:"extend",value:function(t){return t.min.x<this.min.x&&(this.min.x=t.min.x),t.min.y<this.min.y&&(this.min.y=t.min.y),t.max.x>this.max.x&&(this.max.x=t.max.x),t.max.y>this.max.y&&(this.max.y=t.max.y),this}},{key:"extendByPoint",value:function(t,e){return t<this.min.x&&(this.min.x=t),e<this.min.y&&(this.min.y=e),t>this.max.x&&(this.max.x=t),e>this.max.y&&(this.max.y=e),this}},{key:"limit",value:function(t,e,i,n){this.min.x<t&&(this.min.x=t),this.min.y<e&&(this.min.y=e),this.max.x>i&&(this.max.x=i),this.max.y>n&&(this.max.y=n)}},{key:"offset",value:function(t,e){var i={x:t,y:e};return i.x-=this.min.x,i.y-=this.min.y,this.max.x>this.min.x&&(i.x/=this.max.x-this.min.x),this.max.y>this.min.y&&(i.y/=this.max.y-this.min.y),i}},{key:"toString",value:function(){return"{ min: "+this.min.toString()+", max: "+this.max.toString()+" }"}},{key:"center",get:function(){return new r.default((this.max.x-this.min.x)/2,(this.max.y-this.min.y)/2)}},{key:"size",get:function(){return new r.default(this.max.x-this.min.x,this.max.y-this.min.y)}}]),a}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=["Cache","Loader","EntityFactory","EntityHierarchy","Camera","SceneManager","UserInterface","Transition","EventManager","PoolManager"];(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e,i){var n=i(147),a=i(79);t.exports=Object.keys||function(t){return n(t,a)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,i){"use strict";var n={createFromResponse:function(t,e,i){if("function"==typeof URL)t.src=URL.createObjectURL(e);else{var n=new FileReader;n.onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(e.type||i)+";base64,"+n.result.split(",")[1]},n.onerror=t.onerror,n.readAsDataURL(e)}},revoke:function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)}};t.exports=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){e?this._failedFiles.insert(t):this._successFiles.insert(t),this._filesLoading.erase(t),this._loadedFilesCount++,u.default.call(this),0<this._filesQueue.size?n.default.call(this):0===this._filesLoading.size&&a.default.call(this)};var n=r(i(126)),a=r(i(128)),u=r(i(184));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={createFileRequest:function(t,e){var i=a.merge(e,t.xhrSettings),n=new XMLHttpRequest;return n.open("GET",t.source,i.async),void 0!==t.xhrSettings.responseType&&(n.responseType=t.xhrSettings.responseType),n.timeout=i.timeout,n.onload=t.onLoad.bind(t),n.onerror=t.onError.bind(t),n.onprogress=t.onProgress.bind(t),void 0!==t.onReadyStateChange&&(n.onreadystatechange=t.onReadyStateChange.bind(t)),n.send(),n},createSettings:function(t,e,i){return void 0===t&&(t=""),void 0===e&&(e=!0),void 0===i&&(i=0),{responseType:t,timeout:i,async:e}},merge:function(t,e){var i={};if(void 0===t&&(i=a.createSettings()),e)for(var n in e)void 0!==e[n]&&(i[n]=e[n]);return i}};e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(i(0)),u=n(i(1));function n(t){return t&&t.__esModule?t:{default:t}}var r=function(){function n(t,e,i){(0,a.default)(this,n),this.name=i||"",this.manager=t,this._system=t._system,this.resource=e,this._volume=1,this.duration=0,this.startTime=0,this.currentTime=0,this.position=0,this.speed=0,this.isPlaying=!1,this.isPaused=!1,this.mute=!1,this.loop=!1,this.persistent=!1,this._ended=!1,this.once=!1,this._requireRemoval=!1}return(0,u.default)(n,[{key:"play",value:function(){if(!this.isPlaying)return this.isPaused&&(this.isPaused=!1),this.isPlaying=!0,this}},{key:"pause",value:function(){return this.isPaused||!this.isPlaying||(this.isPlaying=!1,this.isPaused=!0),this}},{key:"stop",value:function(){return(this.isPaused||this.isPlaying)&&(this.isPlaying=!1,this.isPaused=!1),this}},{key:"destroy",value:function(){this._requireRemoval=!0,this.isPlaying=!1,this.isPaused=!1,this.tag=void 0}}]),n}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(i(2)),u=n(i(0)),r=n(i(1)),s=n(i(4)),o=n(i(3)),l=(n(i(49)),n(i(106))),d=n(i(214));function n(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function n(t,e){(0,u.default)(this,n),t=t||"New SceneEntity";var i=(0,s.default)(this,(n.__proto__||(0,a.default)(n)).call(this,t,e||null));return i._transform=new l.default,i._pool=null,i.modules=new d.default(i),i.scene=null,i._pendingRemoval=!1,i}return(0,o.default)(n,t),(0,r.default)(n,[{key:"back",value:function(){return!!this.isPooled&&null!==this.scene&&(this._pendingRemoval=!0,this.game.system.pool.push(this))}},{key:"isPooled",get:function(){return null!==this._pool}},{key:"x",set:function(t){this._transform.position.x=t,this._transform.markDirty()},get:function(){return this._transform.position.x}},{key:"y",set:function(t){this._transform.position.y=t,this._transform.markDirty()},get:function(){return this._transform.position.y}},{key:"position",get:function(){return this._transform.position},set:function(t){this._transform.position=t,this._transform._isDirty=!0}},{key:"origin",get:function(){return this._transform.origin},set:function(t){this._transform.origin=t,this._transform._isDirty=!0}},{key:"origin.x",set:function(t){this._transform.origin.x=t,this._transform._isDirty=!0}},{key:"origin.y",set:function(t){this._transform.origin.y=t,this._transform._isDirty=!0}},{key:"scale",get:function(){return this._transform.scale},set:function(t){this._transform.scale=t,this._transform._isDirty=!0}},{key:"scale.x",set:function(t){this._transform.scale.x=t,this._transform._isDirty=!0}},{key:"scale.y",set:function(t){this._transform.scale.y=t,this._transform._isDirty=!0}},{key:"angle",get:function(){return this._transform.angle},set:function(t){this._transform.angle=t,this._transform._isDirty=!0}}]),n}(n(i(59)).default);e.default=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),a=u(i(1));function u(t){return t&&t.__esModule?t:{default:t}}var r=function(){function i(t,e){(0,n.default)(this,i),this._name=t||"New Entity",this._active=!0,this._pool=null,this.game=e||void 0,this.persistent=!1}return(0,a.default)(i,[{key:"destroy",value:function(){}},{key:"active",get:function(){return this._active},set:function(t){return(t=!!t)!==this._active&&(this._active=t),this._active}},{key:"name",get:function(){return this._name},set:function(t){return(t=!!t)!==this._name&&(this._name=t),this._name}}]),i}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=f(i(2)),a=f(i(0)),u=f(i(1)),r=f(i(4)),s=f(i(3)),o=f(i(47)),l=f(i(16)),d=f(i(17));function f(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function i(t){(0,a.default)(this,i);var e=(0,r.default)(this,(i.__proto__||(0,n.default)(i)).call(this,t,l.default.AnimationMachine));return e.states=new d.default,e}return(0,s.default)(i,t),(0,u.default)(i,[{key:"add",value:function(t,e){return this.states.has(t)?Console.warn("AnimationMachineResource.add: Could not add state. There is already a state called '"+t+'".'):void 0!==e?this.states.set(t,e):Console.warn("AnimationMachineResource.add: Could not add state with undefined animation."),this}},{key:"get",value:function(t){return this.states.get(t)}},{key:"at",value:function(t){return this.states.at(t)}},{key:"duration",set:function(i){this.states.each(function(t,e){e.duration=i})}}]),i}(o.default);e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={Once:0,Loop:1,PingPong:2};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=y(i(2)),a=y(i(0)),u=y(i(1)),r=y(i(4)),s=y(i(3)),o=y(i(7)),l=y(i(47)),d=y(i(16)),f=y(i(21)),c=y(i(103)),h=y(i(217)),v=y(i(61));function y(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function i(t){(0,a.default)(this,i);var e=(0,r.default)(this,(i.__proto__||(0,n.default)(i)).call(this,t,d.default.Animation));return e.keyFrames=new o.default(null,!1),e._totalDuration=1,e._frameRate=30,e._secondsPerFrame=1,e._wrapMode=v.default.Loop,e.uniformDuration=!0,c.default.call(e,30,null,1),e}return(0,s.default)(i,t),(0,u.default)(i,[{key:"get",value:function(t){return this.keyFrames.at(t)}},{key:"duplicate",value:function(t,e){var i=this.keyFrames.at(t);return null!==i&&(void 0===e?this.keyFrames.push(i):this.keyFrames.splice(e,0,i)),c.default.call(this,this._frameRate,null),this}},{key:"remove",value:function(t){var e=this.keyFrames.eraseAt(t);return c.default.call(this,this._frameRate,null),e}},{key:"wrapMode",get:function(){return this._wrapMode}},{key:"loop",set:function(t){!0===t&&(this._wrapMode=v.default.Loop)}},{key:"duration",set:function(t){f.default.isNumber(t)&&c.default.call(this,null,t)},get:function(){return this._totalDuration}},{key:"frameRate",set:function(t){f.default.isNumber(t)&&c.default.call(this,t,null)},get:function(){return this._frameRate}},{key:"length",get:function(){return this.keyFrames.size}},{key:"size",get:function(){return this.keyFrames.size}},{key:"secondsPerFrame",get:function(){return this._secondsPerFrame}},{key:"totalDuration",get:function(){return this.uniformDuration?this._totalDuration:(0,h.default)(this.keyFrames)}}]),i}(l.default);e.default=_},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=d(i(2)),r=d(i(0)),n=d(i(1)),s=d(i(4)),o=d(i(3)),a=d(i(48)),l=d(i(9));function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function a(t,e,i){(0,r.default)(this,a);var n=(0,s.default)(this,(a.__proto__||(0,u.default)(a)).call(this,"animation",t,e));return n._resource=l.default.value(i,"resource",null),n._spriteModule=l.default.value(i,"spriteModule",null),n.isPlaying=!1,n.isPaused=!1,n._timer=0,n._position=0,n.currentFrame=0,n.speed=0,n}return(0,o.default)(a,t),(0,n.default)(a,[{key:"setDuration",value:function(t){null!==this._resource&&(this._resource.duration=t)}},{key:"play",value:function(){return this.isPlaying||null===this._resource||(this.isPlaying=!0,this.isPaused=!1),this}},{key:"pause",value:function(){return this.isPaused||null===this._resource||(this.isPaused=!0,this.isPlaying=!1),this}},{key:"stop",value:function(){return this.isPaused=!1,this.isPlaying=!1,this.currentFrame=0,this._timer=0,this}},{key:"restart",value:function(){return this.stop(),this.isPlaying=!0,this}}]),a}(a.default);e.default=f},function(t,e,i){t.exports={default:i(254),__esModule:!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(5)),a=o(i(125)),u=o(i(269)),r=o(i(268)),s=o(i(27));function o(t){return t&&t.__esModule?t:{default:t}}var l={in:a.default,out:u.default,inout:r.default,Type:s.default};(0,n.default)(l),e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={NONE:0,FILL:1};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(1)),u=r(i(69));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){function i(t){if((0,n.default)(this,i),this._content=[],this._size=0,Array.isArray(t))for(var e=0;e<t.length;e++)this.insert(t[e])}return(0,a.default)(i,[{key:"insert",value:function(t){return-1===this._content.indexOf(t)&&this._content.push(t),this}},{key:"get",value:function(t){var e=this._content.indexOf(t);return-1<e?this._content[e]:null}},{key:"at",value:function(t){return this._content[t]}},{key:"has",value:function(t){return-1<this._content.indexOf(t)}},{key:"erase",value:function(t){var e=this._content.indexOf(t);return-1<e&&this._content.splice(e,1),this}},{key:"clear",value:function(){return this._content.length=0,this}},{key:"each",value:function(t,e){var i,n=this._content.slice(),a=n.length;if(e)for(i=0;i<a&&!1!==t.call(e,n[i],i);i++);else for(i=0;i<a&&!1!==t(n[i],i);i++);return this}},{key:"sort",value:function(t){if(void 0!==t)return(0,u.default)(this._content,t)}},{key:"content",value:function(){return this._content}},{key:"size",get:function(){return this._content.length}},{key:"length",get:function(){return this._content.length}}]),i}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=f(i(2)),r=f(i(0)),n=f(i(1)),s=f(i(4)),o=f(i(3)),a=f(i(47)),l=f(i(16)),d=f(i(9));function f(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function a(t,e,i){(0,r.default)(this,a);var n=(0,s.default)(this,(a.__proto__||(0,u.default)(a)).call(this,t,l.default.Tilemap));return n.metadata=e||null,n.tilesets=d.default.value(i,"tilesets",null),n.tileLayers=d.default.value(i,"tilelayers",null),n.objectLayers=d.default.value(i,"objectlayers",null),n}return(0,o.default)(a,t),(0,n.default)(a,[{key:"getObjectsLayer",value:function(e){return this.objectLayers.find(function(t){if(t.name===e)return t})||null}},{key:"getTileLayer",value:function(e){return this.tileLayers.find(function(t){if(t.name===e)return t})||null}},{key:"getTilesetByGID",value:function(e){return this.tilesets.each(function(t){if(t.hasGID(e))return t})||null}},{key:"getTileGID",value:function(i){return this.tilesets.each(function(t){var e=t.getTileGID(i);if(void 0!==e)return e})||null}}]),a}(a.default);e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(d,f){var t=d.length;return t<2?d:(void 0===f&&(f=function(t,e){return t<e?-1:t===e?0:1}),function t(e,i){var n=i-e;if(!(n<2)){var a=e+(n>>>1);return t(e,a),t(a,i),function(t,e,i){for(var n=e-t,a=i-e,u=d.slice(t,e),r=d.slice(e,i),s=t,o=0,l=0;o<n&&l<a;)f(u[o],r[l])<=0?d[s++]=u[o++]:d[s++]=r[l++];for(;o<n;)d[s++]=u[o++];for(;l<a;)d[s++]=r[l++];return d}(e,a,i)}}(0,t))}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=h(i(2)),o=h(i(0)),n=h(i(1)),l=h(i(4)),a=h(i(3)),u=h(i(20)),r=h(i(23)),d=h(i(132)),f=h(i(294)),c=h(i(7));function h(t){return t&&t.__esModule?t:{default:t}}var v=function(t){function r(t,e){(0,o.default)(this,r);var i=(0,l.default)(this,(r.__proto__||(0,s.default)(r)).call(this,"tilemap",t));i.resource=e,i.tileWidth=e.metadata.tileWidth,i.tileHeight=e.metadata.tileHeight,i.width=e.metadata.width,i.height=e.metadata.height,i.orientation=e.metadata.orientation,i.pixelsWidth=e.metadata.pixelsWidth,i.pixelsHeight=e.metadata.pixelsHeight,i.animator=void 0,i.culling={method:0,start:{x:0,y:0},end:{x:0,y:0}},i.floorTiles=!1,i.tilesets=e.tilesets,i.layers=new c.default,i.objectLayers=e.objectLayers;for(var n=!1,a=e.tileLayers.length-1;0<=a;a--){var u=e.tileLayers.at(a);u.hasAnimatedTiles&&(n=!0),i.layers.push(new d.default(i,u))}return!0===n&&(i.animator=new f.default(i,i.layers)),i}return(0,a.default)(r,t),(0,n.default)(r,[{key:"getObjectsLayer",value:function(t){return this.resource.getObjectsLayer(t)}},{key:"getTileLayer",value:function(t){return this.resource.getTileLayer(t)}}]),r}(u.default);e.default=v,r.default.register("tilemap",function(t,e){var i=null,n=t.entity.game.system.cache;void 0!==n&&(i=n.tilemap.get(e));var a=new v(t,i);return a.floorTiles=t.entity.game.config.floorTiles||!1,a})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n){var a={x:0,y:0};if(void 0===n)a.x=t*i.x-e*i.y,a.y=t*i.y-e*i.x;else{var u=t-n.x,r=e-n.y;a.x=n.x+u*i.x-r*i.y,a.y=n.y-u*i.y-r*i.x}return a}},function(t,e,i){var n=i(73),a=i(53),u=i(28),r=i(84),s=i(29),o=i(150),l=Object.getOwnPropertyDescriptor;e.f=i(30)?l:function(t,e){if(t=u(t),e=r(e,!0),o)try{return l(t,e)}catch(t){}if(s(t,e))return a(!n.f.call(t,e),t[e])}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){var n=i(26),a=i(13),u=i(85),r=i(76),s=i(31).f;t.exports=function(t){var e=a.Symbol||(a.Symbol=u?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:r.f(t)})}},function(t,e,i){var n=i(51)("meta"),a=i(25),u=i(29),r=i(31).f,s=0,o=Object.isExtensible||function(){return!0},l=!i(40)(function(){return o(Object.preventExtensions({}))}),d=function(t){r(t,n,{value:{i:"O"+ ++s,w:{}}})},f=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!u(t,n)){if(!o(t))return"F";if(!e)return"E";d(t)}return t[n].i},getWeak:function(t,e){if(!u(t,n)){if(!o(t))return!0;if(!e)return!1;d(t)}return t[n].w},onFreeze:function(t){return l&&f.NEED&&o(t)&&!u(t,n)&&d(t),t}}},function(t,e,i){e.f=i(35)},function(t,e,i){var n=i(86);t.exports=function(t){return Object(n(t))}},function(t,e,i){var n=i(31).f,a=i(29),u=i(35)("toStringTag");t.exports=function(t,e,i){t&&!a(t=i?t:t.prototype,u)&&n(t,u,{configurable:!0,value:e})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){var n=i(26),a=n["__core-js_shared__"]||(n["__core-js_shared__"]={});t.exports=function(t){return a[t]||(a[t]={})}},function(t,e,i){var n=i(80)("keys"),a=i(51);t.exports=function(t){return n[t]||(n[t]=a(t))}},function(t,e,n){var a=n(41),u=n(357),r=n(79),s=n(81)("IE_PROTO"),o=function(){},l=function(){var t,e=n(149)("iframe"),i=r.length;for(e.style.display="none",n(352).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;i--;)delete l.prototype[r[i]];return l()};t.exports=Object.create||function(t,e){var i;return null!==t?(o.prototype=a(t),i=new o,o.prototype=null,i[s]=t):i=l(),void 0===e?i:u(i,e)}},function(t,e){t.exports={}},function(t,e,i){var a=i(25);t.exports=function(t,e){if(!a(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!a(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!a(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!a(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=!0},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?n:i)(t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var f=n(i(12));e.default=function t(){var e=void 0,i=void 0,n=void 0,a=void 0,u=void 0,r=void 0,s=arguments[0]||{},o=1,l=arguments.length,d=!1;for("boolean"==typeof s&&(d=s,s=arguments[o]||{},o++),"object"===(void 0===s?"undefined":(0,f.default)(s))||h.default.isFunction(s)||(s={}),o===l&&(s=this,o--);o<l;o++)if(null!=(e=arguments[o]))for(i in e)n=s[i],s!==(a=e[i])&&(d&&a&&((0,c.default)(a)||(u=Array.isArray(a)))?(u?(u=!1,r=n&&Array.isArray(n)?n:[]):r=n&&(0,c.default)(n)?n:{},s[i]=t(d,r,a)):void 0!==a&&(s[i]=a));return s};var c=n(i(339)),h=n(i(21));function n(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.context=new AudioContext,void 0===t.context.createGain?t.masterVolume=t.context.createGainNode():t.masterVolume=t.context.createGain(),t.masterVolume.gain.value=1,t.masterVolume.connect(t.context.destination),t.destination=t.masterVolume,t.locked="suspended"===t.context.state&&"ontouchstart"in window}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=y(i(12)),l=y(i(2)),d=y(i(0)),n=y(i(1)),f=y(i(4)),a=y(i(3)),u=y(i(18)),c=y(i(9)),h=y(i(6)),v=y(i(11)),r=y(i(19)),s=y(i(14));function y(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function s(t,e,i,n,a){(0,d.default)(this,s);var u={type:v.default.json,ext:c.default.value(t,"ext","json"),responseType:"text",tag:t,url:c.default.value(t,"file",e),path:i,xhrSettings:c.default.value(t,"xhr",n)},r=(0,f.default)(this,(s.__proto__||(0,l.default)(s)).call(this,u));return"object"===(0,o.default)(u.url)&&(r.data=u.url,r.state=h.default.DONE),r}return(0,a.default)(s,t),(0,n.default)(s,[{key:"onProcessing",value:function(t){this.state=h.default.PROCESSING,this.data=JSON.parse(this.xhrRequest.responseText),this.onDone(),t(this)}}]),s}(u.default);e.default=_,s.default.register("json",function(t,e,i,n){return r.default.call(this,new _(t,e,this.path,n)),this})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=y(i(2)),l=y(i(0)),n=y(i(1)),d=y(i(4)),a=y(i(3)),u=y(i(18)),f=y(i(9)),c=y(i(11)),h=y(i(22)),r=y(i(6)),s=y(i(19)),v=y(i(14));function y(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function s(t,e,i,n,a){(0,l.default)(this,s);var u="string"==typeof t?t:f.default.value(t,"key",""),r={type:c.default.script,ext:f.default.value(t,"ext",h.default.getExtension(e)||"js"),responseType:"text",tag:u,url:f.default.value(t,"file",e),path:i,xhrSettings:f.default.value(t,"xhr",n)};return(0,d.default)(this,(s.__proto__||(0,o.default)(s)).call(this,r))}return(0,a.default)(s,t),(0,n.default)(s,[{key:"onPostLoad",value:function(t,e){this.state=r.default.PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrRequest.responseText,document.head.appendChild(this.data),this.loader.game.events.dispatch("file_postload_"+this.tag)}}]),s}(u.default);e.default=_,v.default.register("script",function(t,e,i,n){return s.default.call(this,new _(t,e,this.path,n)),this})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=v(i(2)),r=v(i(0)),n=v(i(1)),s=v(i(4)),o=v(i(3)),a=v(i(62)),l=i(188),d=(v(l),v(i(21))),f=v(i(16)),c=v(i(32)),h=v(i(103));function v(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function a(t,e,i){(0,r.default)(this,a);var n=(0,s.default)(this,(a.__proto__||(0,u.default)(a)).call(this,t));return n.mainImage=e||null,n.type=f.default.Spritesheet,n}return(0,o.default)(a,t),(0,n.default)(a,[{key:"addFrame",value:function(t,e,i,n,a,u,r){void 0===u&&(u=this._secondsPerFrame),void 0===r&&(r=!0),a=void 0===a?this.mainImage:this.cache.image.get(a);var s=new l.SpritesheetKeyFrame(this,a,new c.default(t,e,i,n),u);return this.keyFrames.push(s),!0===r&&h.default.call(this,this._frameRate,null),this}},{key:"addStrip",value:function(t,e,i,n,a,u,r){void 0===u&&(u=a),void 0===r?r={x:0,y:0}:d.default.isNumber(r)&&(r={x:r,y:r});for(var s=t,o=e,l=0;l<a;l++)this.addFrame(s,o,i,n,void 0,void 0,!1),s+=r.x+i,l%u==u-1&&(s=t,o+=r.y+n);return h.default.call(this,this._frameRate,null),this}},{key:"addImageStrip",value:function(t,e,i,n,a,u,r,s){}}]),a}(a.default);e.default=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=l(i(2)),u=l(i(0)),r=l(i(4)),s=l(i(3)),n=l(i(47)),o=l(i(16));function l(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function n(t,e){(0,u.default)(this,n);var i=(0,r.default)(this,(n.__proto__||(0,a.default)(n)).call(this,t,o.default.Image));return i.data=e,i.width=0,i.height=0,i.imageUrl=null,(i.data.complete||i.data.getContext)&&i.data.width&&i.data.height&&(i.width=i.data.naturalWidth||i.data.width,i.height=i.data.naturalHeight||i.data.height),i}return(0,s.default)(n,t),n}(n.default);e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(1)),u=r(i(7));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){function e(t){(0,n.default)(this,e),this.game=t,this._soundCache=t.system.cache.audio,this._noAudio=t.config.audio.noAudio,this._sounds=null,this._sounds=new u.default,this._removalList=[],this._system=null,this.add=null,this.volume=1,this.mute=!1,!(this.muteOnBlur=!0)===this._noAudio&&(this.game.system.events.subscribe("blur",function(){!1!==this.muteOnBlur&&this._system.onBlur()},this,0),this.game.system.events.subscribe("focus",function(){!1!==this.muteOnBlur&&this._system.onFocus()},this,0))}return(0,a.default)(e,[{key:"at",value:function(t){return this._noAudio?null:this._sounds.at(t)}},{key:"play",value:function(t,e,i,n){if(this._noAudio)return null;var a=this.add(t,e,i,n);return null!=a?(a.play(),a):null}},{key:"playPersistent",value:function(t,e,i,n){var a=this.play(t,e,i,n);return null!==a&&(a.persistent=!0),a}},{key:"playOnce",value:function(t,e,i,n){var a=this.play(t,e,i,n);return null!==a&&(a.once=!0),a}},{key:"get",value:function(e){return this._sounds.each(function(t){if(t.name===e)return t})||null}},{key:"remove",value:function(t){if(this._noAudio)return!1;for(var e=_sounds.length;e--;)if(_sounds[e]===t)return _sounds[e].destroy(!1),_sounds.splice(e,1),!0;return!1}},{key:"stopAll",value:function(t){if(!this._noAudio){void 0===t&&(t=!1);for(var e=0;e<this._sounds.length;e++){var i=this._sounds.at(e);i&&(i.stop(),!0===t&&i.destroy())}}}},{key:"pauseAll",value:function(){if(!this._noAudio)for(var t=0;t<_sounds.length;t++)_sounds[t]&&_sounds[t].pause()}},{key:"resumeAll",value:function(){if(!this._noAudio)for(var t=0;t<_sounds.length;t++)_sounds[t]&&_sounds[t].resume()}},{key:"destroy",value:function(){if(null!==this._system){this._system.destroy(),this.stopAll();for(var t=0;t<this._sounds.length;t++){var e=this._sounds.at(t);e&&e.destroy()}this._sounds.clear()}}}]),e}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=d(i(0)),a=d(i(1)),u=d(i(17)),r=d(i(98)),s=d(i(21)),o=d(i(192)),l=d(i(10));function d(t){return t&&t.__esModule?t:{default:t}}var f=function(){function t(){(0,n.default)(this,t),this._signalsMap=new u.default}return(0,a.default)(t,[{key:"create",value:function(t){var e=this._signalsMap.get(t);if(void 0!==e&&null!=e)return e;var i=new r.default;return this._signalsMap.set(t,i),i}},{key:"subscribe",value:function(t,e,i,n){var a=this._signalsMap.get(t);return null==a?console.warn("EventManager.subscribe: There is no registered event called '"+t+"'."):s.default.isFunction(e)?a.subscribe(e,i,n):console.warn("EventManager.subscribe: The variable is not a function."),this}},{key:"subscribeOnce",value:function(t,e,i,n){var a=this._signalsMap.get(t);return null==a?console.warn("EventManager.subscribeOnce: There is no registered event called '"+t+"'."):s.default.isFunction(e)?a.subscribeOnce(e,i,n):console.warn("EventManager.subscribeOnce: The variable '"+t+"' is not a function."),this}},{key:"dispatch",value:function(t){var e=this._signalsMap.get(t);if(null==e)return this;var i=1<arguments.length?[arguments[1]]:Array.apply(null,arguments);return e.dispatch(i),this}},{key:"has",value:function(t){return this._signalsMap.has(t)}}]),t}();e.default=f,l.default.register("EventManager",f,"events",function(){!function(t,e){for(var i=0;i<e.length;i++)t.create(e[i])}(this,o.default)})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,i,n){var e=t._bindings.each(function(t,e){if(t._listener===i&&t._context===n)return e});return void 0===e&&(e=-1),e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i(0)),n=a(i(1));function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function u(t,e,i,n,a){(0,r.default)(this,u),this._signal=t,this._listener=e,this._context=i,this._priority=n||0,this.active=!0,this.args=void 0,this._isOnce=a||!1}return(0,n.default)(u,[{key:"execute",value:function(t){var e=void 0,i=void 0;return this.active&&this._listener&&(i=this.args?this.args.concat(t):t,e=this._listener.apply(this._context,i),this._isOnce&&this.detach()),e}},{key:"detach",value:function(){this.isBound()&&this._signal.unsubscribe(this._listener,this._context)}},{key:"isBound",value:function(){return!!this._signal&&!!this._listener}},{key:"_destroy",value:function(){delete this._signal,delete this._listener,delete this.context}},{key:"isOnce",get:function(){return this._isOnce}},{key:"listener",get:function(){return this._listener}},{key:"signal",get:function(){return this._signal}}]),u}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(0)),a=l(i(1)),u=l(i(7)),r=(l(i(97)),l(i(96))),s=l(i(195)),o=l(i(194));function l(t){return t&&t.__esModule?t:{default:t}}l(i(21));var d=function(){function t(){(0,n.default)(this,t),this._bindings=new u.default,this.active=!0,this._shouldPropagate=!0}return(0,a.default)(t,[{key:"has",value:function(t,e){return-1!==(0,r.default)(this,t,e)}},{key:"subscribe",value:function(t,e,i){return(0,s.default)(t,"subscribe"),(0,o.default)(this,t,e,i,!1),this}},{key:"subscribeOnce",value:function(t,e,i){return(0,s.default)(t,"subscribeOnce"),(0,o.default)(this,t,e,i,!0),this}},{key:"unsubscribe",value:function(t,e){(0,s.default)(t,"unsubscribe");var i=(0,r.default)(this,t,e);return-1!==i&&(this._bindings.at(i)._destroy(),this._bindings.eraseAt(i)),t}},{key:"unsubscribeAll",value:function(){}},{key:"dispatch",value:function(t){if(this.active){var e=this._bindings.length;if(e){1<arguments.length&&(t=Array.prototype.slice.call(arguments));for(var i=this._bindings.childs.slice();i[--e]&&this._shouldPropagate&&!1!==i[e].execute(t););}}}},{key:"destroy",value:function(){this.unsubscribeAll(),delete this._bindings}},{key:"propagate",set:function(t){this._shouldPropagate=t},get:function(){return this._shouldPropagate}},{key:"count",get:function(){return this._bindings.size}}]),t}();e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=a(i(0)),n=a(i(1)),r=a(i(7)),s=a(i(100)),o=a(i(199)),l=a(i(198));function a(t){return t&&t.__esModule?t:{default:t}}var d=function(){function a(t,e,i,n){(0,u.default)(this,a),this.game=t,this._baseEntity=i,this.name=e||i.name||"Entity Pool",this._pool=new r.default,this._pooledEntities=new r.default,void 0===n&&(n=1),this.add(n)}return(0,n.default)(a,[{key:"add",value:function(t){void 0===t&&(t=1);for(var e=0;e<t;e++){var i=(0,s.default)(this._baseEntity,this.game);void 0!==i.start&&null!==i.start&&i.start.call(i),this._pool.push(i)}return this}},{key:"pull",value:function(){if(0===this._pool.size)return console.warn("Pool.pull: Could not pull entity. The pool is empty"),null;var t=this._pool.popFront();if(null!=t){if(!0===(0,o.default)(this,t,this.game))return this._pooledEntities.push(t),t;this._pool.push(t)}else console.warn("Pool.pull: Could not pull entity. The pool is empty");return null}},{key:"push",value:function(t){if(void 0===t)return!1;var e=this._pooledEntities.indexOf(t);return-1!==e&&((0,l.default)(t,this.game),this._pooledEntities.eraseAt(e),this._pool.push(t),!0)}},{key:"remove",value:function(t){var e=this._pooledEntities.indexOf(t);return-1<e&&(this._pooledEntities.eraseAt(e),!0)}},{key:"clear",value:function(){return this._pool.clear(),this._pooledEntities.clear(),this}},{key:"backAll",value:function(){for(var t=0;t<this._pooledEntities.length;t++){var e=this._pooledEntities.at(t);RemoveEntityFromGame(e,this.game),this._pool.push(e)}return this._pooledEntities.childs.length=0,this}},{key:"length",get:function(){return this._pool.size}}]),a}();e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(12));e.default=function(t,e){var i=void 0;if(t instanceof s.default)i=t;else if((void 0===t?"undefined":(0,r.default)(t))===s.default)i=new t(t.name,e);else if("object"===(void 0===t?"undefined":(0,r.default)(t))){var n=new s.default(t.name||void 0,e);i=(0,o.default)(!0,n,t)}else if("function"==typeof t){var a=new s.default(t.name,e),u=new t;i=(0,o.default)(!0,a,u)}return i};var s=n(i(58)),o=n(i(88));function n(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.scene=e.scene.currentScene,void 0!==t.start&&null!==t.start&&t.start.call(t),e.system.entityList.addInstance(t),t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t._resource;if(null!==e){if("animMachine"===t.name){var i=e.at(0);t._currentState=i||null,e=i}else t.loop=e.loop;e.type===a.default.Spritesheet&&(0,n.default)(t._spriteModule,e.get(0)),t.play()}};var n=u(i(42)),a=u(i(16));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){void 0===i&&(i=this.keyFrames.length),null===e&&null===t?(this._frameRate=60,this._totalDuration=t/i*1e3):e&&null===t?(this._totalDuration=e,this._frameRate=i/(e/1e3)):(this._frameRate=t,this._totalDuration=i/t*1e3),this._secondsPerFrame=1e3/this._frameRate}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i(2)),a=c(i(0)),u=c(i(1)),r=c(i(4)),s=c(i(3)),o=c(i(20)),l=c(i(32)),d=c(i(224)),f=c(i(23));function c(t){return t&&t.__esModule?t:{default:t}}c(i(223));var h=function(t){function i(t){(0,a.default)(this,i);var e=(0,r.default)(this,(i.__proto__||(0,n.default)(i)).call(this,"sprite",t));return e.resource=null,e.frame=new l.default,e}return(0,s.default)(i,t),(0,u.default)(i,[{key:"setFrame",value:function(t,e,i,n){return this.frame.set(t,e,i,n),this}},{key:"setFrameRect",value:function(t){return this.frame.copy(t),this}},{key:"setSprite",value:function(t){if(null!==this.entity&&void 0!==this.entity){var e=this.entity.game.system.cache.image.get(t);this.setImage(e,!0)}else Console.warn("Sprite.setSprite: Could not set Sprite. The entity is null in the game");return this}},{key:"setImage",value:function(t,e){return void 0===e&&(e=!0),this.resource!==t&&(this.resource=t),!0===e&&null!==t&&this.setFrame(0,0,this.resource.width,this.resource.height),this}},{key:"render",value:function(t){return!!this._enabled&&!!this.resource&&((0,d.default)(t,this.resource.data,this.frame,this.entity._transform,this._originInPixels),!0)}},{key:"width",get:function(){return this.frame.width}},{key:"height",get:function(){return this.frame.height}}]),i}(o.default);e.default=h,f.default.register("sprite",function(t,e){var i=new h(t);return void 0!==e&&void 0!==e[0]&&(i.setSprite(e[0]),null!==i.resource&&(void 0===e[1]&&(e[1]=0),void 0===e[2]&&(e[2]=0),void 0===e[2]&&(e[3]=i.resource.width),void 0===e[4]&&(e[4]=i.resource.height),i.setFrame(e[1],e[2],e[3],e[4]))),i})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),a=s(i(1)),u=s(i(23)),r=s(i(229));function s(t){return t&&t.__esModule?t:{default:t}}var o=function(){function e(t){(0,n.default)(this,e),this.moduleManager=t}return(0,a.default)(e,[{key:"sprite",value:function(t,e,i,n,a){return u.default.attach(this.moduleManager,"sprite",[t,e,i,n,a])}},{key:"tilemap",value:function(t){return void 0===t||null==t?(console.warn("ModuleAttacher.tilemap: Can not create Tilemap module without a proper tag name."),null):u.default.attach(this.moduleManager,"tilemap",t)}},{key:"spritesheet",value:function(t){var e=(0,r.default)(this.moduleManager,"spritesheet","SpriteSheet");return null===e?null:u.default.attach(this.moduleManager,"spritesheet",[e,t])}},{key:"animMachine",value:function(t){var e=(0,r.default)(this.moduleManager,"animMachine","AnimationMachine");return null===e?null:u.default.attach(this.moduleManager,"animMachine",[e,t])}}]),e}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),a=s(i(1)),u=s(i(33)),r=s(i(38));function s(t){return t&&t.__esModule?t:{default:t}}s(i(49));var o=function(){function t(){(0,n.default)(this,t),this.matrix=new r.default(1),this.position=new u.default(0,0,this),this.scale=new u.default(1,1,this),this.origin=new u.default(0,0,this),this.angle=0,this.rotation=0,this._cosSin={x:1,y:0},this._oldRotation=-1,this._isDirty=!0}return(0,a.default)(t,[{key:"markDirty",value:function(){this._isDirty=!0}},{key:"destroy",value:function(){delete this.position,delete this.scale,delete this.matrix,delete this.worldPosition,delete this.worldScale,delete this.origin,delete this.bounds,delete this.globalBounds,delete this._cosSin}},{key:"reset",value:function(){this.matrix.setIdentity(),this._isDirty=!0,this._cosSin.x=1,this._cosSin.y=0,this.position.set(0,0),this.angle=0,this.rotation=0,this._oldRotation=0,this.origin.set(0,0),this.scale.set(0,0)}}]),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(64)),a=o(i(0)),u=o(i(1)),r=o(i(241)),s=o(i(8));function o(t){return t&&t.__esModule?t:{default:t}}var l=new(function(){function t(){(0,a.default)(this,t),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=4022871197,this._mash=(0,r.default)()}return(0,u.default)(t,[{key:"rand",value:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.s0=this.s1,this.s1=this.s2,this.c=0|t,this.s2=t-this.c,this.s2}},{key:"uint32",value:function(){return 4294967296*this.rand()}},{key:"frac",value:function(){return this.rand()+11102230246251565e-32*(2097152*this.rand()|0)}},{key:"real",value:function(){return this.uint32()+this.frac()}},{key:"range",value:function(t,e){return this.frac()*(e-t)+t}},{key:"irange",value:function(t,e){return s.default.floor(this.range(0,e-t)+t)}},{key:"reset",value:function(t){this.n=4022871197,this.s0=this._mash(" "),this.s1=this._mash(" "),this.s2=this._mash(" "),this.c=1;for(var e=0;e<t.length&&null!=t[e];e++){var i=t[e];this.s0-=this._mash(i),this.s0+=~~(this.s0<0),this.s1-=this._mash(i),this.s1+=~~(this.s1<0),this.s2-=this._mash(i),this.s2+=~~(this.s2<0)}}}]),t}());(0,n.default)(l),e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),a=s(i(1)),u=s(i(110)),r=s(i(109));function s(t){return t&&t.__esModule?t:{default:t}}var o=function(){function e(t){(0,n.default)(this,e),this.game=t,this.mouse=null,this.keyboard=null}return(0,a.default)(e,[{key:"init",value:function(){this.keyboard=new u.default(this.game),this.mouse=new r.default(this.game),this.keyboard.init(),this.mouse.init()}},{key:"update",value:function(){this.keyboard.update(),this.mouse.update()}},{key:"reset",value:function(){this.keyboard.reset(),this.mouse.reset()}}]),e}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MouseEvent=void 0;var n=u(i(0)),a=u(i(1));function u(t){return t&&t.__esModule?t:{default:t}}u(i(112));var r=e.MouseEvent={NONE:0,PRESS:1,PRESSED:2,RELEASE:3},s=function(){function e(t){(0,n.default)(this,e),this.x=0,this.y=0,this.game=t,this.canvas=t.system.render.canvas,this.button=0,this.wheelDelta=0,this.active=!0,this._mouseButtons=[],this._mouseButtonsLocks=[],this._mouseButtonsLocksPressed=[],this._mouseDownDuration=[],this._onMouseDown=null,this._onMouseMove=null,this.reset()}return(0,a.default)(e,[{key:"reset",value:function(){for(var t=0;t<3;t++)this._mouseButtons[t]=!1,this._mouseButtonsLocks[t]=r.NONE,this._mouseButtonsLocksPressed[t]=r.NONE,this._mouseDownDuration[t]=0}},{key:"init",value:function(){var e=this;this._onMouseDown=function(t){return e.onMouseDown(t)},this._onMouseUp=function(t){return e.onMouseUp(t)},this._onMouseMove=function(t){return e.onMouseMove(t)},this.canvas.addEventListener("mousedown",this._onMouseDown,!0),this.canvas.addEventListener("mousemove",this._onMouseMove,!0),this.canvas.addEventListener("mouseup",this._onMouseUp,!0),this.canvas.addEventListener("mouseover",this._onMouseOver,!0),this.canvas.addEventListener("mouseout",this._onMouseOut,!0)}},{key:"onMouseMove",value:function(t){if(this.active){var e=this.canvas.getBoundingClientRect();this.x=Math.floor((t.clientX-e.left)/(e.right-e.left)*this.canvas.width),this.y=Math.floor((t.clientY-e.top)/(e.bottom-e.top)*this.canvas.height)}}},{key:"onMouseDown",value:function(t){if(this.active){var e=t.button;this._mouseButtonsLocksPressed[e]!=r.PRESSED&&this._mouseButtonsLocksPressed[e]!=r.PRESS&&(this._mouseButtonsLocksPressed[e]=r.PRESSED,this._mouseDownDuration[e]=1),this._mouseButtons[e]=!0,this._mouseButtonsLocks[e]=r.PRESS,t.preventDefault()}}},{key:"onMouseUp",value:function(t){if(this.active){var e=t.button;this._mouseButtons[e]=!1,this._mouseButtonsLocks[e]=r.RELEASE,this._mouseButtonsLocksPressed[e]=r.NONE,t.preventDefault()}}},{key:"pressed",value:function(t){var e=!1;return this._mouseButtonsLocksPressed[t]==r.PRESSED&&(e=!0,this._mouseButtonsLocksPressed[t]=r.PRESS),this._mouseButtons[t]&&e}},{key:"release",value:function(t){var e;e=this._mouseButtonsLocks[t]!=r.PRESSED&&this._mouseButtonsLocks[t]!=r.PRESS&&this._mouseButtonsLocks[t]!=r.NONE;var i=!this._mouseButtons[t]&&e;return this._mouseButtonsLocks[t]=r.NONE,i}},{key:"press",value:function(t){var e;return e=this._mouseButtonsLocks[t]!=r.RELEASE&&this._mouseButtonsLocks[t]!=r.NONE,this._mouseButtons[t]&&e}},{key:"update",value:function(){for(var t=0;t<this._mouseButtons.length;t++)this._mouseButtonsLocksPressed[t]==r.PRESSED&&(0<this._mouseDownDuration[t]?this._mouseDownDuration[t]--:this._mouseButtonsLocksPressed[t]=r.PRESS)}},{key:"posRelativeTo",value:function(t){var e={x:0,y:0};return e.x=this.x-t.x,e.y=this.y-t.y,e}}]),e}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i(0)),a=c(i(1)),u=c(i(17)),r=c(i(7)),s=c(i(111)),o=c(i(113)),l=c(i(45)),d=c(i(243)),f=c(i(242));function c(t){return t&&t.__esModule?t:{default:t}}var h=function(){function e(t){(0,n.default)(this,e),this.game=t,this._enabled=!0,this.eventTarget=null,this.eventHandler=null,this._eventQueue=new r.default,this._keyMapping=new u.default,this._keyWatch=new u.default,this._keyGarbage=[],this.preventDefault=!0,this.lastKey=null}return(0,a.default)(e,[{key:"reset",value:function(){for(var t in this._keyMapping.clear(),o.default)if(o.default.hasOwnProperty(t)){var e=o.default[t];this._keyMapping.set(e,new s.default(e,this.game))}}},{key:"init",value:function(){this.reset(),this.eventTarget=document;var e=this,t=function(t){t.defaultPrevented||(e.preventDefault&&t.preventDefault(),e._eventQueue.push(t))};this.eventHandler=t,this.eventTarget.addEventListener("keydown",t,!1),this.eventTarget.addEventListener("keyup",t,!1)}},{key:"stop",value:function(){this.eventTarget.removeEventListener("keydown",this.eventHandler),this.eventTarget.removeEventListener("keyup",this.eventHandler),this._onKeyDown=null,this._onKeyUp=null,this._onKeyPress=null,this._keyMapping.clear()}},{key:"update",value:function(){if(this._enabled){if(0!==this._keyWatch.length){var i=this;this._keyWatch.each(function(t,e){e.event===l.default.PRESSED?e._event=l.default.IDLEPRESSED:e.event===l.default.RELEASED&&(e._event=l.default.NONE,i._keyGarbage.push(t))}),0!==this._keyGarbage.length&&(this._keyWatch.eraseList(this._keyGarbage),this._keyGarbage.splice(0,this._keyGarbage.length))}var t=this._eventQueue.size;if(0!==t)for(var e=this._eventQueue.splice(0,t),n=0;n<t;n++){var a=e[n],u=a.keyCode,r=this._keyMapping.get(u);null!=r&&("keydown"===a.type?!1===r.status&&(r.event===l.default.NONE&&this._keyWatch.set(u,r),(0,d.default)(a,r)):(0,f.default)(a,r))}}}},{key:"pressed",value:function(t){return this._keyMapping.get(t).isPressed()}},{key:"release",value:function(t){return this._keyMapping.get(t).isReleased()}},{key:"press",value:function(t){return this._keyMapping.get(t).status}},{key:"enabled",get:function(){return this._enabled},set:function(t){(t=!!t)!==this._enabled&&(t||this.reset(),this._enabled=t)}}]),e}();e.default=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(1)),u=r(i(45));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){function i(t,e){(0,n.default)(this,i),this.game=e,this.keyCode=t,this._enabled=!0,this.status=!1,this.press=!1,this.release=!1,this.preventDefault=!0,this._event=u.default.NONE,this.pressTime=0,this.pressDuration=-2500,this.releaseTime=0,this.releaseDuration=-2500}return(0,a.default)(i,[{key:"isPressing",value:function(){return this.status}},{key:"isPressed",value:function(){return this.press&&this._event===u.default.PRESSED}},{key:"isReleased",value:function(){return!this.press&&0===this.releaseDuration}},{key:"reset",value:function(){this.status=!1,this._event=u.default.NONE,this.press=!1,this.release=!1,this.pressTime=0,this.pressDuration=-2500,this.releaseTime=0,this.releaseDuration=-2500}},{key:"event",get:function(){return this._event}},{key:"enabled",get:function(){return this._enabled},set:function(t){(t=!!t)!==this._enabled&&(t||this.reset(),this._enabled=t)}}]),i}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MouseButton={Left:0,Middle:1,Right:2,WheelUp:3,WheelDown:4}},function(t,e,i){"use strict";t.exports={Backspace:8,Tab:9,Enter:13,Shift:16,Ctrl:17,Alt:18,Pause:19,CapsLock:20,Escape:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Delete:46,Num0:48,Num1:49,Num2:50,Num3:51,Num4:52,Num5:53,Num6:54,Num7:55,Num8:56,Num9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LSystem:91,RSystem:92,SelectK:93,Numpad0:96,Numpad1:97,Numpad2:98,Numpad3:99,Numpad4:100,Numpad5:101,Numpad6:102,Numpad7:103,Numpad8:104,Numpad9:105,Multiply:106,Add:107,Subtract:109,DecimalPoint:110,Divide:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NumLock:144,ScrollLock:145,SemiColon:186,Equal:187,Comma:188,Dash:189,Period:190,Slash:191,LBraket:219,BackSlash:220,RBracket:221,Quote:222}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),a=u(i(1));function u(t){return t&&t.__esModule?t:{default:t}}var r=function(){function i(t,e){(0,n.default)(this,i),this.game=t,this.draw=e,this.context=e.context,this.x=8,this.y=12,this.lineHeight=14,this.column=100,this.font="10px Verdana",this.textColor="white",this.bgcolor="#000",this.textShadow="#000"}return(0,a.default)(i,[{key:"test",value:function(){this.draw.disablePointTransform=!0,this.x=4,this.y=12,this.context.strokeStyle=this.bgcolor,this.context.font=this.font,this.draw.alpha=.5,this.draw.rect(0,0,this.game.width,46,this.bgcolor),this.draw.alpha=1,this.drawLine("FPS: "+Math.round(this.game.time.fps)+" / "+this.game.time.desiredFps),this.drawLine("Instances: "+this.game.system.entityList.length),this.drawLine("Draw Calls: "+this.game.system.render.drawCalls),this.x+=this.game.width/2,this.draw.disablePointTransform=!1}},{key:"drawLine",value:function(t){var e=this.x;this.context.fillStyle=this.textShadow,this.context.fillText(t,e+1,this.y+1),this.context.fillStyle=this.textColor,this.context.fillText(t,e,this.y),this.y+=this.lineHeight}}]),i}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(1)),u=r(i(116));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){function e(t){(0,n.default)(this,e),this.game=t,this.doubleBuffer=!1,this.smoothing=null,this.imageRendering=null,this.canvas=null,this.context=null,this.layer=new u.default(this.game),this._backgroundColor="#000",this._alpha=1,this._enable=!0,this.clear=!0,this.drawCalls=0}return(0,a.default)(e,[{key:"domCanvas",get:function(){return this.doubleBuffer?this._domCanvas:this.canvas}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t}},{key:"alpha",get:function(){return this._alpha},set:function(t){return this._alpha!==t&&(this.currentContext.globalAlpha=t,this._alpha=t),this._alpha}}]),e}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(0)),a=o(i(1)),u=(o(i(17)),o(i(117))),r=o(i(7)),s=o(i(20));function o(t){return t&&t.__esModule?t:{default:t}}var l=function(){function e(t){(0,n.default)(this,e),this.game=t,this.renderLayers=new r.default,this.add("default")}return(0,a.default)(e,[{key:"has",value:function(t){return this.renderLayers.hasAt(t)}},{key:"add",value:function(t){if(this.contains(t))throw new Error('RenderLayerManagement.add: There is already a RenderLayer called: "'+t+'".');this.renderLayers.push(new u.default(this.game,t))}},{key:"remove",value:function(t){if("string"!=typeof t)throw new Error("RenderLayerManagement.remove: The value name is not a string.");if("default"===t)throw new Error('RenderLayerManagement.remove: You can not remove the "default" layer.');if(!this.__renderLayersMap.has(t))throw new Error('RenderLayerManagement.remove: Could not remove layer. There is no layer named "'+t+'".');this.__renderLayersMap.get(t),this.renderLayers.erase(t)}},{key:"contains",value:function(e){if("string"!=typeof e)throw new Error("RenderLayerManagement.contains: The value name is not a string.");return this.renderLayers.each(function(t){if(t.name==e)return!0})||!1}},{key:"findRenderableLayer",value:function(e){return this.renderLayers.each(function(t){if(t.has(e))return t})||null}},{key:"findRenderableAtLayer",value:function(t,e){return void 0===e&&(e=0),this.renderLayers.at(e).has(t)}},{key:"removeRenderable",value:function(i){return this.renderLayers.each(function(t){var e=t.renderList.indexOf(i);if(-1!==e)return t.removeAt(e)})||null}},{key:"addRenderable",value:function(t,e){if(void 0===e&&(e=0),e>=this.renderLayers.size?e=this.renderLayers.size-1:e<0&&(e=0),t instanceof s.default){var i=this.findRenderableLayer(t);return null!==i?(console.warn("RenderLayerManagement.addRenderable: Could not add renderable. The renderable is already in the layer '"+i.name+"'."),!1):(this.renderLayers.at(e).add(t),!0)}return console.warn("RenderLayerManagement.addRenderable: Could not add renderable. It is not a instance of Renderable module."),!1}}]),e}();e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(1)),u=r(i(7));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){function i(t,e){(0,n.default)(this,i),this._name=e,this.game=t,this.renderList=new u.default(!0),this.__drawCalls=0,this.__enable=!0,this.__isDirty=!1}return(0,a.default)(i,[{key:"add",value:function(t){void 0!==t&&(this.renderList.push(t),this.__isDirty=!0)}},{key:"has",value:function(t){return-1!==this.renderList.indexOf(t)}},{key:"remove",value:function(t){return this.renderList.remove(t)}},{key:"removeAt",value:function(t){return this.renderList.eraseAt(t)}},{key:"at",value:function(t){if(t<0||t>=this.__renderers.size)throw new Error("RenderLayer.at: Renderer at "+t+' does not exist in the render layer list: "'+name+'".');return this.renderList.at(t)}},{key:"drawCalls",get:function(){return this.__drawCalls}},{key:"length",get:function(){return this.__renderers.length}},{key:"name",get:function(){return this._name}},{key:"enable",get:function(){return this.__enable},set:function(t){(t=!!t)!==this._enabled&&(this._enabled=t)}}]),i}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={crisp:function(e){return["optimizeSpeed","crisp-edges","-moz-crisp-edges","-webkit-optimize-contrast","optimize-contrast","pixelated"].forEach(function(t){e.style["image-rendering"]=t}),e.style.msInterpolationMode="nearest-neighbor",e},bicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(64)),a=s(i(0)),u=s(i(1)),r=s(i(7));function s(t){return t&&t.__esModule?t:{default:t}}var o=new(function(){function t(){(0,a.default)(this,t),this.list=new r.default}return(0,u.default)(t,[{key:"create",value:function(t,e,i){var n=this.firstFree(),a=void 0;return null===n?(n={parent:t,canvas:document.createElement("canvas")},this.list.push(n)):n.parent=t,(a=n.canvas).width=e,a.height=i,a}},{key:"filter",value:function(t){return scintilla.CanvasList.list.parent===t}},{key:"firstFree",value:function(){return this.list.each(function(t){if(!t.parent)return t}),null}},{key:"remove",value:function(t){for(var e=this.list,i=0;i<e.length;i++)e[i].parent===t&&(e[i].parent=null)}},{key:"clear",value:function(){}}]),t}());(0,n.default)(o),e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RenderingType={NEAREST:0,LINEAR:1}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(1)),u=i(120);function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){function e(t){(0,n.default)(this,e),this.context=t,this.prefix=this.getPrefix(t)}return(0,a.default)(e,[{key:"getPrefix",value:function(t){for(var e=["i","webkitI","msI","mozI","oI"],i=0;i<e.length;i++){var n=e[i]+"mageSmoothingEnabled";if(n in t)return n}return null}},{key:"setEnable",value:function(t){return"undefined"===t&&(t=!0),""!==this.prefix&&void 0!==this.prefix||(this.prefix=this.getPrefix(this.context)),this.prefix&&(this.context[this.prefix]=t),this.context}},{key:"set",value:function(t){t==u.RenderingType.NEAREST?this.setEnable(!1):this.setEnable(!0)}}]),e}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t,i=t._system.context.createBufferSource();return i.buffer=t.resource,i.connect(t.gainNode),i.onended=function(t){t.target===e.buffer&&(e._ended=!0)},i}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){void 0===e&&(e=0);var i=t._system.context.currentTime,n=t.duration;t.playTime=i-e,t.startTime=i;var a=t.buffer;void 0!==a.loop&&(a.loop=t.loop),a.start(Math.max(0,i),Math.max(0,0),Math.max(0,n)),t.gainNode.gain.value=t._volume}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={NOAUDIO:0,WEBAUDIO:1};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(5)),a=l(i(0)),u=l(i(1)),r=l(i(8)),s=i(27),o=l(s);function l(t){return t&&t.__esModule?t:{default:t}}var d=new(function(){function t(){(0,a.default)(this,t)}return(0,u.default)(t,[{key:"linear",value:function(t,e,i){return r.default.lerp(t,e,i)}},{key:"stepped",value:function(t,e,i){return i<.5?t:t+e}},{key:"cut",value:function(t,e,i,n){return void 0===n&&(n=2),r.default.lerp(t,e,r.default.floor(i*n)/n)}},{key:"sine",value:function(t,e,i){return e*(Math.sin(i*r.default.HALFPI-r.default.HALFPI)+1)+t}},{key:"power",value:function(t,e,i,n){return e*Math.pow(i,n)+t}},{key:"quadratic",value:function(t,e,i){return this.power(t,e,i,2)}},{key:"cubic",value:function(t,e,i){return this.power(t,e,i,3)}},{key:"quartic",value:function(t,e,i){return this.power(t,e,i,4)}},{key:"quintic",value:function(t,e,i){return this.power(t,e,i,5)}},{key:"exponential",value:function(t,e,i){return 0==i?t:e*Math.pow(2,10*(i-1))+t}},{key:"circ",value:function(t,e,i){return-e*(Math.sqrt(1-i*i)-1)+t}},{key:"elastic",value:function(t,e,i,n){if(void 0===n&&(n=1),0==i)return t;if(1==(i/=n))return t+e;var a=.3*n,u=a/4;return-e*Math.pow(2,10*(i-=1))*Math.sin((i*n-u)*(2*Math.PI)/a)+t}},{key:"back",value:function(t,e,i){return e*i*i*((s.EASE_BACK_CONST+1)*i-s.EASE_BACK_CONST)+t}},{key:"by",value:function(t,e,i,n,a){switch(void 0===a&&(a=3),t){case o.default.NONE:return n;case o.default.STEPPED:return this.stepped(e,i,n);case o.default.CUT:return this.cut(e,i,n,a);case o.default.LINEAR:return this.linear(e,i,n);case o.default.SINE:return this.sine(e,i,n);case o.default.QUADRATIC:return this.power(e,i,n,2);case o.default.CUBIC:return this.power(e,i,n,3);case o.default.QUARTIC:return this.power(e,i,n,4);case o.default.QUINTIC:return this.power(e,i,n,5);case o.default.POWER:return this.power(e,i,n,a);case o.default.EXPONENTIAL:return this.exponential(e,i,n);case o.default.CIRC:return this.circ(e,i,n);case o.default.BACK:return this.back(e,i,n);case o.default.ELASTIC:return this.elastic(e,i,n,a)}return n}}]),t}());(0,n.default)(d),e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var e=this;this._filesQueue.each(function(t){t.state!==a.default.FINISHED&&t.state!==a.default.PENDING||(e._filesLoading.insert(t),e._filesQueue.erase(t),e.loadAsset(t))})};var n,a=(n=i(6))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this._successFiles.clear(),this._filesQueue.clear();var i=this.cache;if(0<this._processedFiles.size){this._processedFiles.sort(function(t,e){return t.type>e.type});var n=this;this._processedFiles.each(function(t){var e=void 0;switch(t.type){default:break;case r.default.svg:case r.default.image:e=i.image.add(t.tag,t.data);break;case r.default.audio:e=i.audio.add(t.tag,t.data);break;case r.default.json:e=i.json.add(t.tag,t.data);break;case r.default.tilemapJSON:e=(0,s.default)(t.tag,t.data,i),i.tilemap.add(t.tag,e);break;case r.default.spritesheet:e=i.animation.add(t.tag,t.data);break;case r.default.animMachine:e=i.animMachine.add(t.tag,t.data)}void 0!==e&&n.game.events.dispatch("asset_complete",e,t.type)})}this._processedFiles.clear(),this.state=u.default.DONE,a.default.call(this.game.scene)};var a=n(i(135)),u=n(i(6)),r=n(i(11)),s=n(i(291));function n(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this.state!==n.default.PROCESSING&&(this.progress=1,this.isDownloading=!1,this.state=n.default.PROCESSING,this._processedFiles.clear(),0===this._successFiles.size?a.default.call(this):this._successFiles.each(function(t){t.onProcessing(u.default.bind(this))},this))};var n=r(i(6)),a=r(i(127)),u=r(i(276));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(void 0!==t){void 0===i&&(i=!1),void 0!==t.destroy&&null!==t.destroy&&t.destroy.call(t);var n=!0;if(!0===i&&(n=!1===t.persistent),!1!==n){var a=void 0;!0===t.isPooled&&(a=e.system.pool.get(t._pool)),void 0!==a&&a.remove(t),(0,u.default)(t.modules,e),t._transform=null,t.modules=null,t.scene=null,t=null}}};var n,u=(n=i(133))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){t.entity=e,t.moduleManager=e.modules}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={LINEAR:0,LINEAR90DEG:1}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=d(i(2)),u=d(i(0)),r=d(i(1)),s=d(i(4)),o=d(i(3)),n=d(i(20)),l=d(i(298));function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function n(t,e){(0,u.default)(this,n);var i=(0,s.default)(this,(n.__proto__||(0,a.default)(n)).call(this,"tilemapLayer",t.moduleManager));return i.tilemap=t,i.data=e,i}return(0,o.default)(n,t),(0,r.default)(n,[{key:"render",value:function(t){return!(!this._enabled&&!this.tilemap._enabled)&&(0,l.default)(t,this.tilemap,this.data,this.tilemap.moduleManager.entity._transform)}},{key:"getTile",value:function(t,e){return this.data.getTile(t,e)}},{key:"width",get:function(){return this.data.width*this.tilemap.tileWidth}},{key:"height",get:function(){return this.data.height*this.tilemap.tileHeight}}]),n}(n.default);e.default=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,i){t.attached.each(function(t,e){"render"===e.type&&(0,a.default)(e,i.render),e.entity=null,e.moduleManager=null}),t.attached.clear()};var n,a=(n=i(308))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=t._transition;t.game.system.transition.by(i),i===a.default.FADEINOUT?t.game.system.events.subscribeOnce("transition_pause_end",e):t.game.system.events.subscribeOnce("transition_end",e),t._transition=a.default.NONE,t._isTranistioning=!0};var n,a=(n=i(24))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){function t(){this._scintillaLoading?this._loadingPlaceHolder.start():this.onStartCallback&&this.onStartCallback.call(this.currentScene,this.game)}!1===this._setup&&this.onLoadingCallback&&this.onLoadingCallback.call(this.currentScene,this.game),this._transition<=n.default.NONE?t.call(this):(0,a.default)(this,t.bind(this)),this._setup=!0};var n=u(i(24)),a=u(i(134));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var i in e.game=t,u.default){var n=a.GameSystems[u.default[i]];void 0!==n&&(e[n.name]=t.system[n.name])}e.key=t.input.keyboard,e.mouse=t.input.mouse,e.audio=t.audio};var n,a=i(10),u=(n=i(50))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){t._setup?t._scintillaLoading?t._loadingPlaceHolder.gui(e):t.onRenderCallback&&t.onRenderCallback.call(t.currentScene,e):t._scintillaLoading?t._loadingPlaceHolder.loadingGUI(e):t.onLoadingRenderCallback&&t.onLoadingRenderCallback.call(t.currentScene,e)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n,a){void 0===a&&(a={x:0,y:0});var u=e.matrix.transformPoint(-a.x,-a.y),r=e.matrix.transformPoint(i-a.x,-a.y),s=e.matrix.transformPoint(-a.x,n-a.y),o=e.matrix.transformPoint(i-a.x,n-a.y);t.min.x=Math.min(u.x,r.x,s.x,o.x),t.min.y=Math.min(u.y,r.y,s.y,o.y),t.max.x=Math.max(u.x,r.x,s.x,o.x),t.max.y=Math.max(u.y,r.y,s.y,o.y)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),a=u(i(1));function u(t){return t&&t.__esModule?t:{default:t}}var r=function(){function e(t){(0,n.default)(this,e),void 0===t&&(t=!1),this.isRunning=!1,this._isTimeOutMode=t,this.thick=0,this.lastTime=0,this.loopCallback=null,this.timeOutIdentifier=null;var i=this;this.updateRequestAnimationFrame=function(t){i.lastTime=i.thick,i.thick=t,i.loopCallback(t),i.timeOutIdentifier=window.requestAnimationFrame(i.updateRequestAnimationFrame)},this.updateTimeout=function(){var t=Date.now(),e=Math.max(16+i.lastTime-t,0);i.lastTime=i.thick,i.thick=e,i.loopCallback(e),i.timeOutIdentifier=window.setTimeout(i.updateTimeout,e)}}return(0,a.default)(e,[{key:"start",value:function(t){this.isRunning||(this.isRunning=!0,this.loopCallback=t,!window.requestAnimationFrame||this._isTimeOutMode?(this._isTimeOutMode=!0,this.timeOutIdentifier=window.setTimeout(this.updateTimeout,0)):(this._isTimeOutMode=!1,this.timeOutIdentifier=window.requestAnimationFrame(this.updateRequestAnimationFrame)))}},{key:"stop",value:function(){this._isTimeOutMode?clearTimeout(this.timeOutIdentifier):window.cancelAnimationFrame(this.timeOutIdentifier),this.isRunning=!1}},{key:"destroy",value:function(){this.stop(),this.loopingCallback=null}}]),e}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(i(0)),u=n(i(9));function n(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e){(0,a.default)(this,t),void 0===e&&(e={});var i=u.default.value,n=u.default.propertyValue;this.width=i(e,"width",640),this.height=i(e,"height",480),this.parent=i(e,"parent",null),this.debug=i(e,"debug",!1),this.pixelated=i(e,"pixelated",!1),this.doubleBuffer=i(e,"doubleBuffer",!0),this.roundPixels=i(e,"roundPixels",!1),this.floorTiles=i(e,"floorTiles",!1),this.autoResize=i(e,"autoResize",!1),this.loader={baseURL:n(e,"loader.baseURL",""),path:n(e,"loader.path",""),responseType:n(e,"loader.responseType",""),async:n(e,"loader.async",!0)},this.audio={noAudio:n(e,"audio.noAudio",!1),context:n(e,"audio.context",null),webAudio:n(e,"audio.webAudio",!0)},this.fps=i(e,"fps",60),this.time={timeoutMode:n(e,"time.timeOutMode",!1)},this.camera={width:n(e,"camera.width",this.width),height:n(e,"camera.height",this.height)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(i(5)),u=n(i(12)),r=n(i(328));function n(t){return t&&t.__esModule?t:{default:t}}e.default=function i(n){return(0,r.default)(n).forEach(function(t){var e=n[t];"object"==(void 0===e?"undefined":(0,u.default)(e))&&null!==e&&i(e)}),(0,a.default)(n)}},function(t,e,i){var n=i(147),a=i(79).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,a)}},function(t,e,i){var n=i(28),a=i(142).f,u={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return r&&"[object Window]"==u.call(t)?function(t){try{return a(t)}catch(t){return r.slice()}}(t):a(n(t))}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){var n=i(29),a=i(77),u=i(81)("IE_PROTO"),r=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=a(t),n(t,u)?t[u]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?r:null}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e,i){var r=i(29),s=i(28),o=i(355)(!1),l=i(81)("IE_PROTO");t.exports=function(t,e){var i,n=s(t),a=0,u=[];for(i in n)i!=l&&r(n,i)&&u.push(i);for(;e.length>a;)r(n,i=e[a++])&&(~o(u,i)||u.push(i));return u}},function(t,e,i){t.exports=i(36)},function(t,e,i){var n=i(25),a=i(26).document,u=n(a)&&n(a.createElement);t.exports=function(t){return u?a.createElement(t):{}}},function(t,e,i){t.exports=!i(30)&&!i(40)(function(){return 7!=Object.defineProperty(i(149)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){var u=i(359);t.exports=function(n,a,t){if(u(n),void 0===a)return n;switch(t){case 1:return function(t){return n.call(a,t)};case 2:return function(t,e){return n.call(a,t,e)};case 3:return function(t,e,i){return n.call(a,t,e,i)}}return function(){return n.apply(a,arguments)}}},function(t,e,i){"use strict";var g=i(85),M=i(37),b=i(148),x=i(36),w=i(83),k=i(358),O=i(78),S=i(145),L=i(35)("iterator"),j=!([].keys&&"next"in[].keys()),P=function(){return this};t.exports=function(t,e,i,n,a,u,r){k(i,e,n);var s,o,l,d=function(t){if(!j&&t in v)return v[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},f=e+" Iterator",c="values"==a,h=!1,v=t.prototype,y=v[L]||v["@@iterator"]||a&&v[a],_=y||d(a),p=a?c?d("entries"):_:void 0,m="Array"==e&&v.entries||y;if(m&&(l=S(m.call(new t)))!==Object.prototype&&l.next&&(O(l,f,!0),g||"function"==typeof l[L]||x(l,L,P)),c&&y&&"values"!==y.name&&(h=!0,_=function(){return y.call(this)}),g&&!r||!j&&!h&&v[L]||x(v,L,_),w[e]=_,w[f]=P,a)if(s={values:c?_:d("values"),keys:u?_:d("keys"),entries:p},r)for(o in s)o in v||b(v,o,s[o]);else M(M.P+M.F*(j||h),e,s);return s}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={MAJOR:0,MINOR:0,REVISION:1,VERSION:"0.0.1"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(!o.default.features.canvas)throw new Error("Game.CreateRender: Could not create Canvas element. Canvas is not supported in your platform.");var i=new s.default(t);return i.imageRendering=e.pixelated?r.RenderingType.NEAREST:r.RenderingType.LINEAR,e.canvas?i.canvas=e.canvas:i.canvas=n.default.create(t,e.width,e.height),i.context=i.canvas.getContext("2d",{alpha:!1}),i.smoothing=new u.default(i.context),e.pixelated&&(a.default.crisp(i.canvas),i.smoothing.set(i.imageRendering)),e.doubleBuffer&&(i.doubleBuffer=!0,i._domCanvas=n.default.create(t,e.width,e.height),i._domContext=i._domCanvas.getContext("2d",{alpha:!1})),i};var n=l(i(119)),a=l(i(118)),u=l(i(121)),r=i(120),s=l(i(115)),o=l(i(39));function l(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),a=s(i(1)),u=s(i(89)),r=s(i(124));function s(t){return t&&t.__esModule?t:{default:t}}var o=function(){function e(t){(0,n.default)(this,e),this.manager=t,this.context=null,this.masterVolume=null,this.destination=null,this.locked=null,this.type=r.default.WEBAUDIO,(0,u.default)(this)}return(0,a.default)(e,[{key:"onFocus",value:function(){this.context.resume()}},{key:"onBlur",value:function(){this.context.suspend()}},{key:"destroy",value:function(){this.destination=null,this.masterVolume.disconnect(),this.masterVolume=null,this.context.close(),this.context=null}}]),e}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(2)),a=l(i(0)),u=l(i(1)),r=l(i(4)),s=l(i(43)),o=l(i(3));function l(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(){return(0,a.default)(this,e),(0,r.default)(this,(e.__proto__||(0,n.default)(e)).apply(this,arguments))}return(0,o.default)(e,t),(0,u.default)(e,[{key:"setVolume",value:function(t){return this._volume=t,this}},{key:"play",value:function(){(0,s.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"play",this).call(this)}},{key:"pause",value:function(){}},{key:"stop",value:function(){(0,s.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"stop",this).call(this)}},{key:"destroy",value:function(){(0,s.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"volume",get:function(){return 1},set:function(t){this._volume=t}}]),e}(l(i(57)).default);e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.buffer&&(t.buffer.stop(),t.buffer.disconnect(),t.buffer=null),t.playTime=0,t.startTime=0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=h(i(2)),o=h(i(0)),n=h(i(1)),l=h(i(4)),a=h(i(43)),u=h(i(3)),r=h(i(57)),d=h(i(122)),f=h(i(157)),c=h(i(123));function h(t){return t&&t.__esModule?t:{default:t}}var v=function(t){function r(t,e,i,n,a){(0,o.default)(this,r);var u=(0,l.default)(this,(r.__proto__||(0,s.default)(r)).call(this,t,e,a));return u.buffer=null,u.duration=e.duration,u.gainNode=u._system.context.createGain(),u.gainNode.connect(u._system.destination),u.volume=i||1,u.loop=n||!1,u}return(0,u.default)(r,t),(0,n.default)(r,[{key:"setVolume",value:function(t){return this._volume=t,this}},{key:"play",value:function(){(0,a.default)(r.prototype.__proto__||(0,s.default)(r.prototype),"play",this).call(this),(0,f.default)(this),this.buffer=(0,d.default)(this),(0,c.default)(this)}},{key:"pause",value:function(){}},{key:"stop",value:function(){return(0,a.default)(r.prototype.__proto__||(0,s.default)(r.prototype),"stop",this).call(this),(0,f.default)(this),this}},{key:"destroy",value:function(){(0,f.default)(this),(this.buffer=null)!==this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),(0,a.default)(r.prototype.__proto__||(0,s.default)(r.prototype),"destroy",this).call(this)}},{key:"volume",get:function(){return this.gainNode.gain.value},set:function(t){this.gainNode&&this.gainNode.gain.setValueAtTime(t,0),this._volume=t}}]),r}(r.default);e.default=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n){var a=this._soundCache.get(t),u=void 0;return null==a?(console.warn("AudioManager.add: Could not add audio source with tag: '"+t+"."),u=new s.default(this,null,t)):u=new r.default(this,a,e,i,n),this._sounds.push(u),u};var r=n(i(158)),s=n(i(156));function n(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=new a.default(t);if(!t.config.audio.noAudio&&n.default.supportAudio&&n.default.supportWebAudio&&t.config.audio.webAudio){var i=new s.default(e);(0,r.default)(i),e._system=i,e.add=u.default.bind(e)}return e};var n=o(i(39)),a=o(i(94)),u=o(i(159)),r=o(i(89)),s=o(i(155));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=(n=i(12))&&n.__esModule?n:{default:n};e.default=function(t,e,i){void 0===i&&(i=!0);var n=null;return e&&("string"==typeof e?n=document.getElementById(e):"object"===(void 0===e?"undefined":(0,a.default)(e))&&1===e.nodeType&&(n=e)),n||(n=document.body),i&&n.style&&(n.style.overflow="hidden"),n.appendChild(t),t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var i=void 0;void 0!==document.hidden?i="visibilitychange":["webkit","moz","ms"].forEach(function(t){void 0!==document[t+"Hidden"]&&(document.hidden=function(){return document[t+"Hidden"]},i=t+"visibilitychange")}),i&&document.addEventListener(i,function(t){document.hidden||"pause"===t.type?e.dispatch("hidden"):e.dispatch("visible")},!1),window.onblur=function(){e.dispatch("blur")},window.onfocus=function(){e.dispatch("focus")}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(e===i)return e;var n=this.layer.renderLayers.at(e);if(void 0===n&&void 0===(n=this.layer.findRenderableLayer(t)))return this.layer.renderLayers.at(0).add(t),0;var a=this.layer.renderLayers.at(i);if(void 0===a||a===n)return e;var u=n.renderList.indexOf(renderer);return-1===u?e:(n.removeAt(u),a.add(renderer),i)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=this.layer.renderLayers.at(t);void 0!==e&&!0!==e.__isDirty&&(e.__isDirty=!0)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i={};for(var n in o.GameSystems){var a=o.GameSystems[n];i[a.name]=new a.system(t,i)}for(var u in t.system=i,t.scene=i.scene,t.render=e,t.events=i.events,i.render=e,o.GameSystems){var r=o.GameSystems[u],s=r.init;void 0!==s&&s.call(i[r.name])}return(0,f.default)(t.events),i.events.subscribe("__render_depthsorting",l.default,e),i.events.subscribe("__render_layeridchange",d.default,e),i};var o=i(10),l=n(i(164)),d=n(i(163)),f=n(i(162));function n(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),a=u(i(1));function u(t){return t&&t.__esModule?t:{default:t}}var r=function(){function e(t){(0,n.default)(this,e),this.game=t}return(0,a.default)(e,[{key:"init",value:function(t){this._updateStep=t.updateStep}},{key:"now",get:function(){return this._updateStep.time}},{key:"fps",get:function(){return this._updateStep.fps}},{key:"desiredFps",get:function(){return this._updateStep.fpsDesired}},{key:"delta",get:function(){return this._updateStep.deltaTime}},{key:"elapsed",get:function(){return this._updateStep.elapsed}},{key:"rawDelta",get:function(){return this._updateStep.hiDeltaTime}}]),e}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),a=u(i(1));function u(t){return t&&t.__esModule?t:{default:t}}var r=function(){function t(){(0,n.default)(this,t),this.a=null,this.b=null,this.overlapN=new Vector,this.overlapV=new Vector,this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this.indexShapeA=-1,this.indexShapeB=-1,this.clear()}return(0,a.default)(t,[{key:"clear",value:function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this.indexShapeA=-1,this.indexShapeB=-1,this}}]),t}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(1)),u=r(i(33));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){function i(){(0,n.default)(this,i),this.VECTORS=[];for(var t=0;t<10;t++)VECTORS.push(new u.default);this.ARRAYS=[];for(var e=0;e<5;e++)ARRAYS.push([])}return(0,a.default)(i,[{key:"flattenPointsOn",value:function(t,e,i){for(var n=Number.MAX_VALUE,a=-Number.MAX_VALUE,u=t.length,r=0;r<u;r++){var s=t[r].dot(e);s<n&&(n=s),a<s&&(a=s)}i[0]=n,i[1]=a}},{key:"isSeparatingAxis",value:function(t,e,i,n,a,u){var r=ARRAYS.pop(),s=ARRAYS.pop(),o=VECTORS.pop().copy(e).sub(t),l=o.dot(a);if(flattenPointsOn(i,a,r),flattenPointsOn(n,a,s),s[0]+=l,s[1]+=l,r[0]>s[1]||s[0]>r[1])return VECTORS.push(o),ARRAYS.push(r),ARRAYS.push(s),!0;if(u){var d,f,c=0;r[0]<s[0]?(u.aInB=!1,r[1]<s[1]?(c=r[1]-s[0],u.bInA=!1):c=(d=r[1]-s[0])<(f=s[1]-r[0])?d:-f):(u.bInA=!1,r[1]>s[1]?(c=r[0]-s[1],u.aInB=!1):c=(d=r[1]-s[0])<(f=s[1]-r[0])?d:-f);var h=Math.abs(c);h<u.overlap&&(u.overlap=h,u.overlapN.copy(a),c<0&&u.overlapN.reverse())}return VECTORS.push(o),ARRAYS.push(r),ARRAYS.push(s),!1}},{key:"testPolygonPolygon",value:function(t,e,i){for(var n=t.shape.getPoints(),a=t.shape.getNormals(),u=a.length,r=e.shape.getPoints(),s=e.shape.getNormals(),o=s.length;u--;)if(isSeparatingAxis(t.position,e.position,n,r,a[u],i))return!1;for(;o--;)if(isSeparatingAxis(t.position,e.position,n,r,s[o],i))return!1;return i&&(i.a=t,i.b=e,i.overlapV.copy(i.overlapN).scale(i.overlap)),!0}}]),i}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),a=s(i(1)),u=s(i(168)),r=s(i(167));function s(t){return t&&t.__esModule?t:{default:t}}var o=function(){function e(t){(0,n.default)(this,e),this.game=null,this.sat=null,this.response=null,this.game=t,this.colliadables=[]}return(0,a.default)(e,[{key:"init",value:function(){this.sat=new u.default,this.response=new r.default}},{key:"getColliadables",value:function(){return this.colliadables}},{key:"addColliderObj",value:function(t){this.colliadables.push(t)}},{key:"removeColliderObj",value:function(t){var e=this.colliadables.indexOf(t);-1!=e&&this.colliadables.splice(e,1)}},{key:"clear",value:function(){this.colliadables=[],this.colliadables.length=0}},{key:"length",get:function(){return this.colliadables.length}}]),e}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i(64));e.default=function(t){if(!t.systemInited){var e=(0,d.default)(t,t.config),i=e.canvas;e.doubleBuffer&&(i=e._domCanvas),(0,o.default)(i,t.config.parent),t.physics=new a.default(t),t.input=new u.default(t),t.time=new r.default(t),f.default.reset([(Date.now()*Math.random()).toString()]),(0,s.default)(t,e),t.audio=(0,l.default)(t),t.input.init(),t.time.init(t.system.loop),t.systemInited=!0,t.isRunning=!0,(0,n.default)(t),console.log("scintilla started!")}};var a=c(i(169)),u=c(i(108)),r=c(i(166)),s=c(i(165)),o=c(i(161)),l=c(i(160)),d=c(i(154)),f=c(i(107));function c(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),a=s(i(1)),u=s(i(140)),r=s(i(170));function s(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(){(0,n.default)(this,t),this.parent="body",this.width=800,this.height=600,this.config=new u.default(config),this.systemInited=!1,this.isRunning=!1,this.debugMode=!1,this.timeMode=!1,this.debug=null,this.sound=null,this.input=null,this.pool=null,this.systems=null,this.context=null,this.time=null,this.events=null,this.parseConfiguration(this.config),(0,r.default)(this)}return(0,a.default)(t,[{key:"parseConfiguration",value:function(t){t.debug&&(this.debugMode=t.debug),t.width&&(this.width=t.width),t.height&&(this.height=t.height),t.parent&&(this.parent=t.parent)}},{key:"destroy",value:function(){this.physics.destroy(),this.sound.destroy(),this.input.destroy(),this.debug=null,this.cache=null,this.load=null,this.canvas=null,this.scene=null,this.sound=null,this.draw=null,this.universe=null,this.world=null,this.input=null,this.time=null,this.render=null,this.component=null,this.instance=null,this.animationCache=null,this.updateGameMethod=null}}]),t}();e.default=o,t.exports=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this.cache=this.game.system.cache,this._filesQueue=new n.default,this._filesLoading=new n.default,this._successFiles=new n.default,this._failedFiles=new n.default,this._processedFiles=new n.default,this._filesQueueCount=0,this._loadedFilesCount=0,this.progress=0,this.path="",this.baseURL="",this.state=a.default.IDLE};var n=u(i(67)),a=(u(i(95)),u(i(6)));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=f(i(0)),a=f(i(1)),u=f(i(10)),r=f(i(9)),s=f(i(56)),o=f(i(14)),l=f(i(6)),d=f(i(172));function f(t){return t&&t.__esModule?t:{default:t}}var c=function(){function i(t){(0,n.default)(this,i),this.game=t,this.cache=null,this._filesQueue=null,this._filesLoading=null,this._successFiles=null,this._failedFiles=null,this._processedFiles=null,this._filesQueueCount=null,this._loadedFilesCount=null,this.isDownloading=!1,this._totalFiles=0,this.progress=null,this.path=null,this.baseURL=null,this.state=null,this.webFontLoader=void 0,this.events=null,this.crossOrigin=void 0;var e=t.config.loader;this.xhr=s.default.createSettings(r.default.value(config,"responseType",e.responseType),r.default.value(config,"async",e.async),r.default.value(config,"timeout",e.timeout)),o.default.inject(this)}return(0,a.default)(i,[{key:"setPath",value:function(t){return""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.path=t,this}},{key:"setBaseURL",value:function(t){return""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.baseURL=t||"",this}},{key:"setCrossOrigin",value:function(t){return this.crossOrigin=t,this}},{key:"reset",value:function(){this.isDownloading=!1,this._filesQueue.clear(),this._successFiles.clear(),this._failedFiles.clear(),this._processedFiles.clear(),this._filesQueueCount=0,this._loadedFilesCount=0,this.progress=0,this.state=l.default.IDLE}},{key:"loadAsset",value:function(t){t.crossOrigin||(t.crossOrigin=this.crossOrigin),t.load(this)}},{key:"isLoading",value:function(){return this.state===l.default.LOADING||this.state===l.default.PROCESSING}},{key:"isOK",value:function(){return this.state===l.default.IDLE||this.state===l.default.DONE||this.state===l.default.ERROR}},{key:"downloadIsDone",value:function(){return this._filesQueue.length==this._successCount+this._fileErrorCount}},{key:"totalQueuedFiles",get:function(){return this._filesQueueCount-this._loadedFilesCount}}]),i}();e.default=c,u.default.register("Loader",c,"load",d.default)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=v(i(2)),r=v(i(0)),n=v(i(1)),s=v(i(4)),o=v(i(3)),a=v(i(14)),l=v(i(11)),d=v(i(19)),f=v(i(18)),c=v(i(6)),h=v(i(55));function v(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function a(t,e,i){(0,r.default)(this,a);var n={type:i.type=e,tag:t,config:i};return(0,s.default)(this,(a.__proto__||(0,u.default)(a)).call(this,n))}return(0,o.default)(a,t),(0,n.default)(a,[{key:"load",value:function(t){this.loader=t,this.state===c.default.FINISHED&&this.onDone(),h.default.call(this.loader,this)}},{key:"onProcessing",value:function(t){this.state=c.default.PROCESSING,this.data=this.config,this.onDone(),t(this)}}]),a}(f.default);e.default=y,a.default.register("spritesheet",function(t,e,i){var n,a=i;return Array.isArray(i)||(a=Array.prototype.slice.call(arguments,2,arguments.length-2)),n=new y(t,l.default.spritesheet,{imageTag:e,x:a[0]||0,y:a[1]||0,frameWidth:a[2]||0,frameHeight:a[3]||0,numberOfImages:a[4]||0,framesPerRow:a[5]||void 0,spacing:a[6]||void 0,duration:a[7]||arguments[3]}),d.default.call(this,n),this}),a.default.register("animMachine",function(t,e){var i=new y(t,l.default.animMachine,{animations:e||[]});return d.default.call(this,i),this})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=y(i(2)),s=y(i(0)),n=y(i(1)),o=y(i(4)),a=y(i(3)),u=y(i(18)),l=y(i(11)),d=y(i(6)),f=y(i(21)),c=y(i(19)),h=y(i(14)),v=y(i(55));function y(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function u(t,e,i,n){(0,s.default)(this,u);var a={type:l.default.webFont,tag:t,config:{provider:e||"google",families:i,timeout:n||3e3}};return(0,o.default)(this,(u.__proto__||(0,r.default)(u)).call(this,a))}return(0,a.default)(u,t),(0,n.default)(u,[{key:"load",value:function(t){this.loader=t,this.state===d.default.FINISHED?(this.onDone(),v.default.call(this.loader,this)):void 0!==this.loader.webFontLoader&&this.loader.webFontLoader.state===d.default.DONE&&void 0!==this.fontLoad&&this.fontLoad()}},{key:"fontLoad",value:function(){if(void 0!==WebFont){this.state=d.default.PROCESSING;var t=this.config.provider;if(!f.default.isArray(this.config.families)){var e=[];e.push(this.config.families),this.config.families=e}var i={families:this.config.families},n={timeout:this.config.timeout,inactive:this.onError.bind(this),fontactive:this.onLoad.bind(this),classes:!0};n[t]=i,WebFont.load(n)}}},{key:"onLoad",value:function(t,e){this.data={family:t,fvd:e},v.default.call(this.loader,this)}}]),u}(u.default);e.default=_,h.default.register("webFont",function(t,e,i,n){return c.default.call(this,new _(t,e,i,n)),this})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=v(i(2)),s=v(i(0)),n=v(i(1)),o=v(i(4)),a=v(i(3)),u=(v(i(18)),v(i(90))),l=v(i(6)),d=v(i(22)),f=v(i(11)),c=v(i(19)),h=v(i(14));function v(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function u(t,e,i,n){(0,s.default)(this,u);var a=(0,o.default)(this,(u.__proto__||(0,r.default)(u)).call(this,t,e,i,n));return a.type=f.default.tilemapJSON,a}return(0,a.default)(u,t),(0,n.default)(u,[{key:"onPostLoad",value:function(t,e){this.state=l.default.PROCESSING,this.data=JSON.parse(e.responseText),function(t,e,i){if(void 0!==e){var n=e.length;if(!(n<=0))for(var a=0;a<n;a++){var u=e[a];if(u.image){var r=d.default.getFilenameWithoutExtension(u.image)||u.name,s=d.default.getPathWithoutRoot(i).concat(d.default.getFilename(u.image));t.image(r,s,void 0,void 0,!1)}}}}(t,this.data.tilesets,this.url)}},{key:"onProcessing",value:function(t){this.onDone(),t(this)}}]),u}(u.default);e.default=y,h.default.register("tilemapJSON",function(t,e,i,n){return c.default.call(this,new y(t,e,this.path,n)),this})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=y(i(2)),d=y(i(0)),n=y(i(1)),f=y(i(4)),a=y(i(3)),u=y(i(6)),r=y(i(18)),c=y(i(9)),h=y(i(22)),v=y(i(11)),s=y(i(19)),o=y(i(14));function y(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function o(t,e,i,n,a){var u;(0,d.default)(this,o),u="string"==typeof t?t:c.default.value(t,"tag","");var r=!1;void 0!==i&&"boolean"==typeof i&&(r=i);var s={type:v.default.text,tag:u,ext:c.default.value(t,"ext",h.default.getExtension(e)),url:c.default.value(t,"file",e),path:i,responseType:"",xhrSettings:c.default.value(t,"xhr",n),config:c.default.value(t,"config",a),useExternal:r};return(0,f.default)(this,(o.__proto__||(0,l.default)(o)).call(this,s))}return(0,a.default)(o,t),(0,n.default)(o,[{key:"onProcessing",value:function(t){this.state=u.default.PROCESSING,this.data=this.xhrRequest.responseText,this.onDone(),t(this)}}]),o}(r.default);e.default=_,o.default.register("text",function(t,e,i,n){var a=this.path;return void 0!==i&&"boolean"==typeof i&&(a=i),s.default.call(this,new _(t,e,a,n)),this}),t.exports=_},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=_(i(2)),s=_(i(0)),n=_(i(1)),o=_(i(4)),a=_(i(3)),u=_(i(18)),l=_(i(9)),d=_(i(11)),f=_(i(22)),c=_(i(6)),h=_(i(19)),v=_(i(14)),y=_(i(54));function _(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function u(t,e,i,n){(0,s.default)(this,u),t="string"==typeof t?t:l.default.value(t,"key","");var a={type:d.default.svg,ext:l.default.value(t,"ext",f.default.getExtension(e)||"svg"),responseType:"text",tag:tagFile,url:l.default.value(t,"file",e),path:i,xhrSettings:l.default.value(t,"xhr",n)};return(0,o.default)(this,(u.__proto__||(0,r.default)(u)).call(this,a))}return(0,a.default)(u,t),(0,n.default)(u,[{key:"onProcessing",value:function(t){this.state=c.default.PROCESSING;var e=this,i=[this.xhrLoader.responseText],n=void 0;try{n=new window.Blob(i,{type:"image/svg+xml;charset=utf-8"})}catch(i){return e.state=c.default.ERROR,void t(e)}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){y.default.revoke(e.data),e.onDone(),t(e)},this.data.onerror=function(){y.default.revoke(e.data),console.warn("Loader.SVGFile: Error on load file: "+e.url+"."),e.state=c.default.ERROR,t(e)},y.default.createFromResponse(this.data,n,"image/svg+xml")}}]),u}(u.default);e.default=p,v.default.register("svg",function(t,e,i,n){return h.default.call(this,new p(t,e,this.path,n)),this})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.constructor!==Array&&(t=[t]);for(var e=0;e<t.length;e++){var i=a.default.value(t[e],"uri",t[e]);if(0===i.indexOf("blob:")||0===i.indexOf("data:"))return i;var n=i.match(/\.([a-zA-Z0-9]+)($|\?)/);if(n=a.default.value(t[e],"type",n?n[1]:"").toLowerCase(),u.default.audioFormats[n])return{uri:i,type:n}}return null};var a=n(i(9)),u=n(i(39));function n(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=_(i(2)),l=_(i(0)),n=_(i(1)),d=_(i(4)),a=_(i(3)),u=_(i(18)),r=_(i(14)),f=_(i(11)),c=_(i(9)),h=_(i(179)),s=_(i(19)),v=_(i(6)),y=_(i(39));function _(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function s(t,e,i,n,a){(0,l.default)(this,s);var u={tag:t,type:f.default.audio,ext:c.default.value(e,"type",""),responseType:"arraybuffer",url:c.default.value(e,"uri",e),path:i,xhrSettings:n},r=(0,d.default)(this,(s.__proto__||(0,o.default)(s)).call(this,u));return r.context=a,r}return(0,a.default)(s,t),(0,n.default)(s,[{key:"onProcessing",value:function(e){this.state=v.default.PROCESSING;var i=this;this.context.decodeAudioData(this.xhrRequest.response,function(t){i.data=t,i.onDone(),e(i)},function(t){console.error("AudioFile.onProcessing: Failed to decode audio data of the file '"+i.tag+"':",t.message),i.state=v.default.ERROR,e(i)}),this.context=null}}],[{key:"create",value:function(t,e,i,n,a){if(!y.default.supportWebAudio&&!y.default.supportAudio)return console.warn("AudioFile.create: WebAudio is not supported."),null;var u=(0,h.default)(i);return u?new s(e,u,t.path,a,game.audio._system.context):(console.warn("AudioFile.create: URL is not supported for audio file '"+e+"'."),null)}}]),s}(u.default);e.default=p,r.default.register("audio",function(t,e,i,n){var a=p.create(this,t,e,config,n);return a&&s.default.call(this,a),this}),t.exports=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=_(i(2)),l=_(i(0)),n=_(i(1)),d=_(i(4)),a=_(i(3)),u=_(i(6)),r=_(i(18)),f=_(i(54)),c=_(i(9)),h=_(i(22)),v=_(i(11)),s=_(i(19)),y=_(i(14));function _(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function s(t,e,i,n,a){var u;(0,l.default)(this,s),u="string"==typeof t?t:c.default.value(t,"tag","");var r={type:v.default.image,tag:u,ext:c.default.value(t,"ext",h.default.getExtension(e)),url:c.default.value(t,"file",e),path:i,responseType:"blob",xhrSettings:c.default.value(t,"xhr",n),config:c.default.value(t,"config",a)};return(0,d.default)(this,(s.__proto__||(0,o.default)(s)).call(this,r))}return(0,a.default)(s,t),(0,n.default)(s,[{key:"onProcessing",value:function(t){this.state=u.default.PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var e=this;this.data.onload=function(){f.default.revoke(e.data),e.onDone(),t(e)},this.data.onerror=function(){f.default.revoke(e.data),console.warn("Loader.ImageFile: Error on load file: "+e.url+"."),e.state=u.default.ERROR,t(e)},f.default.createFromResponse(this.data,this.xhrRequest.response,"image/"+this.config.ext)}}]),s}(r.default);e.default=p,y.default.register("image",function(t,e,i,n,a){return s.default.call(this,new p(t,e,this.path,n),a),this}),t.exports=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),a=u(i(1));function u(t){return t&&t.__esModule?t:{default:t}}var r=function(){function t(){(0,n.default)(this,t),this.list={}}return(0,a.default)(t,[{key:"inject",value:function(t){for(var e in this.list)t[e]=this.list[e]}},{key:"register",value:function(t,e){this.list[t]=e}},{key:"destroyfunction",value:function(){this.list={}}}]),t}();e.default=r},function(t,e,i){"use strict";t.exports={AssetsTypeHandler:i(14),ImageFile:i(181),AudioFile:i(180),SVGFile:i(178),TextFile:i(177),ScriptFile:i(91),JSONFile:i(90),TilemapJSON:i(176),WebFontFile:i(175),AdditionalResources:i(174)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){0!=this._filesQueueCount&&(this.progress=1-this._loadedFilesCount/this._filesQueueCount)}},function(t,e,i){"use strict";t.exports={LoaderState:i(6),File:i(18),XHR:i(56),URLObject:i(54),AssetsType:i(11),Assets:i(183),LoaderManager:i(173)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(1)),u=r(i(17));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){function e(t){(0,n.default)(this,e),this.resources=new u.default,this.adderWrapper=t||void 0}return(0,a.default)(e,[{key:"add",value:function(t,e){var i=e;return void 0!==this.adderWrapper&&(i=this.adderWrapper(t,e)),this.resources.set(t,i),i}},{key:"has",value:function(t){return this.resources.has(t)}},{key:"get",value:function(t){return this.resources.get(t)}},{key:"erase",value:function(t){return this.resources.delete(t),this}},{key:"clear",value:function(){this.resources.clear()}},{key:"destroy",value:function(){this.resources.clear(),this.resources=null}}]),e}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i(12)),a=c(i(0)),u=c(i(1)),r=c(i(10)),s=c(i(186)),o=c(i(93)),l=(c(i(68)),c(i(92))),d=c(i(60)),f=c(i(11));function c(t){return t&&t.__esModule?t:{default:t}}var h=["image","json","audio","text","tilemap","animation","animMachine"],v=function(){function e(t){(0,a.default)(this,e),this.game=t;var u=this;this.image=new s.default(function(t,e){return new o.default(t,e)}),this.tilemap=new s.default,this.json=new s.default,this.text=new s.default,this.audio=new s.default,this.animation=new s.default(function(t,e){var i=void 0;if(e.type===f.default.spritesheet){var n=u.image.get(e.imageTag);(i=new l.default(t,n)).addStrip(e.x,e.y,e.frameWidth,e.frameHeight,e.numberOfImages,e.framesPerRow,e.spacing),void 0!==e.duration&&(i.duration=e.duration)}return i}),this.animMachine=new s.default(function(t,e){var i=new d.default(t);if(void 0!==e.animations)for(var n=0;n<e.animations.length;n++){var a=u.animation.get(e.animations[n]);i.add(e.animations[n],a)}return i})}return(0,u.default)(e,[{key:"hasCache",value:function(t){return void 0!==(0,n.default)(h[t])}},{key:"getAsset",value:function(t,e){return this.hasCache(t)?this[t].get(e):null}},{key:"clear",value:function(){for(var t=0;t<h.length;t++)this[props[t]].clear()}},{key:"destroy",value:function(){for(var t=0;t<h.length;t++)this[props[t]].destroy(),this[props[t]]=null;this.game=null}}]),e}();e.default=v,r.default.register("Cache",v,"cache")},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpritesheetKeyFrame=void 0;var r=u(i(2)),s=u(i(4)),n=u(i(3)),o=u(i(0)),a=u(i(1)),l=u(i(32));function u(t){return t&&t.__esModule?t:{default:t}}var d=function(){function e(t){(0,o.default)(this,e),this.animation=t,this.duration=0,this.progress=0,this.type="key"}return(0,a.default)(e,[{key:"destroy",value:function(){this.animation=null}}]),e}();e.default=d,e.SpritesheetKeyFrame=function(t){function u(t,e,i,n){(0,o.default)(this,u);var a=(0,s.default)(this,(u.__proto__||(0,r.default)(u)).call(this,t));return a.duration=n||1,a.type="sprite",a.frame=i||new l.default,a.image=e||null,a}return(0,n.default)(u,t),(0,a.default)(u,[{key:"destroy",value:function(){this.frame=null,this.image=null,this.animation=null}}]),u}(d)},function(t,e,i){"use strict";t.exports={AnimationBase:i(62),Spritesheet:i(92),AnimationMachine:i(60)}},function(t,e,i){"use strict";t.exports={ResourceType:i(16),Image:i(93),Tilemap:i(68),Animation:i(189)}},function(t,e,i){"use strict";t.exports={Manager:i(94),AudioSource:i(57)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=["__render_depthsorting","__render_layeridchange","asset_complete","transition_pause_end","transition_end","hidden","visible","focus","blur"];(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var i=t._bindings.length;--i,t._bindings.at(i)&&e._priority<=t._bindings.at(i)._priority;);t._bindings.insert(e,i)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n,a){var u=null,r=(0,o.default)(t,e,i);if(-1!==r){if((u=t._bindings[r]).isOnce!==a)throw new Error("You cannot add"+(a?"":"Once")+"() then add"+(a?"Once":"")+"() the same listener without removing the relationship first.")}else u=new s.default(t,e,i,n,a),(0,l.default)(t,u);return u};var s=n(i(97)),o=n(i(96)),l=n(i(193));function n(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if("function"!=typeof t)throw new Error("Signal.{fn}: Listener should be a function.".replace("{fn}",e))}},function(t,e,i){"use strict";t.exports={Signal:i(98),EventManager:i(95)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(0)),a=o(i(1)),u=o(i(17)),r=o(i(99)),s=o(i(10));function o(t){return t&&t.__esModule?t:{default:t}}var l=function(){function e(t){(0,n.default)(this,e),this._poolsMap=new u.default,this.game=t}return(0,a.default)(e,[{key:"has",value:function(t){return this._poolsMap.has(t)}},{key:"get",value:function(t){return this._poolsMap.get(t)}},{key:"create",value:function(t,e,i){if(null==e)return null;if(void 0===i&&(i=1),this._poolsMap.has(t))return console.warn("PoolManager.create: Could not create pool named '"+t+"'. There is already a pool registered with this name."),null;var n=new r.default(this.game,t,e,i);return this._poolsMap.set(t,n),n}},{key:"pull",value:function(t){var e=this._poolsMap.get(t);return null!=e?e.pull():(console.warn("PoolManager.pull: The specified pool container don't exists: "+t),null)}},{key:"push",value:function(t){if(null!==t.pool){var e=this._poolsMap.get(t._pool);if(null!=e)return e.push(t),!0}return!1}},{key:"clearAll",value:function(){return this._poolsMap.each(function(t,e){e.clear()}),this}}]),e}();e.default=l,s.default.register("PoolManager",l,"pool")},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){e.system.entityList.removeInstance(t),t.active=!1,t._pool=null,t.scene=null}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){return null===i.scene.currentScene||void 0===i.scene.currentScene?(console.warn("Pool.pull: Could not pull entity. There is no active scene."),!1):(e.active=!0,e._pool=t.name,e.scene=i.scene.currentScene,i.system.entityList.addInstance(e),!0)}},function(t,e,i){"use strict";t.exports={Pool:i(99),PoolManager:i(197)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(0)),a=o(i(1)),u=(o(i(59)),o(i(10))),r=o(i(100)),s=o(i(101));function o(t){return t&&t.__esModule?t:{default:t}}var l=function(){function e(t){(0,n.default)(this,e),this.game=t,this._entityList=null}return(0,a.default)(e,[{key:"find",value:function(t){for(var e=[],i=this._entityList._instances.size,n=0;n<i;n++)this._entityList[n].name===t&&e.push(this._entityList[n]);return e}},{key:"findFirst",value:function(e){return this._entityList.each(function(t){if(t.name===e)return t}),null}},{key:"findLast",value:function(t){for(var e=this._entityList._instances.size-1;0<=e;e--)if(this._entityList[e].name===t)return this._entityList[e];return null}},{key:"get",value:function(t){return this._entityList._instances.at(t)||null}},{key:"create",value:function(t,e){var i=(0,r.default)(t,this.game);return(0,s.default)(i,this.game),i}},{key:"destroy",value:function(t){return this._entityList.destroyInstance(t)}},{key:"destroyAt",value:function(t){}},{key:"clear",value:function(){}},{key:"count",get:function(){return this._entityList._instances.size}}]),e}();e.default=l,u.default.register("EntityHierarchy",l,"entity",function(){this._entityList=this.game.system.entityList})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(0)),a=o(i(1)),u=o(i(10)),r=o(i(58)),s=o(i(101));function o(t){return t&&t.__esModule?t:{default:t}}var l=function(){function e(t){(0,n.default)(this,e),this.game=t,this.scene=null,this.entityList=null}return(0,a.default)(e,[{key:"entity",value:function(t){return t=t||"Scene Entity "+this.entityList.length,new r.default(t,this.game)}},{key:"sprite",value:function(t,e,i){var n=this.entity(e);return n.modules.attach.sprite(t,i.x,i.y,i.width,i.height),null!==this.scene.current_scene&&(0,s.default)(n,this.game),n}},{key:"tilemap",value:function(t,e){var i=this.entity(e);return i.modules.attach.tilemap(t),null!==this.scene.current_scene&&(0,s.default)(i,this.game),i}},{key:"spritesheet",value:function(t,e){var i=this.entity(e);return i.modules.attach.spritesheet(t),null!==this.scene.current_scene&&(0,s.default)(i,this.game),i}}]),e}();e.default=l,u.default.register("EntityFactory",l,"create",function(){this.entityList=this.game.system.entityList,this.scene=this.game.scene})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t._priority<e._priority}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,i){t._pendingModulesInitialization.each(function(t){if(t instanceof a.default)i.system.render.layer.addRenderable(t,t.layerID||0);else if(t instanceof n.default)for(var e=0;e<t.layers.length;e++)i.system.render.layer.addRenderable(t.layers.at(e),t.layerID||0)}),t._pendingModulesInitialization.clear()},u(i(20));var n=u(i(70)),a=u(i(104));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,i){var n=t;t.attached.each(function(t,e){e instanceof a.default&&(i.system.render.layer.removeRenderable(e),n._pendingModulesInitialization.push(e))})};var n,a=(n=i(20))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(null!=e&&!0===t.isPlaying){t._timer+=i;var n,a=e.get(t.currentFrame);if(n=e.uniformDuration?e.duration:a.duration,t._position=t._timer/n,t._timer>=n){if(t._timer=0,t._position=0,t.currentFrame+1<e.size)t.currentFrame++;else{var u=t.currentFrame;t.currentFrame=0,e.wrapMode!==o.default.Once&&!1!==t.loop||(t.stop(),t.currentFrame=u),void 0!==t.onAnimationEnd&&t.onAnimationEnd.call(t.entity)}e.type===s.default.Spritesheet&&(a=e.get(t.currentFrame),(0,r.default)(t._spriteModule,a))}}};var r=n(i(42)),s=n(i(16)),o=n(i(61));function n(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){(e._transform._isDirty||i._transform._isDirty)&&(t._originIsDirty&&(t._originInPixels.x=e._transform.origin.x*t.width,t._originInPixels.y=e._transform.origin.y*t.height),(0,a.default)(t._bounds,e._transform,t.width,t.height,t._originInPixels))};var n,a=(n=i(138))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=t.animator;if(void 0!==i){var n=i.animatedTiles.size;if(0!==n)for(var a=e.hiDeltaTime,u=0;u<n;u++){var r=i.animatedTiles.at(u);r.t+=a;var s=r.tileGID,o=s.keyFrames[r.frame];if(r.t>=o.duration){r.t=0,r.frame+1<s.keyFrames.length?r.frame++:r.frame=0;var l=s.keyFrames[r.frame].tileID;s.currentFrame=l}}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i,n,a=t.entity._transform;if((e._transform.rotation+a.rotation)%s.default.HALFPI==0){var u=a.position.x-t._originInPixels.x,r=a.position.y-t._originInPixels.y;t.culling.method=o.default.LINEAR,t.culling.start.x=Math.floor((e.viewBounds.min.x-u)/t.tileWidth),t.culling.start.y=Math.floor((e.viewBounds.min.y-r)/t.tileHeight),t.culling.end.x=Math.ceil((e.viewBounds.max.x-u)/t.tileWidth),t.culling.end.y=Math.ceil((e.viewBounds.max.y-r)/t.tileHeight),(i=(n=t).culling).start.x<0&&(i.start.x=0),i.start.y<0&&(i.start.y=0),i.end.x>n.width&&(i.end.x=n.width),i.end.y>n.height&&(i.end.y=n.height)}else t.culling.method=1};var s=n(i(8)),o=n(i(131));function n(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n){if("tilemap"==e.name){if(e._originIsDirty&&(e._originInPixels.x=t._transform.origin.x*e.pixelsWidth,e._originInPixels.y=t._transform.origin.y*e.pixelsHeight),(0,r.default)(e,n),!t._transform._isDirty&&!i._transform._isDirty)return;(0,u.default)(e,i);for(var a=0;a<e.layers.length;a++)(0,s.default)(e,t,i)}else(0,s.default)(e,t,i)};var u=n(i(209)),r=n(i(208)),s=n(i(207));function n(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=t.entity,n=t.attached.get("animation");if(null!=n){var a=void 0;"animationControl"===n.name?a=n._resource:"animMachine"===n.name&&(a=n._currentState),void 0!==a&&(0,s.default)(n,a,e.system.loop.updateStep.hiDeltaTime)}var u=t.attached.get("render");void 0===u&&null===u||(0,r.default)(i,u,e.system.camera,e.system.loop.updateStep)},n(i(130));var r=n(i(210)),s=n(i(206));function n(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){(t._isDirty||e._isDirty)&&(t.rotation=t.angle*n.default.toRadian,t.rotation!==t._oldRotation&&(t._oldRotation=t.rotation,t._cosSin.y=Math.sin(t.rotation),t._cosSin.x=Math.cos(t.rotation)),t.matrix.setModelMatrix(t.position,t.scale,t._cosSin,t.origin).concat(e.matrix))};var n=a(i(8));function a(t){return t&&t.__esModule?t:{default:t}}a(i(38))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(0)),a=l(i(1)),u=l(i(10)),r=l(i(7)),s=l(i(212)),o=(l(i(38)),l(i(211))),d=l(i(129)),f=l(i(205)),c=l(i(204));function l(t){return t&&t.__esModule?t:{default:t}}l(i(203));var h=function(){function e(t){(0,n.default)(this,e),this.game=t,this._instances=new r.default,this._destroyInstances=new r.default,this._removalInstances=new r.default,this._pendingInstances=new r.default,this._camera=null,this._requirePrioritySorting=!1}return(0,a.default)(e,[{key:"addInstance",value:function(t){return-1===this._instances.indexOf(t)&&-1===this._pendingInstances.indexOf(t)&&this._pendingInstances.push(t),t}},{key:"destroyInstance",value:function(t){return!(void 0===t||!this._instances.has(t)||-1!==this._destroyInstances.indexOf(t)||(this._destroyInstances.push(t),0))}},{key:"removeInstance",value:function(t){return-1<this._instances.indexOf(t)&&-1===this._destroyInstances.indexOf(t)&&-1===this._removalInstances.indexOf(t)&&(this._removalInstances.push(t),!0)}},{key:"update",value:function(t){for(var e=this._instances,i=0;i<e.size;i++){var n=e.at(i);n.active&&((0,s.default)(n._transform,this._camera._transform),(0,o.default)(n.modules,this.game),void 0!==n.update&&n.update.call(n,t),n._transform._isDirty&&(n._transform._isDirty=!1))}}},{key:"beginUpdate",value:function(){var t=this._destroyInstances.length,e=this._removalInstances.length,i=this._pendingInstances.length;if(0!==i||0!==e||0!==t){if(0<t){for(var n=0;n<t;n++){var a=this._destroyInstances.at(n);void 0!==a&&((0,d.default)(a,this.game,!1),a=null)}this._instances.eraseList(this._destroyInstances,t),this._destroyInstances.childs.length=0}if(0<e){for(var u=0;u<e;u++){var r=this._removalInstances.at(u);void 0!==r&&((0,f.default)(r.modules,this.game),this._instances.erase(r))}this._removalInstances.childs.length=0}var s=this._pendingInstances.content();if(0!==i){for(var o=0;o<i;o++){var l=s[o];(0,c.default)(l.modules,this.game),this._instances.push(l)}s.length=0}}}},{key:"length",get:function(){return this._instances.size}}]),e}();e.default=h,u.default.register("EntityUpdateList",h,"entityList",function(){this._camera=this.game.system.camera})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(0)),a=l(i(1)),u=l(i(17)),r=l(i(7)),s=l(i(105)),o=l(i(21));function l(t){return t&&t.__esModule?t:{default:t}}var d={sprite:"render"},f=function(){function e(t){(0,n.default)(this,e),this.entity=t||null,this.attached=new u.default,this._pendingModulesInitialization=new r.default,this.attach=new s.default(this)}return(0,a.default)(e,[{key:"detach",value:function(t,e){}},{key:"has",value:function(t){return this.attached.has(t)}},{key:"hasByName",value:function(t){var e=d[t];return void 0!==e&&this.has(e)}},{key:"get",value:function(t){return this.attached.get(t)}},{key:"getByName",value:function(t){return o.default.isString(moduleName)&&this.attached.find(function(t,e){if(e.name===moduleName)return e})||null}}]),e}();e.default=f},function(t,e,i){"use strict";t.exports={Entity:i(59),SceneEntity:i(58),EntityUpdateList:i(213),EntityFactory:i(202),Hierarchy:i(201)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=y(i(2)),u=y(i(0)),r=y(i(1)),s=y(i(4)),o=y(i(43)),l=y(i(3)),n=(y(i(17)),y(i(63))),d=y(i(23)),f=y(i(102)),c=y(i(16)),h=y(i(42)),v=y(i(60));function y(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function n(t,e){(0,u.default)(this,n);var i=(0,s.default)(this,(n.__proto__||(0,a.default)(n)).call(this,"animMachine",t,e));return i._currentState=null,(0,f.default)(i),i}return(0,l.default)(n,t),(0,r.default)(n,[{key:"setState",value:function(t){if(null!==this.resource){var e=this._resource.get(t);return null!=e?(this._currentState=e,this.restart()):console.warn("AnimationMachine.setState: Invalid state name '"+t+'".'),this}}},{key:"stop",value:function(){(0,o.default)(n.prototype.__proto__||(0,a.default)(n.prototype),"stop",this).call(this),null!==this._currentState&&this._currentState.type===c.default.Spritesheet&&(0,h.default)(this._spriteModule,this._currentState.get(0))}},{key:"setFrame",value:function(t,e){void 0===e&&(e=!0),t>=this._currentAnimObj.length?t=this._currentAnimObj.length-1:t<0&&(t=0),this.currentFrame=t,this._gameObject.component.render.setFrameRect(this._currentAnimObj.getFrame(this.currentFrame)),this._gameObject.component.render.setImage(this._currentAnimObj.source),e&&(this._timer=0)}},{key:"setSpeed",value:function(t){this.frameSpeed=t}},{key:"add",value:function(t,e){return this.animations[t]=new scintilla.Animation(t,e)}},{key:"addFromCache",value:function(t,e){var i=this.game.animationCache.get(t,e);return i?(this.animations[e]=i,null==this.currentAnimation&&this.setState(e),i):null}},{key:"remove",value:function(t){this.animations[t]&&delete this.animations[t]}},{key:"machine",set:function(t){var e=void 0;if("string"==typeof t){if(null!==this._resource&&this._resource.name===t)return;e=this.entity.game.system.cache.animMachine.get(t)}else t instanceof v.default&&(e=t);void 0!==e?(this._resource=e,(0,f.default)(this)):console.warn("AnimationControl.setAnimation: Could not set animation. The animation is undefined.")},get:function(){return this._resource}},{key:"currentState",get:function(){return this._currentState}}]),n}(n.default);e.default=_,d.default.register("animMachine",function(t,e){var i=void 0;void 0!==e[1]&&(i=t.entity.game.system.cache.animMachine.get(e[1]));var n={resource:i,spriteModule:e[0]};return new _(t,n)})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.size;if(0===e)return 0;for(var i=0,n=0;n<e;n++)i+=t.at(n).duration||0;return i}},function(t,e,i){var n=i(28),a=i(72).f;i(34)("getOwnPropertyDescriptor",function(){return function(t,e){return a(n(t),e)}})},function(t,e,i){i(218);var n=i(13).Object;t.exports=function(t,e){return n.getOwnPropertyDescriptor(t,e)}},function(t,e,i){t.exports={default:i(219),__esModule:!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=v(i(2)),u=v(i(0)),r=v(i(1)),s=v(i(4)),o=v(i(43)),l=v(i(3)),n=(v(i(48)),v(i(62)),v(i(23))),d=v(i(63)),f=v(i(102)),c=v(i(16)),h=v(i(42));function v(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function n(t,e){(0,u.default)(this,n);var i=(0,s.default)(this,(n.__proto__||(0,a.default)(n)).call(this,"animationControl",t,e));return i.loop=!1,(0,f.default)(i),i}return(0,l.default)(n,t),(0,r.default)(n,[{key:"getKeyFrame",value:function(t){return null===this._resource?null:this._resource.get(t)}},{key:"stop",value:function(){(0,o.default)(n.prototype.__proto__||(0,a.default)(n.prototype),"stop",this).call(this),null!==this._resource&&this._resource.type===c.default.Spritesheet&&(0,h.default)(this._spriteModule,this._resource.get(0))}},{key:"trackPosition",get:function(){return this._position}},{key:"animation",get:function(){return this._resource},set:function(t){var e=void 0;if("string"==typeof t){if(this._resource.name===t)return;e=this.entity.game.system.cache.animation.get(t)}else t instanceof AnimationResource&&(e=t);void 0!==e?this._resource=e:console.warn("AnimationControl.setAnimation: Could not set animation. The animation is undefined.")}}]),n}(d.default);e.default=y,n.default.register("spritesheet",function(t,e){var i=e[1];void 0!==e[1]&&(i=t.entity.game.system.cache.animation.get(i));var n={resource:i,spriteModule:e[0]};return new y(t,n)})},function(t,e,i){"use strict";t.exports={AnimationBaseModule:i(63),AnimationControl:i(221),AnimationMachine:i(216)}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){var n=i.matrix.transformPoint(0,0),a=i.matrix.transformPoint(e.width,0),u=i.matrix.transformPoint(0,e.height),r=i.matrix.transformPoint(e.width,e.height);t.min.x=Math.min(n.x,a.x,u.x,r.x),t.min.y=Math.min(n.y,a.y,u.y,r.y),t.max.x=Math.max(n.x,a.x,u.x,r.x),t.max.y=Math.max(n.y,a.y,u.y,r.y)},n(i(8)),n(i(33)),n(i(71))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n,a){if(void 0===t)return!1;if(void 0===e||null==e)return!1;var u=n.matrix;return t.setTransform(u.a[0],u.a[1],u.a[3],u.a[4],u.a[6],u.a[7]),t.drawImage(e,i.x,i.y,i.width,i.height,-a.x,-a.y,i.width,i.height),!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(void 0===t)return!1;if(void 0===source||null==source)return!1;var n=e.matrix;t.setTransform(n.a[0],n.a[1],n.a[3],n.a[4],n.a[6],n.a[7]),0<i.outlineWidth&&(t.lineWidth=i.outlineWidth,t.strokeStyle=i.outlineColor,t.strokeRect(0,0,i.width,i.height)),t.fillStyle=i.color._css,t.fillRect(0,0,i.width,i.height)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=c(i(2)),r=c(i(0)),n=c(i(1)),s=c(i(4)),o=c(i(3)),a=c(i(20)),l=c(i(15)),d=c(i(23)),f=c(i(225));function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function a(t,e,i){(0,r.default)(this,a);var n=(0,s.default)(this,(a.__proto__||(0,u.default)(a)).call(this,"rectangle",t));return n._width=e||100,n._height=i||100,n._color=l.default.magenta,n}return(0,o.default)(a,t),(0,n.default)(a,[{key:"render",value:function(t){return!!this._enabled&&(0,f.default)(t,this.entity._transform,this)}},{key:"width",set:function(t){this._width=t},get:function(){return this._width}},{key:"height",set:function(t){this._height=t},get:function(){return this._height}},{key:"color",set:function(t){this._color.set(t)},get:function(){return this._color}},{key:"outlineColor",get:function(){return 0}},{key:"outlineWidth",get:function(){return 0}}]),a}(a.default);e.default=h,d.default.register("rectangle",function(t,e,i){return new h(t,e,i)})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rectangle=void 0;var n,a=(n=i(226))&&n.__esModule?n:{default:n};e.Rectangle=a.default},function(t,e,i){"use strict";t.exports={Renderable:i(20),Primitives:i(227),Sprite:i(104),Tilemap:i(70)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){var n;return void 0===(n=!1===t.has("render")?a.default.attach(t,"sprite"):t.getByName("sprite"))||null===n?(console.warn("ModuleAttacher."+e+": Could not create "+i+" module. There is no Sprite module attached. The current Renderable module is not compatible with "+i+" module."),null):n};var n,a=(n=i(23))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";t.exports={Module:i(48),ModuleProvider:i(23),ModuleAttacher:i(105),Renderables:i(228),Animation:i(222)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n){t.width=i,t.height=n,t._aspectRatio=i/n,t._pixelUnit.x=e.width/t.width,t._pixelUnit.y=e.height/t.height}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i(0)),a=c(i(1)),u=c(i(10)),r=c(i(49)),s=c(i(106)),o=c(i(15)),l=c(i(8)),d=(c(i(33)),c(i(231))),f=c(i(20));function c(t){return t&&t.__esModule?t:{default:t}}var h=function(){function e(t){(0,n.default)(this,e),this.game=t,this.canvas=null,this.width=t.config.camera.width,this.height=t.config.camera.height,this.bounds=new r.default,this.viewBounds=new r.default(0,0,this.width,this.height),this._transform=new s.default,this._pixelUnit={x:1,y:1},this._aspectRatio=1,this._backgroundColor=new o.default,this._roundPixels=t.config.roundPixels}return(0,a.default)(e,[{key:"centerView",value:function(){return this.x=.5*this.width,this.y=.5*this.height,this._transform._isDirty=!0,this}},{key:"centerToEntity",value:function(t){return this.x=t.position.x,this.y=t.position.y,this._transform._isDirty=!0,this}},{key:"setBackgroundColor",value:function(t,e,i,n){return void 0===t&&(e=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),this._backgroundColor=o.default.rgba(t,e,i,n),this}},{key:"setSize",value:function(t,e){return(0,d.default)(this,this.canvas,t,e),this._transform._isDirty=!0,this}},{key:"setView",value:function(t,e,i,n){return this._transform.position.x=t,this._transform.position.y=e,(0,d.default)(i,n),this._transform._isDirty=!0,this}},{key:"reset",value:function(){this._transform.reset()}},{key:"isCulled",value:function(t){if(null==t)return!1;if(t instanceof f.default)return this.bounds.intersects(t.bounds);var e=t.modules.get("render");return null!==e||void 0!==e?this.bounds.intersects(e.bounds):this.bounds.contains(t.x,t.y)}},{key:"position",get:function(){return{x:this._transform.position.x,y:this._transform.position.y}},set:function(t){return this._transform.position.x=t.x,this._transform.position.y=t.y,this._transform._isDirty=!0,this}},{key:"x",get:function(){return this._transform.position.x},set:function(t){return this._transform.position.x=t,this._transform._isDirty=!0,this}},{key:"y",get:function(){return this._transform.position.y},set:function(t){return this._transform.position.y=t,this._transform._isDirty=!0,this}},{key:"scale",get:function(){return this._transform.scale.x},set:function(t){return this._transform.scale.x=t,this._transform._isDirty=!0,this}},{key:"angle",get:function(){return this._transform.angle},set:function(t){return this._transform.angle=t,this._transform.rotation=t*l.default.toRadian,this._transform._isDirty=!0,this}},{key:"origin",get:function(){return this._transform.origin},set:function(t){return this._transform.x=t.x,this._transform.y=t.y,this._transform._isDirty=!0,this}},{key:"rotation",get:function(){return this._transform.rotation}},{key:"backgroundColor",set:function(t){return void 0===t&&(t="rgba(0,0,0,0)"),this._backgroundColor=t,this},get:function(){return this._backgroundColor=color}},{key:"roundPixels",set:function(t){return this._roundPixels=t,this._transform._isDirty=!0,this},get:function(){return this._roundPixels}},{key:"size",get:function(){return{x:this.width,y:this.height}}}]),e}();e.default=h,u.default.register("Camera",h,"camera",function(){this.canvas=this.game.system.render.canvas,(0,d.default)(this,this.canvas,this.width,this.height)})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=n(i(12));e.default=function(t,e){if(void 0===t)throw new Error("SceneManager.add: Could not add Scene. 'scene' is undefined.");if(null===t)throw new Error("SceneManager.add: Could not add Scene. 'scene' is null.");var i;if(t instanceof r.default)i=scene;else if((void 0===t?"undefined":(0,u.default)(t))===r.default)i=new t;else if("object"===(void 0===t?"undefined":(0,u.default)(t))){var n=new r.default(e);i=(0,s.default)(n,t)}else if("function"==typeof t){var a=new t;t instanceof r.default?i=a:(void 0===a.name&&(a.name=e),i=(0,s.default)(!0,a,r.default))}return i};var r=n(i(44)),s=n(i(88));function n(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n){if(!t._scenes.has(e))throw new Error("SceneManager.set: Scene '"+e+"' does not exist.");return void 0===i&&(i=!1),void 0===n&&(n=a.default.NONE),t._transition=n,t._changeScene=e,t._clearCache=i,t};var n,a=(n=i(24))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=f(i(2)),s=f(i(0)),n=f(i(1)),o=f(i(4)),a=f(i(3)),u=f(i(44)),l=f(i(153)),d=f(i(8));function f(t){return t&&t.__esModule?t:{default:t}}f(i(24));var c=function(t){function u(t){(0,s.default)(this,u);var e=(0,o.default)(this,(u.__proto__||(0,r.default)(u)).call(this,"Scintilla Loading Scene"));try{new window.Blob(["%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath d='M224%20387.814V512L32 320l192-192v126.912C447.375 260.152 437.794 103.016 380.93 0 521.287 151.707 491.48 394.785 224 387.814z'/%3E%3C/svg%3E"],{type:"data:image/svg+xml;charset=utf-8"})}catch(t){console.error(t)}e.scintillaLogo=new Image,e.scintillaLogo.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQwIiBoZWlnaHQ9IjI2MC45OCIgdmlld0JveD0iMCAwIDYzLjUgNjkuMDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2RjMzBhOSI+PHBhdGggZD0iTTQzLjQ5IDM2Ljg1NmwtMTQuMTgtNi40MzRMNi45NTYgNDkuNzg0bDE5LjM2Mi0yNy4yNC02LjU3Ni05LjU2OCAxNC40NTUgNi41NzVMNTYuNTUxLjE5IDM3LjE5IDI3LjQzeiIgcGFpbnQtb3JkZXI9InN0cm9rZSBtYXJrZXJzIGZpbGwiLz48cGF0aCBkPSJNMTEuMTIgMzYuOTA4bC0uNTQzLTEuMDQxLTEuMDM2LjU0My41MzggMS4wMzZ6bS0xLjg4OC00LjE3NmwtLjM2LTEuMTE2LTEuMTE2LjM2MS4zNjYgMS4xMTV6bS0xLjA2NC00LjQ1NmwtLjA5Ny0uNjM1di0uMDNsLS4wMDYtLjAzLS4wMy0uNDI5LTEuMTY2LjA4LjAzNC40OC4wMDYuMDQ3LjEwMy42ODZ6bS0uMTAzLTUuNjk4bC0xLjE2Ny0uMTA4LS4xMDggMS4xNjcgMS4xNjcuMTA4em0uODY0LTQuNDMzbC4wMDYtLjAzLjAwNi0uMDMtLjMwMy0uMDgtLjgxMi0uMjgxLS4wMDYuMDMtLjAxMi4wNDYtLjI4NiAxLjExNSAxLjEzMi4yOTN6bTEuNDE5LTMuNjMzbC4zMzctLjYyMy0xLjAzLS41NTUtLjM2LjY2My0uMDE4LjA0Mi0uMTcxLjM4MyAxLjA3NS40N3ptMi44NTQtNC40NWwtLjkyNi0uNzIxLS43MjEuOTI3LjkyNy43MTV6bTMuMTg3LTMuMjlsLS43OS0uODYzLS44NjQuNzk1Ljc5Ni44NTh6bTMuMTgtMi4yNjVsLjAzLS4wM2guMDExbC41MjEtLjI4LS41Ni0xLjAzLS41NjEuMzAyLS4wNC4wMy0uNDQ3LjI5My42NDEuOTg0ek00Mi42NDUgMi41bC0uMjUxLS4xMzItLjA0Ni0uMDMtLjgxOC0uMzQzLS40NTIgMS4wNzUuNzcyLjMyNi4yNTIuMTMyem0tMTguMzIzLS4xMzJsLS4zODMtMS4xMS0xLjEwNC4zODQuMzgzIDEuMTA0ek0zOC4xMi44MjhMMzYuOTgyLjU1M2wtLjI2OSAxLjE0NCAxLjEzOC4yN3ptLTkuNTA3LjUzOGguMTMzTDI4LjY0My4xOTloLS4xODNsLTEuMDE4LjE3OC4yIDEuMTU2em00LjgtMS4zMDRMMzIuNTIgMGgtLjMyNmwuMDEyIDEuMTY3aC4yMzVsLjg4Ni4wNjJ6TTUyLjM4IDEzLjA2NWwuNTM4IDEuMDQgMS4wNC0uNTQyLS41NDMtMS4wMzZ6bTEuODgyIDQuMTc2bC4zNjYgMS4xMTUgMS4xMS0uMzYtLjM2LTEuMTE2em0xLjA2NCA0LjQ1NmwuMTAzLjY0di4wM2wuMDA2LjAzLjAyOS40MyAxLjE2Ny0uMDc4LS4wMzQtLjQ4LS4wMDYtLjA0Ny0uMTAzLS42ODZ6bS4xMDkgNS42OThsMS4xNjcuMTA4LjEwMy0xLjE2Ny0xLjE2Ny0uMTA4em0tLjg2NCA0LjQzM2wtLjAwNi4wMy0uMDA2LjAzLjI5Mi4wOC44MTguMjgxLjAxMi0uMDMuMDEyLS4wNDguMjg1LTEuMTEtMS4xMzItLjI5MnptLTEuNDAyIDMuNTkzbC0uMDEyLjAzLS4wMTIuMDMtLjMzNy42MTcgMS4wMzUuNTU1LjM1NS0uNjYzLjAyMy0uMDQyLjE2Ni0uMzg0LTEuMDctLjQ2OXptLTIuODcxIDQuNDlsLjkyNi43MjEuNzE1LS45MjctLjkyNi0uNzE1em0tMy4xOTIgMy4yOWwuNzk1Ljg2My44NjMtLjc5NS0uNzk1LS44NTh6bS0zLjE3NSAyLjI2NWwtLjAzLjAzaC0uMDEybC0uNTIuMjguNTU1IDEuMDMuNTYtLjMwMy4wNDYtLjAzLjQ0Ni0uMjkzLS42NC0uOTg0em0tMjMuMDc2IDIuMDA4bC4yNTEuMTMyLjA0LjAzLjgxOS4zNDMuNDU3LTEuMDc2LS43NzgtLjMyNmgtLjAwNmwtLjAzNC0uMDMtLjIxMi0uMTE0em0xOC4zMTcuMTM4bC4zODMgMS4xMDQgMS4xMS0uMzg0LS4zODQtMS4xMDR6bS0xMy43OTggMS41MzNsMS4xNDQuMjc1LjI2OS0xLjE0NC0xLjE0NC0uMjd6bTkuNTEzLS41MzhoLS4xMzhsLjEwOCAxLjE2N2guMTgzbDEuMDE5LS4xNzgtLjItMS4xNTZ6bS00LjggMS4zMDRsLjg5My4wNjRoLjMybC0uMDEyLTEuMTY3aC0uMjI5bC0uODkyLS4wNjR6IiBjb2xvcj0iIzAwMCIgc29saWQtY29sb3I9IiMwMDAwMDAiIHN0eWxlPSJmb250LWZlYXR1cmUtc2V0dGluZ3M6bm9ybWFsO2ZvbnQtdmFyaWFudC1hbHRlcm5hdGVzOm5vcm1hbDtmb250LXZhcmlhbnQtY2Fwczpub3JtYWw7Zm9udC12YXJpYW50LWxpZ2F0dXJlczpub3JtYWw7Zm9udC12YXJpYW50LW51bWVyaWM6bm9ybWFsO2ZvbnQtdmFyaWFudC1wb3NpdGlvbjpub3JtYWw7aXNvbGF0aW9uOmF1dG87bWl4LWJsZW5kLW1vZGU6bm9ybWFsO3NoYXBlLXBhZGRpbmc6MDt0ZXh0LWRlY29yYXRpb24tY29sb3I6IzAwMDt0ZXh0LWRlY29yYXRpb24tbGluZTpub25lO3RleHQtZGVjb3JhdGlvbi1zdHlsZTpzb2xpZDt0ZXh0LWluZGVudDowO3RleHQtb3JpZW50YXRpb246bWl4ZWQ7dGV4dC10cmFuc2Zvcm06bm9uZSIgcGFpbnQtb3JkZXI9InN0cm9rZSBtYXJrZXJzIGZpbGwiIHdoaXRlLXNwYWNlPSJub3JtYWwiLz48cGF0aCBkPSJNNi4zMiA2NS43MjhxLS4xMDcgMS4zMzMtLjkxIDIuMjc2LS41MjguNjQyLTEuNDA1LjktLjQ3NS4xNDctMS4wODIuMTQ3LTEuMTMxIDAtMS44MTgtLjU1OS0uNTctLjQ2LS44NTgtMS4yNDMtLjI4OC0uNzg5LS4yNDUtMS44MTVsMS44MzQtLjEyNnEuMDIgMS4xMS40NCAxLjYwNi4zMDYuMzc3Ljc1NS4zNTYuNjMtLjAzIDEuMDY0LS42MTQuMjI0LS4zLjI3Ni0uODQ1LjA3Ny0uODAzLS41NjctMS41ODUtLjUyMS0uNTM4LTEuNTU2LTEuNjEzLS44NjktLjkyMi0xLjE5LTEuNjU1LS4zNDYtLjgyMy0uMjU0LTEuNzg3LjE2Ni0xLjczOCAxLjQxOC0yLjYzMlEyLjk5MiA1NiA0LjA2IDU2cTEuMDI2IDAgMS43MTUuNDYxLjUzMS4zNTYuODE5Ljk5OS4yODguNjM1LjI4NSAxLjQ2NmwtMS44NzUuMzM1cS0uMDAyLS43ODItLjMzLTEuMjE1LS4yMzUtLjMyMS0uNzMtLjMyMS0uNTI0IDAtLjg0OC40NjgtLjI2LjM3Ny0uMzEzLjkzNS0uMDg0Ljg3My41ODMgMS43OC4yNTQuMzQzLjc3NC44MS42MTcuNTU5LjgxMi43ODIuNjM3LjcxMi45NjIgMS40MDQuMTUuMzIuMjM2LjYuMjA3LjY3Ny4xNjkgMS4yMjJ6bTQuOTYgMy4zMnEtMS4yNyAwLTIuMDcyLS44ODctLjgwMi0uODg2LS42ODEtMi4xNWwuNjY3LTYuOTc1cS4xMjEtMS4yNjMgMS4xLTIuMTUuOTgtLjg5NCAyLjIzNi0uODk0IDEuMjcgMCAyLjA2NS44OTQuOC44OTMuNjggMi4xNWwtLjEzOSAxLjQ1MmgtMS45OWwuMTQzLTEuNDg3cS4wNDQtLjQ2LS4yNTMtLjc4Mi0uMjktLjMyOC0uNzUtLjMyOC0uNDU1IDAtLjgwNy4zMjgtLjM1Mi4zMjItLjM5Ni43ODJsLS42NyA2Ljk4OXEtLjA0My40Ni4yNDcuNzgyLjI5LjMyMS43NDQuMzIxLjQ2MSAwIC44MTMtLjMyMS4zNTktLjMyMS40MDMtLjc4MmwuMTY4LTEuNzUyaDEuOTlsLS4xNyAxLjc3M3EtLjEyMiAxLjI3LTEuMSAyLjE1Ny0uOTc4Ljg4LTIuMjI4Ljg4em03LjE5LS4xNmgtMS45MTNsMS4yMi0xMi43MzVoMS45MTJ6bTUuNzQtMTIuNzM0bDEuNzIzIDguNTUzLjgxOC04LjU1M2gxLjkybC0xLjIxOSAxMi43MzVoLTIuMDZsLTEuODY1LTguMTU1LS43OCA4LjE1NWgtMS45MTRsMS4yMi0xMi43MzV6bTguNTMgMS45MjFoLTIuMDM5bC4xODQtMS45Mmg1Ljk5bC0uMTgzIDEuOTJIMzQuNjZMMzMuNjI1IDY4Ljg5aC0xLjkyem03LjAzIDEwLjgxM2gtMS45MTNsMS4yMi0xMi43MzVoMS45MTJ6bTcuNiAwaC01LjIzbDEuMjItMTIuNzM1aDEuOTEzbC0xLjAzNyAxMC44MjloMy4zMTZ6bTcuMjEgMGgtNS4yM2wxLjIyLTEyLjczNWgxLjkxM2wtMS4wMzcgMTAuODI5aDMuMzE2em00LjczLTIuOTJsLS43NDggMi45MjVoLTEuOTk3bDMuMzc3LTEyLjczNWgyLjY0NmwuOTEgMTIuNzM1aC0yLjAxbC0uMTc0LTIuOTI1em0xLjY2NS02Ljg5MWwtMS4xOTMgNS4wMmgxLjQyNXoiLz48L2c+PC9zdmc+",e._loaded=!1;var i=e;e._finished=!1,e.progress=0,e.fromProgress=0,e.toProgress=0,e.t=0,e.game=t,e.nextScene=null,e.preloadingDone=!1,e.scintillaLogo.onload=function(){i._loaded=!0,function(){this._midPos={x:160,y:120},this._barColor="#dc30a9",this._barPosX=160-.3*this.scintillaLogo.width*.5,this._barPosY=104+.3*this.scintillaLogo.height*.5+8,this._barPosW=.3*this.scintillaLogo.width}.call(i)};var n=function(t){this._loaded&&(t.imageExtra(this.scintillaLogo,160,104,.3,.3,.5,.5),t.color=this._barColor,t.outlineRect(this._barPosX,this._barPosY,this._barPosW,7),t.rect(this._barPosX+2,this._barPosY+2,(this._barPosW-4)*this.progress,3),t.font("Verdana",6),t.text("WIP - "+l.default.VERSION,316,236,"#490c37","right"))},a=function(t){if(!this._finished){if(this.t+=t/.15,1<=this.t&&(this.t=1),this.preloadingDone)this.wait+=t,1.5<=this.wait&&(this.transition.in(),this.events.subscribeOnce("transition_end",function(){this.transition.reset(),this.preloadDone()},this),this._finished=!0);else{var e=this.load.progress;1<=e&&(this.preloadingDone=!0),e>this.progress&&(this.fromProgress=this.progress,this.toProgress=e,this.t=0)}this.progress=d.default.lerp(this.fromProgress,this.toProgress,this.t)}};return e.loading=a,e.update=a,e.loadingGUI=n,e.gui=n,e}return(0,a.default)(u,t),(0,n.default)(u,[{key:"init",value:function(t){this.nextScene=t,this.wait=0,this.t=0,this.progress=0,this.preloadingDone=!1,this.ui.setSize(320,240),this.ui.setViewportByAspectRatio(1.33333333333),this.transition.settings.setInDuration(.35)}},{key:"start",value:function(){}}]),u}(u.default);e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=h(i(0)),a=h(i(1)),u=h(i(10)),r=h(i(17)),s=h(i(44)),o=h(i(235)),l=h(i(234)),d=h(i(136)),f=h(i(233)),c=h(i(21));function h(t){return t&&t.__esModule?t:{default:t}}var v=function(){function e(t){(0,n.default)(this,e),this.game=t,this._scenes=new r.default,this.currentScene=null,this._currentSceneName="",this._changeScene=null,this._transition=null,this._isTranistioning=!1,this._setup=!1,this._clearCache=!1,this._scintillaLoading=!1,this.onStartCallback=null,this.onLoadingCallback=null,this.onLoadingRenderCallback=null,this.onPreloadCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onDestroyCallback=null,this._loadingPlaceHolder=new o.default(this.game)}return(0,a.default)(e,[{key:"add",value:function(t,e){if(void 0===t)throw new Error("SceneManager.add: Could not add Scene. 'sceneName' is undefined.");if(!c.default.isString(t))throw new Error("SceneManager.add: Could not add Scene. 'sceneName' is not string.");if(this._scenes.has(t))throw new Error('SceneManager.add: Could not add Scene. There is already a scene with name "'+t+'".');var i=(0,f.default)(e,t);return this._scenes.set(t,i),this}},{key:"new",value:function(t){if(this._scenes.has(t))throw new Error('Could not create new Scene. The scene name "'+name+'" already exists.');var e=new s.default(this.game,t);return this._scenes.set(t,e),e}},{key:"set",value:function(t,e){return(0,l.default)(this,t,e)}},{key:"transition",value:function(t,e){(0,l.default)(this,t,!1,e)}},{key:"restart",value:function(t){void 0===t&&(t=!1),this._changeScene=this._currentSceneName,this._clearCache=t}},{key:"remove",value:function(t){this._currentSceneName===t&&(this.currentScene=null,this.onStartCallback=null,this.onLoadingCallback=null,this.onLoadingRenderCallback=null,this.onPreloadCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onDestroyCallback=null),delete this.scenes[t]}}]),e}();e.default=v,u.default.register("SceneManager",v,"scene",function(){(0,d.default)(this.game,this._loadingPlaceHolder)})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){function i(){this._isTranistioning=!1,this.onStartCallback&&this.onStartCallback.call(this.currentScene,this.game)}void 0===e&&(e=a.default.NONE),t._scintillaLoading=!1,t._transition=e,void 0!==t.currentScene&&null!==t.currentScene&&(e<=a.default.NONE?i.call(t):(0,n.default)(t,i.bind(t)))};var n=u(i(134)),a=u(i(24));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";var n,a={NONE:0,START:1,LOADING:2,RUNNING:3};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),t.exports=a},function(t,e,i){"use strict";t.exports={State:i(238),Scene:i(44),SceneManager:i(236)}},function(t,e,i){"use strict";t.exports={Ease:i(65).default,Type:i(27).default}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var n=4022871197,t=function(t){t=t.toString();for(var e=0;e<t.length;e++){var i=.02519603282416938*(n+=t.charCodeAt(e));i-=n=i>>>0,n=(i*=n)>>>0,n+=4294967296*(i-=n)}return 2.3283064365386963e-10*(n>>>0)};return t.version="Mash 0.9",t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){!0===e.preventDefault&&t.preventDefault(),e._enabled&&(e.status=!1,e.press=!1,e.release=!0,e.releaseTime=t.timeStamp,e.pressDuration=e.releaseTime-e.pressTime,e.releaseDuration=0,e.pressTime=0,e._event=a.default.RELEASED)};var n,a=(n=i(45))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){!0===e.preventDefault&&t.preventDefault(),e._enabled&&!1===e.press&&(e.status=!0,e.press=!0,e.release=!1,e.pressTime=t.timeStamp,e.pressDuration=0,e.releaseDuration=e.pressTime-e.releaseTime,e._event=a.default.PRESSED)};var n,a=(n=i(45))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";t.exports={Key:i(111),Keyboard:i(110),Mouse:i(109),Input:i(108)}},function(t,e,i){"use strict";t.exports={State:i(46),Style:i(66),Behavior:i(24)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(0)),a=o(i(1)),u=o(i(15)),r=o(i(27)),s=o(i(66));function o(t){return t&&t.__esModule?t:{default:t}}var l=function(){function e(t){(0,n.default)(this,e),this.transition=t,this.fromAlpha=0,this.toAlpha=0,this.inColor=u.default.black,this.outColor=u.default.black,this.inDuration=.5,this.outDuration=.5,this.pauseDuration=0,this.style=s.default.FILL,this.timingInMethod=r.default.LINEAR,this.timingOutMethod=r.default.LINEAR,this.timingInArgument=3,this.timingOutArgument=3}return(0,a.default)(e,[{key:"setInColor",value:function(t){return this.inColor.parse(t),this}},{key:"setOutColor",value:function(t){return this.outColor.parse(t),this}},{key:"setDuration",value:function(t){return this.setInDuration(t),this.setOutDuration(t),this}},{key:"setInDuration",value:function(t){return this.inDuration=Math.abs(t),this}},{key:"setOutDuration",value:function(t){return this.outDuration=Math.abs(t),this}},{key:"setPauseDuration",value:function(t){return this.pauseDuration=Math.abs(t),this}},{key:"setEaseMethod",value:function(t,e){return this.setInTiming(t,e),this.setOutTiming(t,e),this}},{key:"setEaseInMethod",value:function(t,e){return this.timingInMethod=t,this.timingInArgument=e||1,this}},{key:"setEaseOutMethod",value:function(t,e){return this.timingOutMethod=t,this.timingOutArgument=e||1,this}}]),e}();e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=d(i(0)),a=d(i(1)),u=d(i(246)),r=d(i(46)),s=d(i(15)),o=d(i(24)),l=d(i(10));function d(t){return t&&t.__esModule?t:{default:t}}var f=function(){function e(t){(0,n.default)(this,e),this.game=t,this.settings=new u.default(this),this._behaviour=o.default.NONE,this._state=r.default.NONE,this._alpha=0,this._tColor=s.default.transparent,this._startColor=new s.default,this._t=0}return(0,a.default)(e,[{key:"in",value:function(){this._behaviour!==o.default.FADEIN&&(this._alpha=0,this._t=0,this._startColor.setColor(this.settings.inColor,0),this._tColor.setColor(this._startColor,0),this.settings.inColor.a=1,this._behaviour=o.default.FADEIN,this._state=r.default.IN)}},{key:"out",value:function(){this._behaviour!==o.default.FADEOUT&&(this._t=0,this._startColor.setColor(this.settings.outColor,1),this._tColor.setColor(this._startColor,1),this.settings.outColor.a=0,this._behaviour=o.default.FADEOUT,this._state=r.default.OUT)}},{key:"inout",value:function(){this.in(),this._behaviour=o.default.FADEINOUT}},{key:"by",value:function(t){switch(t){case o.default.NONE:return;case o.default.FADEINOUT:return this.inout();case o.default.FADEIN:return this.in()}}},{key:"reset",value:function(){this._tColor.setColor(this._startColor,0),this._t=0,this._behaviour=o.default.NONE,this._state=r.default.NONE}}]),e}();e.default=f,l.default.register("Transition",f,"transition")},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this.canvas=this.game.system.render.canvas,this.context=this.game.system.render.context,this.draw.init(),this.game.config.debug&&(this.debug=new a.default(this.game,this.draw))};var n,a=(n=i(114))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(1)),u=r(i(21));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){function i(t,e){(0,n.default)(this,i),this.game=t,this.cache=null,this.context=null,this.ui=e,this.lastAlpha=1,this.lastColor="#000",this.currentColor="#FFF",this.currentTextAlign="center",this.disablePointTransform=!1}return(0,a.default)(i,[{key:"init",value:function(){return this.cache=this.game.system.cache,this.context=this.game.system.render.context,this}},{key:"defaultComposite",value:function(){this.context.globalCompositeOperation="source-over"}},{key:"transformPosition",value:function(t,e,i,n){return this.disablePointTransform?{x:t,y:e,w:i||0,h:n||0}:{x:t-this.ui.viewport.x,y:e-this.ui.viewport.y,w:i-this.ui.viewport.x||0,h:n-this.ui.viewport.y||0}}},{key:"font",value:function(t,e,i){u.default.isNumber(e)&&(e=e.toString()+"px"),void 0===i&&(i="normal"),this.context.font=i+" "+e+" '"+t+"'"}},{key:"text",value:function(t,e,i,n,a){void 0!==n&&(this.color=n),void 0!==a&&(this.align=a);var u=this.transformPosition(e,i);this.context.textAlign=a,this.context.fillText(t,u.x,u.y)}},{key:"image",value:function(t,e,i,n,a){var u=this.transformPosition(e,i);this.context.drawImage(t,0,0,t.width,t.height,u.x,u.y,t.width,t.height)}},{key:"imageExtra",value:function(t,e,i,n,a,u,r){if(null!=t){void 0===n&&(n=1),void 0===a&&(a=1),void 0===u&&(u=0),void 0===r&&(r=0);var s=this.transformPosition(e,i),o=t.width*u,l=t.height*r;this.context.save(),this.context.translate(s.x,s.y),this.context.scale(n,a),this.context.drawImage(t,0,0,t.width,t.height,-o,-l,t.width,t.height),this.context.restore()}}},{key:"sprite",value:function(t,e,i,n,a){var u=this.cache.image.get(t);if(null!==u){void 0===n&&(n=0),void 0===a&&(a=0);var r=this.transformPosition(e,i),s=u.width*n,o=u.height*a;this.context.save(),this.context.translate(r.x,r.y),this.context.drawImage(u.data,0,0,u.width,u.height,-s,-o,u.width,u.height),this.context.restore()}}},{key:"spriteScaled",value:function(t,e,i,n,a,u,r){var s=this.cache.image.get(t);if(null!==s){void 0===u&&(u=0),void 0===r&&(r=0);var o=this.transformPosition(e,i),l=s.width*u,d=s.height*r;this.context.save(),this.context.translate(o.x,o.y),this.context.scale(n,a),this.context.drawImage(s.data,0,0,s.width,s.height,-l,-d,s.width,s.height),this.context.restore()}}},{key:"spriteSkew",value:function(t,e,i,n,a,u,r){var s=this.cache.image.get(t);if(null!==s){void 0===u&&(u=0),void 0===r&&(r=0),this.transformPosition(e,i);var o=s.width*u,l=s.height*r;this.context.save(),this.context.transform(1,Math.tan(n),0,1,e,i),this.context.transform(1,0,Math.tan(a),1,0,0),this.context.drawImage(s.data,0,0,s.width,s.height,-o,-l,s.width,s.height),this.context.restore()}}},{key:"spriteAskew",value:function(t,e,i,n,a,u,r){var s=this.cache.image.get(t);if(null!==s){void 0===u&&(u=0),void 0===r&&(r=0),this.transformPosition(e,i);var o=s.width*u,l=s.height*r;this.context.save(),this.context.transform(1,Math.atan(n),0,1,e,i),this.context.transform(1,0,Math.atan(a),1,0,0),this.context.drawImage(s.data,0,0,s.width,s.height,-o,-l,s.width,s.height),this.context.restore()}}},{key:"spriteRskew",value:function(t,e,i,n,a,u,r){var s=this.cache.image.get(t);if(null!==s){void 0===u&&(u=0),void 0===r&&(r=0),this.transformPosition(e,i);var o=s.width*u,l=s.height*r;this.context.save(),this.context.transform(1,n,0,1,e,i),this.context.transform(1,0,a,1,0,0),this.context.drawImage(s.data,0,0,s.width,s.height,-o,-l,s.width,s.height),this.context.restore()}}},{key:"spritePart",value:function(t,e,i,n,a,u,r,s,o){var l=this.cache.image.get(t);if(null!==l){void 0===s&&(s=0),void 0===o&&(o=0);var d=this.transformPosition(e,i),f=u*s,c=r*o;this.context.save(),this.context.translate(d.x,d.y),this.context.drawImage(l.data,n,a,u,r,-f,-c,u,r),this.context.restore()}}},{key:"spritesheet",value:function(t,e,i,n,a,u,r,s){var o=this.cache.animation.get(t);if(null===o)return!1;var l=o.get(n);if(null==l)return!1;if(null===l.image)return!1;var d=l.frame;void 0===r&&(r=1),void 0===s&&(s=r),void 0===a&&(a=0),void 0===u&&(u=0);var f=this.transformPosition(e,i),c=d.width*a,h=d.height*u;return this.context.save(),this.context.translate(f.x,f.y),this.context.scale(r,s),this.context.drawImage(l.image.data,d.x,d.y,d.width,d.height,-c,-h,d.width,d.height),this.context.restore(),!0}},{key:"rect",value:function(t,e,i,n,a){var u=this.transformPosition(t,e,i,n);this.context.save(),this.context.fillStyle=a||this.currentColor,this.context.translate(u.x,u.y),this.context.fillRect(0,0,u.w,u.h),this.context.restore()}},{key:"outlineRect",value:function(t,e,i,n,a,u){u=u||this.currentColor;var r=this.transformPosition(t,e,i,n);this.context.save(),this.context.translate(r.x,r.y),this.context.lineWidth=a||1,this.context.strokeStyle=u,this.context.strokeRect(0,0,r.w,r.h),this.context.restore()}},{key:"bounds",value:function(t,e){void 0===e&&(e="red"),this.context.setTransform(1,0,0,1,0,0),this.outlineRectangle(t.min.x,t.min.y,t.max.x-t.min.x,t.max.y-t.min.y,e,1)}},{key:"color",set:function(t){this.lastColor=this.context.fillStyle,this.context.fillStyle=t,this.currentColor=this.context.fillStyle}},{key:"alpha",set:function(t){this.lastAlpha=this.context.globalAlpha,this.context.globalAlpha=t}},{key:"align",set:function(t){this.context.textAlign=t,this.currentTextAlign=this.context.textAlign}},{key:"composite",set:function(t){this.context.globalCompositeOperation=t}}]),i}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){t.width=e,t.height=i,t.aspectRatio=e/i,t.pixelUnit.x=t.canvas.width/e,t.pixelUnit.y=t.canvas.height/i,t._isDirty=!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u={Square:0,Pillarbox:1,Letterbox:2,computeViewPort:function(t,e){var i={x:0,y:0,w:1,h:1,style:0};if(Math.round(100*t)/100==Math.round(100*e)/100)return i;if(e<t){var n=1-e/t;i.x=n/2,i.y=0,i.w=1-n,i.h=1,i.style=u.Pillarbox}else{var a=1-t/e;i.x=0,i.y=a/2,i.w=1,i.h=1-a,i.style=u.Letterbox}return i}};e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i(0)),a=c(i(1)),u=c(i(10)),r=c(i(32)),o=c(i(251)),s=c(i(38)),l=c(i(250)),d=(c(i(114)),c(i(8)),c(i(249))),f=c(i(248));function c(t){return t&&t.__esModule?t:{default:t}}var h=function(){function e(t){(0,n.default)(this,e),this.game=t,this.canvas=null,this.width=this.game.width,this.height=this.game.height,this.viewport=new r.default(0,0,this.width,this.height),this.ratiobox=null,this.aspectRatio=this.width/this.height,this.pixelUnit={x:1,y:1},this._isDirty=!0,this.matrix=new s.default(1),this.context=null,this._alpha=1,this.backgroundColor="#000",this.backgroundAlpha=0,this.debug=null,this.draw=new d.default(t,this)}return(0,a.default)(e,[{key:"setSize",value:function(t,e){return(0,l.default)(this,t,e),this}},{key:"setViewport",value:function(t,e,i,n){return this.viewport.x=t,this.viewport.y=e,this.viewport.width=i,this.viewport.height=n,this._isDirty=!0,this}},{key:"setViewportByAspectRatio",value:function(t){var e=this.game.system.render.canvas.width,i=this.game.system.render.canvas.height;this.ratiobox=o.default.computeViewPort(e/i,t);var n=0,a=0;if(this.ratiobox.style===o.default.Square)return this.viewport.set(0,0,e,i),this;this.ratiobox.style===o.default.Pillarbox?n=this.ratiobox.x*this.width:this.ratiobox.style===o.default.Letterbox&&(a=this.ratiobox.y*this.height),this.viewport.set(n,a,this.width*(e/this.width)-2*n,this.height*(i/this.height)-2*a);var u=e*(2*this.ratiobox.x),r=(this.ratiobox.y,(this.canvas.clientWidth-u)/i),s=i/(this.height/2*2)*r;return this.pixelUnit.x=s,this.pixelUnit.y=s,this._isDirty=!0,this}},{key:"setSizeByCanvas",value:function(){return(0,l.default)(this,this.game.system.render.canvas.width,this.game.system.render.canvas.height),this}},{key:"setSizeByCamera",value:function(){return(0,l.default)(this,this.game.system.camera.width,this.game.system.camera.height),this}},{key:"setSizeByAspectRatio",value:function(t){return(0,l.default)(this,this.game.system.render.canvas.width*t,this.game.system.render.canvas.height*t),this}},{key:"alpha",get:function(){return this._alpha},set:function(t){this._alpha=t}}]),e}();e.default=h,u.default.register("UserInterface",h,"ui",f.default)},function(t,e,i){var n=i(25),a=i(75).onFreeze;i(34)("seal",function(e){return function(t){return e&&n(t)?e(a(t)):t}})},function(t,e,i){i(253),t.exports=i(13).Object.seal},function(t,e,i){"use strict";t.exports={Smoothing:i(121),Manager:i(119),Interpolation:i(118)}},function(t,e,i){"use strict";t.exports={Canvas:i(255),RenderLayer:i(117),RenderLayerManagement:i(116),Render:i(115),UI:i(252),Transition:i(247)}},function(t,e,i){"use strict";t.exports={MergeSort:i(69)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Utils=i(257),e.Set=i(67).default,e.Map=i(17).default,e.List=i(7).default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){!0===t._ended&&(t._ended=!1,t.loop?(t.playTime=t.startTime=0,t.buffer=(0,a.default)(t),(0,n.default)(t,0)):t.stop(),t.once&&(t.destroy(),t._pendingRemoval=!0))};var n=u(i(123)),a=u(i(122));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if(!this._noAudio){for(var t=0;t<this._sounds.length;t++){var e=this._sounds.at(t);this._system.type===n.default.WEBAUDIO&&(0,a.default)(e),e._requireRemoval&&this._removalList.push(t)}0!==this._removalList.length&&(this._sounds.eraseIndexedList(this._removalList),this._removalList.length=0)}};var n=u(i(124)),a=u(i(259));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(12));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){var i=void 0===e?"undefined":(0,n.default)(e);return"number"===i?IntToColor(e,t):"string"===i?"rgb"===e.substr(0,3).toLowerCase()?CSSToColor(e,t):HexToColor(e,t):"object"===i?ObjectToColor(e,t):void 0},a(i(15))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(5));e.default=function(t,e){if(void 0===e&&(e=!1),Array.isArray(t))for(var i=0;i<t.length;i++)e?(0,a.default)(t[i]):(0,n.default)(t[i]);else e?(0,a.default)(t):(0,n.default)(t);return t};var a=u(i(141));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(void 0===source)return new a.default(t.r,t.g,t.b,t.a);source.setRGBA(t.r,t.g,t.b,t.a)};var n,a=(n=i(15))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=void 0;i=void 0===e?new a.default:e,hex=hex.replace(u,function(t,e,i,n,a){return void 0!==a&&(a="F"),e+e+i+i+n+n+a+a});var n=r.exec(hex);return n&&i.setRGBA(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),void 0===n[4]?1:parseInt(n[4],16)),i};var n,a=(n=i(15))&&n.__esModule?n:{default:n},u=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=void 0;i=void 0===e?new o.default:e;var n=l.exec(t.toLowerCase());if(n){var a=parseInt(n[0],10)||0,u=parseInt(n[1],10)||0,r=parseInt(n[3],10)||0,s=1;void 0!==n[4]&&(s=parseFloat(n[4],10)||1),i.setRGBA(a,u,r,s)}return i};var n,o=(n=i(15))&&n.__esModule?n:{default:n},l=/^(?:\w*|rgba?)\(?\s*(\d+)\s*\,?(?:\s*(\d+)\s*)?\,?(?:\s*(\d+)\s*)?\,?(?:\s*(\d+(?:\.\d+)?))?\s*\)?$/},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i,n,a,u,r=e||new s.default;return u=16777216<=t?r>>>24:1,i=r>>16&255,n=r>>8&255,a=255&r,r.setRGBA(i,n,a,u),r};var n,s=(n=i(15))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(12));e.default=function(t){var e=void 0===t?"undefined":(0,n.default)(t);return"number"===e?(0,a.default)(t):"string"===e?"rgb"===t.substr(0,3).toLowerCase()?(0,u.default)(t):(0,r.default)(t):"object"===e?(0,s.default)(t):void 0};var a=o(i(266)),u=o(i(265)),r=o(i(264)),s=o(i(263));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=f(i(5)),a=f(i(0)),u=f(i(1)),r=f(i(8)),o=f(i(125)),l=i(27),d=f(l);function f(t){return t&&t.__esModule?t:{default:t}}var c=new(function(){function t(){(0,a.default)(this,t)}return(0,u.default)(t,[{key:"linear",value:function(t,e,i){return r.default.lerp(t,e,i)}},{key:"stepped",value:function(t,e,i){return e*(i<.5?0:1)+t}},{key:"cut",value:function(t,e,i,n){return void 0===n&&(n=2),r.default.lerp(t,e,r.default.floor(i*n)/n)}},{key:"sine",value:function(t,e,i){return e*((Math.sin(i*Math.PI-r.default.HALFPI)+1)/2)+t}},{key:"power",value:function(t,e,i,n){if((i*=2)<1)return o.default.power(t,e,i,n)/2;var a=n%2==0?-1:1;return e*(a/2*(Math.pow(s-2,n)+2*a))+t}},{key:"quadratic",value:function(t,e,i){return this.power(t,e,i,2)}},{key:"cubic",value:function(t,e,i){return this.power(t,e,i,3)}},{key:"quartic",value:function(t,e,i){return this.power(t,e,i,4)}},{key:"quintic",value:function(t,e,i){return this.power(t,e,i,5)}},{key:"exponential",value:function(t,e,i){return 0==i||1==i?e*i+t:i<.5?.5*e*Math.pow(2,20*i-10)+t:-.5*e*Math.pow(2,-20*i+10)+1+t}},{key:"circ",value:function(t,e,i){return i/2<1?-e/2*(Math.sqrt(1-i*i)-1)+t:e/2*(Math.sqrt(1-i*(i-=2))+1)+t}},{key:"elastic",value:function(t,e,i,n){if(void 0===n&&(n=1),0==i)return t;if(2==(i/=n/2))return t+e;var a=n*(.3*1.5),u=a/4;return e>=Math.abs(e)&&(u=a/(2*Math.PI)*Math.asin(e/e)),i<1?e*Math.pow(2,10*(i-=1))*Math.sin((i*n-u)*(2*Math.PI)/a)*-.5+t:e*Math.pow(2,-10*(i-=1))*Math.sin((i*n-u)*(2*Math.PI)/a)*.5+e+t}},{key:"back",value:function(t,e,i){if(0==i)return t;if(2==(i/=.5))return t+e;var n=l.EASE_BACK_CONST;return i<1?e/2*(i*i*((1+(n*=1.525))*i-n))+t:e/2*((i-=2)*i*((1+(n*=1.525))*i+n)+2)+t}},{key:"by",value:function(t,e,i,n,a){switch(void 0===a&&(a=1),t){case d.default.NONE:return n;case d.default.CUT:return this.cut(e,i,n,a);case d.default.LINEAR:return this.linear(e,i,n);case d.default.SINE:return this.sine(e,i,n);case d.default.QUADRATIC:return this.power(e,i,n,2);case d.default.CUBIC:return this.power(e,i,n,3);case d.default.QUARTIC:return this.power(e,i,n,4);case d.default.QUINTIC:return this.power(e,i,n,5);case d.default.POWER:return this.power(e,i,n,a);case d.default.EXPONENTIAL:return this.exponential(e,i,n);case d.default.CIRC:return this.circ(e,i,n);case d.default.BACK:return this.back(e,i,n);case d.default.ELASTIC:return this.elastic(e,i,n,a)}return n}}]),t}());(0,n.default)(c),e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(5)),a=l(i(0)),u=l(i(1)),r=l(i(8)),s=i(27),o=l(s);function l(t){return t&&t.__esModule?t:{default:t}}var d=new(function(){function t(){(0,a.default)(this,t)}return(0,u.default)(t,[{key:"linear",value:function(t,e,i){return r.default.lerp(t,e,i)}},{key:"stepped",value:function(t,e,i){return e*(i<.5?0:1)+t}},{key:"cut",value:function(t,e,i,n){return void 0===n&&(n=2),r.default.lerp(t,e,r.default.floor(i*n)/n)}},{key:"sine",value:function(t,e,i){return-t*(Math.sin(i*r.default.HALFPI)+1)+t+e}},{key:"power",value:function(t,e,i,n){var a=n%2==0?-1:1;return e*(a*Math.pow(i-1,n)+a)+t}},{key:"quadratic",value:function(t,e,i){return this.power(t,e,i,2)}},{key:"cubic",value:function(t,e,i){return this.power(t,e,i,3)}},{key:"quartic",value:function(t,e,i){return this.power(t,e,i,4)}},{key:"quintic",value:function(t,e,i){return this.power(t,e,i,5)}},{key:"exponential",value:function(t,e,i){return 1==i?t:e*(1-Math.pow(2,10*i))+t}},{key:"circ",value:function(t,e,i){return e*Math.sqrt(1-(i-1)*i)+t}},{key:"elastic",value:function(t,e,i,n){if(void 0===n&&(n=1),0==i)return t;if(1==(i/=n))return t+e;var a=.3*n,u=a/4;return e*Mathf.pow(2,-10*i)*Math.sin((i-u)*(2*Math.PI)/a)+1+t}},{key:"back",value:function(t,e,i){return e*((i-1)*i*((s.EASE_BACK_CONST+1)*i+s.EASE_BACK_CONST)+1)+t}},{key:"by",value:function(t,e,i,n,a){switch(void 0===a&&(a=1),t){case o.default.NONE:return n;case o.default.STEPPED:return this.stepped(e,i,n);case o.default.CUT:return this.cut(e,i,n,a);case o.default.LINEAR:return this.linear(e,i,n);case o.default.SINE:return this.sine(e,i,n);case o.default.QUADRATIC:return this.power(e,i,n,2);case o.default.CUBIC:return this.power(e,i,n,3);case o.default.QUARTIC:return this.power(e,i,n,4);case o.default.QUINTIC:return this.power(e,i,n,5);case o.default.POWER:return this.power(e,i,n,a);case o.default.EXPONENTIAL:return this.exponential(e,i,n);case o.default.CIRC:return this.circ(e,i,n);case o.default.BACK:return this.back(e,i,n);case o.default.ELASTIC:return this.elastic(e,i,n,a)}return n}}]),t}());(0,n.default)(d),e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(t._behaviour!==a.default.NONE){var i=t.settings,n=void 0;switch(t._state){case u.default.IN:t._t+=e/i.inDuration,1<=t._t&&(t._t=1,n=!0),r.default.ease(t._startColor,i.inColor,t._t,i.timingInMethod,0,i.timingInArgument,t._tColor);break;case u.default.WAIT:t._t+=e/i.pauseDuration,1<=t._t&&(t._t=1,n=!0);break;case u.default.OUT:t._t+=e/i.outDuration,1<=t._t&&(t._t=1,n=!0),r.default.ease(t._startColor,i.outColor,t._t,i.timingOutMethod,1,i.timingOutArgument,t._tColor)}if(void 0!==n)switch(t._t=0,t._behaviour){case a.default.FADEIN:case a.default.FADEOUT:t._behaviour=a.default.NONE,t._state=u.default.IDLE,t._behaviour===a.default.FADEOUT&&(t._behaviour=a.default.FADEOUT),t.game.system.events.dispatch("transition_end");break;case a.default.FADEINOUT:t._state===u.default.IN?(t._color.setColor(i.outColor),0<i.pauseDuration?t._state=u.default.WAIT:t._state=u.default.OUT):t._state===u.default.WAIT?(t._state=u.default.OUT,t.game.system.events.dispatch("transition_pause_end")):t._state===u.default.OUT&&(t._state=u.default.IDLE,t._behaviour=a.default.NONE,t.game.system.events.dispatch("transition_end"))}}};var a=n(i(24)),u=n(i(46)),r=(n(i(8)),n(i(65)),n(i(15)));function n(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(t._state!==a.default.NONE)switch(i.globalCompositeOperation="source-over",t.settings.style){case n.default.NONE:return;case n.default.FILL:i.fillStyle=t._tColor.rgba,i.fillRect(0,0,e.width,e.height)}};var n=u(i(66)),a=u(i(46));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t._isDirty&&(t.matrix.setIdentity().scale(t.pixelUnit.x,t.pixelUnit.y).translate(t.viewport.x,t.viewport.y),t._isDirty=!1)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){(0,n.default)(t),t.context.globalCompositeOperation="source-over";var i=0!==t.viewport.x||0!==t.viewport.x||t.viewport.width!==t.canvas.width||t.viewport.height!==t.canvas.height;i&&(t.context.save(),t.context.beginPath(),t.context.rect(0,0,t.viewport.width,t.viewport.height),t.context.clip()),t.context.setTransform(t.matrix.a[0],t.matrix.a[1],t.matrix.a[3],t.matrix.a[4],t.matrix.a[6],t.matrix.a[7]),0<t.backgroundAlpha&&(t.context.globalAlpha=t.backgroundAlpha,t.context.fillStyle=t.backgroundColor,t.context.fillRect(0,0,t.width,t.height)),1!==t._alpha&&(t.context.globalAlpha=1,t._alpha=1),(0,a.default)(e,t.draw),i&&t.context.restore()};var n=u(i(272)),a=u(i(137));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){t._setup?t._scintillaLoading?t._loadingPlaceHolder.update(e):t.onUpdateCallback&&t.onUpdateCallback.call(t.currentScene,e):t._scintillaLoading?t._loadingPlaceHolder.loading(e):t.onLoadingCallback&&t.onLoadingCallback.call(t.currentScene,e)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){this._successFiles.erase(t),0===this._successFiles.size&&this.state===n.default.PROCESSING&&a.default.call(this)};var n=u(i(6)),a=u(i(127));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.state===n.default.ERROR?this._failedFiles.insert(t):this._processedFiles.insert(t),a.default.call(this,t)};var n=u(i(6)),a=u(i(275));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={None:0,Point:1,Rect:2,Ellipse:3,Polygon:4,Polyline:5};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),a=s(i(1)),u=s(i(9)),r=s(i(277));function s(t){return t&&t.__esModule?t:{default:t}}var o=function(){function e(t){(0,n.default)(this,e),this.x=u.default.value(t,"x",0),this.y=u.default.value(t,"y",0),this.width=u.default.value(t,"width",0),this.height=u.default.value(t,"height",0),this.rotation=u.default.value(t,"rotation",0),this.name=u.default.value(t,"name",""),this.id=u.default.value(t,"id",null),this.visible=u.default.value(t,"visible",!0),this.type=u.default.value(t,"type",""),this.objectType=r.default.Rect,!0===t.ellipse?this.objectType=r.default.Ellipse:!0===t.point?this.objectType=r.default.Point:!0===t.polygon?this.objectType=r.default.Polygon:!0===t.polyline&&(this.objectType=r.default.Polyline)}return(0,a.default)(e,[{key:"contains",value:function(t,e){return!(this.width<=0&&this.height<=0)&&t>this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}},{key:"intersects",value:function(t,e,i,n){return!(i<=0||n<=0||this.width<=0||this.height<=0||t>this.x+this.width||t+i<this.x||e>this.y+this.height||e+n<this.y)}}]),e}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=t.layers.length,n=new f.default;if(i<=0)return n;for(var a=0;a<i;a++){var u=t.layers[a];if("objectgroup"===u.type&&void 0!==u.objects){for(var r={name:u.name||"",objects:new f.default},s=u.objects.length,o=0;o<s;o++){var l=new d.default(u.objects[o]);r.objects.push(l)}n.push(r)}}return n};var d=n(i(278)),f=n(i(7));function n(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i(0))&&n.__esModule?n:{default:n};e.default=function t(e,i,n,a,u){(0,r.default)(this,t),this.layer=e,this.data=i,this.tileX=n,this.tileY=a,this.id=u,this.frame=i.st,this.x=Math.round(n*i.st.width),this.y=Math.round(a*i.st.height)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(1)),u=r(i(9));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){function e(t){(0,n.default)(this,e),this.width=u.default.value(t,"width",0),this.height=u.default.value(t,"height",0),this.x=u.default.value(t,"x",0),this.y=u.default.value(t,"y",0),this.name=u.default.value(t,"name",""),this.alpha=u.default.value(t,"alpha",1),this.visible=u.default.value(t,"visible",!0),this.tiles=u.default.value(t,"tiles",[]),this.hasAnimatedTiles=!1}return(0,a.default)(e,[{key:"getTile",value:function(t,e){var i=t+e*this.width;return this.tiles[i]}}]),e}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=Boolean(t&a),i=Boolean(t&u),n=Boolean(t&r);return{gid:t&=~(a|u|r),flipHorizontal:e,flipVertical:i,flipDiagonal:n,flipped:!1,rotation:0}};var a=2147483648,u=1073741824,r=536870912},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={decode:function(t){return window.atob(t)},decodeToUint32:function(t){for(var e=window.atob(t),i=e.length,n=new Array(i),a=0;a<i;a+=4)n[a/4]=(e.charCodeAt(a)|e.charCodeAt(a+1)<<8|e.charCodeAt(a+2)<<16|e.charCodeAt(a+3)<<24)>>>0;return n},encode:function(t){return window.btoa(t)}};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=t.layers.length,n=new b.default;if(i<=0)return n;for(var a=i-1;0<=a;a--){var u=t.layers[a];if("tilelayer"===u.type){u.enconding&&"base64"===u.enconding&&(u.data=g.default.decodeToUint32(u.data),delete u.enconding);for(var r=new w.default({name:u.name,x:m.default.value(u,"offsetx",0)+u.x,y:m.default.value(u,"offsety",0)+u.y,width:u.width,height:u.height,tileWidth:u.tilewidth,tileHeight:u.tileheight,alpha:u.opacity,visible:u.visible}),s=[],o=0,l=0,d=!1,f=new M.default,c=0;c<u.data.length;c++){var h=(0,x.default)(u.data[c]),v=o+l*r.width,y=null;if(0<h.gid){var _=h.gid,p=O(e,_).getTileGID(_);p.isAnimated&&(f.insert(_),d=!0),y=new k.default(r,p,o,l,v)}s.push(y),++o>=r.width&&(o=0,l++)}r.tiles=s,r.hasAnimatedTiles=d,r.animatedTiles=0<f.size?f:void 0,n.push(r)}}return n};var m=n(i(9)),g=n(i(283)),M=n(i(67)),b=n(i(7)),x=n(i(282)),w=n(i(281)),k=n(i(280));function n(t){return t&&t.__esModule?t:{default:t}}function O(t,e){return t.each(function(t){if(t.hasGID(e))return t})||null}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var i in e){var n=parseInt(i),a=t.getTile(n);if(null!=a){var u=e[i];a.properties=u}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var i in e){var n=parseInt(i),a=t.getTile(n);if(null!=a){var u=e[i];for(var r in u){var s=u[r];if("animation"==r){var o=s.length;if(1<o){a.isAnimated=!0;for(var l=[],d=0;d<o;d++){var f=s[d];l.push({duration:f.duration,tileID:f.tileid})}a.keyFrames=l}}}}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),l=n(i(32));function n(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e,i,n,a,u,r,s){(0,o.default)(this,t),this.id=n,this.gid=i,this.tileset=e||null,this.st=new l.default(a,u,r,s),this.keyFrames=void 0,this.isAnimated=!1,this.currentFrame=0,this.properties=null}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(i(0)),n=a(i(1)),o=a(i(7)),l=a(i(287));function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function r(t,e,i,n,a,u){(0,s.default)(this,r),this.name=t,this.firstgid=e||1,this.tileWidth=i||16,this.tileHeight=n||16,this.margin=a||0,this.spacing=u||0,this.image=null,this.data=new o.default,this.rows=0,this.collumns=0,this.gidCount=0}return(0,n.default)(r,[{key:"getTileGID",value:function(t){return"string"===t&&(t=parseInt(t)),t<this.firstgid&&t>=this.firstgid+this.gidCount?null:this.data.at(t-this.firstgid)}},{key:"getTile",value:function(t){return"string"===t&&(t=parseInt(t)),this.data.at(t)}},{key:"hasGID",value:function(t){return t>=this.firstgid&&t<this.firstgid+this.gidCount}},{key:"updateData",value:function(t,e){void 0===this.image&&null==this.image||(t=this.image.width,e=this.image.height);var i=(e-2*this.margin+this.spacing)/(this.tileHeight+this.spacing),n=(t-2*this.margin+this.spacing)/(this.tileWidth+this.spacing);this.rows=Math.floor(n),this.collumns=Math.floor(i),this.gidCount=n*i;var a=this.margin,u=this.margin,r=0;this.data.clear();for(var s=0;s<this.gidCount;s++)this.data.push(new l.default(this,this.firstgid+s,s,a,u,this.tileWidth,this.tileHeight)),a+=this.tileWidth+this.spacing,++r>=n&&(r=0,a=this.margin,u+=this.tileHeight+this.spacing)}}]),r}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var i=t.tilesets.length||0,n=new o.default,a=0;a<i;a++){var u=t.tilesets[a];if(u.image){var r=new s.default(u.name,u.firstgid,u.tilewidth,u.tileheight,u.margin,u.spacing);r.image=e.image.get(l.default.getFilenameWithoutExtension(u.image)||u.name),r.updateData(u.imagewidth,u.imageheight),void 0!==u.tiles&&(0,d.default)(r,u.tiles),void 0!==u.tileproperties&&(0,f.default)(r,u.tileproperties),n.push(r)}}return n};var s=n(i(288)),o=n(i(7)),l=n(i(22)),d=n(i(286)),f=n(i(285));function n(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),a=u(i(9));function u(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e){(0,n.default)(this,t),this.name=a.default.value(e,"name","tilemap"),this.width=a.default.value(e,"width",0),this.height=a.default.value(e,"height",0),this.tileWidth=a.default.value(e,"tileWidth",16),this.tileHeight=a.default.value(e,"tileHeight",16),this.pixelsWidth=a.default.value(e,"pixelsWidth",this.width*this.tileWidth),this.pixelsHeight=a.default.value(e,"pixelsHeight",this.height*this.tileHeight),this.orientation=a.default.value(e,"orientation","orthogonal")}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){var n=new s.default({name:e.name,width:e.width,height:e.height,tileWidth:e.tilewidth,tileHeight:e.tileheight,orientation:e.orientation}),a=(0,o.default)(e,i),u={tilesets:a,tilelayers:(0,l.default)(e,a),objectlayers:(0,d.default)(e)};return new r.default(t,n,u)};var r=n(i(68)),s=n(i(290)),o=n(i(289)),l=n(i(284)),d=n(i(279));function n(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if(!this.isOK())return-1;this.progress=0,this._loadedFilesCount=0,this.state=u.default.LOADING,this._filesQueueCount=this._filesQueue.size,0===this._filesQueue.size?n.default.call(this):(this.isDownloading=!0,this._successFiles.clear(),this._failedFiles.clear(),this._filesLoading.clear(),a.default.call(this))};var n=r(i(128)),a=r(i(126)),u=r(i(6));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this._keyWatch.each(function(t,e){e._event=KeyEvent.NONE,e.status=!1}),this._keyWatch.clear(),this._keyGarbage.splice(0,this._keyGarbage.length),this._eventQueue.splice(0,this._eventQueue.length)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(i(0)),n=a(i(1)),l=a(i(7));function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function s(n,t){var a=this;(0,o.default)(this,s),this.tilemap=n,this.animatedTiles=new l.default;for(var e=0;e<t.length;e++)if(t.at(e).data.hasAnimatedTiles)for(var u=t.at(e).data.animatedTiles,i=function(t){var e=u.at(t),i=n.resource.getTileGID(e);if(null!==a.animatedTiles.find(function(t){return t.tileGID.gid===i.gid}))return"continue";a.animatedTiles.push({t:0,frame:0,tileGID:i})},r=0;r<u.size;r++)i(r)}return(0,n.default)(s,[{key:"update",value:function(){}}]),s}();e.default=u},function(t,e,i){var n=i(77),a=i(52);i(34)("keys",function(){return function(t){return a(n(t))}})},function(t,e,i){i(295),t.exports=i(13).Object.keys},function(t,e,i){t.exports={default:i(296),__esModule:!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n){var a=0,u=n.matrix,r=u.a[6],s=u.a[7];if(e.floorTiles&&(r=h.default.round(r),s=h.default.round(s)),t.setTransform(u.a[0],u.a[1],u.a[3],u.a[4],r,s),e.culling.method<=1)for(var o=0,l=e.culling.start.y;l<e.culling.end.y;l++)for(var d=e.culling.start.x;d<e.culling.end.x;d++){o=d+l*e.width;var f,c=i.tiles[o];null!=c&&void 0!==c&&(f=!1===c.data.isAnimated||void 0===c.data.isAnimated?c.data.st:c.data.tileset.getTile(c.data.currentFrame).st,t.drawImage(c.data.tileset.image.data,f.x,f.y,f.width,f.height,c.x-e._originInPixels.x,c.y-e._originInPixels.y,f.width,f.height),a++)}return a};var h=n(i(8));function n(t){return t&&t.__esModule?t:{default:t}}n(i(131))},function(t,e,i){var n=i(37);n(n.S,"Object",{create:i(82)})},function(t,e,i){i(299);var n=i(13).Object;t.exports=function(t,e){return n.create(t,e)}},function(t,e,i){t.exports={default:i(300),__esModule:!0}},function(t,e,a){var i=a(25),n=a(41),u=function(t,e){if(n(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,i,n){try{(n=a(151)(Function.call,a(72).f(Object.prototype,"__proto__").set,2))(t,[]),i=!(t instanceof Array)}catch(t){i=!0}return function(t,e){return u(t,e),i?t.__proto__=e:n(t,e),t}}({},!1):void 0),check:u}},function(t,e,i){var n=i(37);n(n.S,"Object",{setPrototypeOf:i(302).set})},function(t,e,i){i(303),t.exports=i(13).Object.setPrototypeOf},function(t,e,i){t.exports={default:i(304),__esModule:!0}},function(t,e,i){var n=i(77),a=i(145);i(34)("getPrototypeOf",function(){return function(t){return a(n(t))}})},function(t,e,i){i(306),t.exports=i(13).Object.getPrototypeOf},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,i){if(e instanceof a.default){for(var n=0;n<e.layers.length;n++)t(e.layers.at(n),i);e.layers.clear()}i.layer.removeRenderable(e),e._bounds=null,e.resource=null,e.frame=null},n(i(132));var a=n(i(70));function n(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var i=0;i<t._instances.length;i++){var n=t._instances.at(i);!0===n.isPooled?e.system.pool.push(n):(0,r.default)(n,e,!0)}for(var a=0;a<t._pendingInstances.length;a++){var u=t._instances.at(a);!0===u.isPooled?e.system.pool.push(u):(0,r.default)(u,e,!0)}t._pendingInstances.destroy(),t._destroyInstances.destroy(),t._instances.destroy()},n(i(133));var r=n(i(129));function n(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if(!0!==this._noAudio){for(var t=0;t<this._sounds.length;t++){var e=this._sounds.at(t);!1!==e.persistent&&void 0!==e.persistent&&!0!==e._pendingRemoval||(e.stop(),e.destroy(),this._sounds.splice(t,1))}this._removalList.length=0}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e in u.default){var i=a.GameSystems[u.default[e]];void 0!==i&&delete t[i.name]}delete t.key,delete t.mouse,delete t.audio};var n,a=i(10),u=(n=i(50))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){null!==e.currentScene&&void 0!==e.currentScene&&((0,n.default)(e.currentScene),e.onDestroyCallback&&e.onDestroyCallback.call(e.currentScene),e._clearCache&&t.cache.clear(),(0,u.default)(t.system.entityList,t),r.default.call(t.input.keyboard),a.default.call(t.audio))};var n=s(i(311)),a=s(i(310)),u=s(i(309)),r=s(i(293));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){this.currentScene=this._scenes.get(t),this.onLoadingCallback=this.currentScene.loading||null,this.onLoadingRenderCallback=this.currentScene.loadingGUI||null,this.onRenderCallback=this.currentScene.gui||null,this.onUpdateCallback=this.currentScene.update||null,this.onStartCallback=this.currentScene.start||null,this.onPreloadCallback=this.currentScene.preload||null,this.onDestroyCallback=this.currentScene.destroy||null,(0,a.default)(this.game,this.currentScene),this._currentSceneName=t,this._setup=!1};var n,a=(n=i(136))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(t.game.systemInited&&null!==t._changeScene&&((0,u.default)(t.game,t),n.default.call(t,t._changeScene),t._currentSceneName===t._changeScene))if(t._changeScene=null,t.onPreloadCallback){t.game.system.load.reset(),t.onPreloadCallback.call(t.currentScene,t.game);var e=null===t.onLoadingCallback&&null===t.onLoadingRenderCallback;null!==t.onLoadingCallback&&null!==t.onLoadingRenderCallback||(e&&0<t.game.system.load.totalQueuedFiles?(t._loadingPlaceHolder.init(t.currentScene),t._scintillaLoading=!0):t._scintillaLoading=!1),0===t.game.system.load.totalQueuedFiles?a.default.call(t):r.default.call(t.game.system.load)}else a.default.call(t)};var n=s(i(313)),a=s(i(135)),u=s(i(312)),r=s(i(292));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.context.globalAlpha=1,t.context.globalCompositeOperation="source-over"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t._depthSorting-e._depthSorting}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(!t.__enable)return 0;var n=0;t.__isDirty&&(t.renderList.sort(s.default),t.__isDirty=!1);for(var a=t.renderList.size,u=0;u<a;u++){var r=t.renderList.at(u);e.bounds.intersects(r.bounds)&&(i.globalAlpha=r.alpha,n+=r.render(i))}return n};var n,s=(n=i(316))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(t._enable&&(1!==t._alpha&&(t.context.globalAlpha=1,t._alpha=1),t.context.globalCompositeOperation="source-over",!0===t.game.scene._setup))for(var n=0;n<t.layer.renderLayers.length;n++){var a=t.layer.renderLayers.at(n);if(a.enable){var u=0;u+=(0,r.default)(a,e,t.context),t.drawCalls+=u}}};var r=n(i(317));function n(t){return t&&t.__esModule?t:{default:t}}n(i(137))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.clear&&t.context.clearRect(0,0,t.canvas.width,t.canvas.height),t.context.fillStyle=t._backgroundColor,t.context.fillRect(0,0,t.canvas.width,t.canvas.height),t.drawCalls=0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n,a,u,r){var s=[];s[0]=(0,o.default)(e,i,u,r),s[1]=(0,o.default)(e+n,i,u,r),s[2]=(0,o.default)(e,i+a,u,r),s[3]=(0,o.default)(e+n,i+a,u,r),t.min.x=Math.min(s[0].x,s[1].x,s[2].x,s[3].x),t.min.y=Math.min(s[0].y,s[1].y,s[2].y,s[3].y),t.max.x=Math.max(s[0].x,s[1].x,s[2].x,s[3].x),t.max.y=Math.max(s[0].y,s[1].y,s[2].y,s[3].y)};var n,o=(n=i(71))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(!1!==t._transform._isDirty){var i=t._transform;i.rotation!=i._oldRotation&&(i._oldRotation=i.rotation,i._cosSin.y=Math.sin(i.rotation),i._cosSin.x=Math.cos(i.rotation));var n=t.width*i.origin.x,a=t.height*i.origin.y,u={x:i.position.x+n,y:i.position.y+a};t._roundPixels&&(u.x=s.default.round(u.x),u.y=s.default.round(u.y)),t.viewBounds.setMin(u.x,u.y).setMax(u.x+t.width,u.y+t.height),u.x=-u.x,u.y=-u.y,i.matrix.setIdentity().scale(t._pixelUnit.x,t._pixelUnit.y).translate(u.x,u.y).scale(i.scale.x,i.scale.x),(0,r.default)(t.bounds,t._transform,t.width,t.height,u),i.matrix.radianRotate(i._cosSin.x,i._cosSin.y).translate(-n,-a)}},n(i(320)),n(i(71));var r=n(i(138)),s=n(i(8));function n(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(0)),a=o(i(1)),u=o(i(139)),r=o(i(9)),s=o(i(8));function o(t){return t&&t.__esModule?t:{default:t}}var l=function(){function i(t,e){(0,n.default)(this,i),this.game=t,this.requestAnimationFrame=new u.default(e.time.timeoutMode),this.isRunning=!1,this.loop=null,this.render=null,this.startTime=0,this.time=0,this.previousTime=0,this.elapsed=0,this.hiDeltaTime=0,this.deltaTime=0,this.requireFpsUpdate=!0,this.fpsDesired=r.default.value(e,"fps",60),this.fps=this.fpsDesired,this.currentFps=0,this._nextFpsUpdate=0,this._framesThisSecond=0,this.interpolation=!1,this.timeStep=Math.ceil(1e3/this.fpsDesired),this.minTimeStep=1.25*this.timeStep,this.accumalator=0,this.accumulatorMax=10*this.timeStep,this.updateLast=0,this.updateAverageDelta=0,this.frameCounter=0}return(0,a.default)(i,[{key:"init",value:function(t){this.isRunning||(this.reset(),this.loop=t.loop.bind(t),this.render=t.render.bind(t),this.startTime=window.performance.now(),this.requestAnimationFrame.start(this.update.bind(this)),this.isRunning=!0)}},{key:"update",value:function(t){this.hiDeltaTime=t-this.previousTime,this.time=t,this.elapsed+=this.hiDeltaTime,this.requireFpsUpdate&&this.fpsUpdate(t),this.previousTime=t,this.accumalatorMethod(this.hiDeltaTime),this.render(this.hiDeltaTime)}},{key:"fpsUpdate",value:function(t){t>this._nextFpsUpdate&&(this.currentFps=.25*this._framesThisSecond+.75*this.fps,this.fps=s.default.clamp(~~this.currentFps,0,this.fpsDesired),this._nextFpsUpdate=t+1e3,this._framesThisSecond=0),this._framesThisSecond++}},{key:"accumalatorMethod",value:function(t){if(++this.frameCounter%this.frameRate==0){this.frameCounter=0,this.accumalator+=t,this.accumulator=Math.min(this.accumalator,this.accumalatorMax);var e=this.interpolation?t:this.timeStep,i=this.interpolation?e:Math.max(e,this.updateAverageDelta);for(this.deltaTime=e/1e3;this.accumalator>=i||this.interpolation;){var n=window.performance.now();this.loop(e/1e3);var a=window.performance.now();if(this.updateAverageDelta=a-n,this.accumalator-=i,this.interpolation){this.accumalator=0;break}}}}},{key:"accumalatorReset",value:function(){this.frameCounter=0,this.frameRate=~~(.5+60/this.fpsDesired),this.accumalator=0,this.timeStep=1e3/this.fpsDesired,this.accumulatorMax=10*this.stepSize}},{key:"reset",value:function(){var t=window.performance.now();this.deltaTime=0,this.hiDeltaTime=0,this.time=t,this.previousTimeTime=t,this._nextFpsUpdate=t+1e3,this._framesThisSecond=0,this.accumalatorReset()}}]),i}();e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=p(i(0)),a=p(i(1)),u=p(i(10)),r=(p(i(139)),p(i(322))),s=p(i(321)),o=p(i(319)),l=p(i(318)),d=p(i(315)),f=p(i(314)),c=p(i(274)),h=p(i(273)),v=p(i(271)),y=p(i(270)),_=p(i(260));function p(t){return t&&t.__esModule?t:{default:t}}var m=function(){function i(t,e){(0,n.default)(this,i),this.game=t,this.system=e,this.updateStep=new r.default(t,t.config),this.entityUpdateList=null,this.currentScene=null,this.camera=null,this.canvas=null,this.renderer=null}return(0,a.default)(i,[{key:"loop",value:function(t){_.default.call(this.game.audio),this.game.input.update(),(0,y.default)(this.game.system.transition,t),this.currentScene=this.game.scene.currentScene;var e=null!=this.currentScene&&void 0!==this.currentScene;if((0,f.default)(this.game.scene),e){this.entityUpdateList.beginUpdate(t);var i=this.camera._transform._isDirty;(0,c.default)(this.game.scene,t),(0,s.default)(this.camera,this.canvas),this.entityUpdateList.update(t),i&&(this.camera._transform._isDirty=!1)}}},{key:"render",value:function(t){(0,o.default)(this.renderer),null===this.currentScene&&void 0===this.currentScene||((0,l.default)(this.renderer,this.camera,t),(0,h.default)(this.system.ui,this.game.scene)),(0,d.default)(this.system.render),this.renderer.context.setTransform(1,0,0,1,0,0),(0,v.default)(this.system.transition,this.renderer.canvas,this.renderer.context),null!==this.system.ui.debug&&void 0!==this.system.ui.debug&&this.system.ui.debug.test(),this.renderer.doubleBuffer&&this.renderer._domContext.drawImage(this.renderer.canvas,0,0)}}]),i}();e.default=m,u.default.register("GameLoop",m,"loop",function(){this.updateStep.init(this),this.entityUpdateList=this.game.system.entityList,this.camera=this.system.camera,this.canvas=this.system.render.canvas,this.renderer=this.system.render})},function(t,e,i){"use strict";t.exports={Config:i(140),System:i(10),SceneSystem:i(50),GameLoop:i(323)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){for(var t={available:!1,cancel:"",request:""},e=["requestFullscreen","requestFullScreen","webkitRequestFullscreen","webkitRequestFullScreen","msRequestFullscreen","msRequestFullScreen","mozRequestFullScreen","mozRequestFullscreen"],i=(document.createElement("div"),0);i<e.length;i++)if(element[e[i]]){t.available=!0,t.request=e[i];break}if(t.available)for(var n=["cancelFullScreen","exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","msCancelFullScreen","msExitFullscreen","mozCancelFullScreen","mozExitFullscreen"],a=0;a<n.length;a++)if(document[n[a]]){Fullscreen.cancel=n[a];break}return t}},function(t,e,i){i(34)("getOwnPropertyNames",function(){return i(143).f})},function(t,e,i){i(326);var n=i(13).Object;t.exports=function(t){return n.getOwnPropertyNames(t)}},function(t,e,i){t.exports={default:i(327),__esModule:!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e={webAudio:!1,audioData:!1,format:{ogg:!1,mp3:!1,wav:!1,webm:!1,dolby:!1,opus:!1}};e.audioData=!!window.Audio,e.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var i=document.createElement("audio");if(i.canPlayType)try{if(i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(e.format.ogg=!0),(i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||i.canPlayType("audio/opus;").replace(/^no$/,""))&&(e.format.opus=!0),i.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(e.format.mp3=!0),i.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(e.format.wav=!0),(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/aac;").replace(/^no$/,""))&&(e.format.m4a=!0),i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(e.format.webm=!0),""!==i.canPlayType('audio/mp4;codecs="ec-3"'))if(t.manufacturer.edge)e.format.dolby=!0;else if(t.manufacturer.safari&&9<=t.version&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var n=parseInt(RegExp.$1,10),a=parseInt(RegExp.$2,10);(10===n&&11<=a||10<n)&&(e.format.dolby=!0)}}catch(t){}return e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=(n=i(12))&&n.__esModule?n:{default:n};e.default=function(t){var e={canvas:!1,svg:!1,file:!1,fileSystem:!1,worker:!1,pointerLock:!1,vibration:!1};return e.canvas=!!window.CanvasRenderingContext2D||t.environment.cocoonJS,e.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),e.fileSystem=!!window.requestFileSystem,e.worker=!!window.Worker,e.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,e.svg=void 0!==("undefined"==typeof SVGRect?"undefined":(0,a.default)(SVGRect))&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(e.vibration=!0),e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e={name:void 0,version:0,manufacturer:{firefox:!1,opera:!1,ie:!1,edge:!1,chrome:!1,blink:!1,safari:!1,silk:!1}};e.manufacturer.opera=!!window.opr&&!!opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),e.manufacturer.firefox="undefined"!=typeof InstallTrigger,e.manufacturer.safari=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||safari.pushNotification).toString(),e.manufacturer.ie=!!document.documentMode,e.manufacturer.edge=!e.manufacturer.edge&&!!window.StyleMedia,e.manufacturer.chrome=!!window.chrome&&!!window.chrome.webstore,e.manufacturer.blink=(e.manufacturer.chrome||e.manufacturer.opera)&&!!window.CSS;var i=/(\w+)(?:\D+|\/)?((\d+)?\.?(\d+)?)?;?/.exec(t),n=0;return e.name=i[0],void 0!==i[1]&&(n=parseInt(i[1],10)),e.version=n,e}},function(t,e){var i,n,a=t.exports={};function u(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function s(e){if(i===setTimeout)return setTimeout(e,0);if((i===u||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:u}catch(t){i=u}try{n="function"==typeof clearTimeout?clearTimeout:r}catch(t){n=r}}();var o,l=[],d=!1,f=-1;function c(){d&&o&&(d=!1,o.length?l=o.concat(l):f=-1,l.length&&h())}function h(){if(!d){var t=s(c);d=!0;for(var e=l.length;e;){for(o=l,l=[];++f<e;)o&&o[f].run();f=-1,e=l.length}o=null,d=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(t)}}function v(t,e){this.fun=t,this.array=e}function y(){}a.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new v(t,e)),1!==l.length||d||s(h)},v.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=y,a.addListener=y,a.once=y,a.off=y,a.removeListener=y,a.removeAllListeners=y,a.emit=y,a.prependListener=y,a.prependOnceListener=y,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e,i){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0});var t,a=(t=i(12))&&t.__esModule?t:{default:t};e.default=function(t){var e=/Silk/.test(t),i={name:void 0,mobile:!1,desktop:!1,os:{windows:!1,windowsPhone:!1,macOS:!1,linux:!1,android:!1,iOS:!1,chromeOS:!1,kindle:!1},environment:{node:!1,electron:!1,cordova:!1,nodewebkit:!1,cocoonJS:!1,cocoonApp:!1,ejecta:!1}};if(/Windows/.test(t)?(i.name="Windows",i.os.windows=!0):/Mac OS/.test(t)?(i.name="MacOS",i.os.macOS=!0):/Linux/.test(t)?(i.name="Linux",i.os.linux=!0):/Android/.test(t)?(i.name="Android",i.os.android=!0):/iP[ao]d|iPhone/i.test(t)?(i.name="iOS",i.os.iOS=!0):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?(i.name="Kindle",i.os.kindle=!0):/CrOS/.test(t)&&(i.name="ChromeOS",i.os.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(i.name="Windows Phone",i.os.android=!1,i.os.iOS=!1,i.os.macOS=!1,i.os.windows=!0,i.os.windowsPhone=!0),(i.os.windows||i.os.macOS||i.os.linux&&!e||i.os.chromeOS)&&(i.desktop=!0,i.mobile=!1),(i.os.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(i.os.desktop=!1,i.mobile=!0),void 0!==window.cordova&&(i.environment.cordova=!0),void 0!==n&&void 0!==n.versions.node&&(i.environment.node=!0),i.environment.node&&"object"===(0,a.default)(n.versions)&&(i.environment.nodeWebkit=!!n.versions["node-webkit"],i.environment.electron=!!n.versions.electron),navigator.isCocoonJS){i.environment.cocoonJS=!0;try{i.environment.cocoonApp="undefined"!=typeof CocoonJS}catch(t){i.environment.cocoonApp=!1}}return void 0!==window.ejecta&&(i.environment.ejecta=!0),i}}).call(this,i(332))},function(t,e,i){var n=i(37);n(n.S+n.F*!i(30),"Object",{defineProperty:i(31).f})},function(t,e,i){i(334);var n=i(13).Object;t.exports=function(t,e,i){return n.defineProperty(t,e,i)}},function(t,e,i){t.exports={default:i(335),__esModule:!0}},function(t,e,i){var n=i(25),a=i(75).onFreeze;i(34)("freeze",function(e){return function(t){return e&&n(t)?e(a(t)):t}})},function(t,e,i){i(337),t.exports=i(13).Object.freeze},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=(n=i(12))&&n.__esModule?n:{default:n};e.default=function(t){if("object"!==(void 0===t?"undefined":(0,a.default)(t))||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0}},function(t,e,i){i(74)("observable")},function(t,e,i){i(74)("asyncIterator")},function(t,e){},function(t,e,i){var n=i(146);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){var s=i(52),o=i(144),l=i(73);t.exports=function(t){var e=s(t),i=o.f;if(i)for(var n,a=i(t),u=l.f,r=0;a.length>r;)u.call(t,n=a[r++])&&e.push(n);return e}},function(t,e,i){"use strict";var n=i(26),r=i(29),a=i(30),u=i(37),s=i(148),o=i(75).KEY,l=i(40),d=i(80),f=i(78),c=i(51),h=i(35),v=i(76),y=i(74),_=i(344),p=i(343),m=i(41),g=i(25),M=i(28),b=i(84),x=i(53),w=i(82),k=i(143),O=i(72),S=i(31),L=i(52),j=O.f,P=S.f,T=k.f,N=n.Symbol,E=n.JSON,A=E&&E.stringify,D=h("_hidden"),I=h("toPrimitive"),C={}.propertyIsEnumerable,R=d("symbol-registry"),F=d("symbols"),z=d("op-symbols"),U=Object.prototype,B="function"==typeof N,W=n.QObject,G=!W||!W.prototype||!W.prototype.findChild,Q=a&&l(function(){return 7!=w(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(t,e,i){var n=j(U,e);n&&delete U[e],P(t,e,i),n&&t!==U&&P(U,e,n)}:P,Y=function(t){var e=F[t]=w(N.prototype);return e._k=t,e},H=B&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},V=function(t,e,i){return t===U&&V(z,e,i),m(t),e=b(e,!0),m(i),r(F,e)?(i.enumerable?(r(t,D)&&t[D][e]&&(t[D][e]=!1),i=w(i,{enumerable:x(0,!1)})):(r(t,D)||P(t,D,x(1,{})),t[D][e]=!0),Q(t,e,i)):P(t,e,i)},q=function(t,e){m(t);for(var i,n=_(e=M(e)),a=0,u=n.length;a<u;)V(t,i=n[a++],e[i]);return t},J=function(t){var e=C.call(this,t=b(t,!0));return!(this===U&&r(F,t)&&!r(z,t))&&(!(e||!r(this,t)||!r(F,t)||r(this,D)&&this[D][t])||e)},Z=function(t,e){if(t=M(t),e=b(e,!0),t!==U||!r(F,e)||r(z,e)){var i=j(t,e);return!i||!r(F,e)||r(t,D)&&t[D][e]||(i.enumerable=!0),i}},X=function(t){for(var e,i=T(M(t)),n=[],a=0;i.length>a;)r(F,e=i[a++])||e==D||e==o||n.push(e);return n},K=function(t){for(var e,i=t===U,n=T(i?z:M(t)),a=[],u=0;n.length>u;)!r(F,e=n[u++])||i&&!r(U,e)||a.push(F[e]);return a};B||(s((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var e=c(0<arguments.length?arguments[0]:void 0),i=function(t){this===U&&i.call(z,t),r(this,D)&&r(this[D],e)&&(this[D][e]=!1),Q(this,e,x(1,t))};return a&&G&&Q(U,e,{configurable:!0,set:i}),Y(e)}).prototype,"toString",function(){return this._k}),O.f=Z,S.f=V,i(142).f=k.f=X,i(73).f=J,i(144).f=K,a&&!i(85)&&s(U,"propertyIsEnumerable",J,!0),v.f=function(t){return Y(h(t))}),u(u.G+u.W+u.F*!B,{Symbol:N});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;$.length>tt;)h($[tt++]);for(var et=L(h.store),it=0;et.length>it;)y(et[it++]);u(u.S+u.F*!B,"Symbol",{for:function(t){return r(R,t+="")?R[t]:R[t]=N(t)},keyFor:function(t){if(!H(t))throw TypeError(t+" is not a symbol!");for(var e in R)if(R[e]===t)return e},useSetter:function(){G=!0},useSimple:function(){G=!1}}),u(u.S+u.F*!B,"Object",{create:function(t,e){return void 0===e?w(t):q(w(t),e)},defineProperty:V,defineProperties:q,getOwnPropertyDescriptor:Z,getOwnPropertyNames:X,getOwnPropertySymbols:K}),E&&u(u.S+u.F*(!B||l(function(){var t=N();return"[null]"!=A([t])||"{}"!=A({a:t})||"{}"!=A(Object(t))})),"JSON",{stringify:function(t){for(var e,i,n=[t],a=1;arguments.length>a;)n.push(arguments[a++]);if(i=e=n[1],(g(e)||void 0!==t)&&!H(t))return p(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!H(e))return e}),n[1]=e,A.apply(E,n)}}),N.prototype[I]||i(36)(N.prototype,I,N.prototype.valueOf),f(N,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},function(t,e,i){i(345),i(342),i(341),i(340),t.exports=i(13).Symbol},function(t,e,i){t.exports={default:i(346),__esModule:!0}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e){t.exports=function(){}},function(t,e,i){"use strict";var n=i(349),a=i(348),u=i(83),r=i(28);t.exports=i(152)(Array,"Array",function(t,e){this._t=r(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,a(1)):a(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])},"values"),u.Arguments=u.Array,n("keys"),n("values"),n("entries")},function(t,e,i){i(350);for(var n=i(26),a=i(36),u=i(83),r=i(35)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),o=0;o<s.length;o++){var l=s[o],d=n[l],f=d&&d.prototype;f&&!f[r]&&a(f,r,l),u[l]=u.Array}},function(t,e,i){var n=i(26).document;t.exports=n&&n.documentElement},function(t,e,i){var n=i(87),a=Math.max,u=Math.min;t.exports=function(t,e){return(t=n(t))<0?a(t+e,0):u(t,e)}},function(t,e,i){var n=i(87),a=Math.min;t.exports=function(t){return 0<t?a(n(t),9007199254740991):0}},function(t,e,i){var o=i(28),l=i(354),d=i(353);t.exports=function(s){return function(t,e,i){var n,a=o(t),u=l(a.length),r=d(i,u);if(s&&e!=e){for(;r<u;)if((n=a[r++])!=n)return!0}else for(;r<u;r++)if((s||r in a)&&a[r]===e)return s||r||0;return!s&&-1}}},function(t,e,i){var n=i(146);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,i){var r=i(31),s=i(41),o=i(52);t.exports=i(30)?Object.defineProperties:function(t,e){s(t);for(var i,n=o(e),a=n.length,u=0;u<a;)r.f(t,i=n[u++],e[i]);return t}},function(t,e,i){"use strict";var n=i(82),a=i(53),u=i(78),r={};i(36)(r,i(35)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=n(r,{next:a(1,i)}),u(t,e+" Iterator")}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){var o=i(87),l=i(86);t.exports=function(s){return function(t,e){var i,n,a=String(l(t)),u=o(e),r=a.length;return u<0||r<=u?s?"":void 0:(i=a.charCodeAt(u))<55296||56319<i||u+1===r||(n=a.charCodeAt(u+1))<56320||57343<n?s?a.charAt(u):i:s?a.slice(u,u+2):n-56320+(i-55296<<10)+65536}}},function(t,e,i){"use strict";var n=i(360)(!0);i(152)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})},function(t,e,i){i(361),i(351),t.exports=i(76).f("iterator")},function(t,e,i){t.exports={default:i(362),__esModule:!0}},function(iBa,jBa){var kBa;kBa=function(){return this}();try{kBa=kBa||Function("return this")()||eval("this")}catch(iBa){"object"==typeof window&&(kBa=window)}iBa.exports=kBa},function(u,t,r){"use strict";(function(t){var e=n(r(153)),i=n(r(88));function n(t){return t&&t.__esModule?t:{default:t}}var a=a||{Environment:r(39).default,Core:r(324),Structure:r(258),Render:r(256),Color:r(15),Transition:r(245),KeyCode:r(113),MouseButton:r(112),Input:r(244),Math:r(8).default,Random:r(107).default,Matrix:r(38),Ease:r(240).Ease,Scene:r(239),Camera:r(232),Module:r(230),Entity:r(215),Pool:r(200),Event:r(196),Audio:r(191),Resource:r(190),Cache:r(187),AssetType:r(11),Loader:r(185),Game:r(171),Path:r(22),WrapMode:r(61).default};(0,i.default)(e.default,a),u.exports=a,t.scintilla=a}).call(this,r(364))}])});