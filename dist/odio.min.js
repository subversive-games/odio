var CameraControl=function(t){this.camera=t,this.isMoving=!1,this.bounds=new scintilla.BoundingBox(t.bounds);var s={x:0,y:0},h={x:0,y:0},e=0;this.move=function(t,i){this.isMoving=!0,h.x=this.camera.x,h.y=this.camera.y,s.x=h.x+t,s.y=h.y+i,e=0},this.update=function(t){!1!==this.isMoving&&(this.bounds.copy(this.camera.bounds),this.bounds.decrease(64,64),this.bounds.move(64,64),1<=(e+=t/.5)?(this.camera.x=s.x,this.camera.y=s.y,e=0,this.isMoving=!1):(this.camera.x=scintilla.Math.lerp(h.x,s.x,e),this.camera.y=scintilla.Math.lerp(h.y,s.y,e)))}},GameScene=function(){var h,e,t,i;this.start=function(){t=this.create.rectangle(),(i=t.modules.get("render")).width=64,i.height=64,t.position.set(VIEW.w/2-32,VIEW.h/2-32),h=new CameraControl(this.camera),e=new ScrollsControl(this.game.system.render.canvas,{x:VIEW.w,y:VIEW.h+64})},this.update=function(t){if(!1===h.isMoving){var i=this.key.pressed(scintilla.KeyCode.Down)-this.key.pressed(scintilla.KeyCode.Up),s=this.key.pressed(scintilla.KeyCode.Right)-this.key.pressed(scintilla.KeyCode.Left);0!==i?h.move(0,64*i):0!==s&&h.move(64*s,0)}h.update(t),e.update(h)},this.gui=function(t){e.render(t)}},VIEW={w:960,h:640},config={width:VIEW.w,height:VIEW.h,parent:"body",debug:!1,pixelated:!1,roundPixels:!1},game=new scintilla.Game(config);game.scene.add("game",GameScene),game.scene.set("game");var HORIZONTAL=0,VERTICAL=1,Thumb=function(t){this.scroll=t,this.size=0,this.location=0,this.render=function(t){t.color="#fF0",this.scroll.side===VERTICAL?t.rect(this.scroll.x,this.location,this.scroll.arrowSize,this.size):t.rect(this.location,this.scroll.y,this.size,this.scroll.arrowSize)},this.setLocation=function(t){this.location=scintilla.Math.lerp(this.scroll.min,this.scroll.max,t)}},Scroll=function(t,s){this.side=t,this.arrowSize=s,this.trackLength=0,this.thumb=new Thumb(this,t),this.x=0,this.y=0,this.min=0,this.max=0,this.render=function(t,i){this.side===VERTICAL?(i.color="#Aab",i.rect(this.x,this.y,s,t.height),this.thumb.render(i),i.color="#F00a",i.rect(this.x,this.y,s,s),i.rect(this.x,this.y+(t.height-s),s,s)):(i.color="#Aab",i.rect(this.x,this.y,t.width-s,s),this.thumb.render(i),i.color="#F00a",i.rect(this.x,this.y,s,s),i.rect(this.x+(t.width-2*s),this.y,s,s))},this.compute=function(t,i,s){this.side===VERTICAL?(this.trackLength=s.y,this.x=t.width-this.arrowSize,this.y=0,this.min=this.arrowSize,this.max=t.height-this.arrowSize,this.thumb.size=Math.max(50,this.trackLength*(i.y/World.height))):(this.trackLength=s.x,this.x=0,this.y=t.height-this.arrowSize,this.min=this.arrowSize,this.max=t.width-2*this.arrowSize,this.thumb.size=Math.max(50,this.trackLength*(i.x/World.width))),this.thumb.setLocation(0)}},ScrollsControl=function(t){this.canvas=t;init=function(){this.viewport={x:t.width,y:t.height},this.scrollLength={x:t.width-75,y:t.height-50},this.verticalScroll=new Scroll(VERTICAL,25),this.horizontalScroll=new Scroll(HORIZONTAL,25),this.verticalScroll.compute(t,this.viewport,this.scrollLength),this.horizontalScroll.compute(t,this.viewport,this.scrollLength)}.call(this),this.update=function(t){t.isMoving&&(this.verticalScroll.thumb.setLocation(t.camera.y/World.height),this.horizontalScroll.thumb.setLocation(t.camera.x/World.width))},this.render=function(t){var i=t.canvas;this.verticalScroll.render(i,t),this.horizontalScroll.render(i,t)}},World={width:1280,height:768};