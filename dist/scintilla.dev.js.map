{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///../node_modules/babel-runtime/core-js/object/create.js","webpack:///../node_modules/babel-runtime/core-js/object/define-property.js","webpack:///../node_modules/babel-runtime/core-js/object/freeze.js","webpack:///../node_modules/babel-runtime/core-js/object/get-own-property-descriptor.js","webpack:///../node_modules/babel-runtime/core-js/object/get-own-property-names.js","webpack:///../node_modules/babel-runtime/core-js/object/get-prototype-of.js","webpack:///../node_modules/babel-runtime/core-js/object/keys.js","webpack:///../node_modules/babel-runtime/core-js/object/seal.js","webpack:///../node_modules/babel-runtime/core-js/object/set-prototype-of.js","webpack:///../node_modules/babel-runtime/core-js/symbol.js","webpack:///../node_modules/babel-runtime/core-js/symbol/iterator.js","webpack:///../node_modules/babel-runtime/helpers/classCallCheck.js","webpack:///../node_modules/babel-runtime/helpers/createClass.js","webpack:///../node_modules/babel-runtime/helpers/get.js","webpack:///../node_modules/babel-runtime/helpers/inherits.js","webpack:///../node_modules/babel-runtime/helpers/possibleConstructorReturn.js","webpack:///../node_modules/babel-runtime/helpers/typeof.js","webpack:///../node_modules/core-js/library/fn/object/create.js","webpack:///../node_modules/core-js/library/fn/object/define-property.js","webpack:///../node_modules/core-js/library/fn/object/freeze.js","webpack:///../node_modules/core-js/library/fn/object/get-own-property-descriptor.js","webpack:///../node_modules/core-js/library/fn/object/get-own-property-names.js","webpack:///../node_modules/core-js/library/fn/object/get-prototype-of.js","webpack:///../node_modules/core-js/library/fn/object/keys.js","webpack:///../node_modules/core-js/library/fn/object/seal.js","webpack:///../node_modules/core-js/library/fn/object/set-prototype-of.js","webpack:///../node_modules/core-js/library/fn/symbol/index.js","webpack:///../node_modules/core-js/library/fn/symbol/iterator.js","webpack:///../node_modules/core-js/library/modules/_a-function.js","webpack:///../node_modules/core-js/library/modules/_add-to-unscopables.js","webpack:///../node_modules/core-js/library/modules/_an-object.js","webpack:///../node_modules/core-js/library/modules/_array-includes.js","webpack:///../node_modules/core-js/library/modules/_cof.js","webpack:///../node_modules/core-js/library/modules/_core.js","webpack:///../node_modules/core-js/library/modules/_ctx.js","webpack:///../node_modules/core-js/library/modules/_defined.js","webpack:///../node_modules/core-js/library/modules/_descriptors.js","webpack:///../node_modules/core-js/library/modules/_dom-create.js","webpack:///../node_modules/core-js/library/modules/_enum-bug-keys.js","webpack:///../node_modules/core-js/library/modules/_enum-keys.js","webpack:///../node_modules/core-js/library/modules/_export.js","webpack:///../node_modules/core-js/library/modules/_fails.js","webpack:///../node_modules/core-js/library/modules/_global.js","webpack:///../node_modules/core-js/library/modules/_has.js","webpack:///../node_modules/core-js/library/modules/_hide.js","webpack:///../node_modules/core-js/library/modules/_html.js","webpack:///../node_modules/core-js/library/modules/_ie8-dom-define.js","webpack:///../node_modules/core-js/library/modules/_iobject.js","webpack:///../node_modules/core-js/library/modules/_is-array.js","webpack:///../node_modules/core-js/library/modules/_is-object.js","webpack:///../node_modules/core-js/library/modules/_iter-create.js","webpack:///../node_modules/core-js/library/modules/_iter-define.js","webpack:///../node_modules/core-js/library/modules/_iter-step.js","webpack:///../node_modules/core-js/library/modules/_iterators.js","webpack:///../node_modules/core-js/library/modules/_library.js","webpack:///../node_modules/core-js/library/modules/_meta.js","webpack:///../node_modules/core-js/library/modules/_object-create.js","webpack:///../node_modules/core-js/library/modules/_object-dp.js","webpack:///../node_modules/core-js/library/modules/_object-dps.js","webpack:///../node_modules/core-js/library/modules/_object-gopd.js","webpack:///../node_modules/core-js/library/modules/_object-gopn-ext.js","webpack:///../node_modules/core-js/library/modules/_object-gopn.js","webpack:///../node_modules/core-js/library/modules/_object-gops.js","webpack:///../node_modules/core-js/library/modules/_object-gpo.js","webpack:///../node_modules/core-js/library/modules/_object-keys-internal.js","webpack:///../node_modules/core-js/library/modules/_object-keys.js","webpack:///../node_modules/core-js/library/modules/_object-pie.js","webpack:///../node_modules/core-js/library/modules/_object-sap.js","webpack:///../node_modules/core-js/library/modules/_property-desc.js","webpack:///../node_modules/core-js/library/modules/_redefine.js","webpack:///../node_modules/core-js/library/modules/_set-proto.js","webpack:///../node_modules/core-js/library/modules/_set-to-string-tag.js","webpack:///../node_modules/core-js/library/modules/_shared-key.js","webpack:///../node_modules/core-js/library/modules/_shared.js","webpack:///../node_modules/core-js/library/modules/_string-at.js","webpack:///../node_modules/core-js/library/modules/_to-absolute-index.js","webpack:///../node_modules/core-js/library/modules/_to-integer.js","webpack:///../node_modules/core-js/library/modules/_to-iobject.js","webpack:///../node_modules/core-js/library/modules/_to-length.js","webpack:///../node_modules/core-js/library/modules/_to-object.js","webpack:///../node_modules/core-js/library/modules/_to-primitive.js","webpack:///../node_modules/core-js/library/modules/_uid.js","webpack:///../node_modules/core-js/library/modules/_wks-define.js","webpack:///../node_modules/core-js/library/modules/_wks-ext.js","webpack:///../node_modules/core-js/library/modules/_wks.js","webpack:///../node_modules/core-js/library/modules/es6.array.iterator.js","webpack:///../node_modules/core-js/library/modules/es6.object.create.js","webpack:///../node_modules/core-js/library/modules/es6.object.define-property.js","webpack:///../node_modules/core-js/library/modules/es6.object.freeze.js","webpack:///../node_modules/core-js/library/modules/es6.object.get-own-property-descriptor.js","webpack:///../node_modules/core-js/library/modules/es6.object.get-own-property-names.js","webpack:///../node_modules/core-js/library/modules/es6.object.get-prototype-of.js","webpack:///../node_modules/core-js/library/modules/es6.object.keys.js","webpack:///../node_modules/core-js/library/modules/es6.object.seal.js","webpack:///../node_modules/core-js/library/modules/es6.object.set-prototype-of.js","webpack:///../node_modules/core-js/library/modules/es6.string.iterator.js","webpack:///../node_modules/core-js/library/modules/es6.symbol.js","webpack:///../node_modules/core-js/library/modules/es7.symbol.async-iterator.js","webpack:///../node_modules/core-js/library/modules/es7.symbol.observable.js","webpack:///../node_modules/core-js/library/modules/web.dom.iterable.js","webpack:///../node_modules/process/browser.js","webpack:///../node_modules/webpack/buildin/global.js","webpack:///./Define.js","webpack:///./Scintilla.js","webpack:///./audio/index.js","webpack:///./audio/manager/AudioManager.js","webpack:///./audio/manager/components/AudioSystemType.js","webpack:///./audio/manager/components/ClearAudioSources.js","webpack:///./audio/manager/components/InitializeAudioSystemManager.js","webpack:///./audio/manager/components/UpdateAudioManager.js","webpack:///./audio/manager/components/webaudio/AddWebAudioSource.js","webpack:///./audio/manager/components/webaudio/CreateWebAudioContext.js","webpack:///./audio/manager/components/webaudio/WebAudioSystem.js","webpack:///./audio/sound/AudioSource.js","webpack:///./audio/sound/NullAudioSource.js","webpack:///./audio/sound/WebAudioSource.js","webpack:///./audio/sound/components/CreateBufferSource.js","webpack:///./audio/sound/components/RemoveBufferSource.js","webpack:///./audio/sound/components/StartBufferSource.js","webpack:///./audio/sound/components/UpdateWebAudioSource.js","webpack:///./cache/Cache.js","webpack:///./cache/CacheManager.js","webpack:///./camera/Camera.js","webpack:///./camera/ResizeCamera.js","webpack:///./camera/UpdateCamera.js","webpack:///./core/Config.js","webpack:///./core/Game.js","webpack:///./core/GameInitialize.js","webpack:///./core/GameLoop.js","webpack:///./core/index.js","webpack:///./core/system/SceneSystem.js","webpack:///./core/system/System.js","webpack:///./core/system/components/InitializeSystems.js","webpack:///./core/system/components/InjectSystems.js","webpack:///./core/system/components/UnjectSystems.js","webpack:///./dom/AppendDOM.js","webpack:///./dom/RequestAnimationFrame.js","webpack:///./entities/Entity.js","webpack:///./entities/EntityFactory.js","webpack:///./entities/EntityUpdateList.js","webpack:///./entities/SceneEntity.js","webpack:///./entities/hierarchy/ClearEntities.js","webpack:///./entities/hierarchy/CreateEntityFrom.js","webpack:///./entities/hierarchy/DestroyEntity.js","webpack:///./entities/hierarchy/EntityHierarchy.js","webpack:///./entities/hierarchy/InitializeEntity.js","webpack:///./entities/hierarchy/PrioritySorting.js","webpack:///./entities/index.js","webpack:///./entities/pool/Pool.js","webpack:///./entities/pool/PoolManager.js","webpack:///./entities/pool/PreparePooledToGame.js","webpack:///./entities/pool/RemovePooledFromGame.js","webpack:///./entities/pool/index.js","webpack:///./event/EventManager.js","webpack:///./event/GameEvents.js","webpack:///./event/Signal.js","webpack:///./event/SignalBinding.js","webpack:///./event/components/AddBinding.js","webpack:///./event/components/IndexOfListener.js","webpack:///./event/components/RegisterListener.js","webpack:///./event/components/ValidateListener.js","webpack:///./event/engine/RegisterFocusChangeEvent.js","webpack:///./event/index.js","webpack:///./input/Input.js","webpack:///./input/InputData.js","webpack:///./input/InputSystem.js","webpack:///./input/button/Button.js","webpack:///./input/button/ButtonStatus.js","webpack:///./input/button/components/ProcessButtonDown.js","webpack:///./input/button/components/ProcessButtonUp.js","webpack:///./input/components/WatchButtons.js","webpack:///./input/index.js","webpack:///./input/keyboard/KeyCode.js","webpack:///./input/keyboard/Keyboard.js","webpack:///./input/keyboard/components/InitializeKeyboard.js","webpack:///./input/keyboard/components/ResetKeyboard.js","webpack:///./input/keyboard/components/StartKeyboardListeners.js","webpack:///./input/keyboard/components/UpdateKeyboard.js","webpack:///./input/mouse/Mouse.js","webpack:///./input/mouse/MouseButton.js","webpack:///./input/mouse/components/DisableContextMenu.js","webpack:///./input/mouse/components/InitializeMouse.js","webpack:///./input/mouse/components/ProcessMouseButtonDown.js","webpack:///./input/mouse/components/ProcessMouseButtonUp.js","webpack:///./input/mouse/components/ProcessMouseMove.js","webpack:///./input/mouse/components/StartMouseListener.js","webpack:///./input/mouse/components/UpdateMouse.js","webpack:///./loader/AssetsType.js","webpack:///./loader/File.js","webpack:///./loader/ListInjector.js","webpack:///./loader/LoaderManager.js","webpack:///./loader/LoaderState.js","webpack:///./loader/URLObject.js","webpack:///./loader/XHR.js","webpack:///./loader/assets/AdditionalLoaderResources.js","webpack:///./loader/assets/AssetTypeHandler.js","webpack:///./loader/assets/AudioFile.js","webpack:///./loader/assets/FindAudioURLPath.js","webpack:///./loader/assets/ImageFile.js","webpack:///./loader/assets/JSONFile.js","webpack:///./loader/assets/SVGFile.js","webpack:///./loader/assets/ScriptFile.js","webpack:///./loader/assets/TextFile.js","webpack:///./loader/assets/TilemapJSON.js","webpack:///./loader/assets/WebFontFile.js","webpack:///./loader/assets/index.js","webpack:///./loader/components/AddAsset.js","webpack:///./loader/components/AssetProcessingUpdate.js","webpack:///./loader/components/DeleteSucceedQueuedAsset.js","webpack:///./loader/components/InitializeLoader.js","webpack:///./loader/components/LoaderFinished.js","webpack:///./loader/components/NextAsset.js","webpack:///./loader/components/ProcessAssetsQueue.js","webpack:///./loader/components/ProcessDoneAssets.js","webpack:///./loader/components/StartLoadAssets.js","webpack:///./loader/index.js","webpack:///./math/BoundingBox.js","webpack:///./math/MathUtils.js","webpack:///./math/Matrix3.js","webpack:///./math/Rect.js","webpack:///./math/Vector2.js","webpack:///./math/easing/Ease.js","webpack:///./math/easing/EaseIn.js","webpack:///./math/easing/EaseInOut.js","webpack:///./math/easing/EaseOut.js","webpack:///./math/easing/EasingType.js","webpack:///./math/easing/index.js","webpack:///./math/random/Mash.js","webpack:///./math/random/RandomGenerator.js","webpack:///./modules/Module.js","webpack:///./modules/ModuleAttacher.js","webpack:///./modules/ModuleManager.js","webpack:///./modules/ModuleProvider.js","webpack:///./modules/animation/AnimationBaseModule.js","webpack:///./modules/animation/AnimationControl.js","webpack:///./modules/animation/AnimationMachine.js","webpack:///./modules/animation/components/InitializeAnimationModule.js","webpack:///./modules/animation/components/SetSpritesheetFrame.js","webpack:///./modules/animation/components/UpdateAnimationModule.js","webpack:///./modules/animation/index.js","webpack:///./modules/components/AttachModules.js","webpack:///./modules/components/ClearModules.js","webpack:///./modules/components/DetachModules.js","webpack:///./modules/components/GetRenderModule.js","webpack:///./modules/components/InitializeModuleBase.js","webpack:///./modules/components/ModulesUpdater.js","webpack:///./modules/index.js","webpack:///./modules/renderables/Renderable.js","webpack:///./modules/renderables/Sprite.js","webpack:///./modules/renderables/components/AnimateTilemap.js","webpack:///./modules/renderables/components/CullTiles.js","webpack:///./modules/renderables/components/CullingMethod.js","webpack:///./modules/renderables/components/DestroyRenderable.js","webpack:///./modules/renderables/components/DrawImage.js","webpack:///./modules/renderables/components/DrawTilemapLayer.js","webpack:///./modules/renderables/components/RenderableBoundsUpdate.js","webpack:///./modules/renderables/components/RenderableUpdate.js","webpack:///./modules/renderables/index.js","webpack:///./modules/renderables/primitives/index.js","webpack:///./modules/renderables/primitives/rectangle/DrawRectangle.js","webpack:///./modules/renderables/primitives/rectangle/Rectangle.js","webpack:///./modules/renderables/tilemap/Tilemap.js","webpack:///./modules/renderables/tilemap/TilemapAnimator.js","webpack:///./modules/renderables/tilemap/TilemapLayer.js","webpack:///./physics/physics.js","webpack:///./physics/sat/SAT.js","webpack:///./physics/sat/SATResponse.js","webpack:///./render/Define.js","webpack:///./render/Render.js","webpack:///./render/canvas/CanvasInterpolation.js","webpack:///./render/canvas/CanvasListManager.js","webpack:///./render/canvas/CanvasSmoothing.js","webpack:///./render/canvas/index.js","webpack:///./render/color/Color.js","webpack:///./render/color/components/CSSToColor.js","webpack:///./render/color/components/HexToColor.js","webpack:///./render/color/components/IntToColor.js","webpack:///./render/color/components/ObjectToColor.js","webpack:///./render/color/components/ParseColor.js","webpack:///./render/color/components/SetColor.js","webpack:///./render/components/BeginDrawRender.js","webpack:///./render/components/DrawRender.js","webpack:///./render/components/DrawRenderLayer.js","webpack:///./render/components/EndDrawRender.js","webpack:///./render/components/InitializeRender.js","webpack:///./render/components/RequestDepthSorting.js","webpack:///./render/components/RequestRenderableLayerIDChange.js","webpack:///./render/index.js","webpack:///./render/layer/RenderLayer.js","webpack:///./render/layer/RenderLayersManagement.js","webpack:///./render/layer/SortDepth.js","webpack:///./render/transition/DrawTransition.js","webpack:///./render/transition/Transition.js","webpack:///./render/transition/TransitionSettings.js","webpack:///./render/transition/TransitionState.js","webpack:///./render/transition/TransitionStyle.js","webpack:///./render/transition/TranstionBehavior.js","webpack:///./render/transition/UpdateTransition.js","webpack:///./render/transition/index.js","webpack:///./render/ui/AspectRatio.js","webpack:///./render/ui/Debug.js","webpack:///./render/ui/DrawUI.js","webpack:///./render/ui/InitializeUI.js","webpack:///./render/ui/UI.js","webpack:///./render/ui/UIDrawer.js","webpack:///./render/ui/UIResize.js","webpack:///./render/ui/UpdateUIMatrix.js","webpack:///./resources/ImageResource.js","webpack:///./resources/Resource.js","webpack:///./resources/ResourceType.js","webpack:///./resources/animation/AnimationMachineResource.js","webpack:///./resources/animation/AnimationResource.js","webpack:///./resources/animation/KeyFrame.js","webpack:///./resources/animation/SpritesheetResource.js","webpack:///./resources/animation/WrapMode.js","webpack:///./resources/animation/components/AnimationUpdateFrameRate.js","webpack:///./resources/animation/components/ComputeTotalDuration.js","webpack:///./resources/animation/index.js","webpack:///./resources/index.js","webpack:///./resources/tilemap/TilemapResource.js","webpack:///./resources/tilemap/data/ObjectType.js","webpack:///./resources/tilemap/data/Tile.js","webpack:///./resources/tilemap/data/TileGID.js","webpack:///./resources/tilemap/data/TileLayerData.js","webpack:///./resources/tilemap/data/TilemapMetadata.js","webpack:///./resources/tilemap/data/TilemapObject.js","webpack:///./resources/tilemap/data/Tileset.js","webpack:///./resources/tilemap/parser/ParseGID.js","webpack:///./resources/tilemap/parser/ParseObjectsLayers.js","webpack:///./resources/tilemap/parser/ParseTileLayers.js","webpack:///./resources/tilemap/parser/ParseTiledJSON.js","webpack:///./resources/tilemap/parser/ParseTilesConfig.js","webpack:///./resources/tilemap/parser/ParseTilesProperties.js","webpack:///./resources/tilemap/parser/ParseTileset.js","webpack:///./scene/Scene.js","webpack:///./scene/SceneManager.js","webpack:///./scene/SceneState.js","webpack:///./scene/builtin/ScintillaLoadingScene.js","webpack:///./scene/components/ClearScene.js","webpack:///./scene/components/CreateSceneFrom.js","webpack:///./scene/components/PostPreloadingScene.js","webpack:///./scene/components/PreUpdateScene.js","webpack:///./scene/components/PreloadSceneComplete.js","webpack:///./scene/components/RenderScene.js","webpack:///./scene/components/SetScene.js","webpack:///./scene/components/SetupScene.js","webpack:///./scene/components/TransitionBetweenScenes.js","webpack:///./scene/components/UpdateScene.js","webpack:///./scene/components/startScene.js","webpack:///./scene/index.js","webpack:///./structures/List.js","webpack:///./structures/Map.js","webpack:///./structures/Set.js","webpack:///./structures/index.js","webpack:///./structures/useful/MergeSort.js","webpack:///./structures/useful/index.js","webpack:///./system/DetectAudioFeatures.js","webpack:///./system/DetectBrowser.js","webpack:///./system/DetectFullscreen.js","webpack:///./system/DetectOS.js","webpack:///./system/FeatureDetection.js","webpack:///./system/PlatformEnvironment.js","webpack:///./time/GameTime.js","webpack:///./time/UpdateStep.js","webpack:///./transform/ComputeBounds.js","webpack:///./transform/ComputeDelimiterPoint.js","webpack:///./transform/Transform.js","webpack:///./transform/UpdateBounds.js","webpack:///./transform/UpdateTransform.js","webpack:///./transform/UpdateTransformBounds.js","webpack:///./utils/Base64Utils.js","webpack:///./utils/Path.js","webpack:///./utils/Validate.js","webpack:///./utils/object/DeepFreeze.js","webpack:///./utils/object/Extend.js","webpack:///./utils/object/IsPlainObject.js","webpack:///./utils/object/MakeImmutable.js","webpack:///./utils/object/ObjectGet.js"],"names":["Version","MAJOR","MINOR","REVISION","VERSION","scintilla","Environment","require","default","Core","Structure","Render","Color","Transition","KeyCode","MouseButton","Input","Math","Random","BoundingBox","Matrix3","Vector2","Rect","Ease","Scene","Camera","Module","Entity","Pool","Event","Audio","Resource","Cache","AssetType","Loader","Game","Path","WrapMode","module","exports","global","Manager","AudioSource","AudioManager","game","_soundCache","system","cache","audio","_noAudio","config","noAudio","_sounds","_removalList","_system","add","volume","mute","muteOnBlur","events","subscribe","onBlur","onFocus","index","at","tag","loop","name","sound","undefined","play","persistent","once","each","source","i","length","destroy","splice","stop","pause","resume","stopAll","clear","AudioSystemType","NOAUDIO","WEBAUDIO","ClearAudioSources","_pendingRemoval","InitializeAudioSystemManager","audioManager","webAudioSupported","supportAudio","supportWebAudio","webAudio","bind","UpdateAudioManager","type","_requireRemoval","push","removalSize","eraseIndexedList","AddWebAudioSource","soundResource","get","audioSource","console","warn","CreateWebAudioContext","audioSystem","context","AudioContext","createGain","masterVolume","createGainNode","gain","value","connect","destination","locked","state","window","WebAudioSystem","manager","suspend","disconnect","close","resource","_volume","duration","startTime","currentTime","position","speed","isPlaying","isPaused","_ended","NullAudioSource","WebAudioSource","buffer","gainNode","setValueAtTime","CreateBufferSource","webAudioSource","self","bufferSource","createBufferSource","onended","event","target","RemoveBufferSource","playTime","StartBufferSource","start","delay","max","UpdateWebAudioSource","wrapperFunction","resources","adderWrapper","asset","insert","has","res","erase","CacheTypes","CacheManager","image","data","pattern","create","imageTag","patternParameter","img","isString","render","createPattern","tilemap","json","text","animation","spritesheet","addStrip","x","y","frameWidth","frameHeight","numberOfImages","framesPerRow","spacing","animMachine","animations","anim","cacheType","hasCache","props","register","canvas","width","camera","height","bounds","viewBounds","_transform","_pixelUnit","_aspectRatio","_backgroundColor","_roundPixels","roundPixels","_isDirty","entity","r","g","b","a","rgba","reset","intersects","modules","contains","scale","angle","rotation","toRadian","origin","color","flag","ResizeCamera","UpdateCamera","t","_oldRotation","_cosSin","sin","cos","pos","round","setMin","setMax","matrix","setIdentity","translate","radianRotate","Config","callback","callback_2","propertyValue","parent","debug","pixelated","doubleBuffer","floorTiles","autoResize","loader","baseURL","path","responseType","async","createKeyboard","keyboard","active","enable","createMouse","mouse","disableContextMenu","contextMenu","disable","fps","time","timeoutMode","systemInited","isRunning","debugMode","timeMode","input","pool","systems","parseConfiguration","physics","load","scene","draw","universe","world","component","instance","animationCache","updateGameMethod","GameInitialize","_domCanvas","Date","now","random","toString","init","log","GameLoop","updateStep","entityUpdateList","currentScene","renderer","deltaTime","timeStamp","call","update","transition","shouldUpdate","beginUpdate","lastCameraState","ui","setTransform","test","_domContext","drawImage","entityList","System","SceneSystem","GameSystems","key","systemName","initFunc","InitializeSystems","property","registered","InitializeSystemFunction","InjectSystems","sys","UnjectSystems","AppendDOM","element","overflowHidden","appendTo","document","getElementById","nodeType","body","style","overflow","appendChild","RequestAnimationFrame","_isTimeOutMode","thick","lastTime","loopCallback","timeOutIdentifier","updateRequestAnimationFrame","requestAnimationFrame","updateTimeout","dateTime","setTimeout","clearTimeout","cancelAnimationFrame","loopingCallback","_name","_active","_pool","EntityFactory","entityName","empty","spr","attach","sprite","current_scene","rectangle","EntityUpdateList","_instances","_destroyInstances","_removalInstances","_pendingInstances","_camera","_requirePrioritySorting","indexOf","dt","instances","size","destroySize","insertSize","eraseList","childs","content","SceneEntity","isPooled","markDirty","ClearEntities","CreateEntityFrom","placeholder","entityHolder","DestroyEntity","verifyPersistance","completelyDestroy","remove","EntityHierarchy","_entityList","count","entityBase","destroyInstance","InitializeEntity","addInstance","PrioritySorting","_priority","Hierarchy","baseEntity","_baseEntity","_pooledEntities","pooled","popFront","eraseAt","RemoveEntityFromGame","PoolManager","_poolsMap","poolName","pull","PreparePooledToGame","RemovePooledFromGame","removeInstance","EventManager","_signalsMap","eventName","signal","delegate","priority","isFunction","subscribeOnce","args","arguments","Array","apply","dispatch","BulkEventCreation","GameEvents","Signal","_bindings","_shouldPropagate","listener","_destroy","params","paramsSize","prototype","slice","binds","execute","unsubscribeAll","SignalBinding","listenerContext","_signal","_listener","_context","_isOnce","argsArray","handlerReturn","concat","detach","isBound","unsubscribe","AddBinding","binding","n","IndexOfListener","RegisterListener","isOnce","Error","ValidateListener","func","replace","RegisterFocusChangeEvent","eventManager","visibilitychange","hidden","vendors","forEach","prefix","onVisibilityChange","addEventListener","onblur","onfocus","gameConfig","updateClientRect","InputData","domCanvas","clientRect","boundingClientRect","rect","getBoundingClientRect","left","pageXOffset","documentElement","clientLeft","top","pageYOffset","clientTop","floor","right","bottom","InputSystem","_enabled","_eventQueue","_buttonWatcher","_buttonGarbage","eventTarget","eventHandler","preventDefault","Button","code","status","NONE","press","down","up","downTime","downDuration","upTime","upDuration","PRESSED","_event","ButtonStatus","IDLE","POST_PRESSED","RELEASED","ProcessButtonDown","button","enabled","ProcessButtonUp","WatchButtons","watcher","garbage","Keyboard","Mouse","Backspace","Tab","Enter","Shift","Ctrl","Alt","Pause","CapsLock","Escape","Space","PageUp","PageDown","End","Home","Left","Up","Right","Down","Insert","Delete","Num0","Num1","Num2","Num3","Num4","Num5","Num6","Num7","Num8","Num9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","LSystem","RSystem","SelectK","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","Multiply","Add","Subtract","DecimalPoint","Divide","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","NumLock","ScrollLock","SemiColon","Equal","Comma","Dash","Period","Slash","LBraket","BackSlash","RBracket","Quote","_keyMapping","lastKey","removeEventListener","keycode","isPressed","isReleased","InitializeKeyboard","keyMapping","prop","hasOwnProperty","ResetKeyboard","StartKeyboardListeners","eventQueue","handler","defaultPrevented","UpdateKeyboard","eventSize","queue","keyCode","MouseEvent","PRESS","RELEASE","_buttonsList","moved","buttons","clientPosition","mouseButton","object","vec2","LogicalMouseButton","Middle","Back","Forward","DisableContextMenu","getElementsByClassName","item","InitializeMouse","ProcessMouseButtonDown","inputData","set","clientRectTransformX","pageX","clientRectTransformY","pageY","transformX","clientX","transformY","clientY","ProcessMouseButtonUp","ProcessMouseMove","StartMouseListener","passive","UpdateMouse","buttonCode","AssetsType","File","useExternal","url","webFont","xhrSettings","createSettings","merge","PENDING","totalBytes","loadedBytes","progress","xhrRequest","crossOrigin","onComplete","gameLoader","FINISHED","onDone","getURL","createFileRequest","xhr","clearXHR","onPostLoad","error","lengthComputable","loaded","total","min","DONE","processingCallback","PROCESSING","onload","onerror","onprogress","ListInjector","list","toObj","LoadManager","_filesQueue","_filesLoading","_successFiles","_failedFiles","_processedFiles","_filesQueueCount","_loadedFilesCount","isDownloading","_totalFiles","webFontLoader","timeout","inject","substr","baseUrl","file","LOADING","ERROR","_successCount","_fileErrorCount","LoaderState","URLObject","createFromResponse","response","URL","src","createObjectURL","reader","FileReader","removeAttribute","result","split","readAsDataURL","revoke","revokeObjectURL","XHR","settings","xmlHttpRequest","XMLHttpRequest","open","onLoad","onError","onProgress","onReadyStateChange","onreadystatechange","send","doAsync","out","setting","AdditionalLoaderResource","assetConfig","options","isArray","AssetTypeHandler","AudioFile","ext","decodeAudioData","audioBuffer","e","message","urls","FindAudioURLPath","constructor","match","toLowerCase","audioFormats","uri","ImageFile","assetTag","getExtension","Image","force","JSONFile","JSON","parse","responseText","SVGFile","svg","tagFile","xhrLoader","blob","Blob","ScriptFile","script","createElement","language","defer","head","TextFile","endPointPath","CheckImagesSources","fullPath","tileset","getFilenameWithoutExtension","getPathWithoutRoot","getFilename","TilemapFileJSON","tilemapJSON","tilesets","WebFontFile","provider","fontFamily","families","fontLoad","WebFont","WebFontProvider","WebFontConfig","inactive","fontactive","classes","familyName","fvd","family","AssetsTypeHandler","TilemapJSON","AdditionalResources","AddAsset","webFontLoaderChecker","check","isOK","AssetProcessingUpdate","DeleteSucceedQueuedAsset","InitializeLoader","LoaderFinished","onProcessing","NextAsset","concludedFile","hasError","ProcessAssetsQueue","loadAsset","ProcessDoneAssets","sort","StartLoadAssets","Assets","LoaderManager","copy","Infinity","minX","minY","maxX","maxY","xRadius","yRadius","expand","mergeWithPoint","xmin","ymin","xmax","ymax","o","MathUtils","PI","toDegree","TAU","EPSILON","pow","HALFPI","abs","sign","clamp","lerp","fromValue","toValue","clampedLerp","impreciseLerp","distance","x0","y0","x1","y1","sqrt","angleBetween","atan2","radianToDegree","radians","degreeToRadian","degrees","manhattan","from_x","from_y","to_x","to_y","inManhattanRadius","radius","radius_y","dist","average","sum","sub","lerpAngle","end","difference","rangeZero","j","c","d","f","h","radianAngle","transform","a00","a01","a10","a11","a20","a21","other","point","setAll","mat","str","val","zero","k","vec","rect1","rect2","managed","dx","dy","s","otherVector","mag","dot","project","squaredLenght","magnitude","vector","dp","proj","axis","projectNormal","in","inout","Type","EaseInFunctions","from","to","levels","power","p","postFix","arg","STEPPED","stepped","CUT","cut","LINEAR","linear","SINE","sine","QUADRATIC","CUBIC","QUARTIC","QUINTIC","POWER","EXPONENTIAL","exponential","CIRC","circ","BACK","back","ELASTIC","elastic","EaseIn","EaseInOutFunctions","asin","EaseInOut","EaseOutFunction","Mathf","EaseOut","EasingType","BOUNCE","EASE_BACK_CONST","Mash","mash","charCodeAt","version","RNG_A","RNG_B","FRAC","RandomGenerator","s0","s1","s2","_mash","rand","uint32","frac","range","seeds","seed","moduleType","moduleName","moduleManager","_moduleType","_moduleName","ModuleAttacher","frameX","frameY","spriteModule","ModulesMap","ModuleManager","attached","_pendingModulesInitialization","find","ModuleProviderManager","proxyModules","newModule","ModuleProvider","AnimationBaseModule","_resource","_spriteModule","_timer","_position","currentFrame","AnimationControl","frameIndex","Spritesheet","animResource","AnimationResource","spritesheetModule","AnimationMachine","_currentState","stateName","restart","resetTimer","_currentAnimObj","_gameObject","setFrameRect","getFrame","setImage","frameSpeed","Animation","container","currentAnimation","setState","InitializeAnimationModule","animationModule","SetSpritesheetFrame","keyFrame","frame","UpdateAnimationModule","currentKeyFrame","uniformDuration","last","wrapMode","Once","onAnimationEnd","AttachModules","entityModule","layers","layer","addRenderable","layerID","ClearModules","DetachModules","removeRenderable","GetRenderModule","attacherName","formalName","getByName","InitializeModuleBase","instace","ModulesUpdater","modulesManager","hiDeltaTime","Renderables","Renderable","_layerID","_depth","_alpha","_depthSorting","_bounds","_originInPixels","_originIsDirty","Sprite","Console","fullFrame","setFrame","setSprite","AnimateTilemap","animator","len","animatedTiles","delta","animatedTile","GID","tileGID","keyFrames","nextGID","tileID","CullTiles","LimitCulling","culling","rot","tx","ty","method","tileWidth","tileHeight","ceil","CullingMethod","LINEAR90DEG","DestroyRenderable","renderable","DrawImage","DrawTilemapLayer","draws","idx","tile","tiles","isAnimated","st","getTile","RenderableBoundsUpdate","RenderableUpdate","gameTime","pixelsWidth","pixelsHeight","Primitives","Tilemap","Rectangle","DrawRectangle","fillStyle","_css","fillRect","_width","_height","_color","magenta","metadata","orientation","objectLayers","layersSize","tileLayers","layerData","hasAnimatedTiles","getObjectsLayer","getTileLayer","TilemapAnimator","animatedSet","animID","getTileGID","hasGid","tileData","gid","TilemapLayer","Physics","sat","colliadables","obj","SAT","VECTORS","v","ARRAYS","points","normal","Number","MAX_VALUE","posA","posB","pointsA","pointsB","rangeA","pop","rangeB","offsetV","projectedOffset","flattenPointsOn","overlap","aInB","bInA","option1","option2","absOverlap","overlapN","reverse","shape","getPoints","normalsA","getNormals","normalsALen","normalsB","normalsBLen","isSeparatingAxis","overlapV","SATResponse","indexShapeA","indexShapeB","RenderingType","NEAREST","smoothing","imageRendering","_enable","drawCalls","currentContext","globalAlpha","CanvasInterpolation","crisp","types","msInterpolationMode","bicubic","CanvasListManager","gameParent","canvasContainer","firstFree","CanvasList","CanvasManager","CanvasSmoothing","getPrefix","renderType","setEnable","Smoothing","Interpolation","ColorNormUpdate","ColorUpdate","_r","_g","_b","_a","setRGBA","parsedValue","toColor","easingType","easingMode","easingArg","destinationColor","easer","by","CSSToColor","CSS_REGEX_PATTERN","regex","exec","parseInt","parseFloat","HexToColor","HEX_SHORTHAND_REGEX_PATTERN","HEX_REGEX_PATTERN","hex","m","IntToColor","ObjectToColor","ParseColor","SetColor","BeginDrawRender","clearRect","DrawRender","globalCompositeOperation","_setup","renderLayers","DrawRenderLayer","__enable","__isDirty","renderList","alpha","EndDrawRender","InitializeRender","features","getContext","RequestDepthSorting","RequestRenderableLayerIDChange","oldLayerID","toLayerID","oldLayer","findRenderableLayer","toLayer","removeAt","Canvas","RenderLayer","RenderLayerManagement","UI","layerName","__drawCalls","__renderers","RenderLayersManagement","id","hasAt","__renderLayersMap","layerIndex","SortDepth","DrawTransition","_state","FILL","_tColor","_behaviour","transparent","_startColor","_t","old","FADEIN","oldAlpha","setColor","inColor","IN","FADEOUT","outColor","OUT","FADEINOUT","TransitionSettings","fromAlpha","toAlpha","black","inDuration","outDuration","pauseDuration","timingInMethod","timingOutMethod","timingInArgument","timingOutArgument","setInDuration","setOutDuration","parameter","setInTiming","setOutTiming","TransitionState","WAIT","TranstionStyle","TransitionBehavior","UpdateTransition","setg","changeState","ease","State","Style","Behavior","AspectRatio","Square","Pillarbox","Letterbox","computeViewPort","currentAspectRatio","desiredAspect","ratioBox","w","inset","Debug","drawer","lineHeight","column","font","textColor","bgcolor","textShadow","disablePointTransform","strokeStyle","drawLine","desiredFps","textLine","xx","fillText","DrawUI","gui","sceneManager","clip","viewport","save","beginPath","backgroundColor","restore","InitializeUI","ratiobox","aspectRatio","resolution","viewportOffset","canvasWidth","canvasHeight","borderX","borderY","canvasRatioX","viewSize","pixelUnit","invertedResolution","UIDrawer","lastAlpha","lastColor","currentColor","currentTextAlign","fontname","isNumber","align","textAlign","scalex","scaley","halign","valign","xscale","yscale","rotate","skewX","skewY","tan","atan","frameNumber","scale_y","scale_x","outlineWidth","lineWidth","strokeRect","bb","outlineRectangle","UIResize","UpdateUIMatrix","ImageResource","imageUrl","complete","naturalWidth","naturalHeight","None","ResourceType","AnimationMachineResource","states","miliSeconds","_totalDuration","_frameRate","_secondsPerFrame","_wrapMode","Loop","atIndex","KeyFrame","SpritesheetKeyFrame","SpritesheetResource","mainImage","shouldUpdateFrameRate","verticalCount","horizontalCount","yy","addFrame","PingPong","AnimationUpdateFrameRate","frameRate","keyFramesLength","ComputeTotalDuration","dur","AnimationBase","TilemapResource","hasGID","ObjectType","Point","Ellipse","Polygon","Polyline","Tile","tileX","tileY","TileGID","u","umax","vmax","properties","TileLayerData","visible","TilemapMetadata","TilemapObject","objectType","Tileset","firstgid","margin","rows","collumns","gidCount","imageWidth","imageHeight","columns","ParseGID","FLIPPED_HORIZONTALLY_FLAG","FLIPPED_VERTICALLY_FLAG","FLIPPED_DIAGONALLY_FLAG","ParseGIDFlags","flipped_horizontally","flipped_vertically","flipped_diagonally","flip","flipped","global_tile_id","Boolean","flags","flipHorizontal","flipVertical","flipDiagonal","ParseObjectLayers","map","jsonLayer","objects","newLayer","objectsSize","ParseTileLayers","GetTilesetByGID","enconding","decodeToUint32","tilewidth","tileheight","opacity","animatedTilesGID","gidProp","ParseTiledJSON","tilelayers","objectlayers","ParseTilesConfig","tilesetTilesConfig","tileIndex","tileProperties","propertyContent","animationSize","tileid","ParseTileProperties","ParseTilesets","tileSets","jsonTileset","newTileSet","updateData","imagewidth","imageheight","tileproperties","SceneManager","_scenes","_currentSceneName","_changeScene","_transition","_isTransitioning","_clearCache","_scintillaLoading","onStartCallback","onLoadingCallback","onLoadingRenderCallback","onPreloadCallback","onPostloadCallback","onUpdateCallback","onRenderCallback","onDestroyCallback","_loadingPlaceHolder","sceneName","newScene","clearCache","scenes","SceneState","START","RUNNING","ScintillaLoadingScreen","logoData","scintillaLogo","_loaded","_finished","fromProgress","toProgress","nextScene","preloadingDone","setLoadingPos","_midPos","_barColor","_barPosX","_barPosY","_barPosW","drawFunc","imageExtra","outlineRect","loadingFunc","prog","wait","done","preloadDone","setSize","userData","setViewport","vp","loading","loadingGUI","next","setViewportByAspectRatio","ClearScene","CreateSceneFrom","PostPreloadingScene","sceneManger","PreUpdateScene","bothIsNull","totalQueuedFiles","PreloadSceneComplete","RenderScene","SetScene","SetupScene","TransitionBetweenScenes","transit","UpdateScene","startScene","DataList","elements","unique","child","unshift","childToErase","listToRemove","shift","items","otherList","clearOther","predicate","childA","childB","idx0","idx1","indexA","indexB","cA","cB","DataMap","_content","_size","entries","values","_contents","DataSet","Utils","Set","Map","List","MergeSort","array","begin","begin_right","left_size","right_size","msort","mid","DetectAudioFeatures","browser","audioFeatures","audioData","format","ogg","mp3","wav","webm","dolby","opus","canPlayType","m4a","manufacturer","edge","safari","navigator","userAgent","major","RegExp","$1","minor","$2","exception","DetectBrowser","firefox","opera","ie","chrome","blink","silk","opr","addons","InstallTrigger","HTMLElement","pushNotification","documentMode","StyleMedia","webstore","CSS","DetectFullscreen","fullscreenFeature","available","cancel","request","vendorsActiveFullscreen","tempElement","vendorsCancelFullscreen","DetectOS","info","mobile","desktop","os","windows","windowsPhone","macOS","linux","android","iOS","chromeOS","kindle","environment","node","electron","cordova","nodewebkit","cocoonJS","cocoonApp","ejecta","process","versions","nodeWebkit","isCocoonJS","CocoonJS","FeatureDetection","fileSystem","worker","pointerLock","vibration","SVGRect","implementation","hasFeature","webkitURL","mozURL","msURL","vibrate","webkitVibrate","mozVibrate","msVibrate","PlatformEnvironment","_userAgent","_osInfo","_browser","_features","_audio","_fullscreen","GameTime","gameLoop","_updateStep","fpsDesired","elapsed","UpdateStep","previousTime","requireFpsUpdate","currentFps","_nextFpsUpdate","_framesThisSecond","interpolation","timeStep","minTimeStep","accumalator","accumulatorMax","updateLast","updateAverageDelta","frameCounter","performance","fpsUpdate","accumalatorMethod","accumulator","accumalatorMax","deltaUpdate","accumulatorUpdateDelta","updateStart","stepSize","previousTimeTime","accumalatorReset","ComputeBounds","transformPoint","ComputeDelimiterPoint","anchor","coord","xa","ya","Transform","worldPosition","worldScale","globalBounds","UpdateBounds","cosSin","coords","UpdateTransform","parentTransform","setModelMatrix","UpdateTransformBounds","Base64Utils","decode","atob","bin","bytes","encode","btoa","filename","substring","lastIndexOf","removeExtension","getPath","getRootPath","l","getDirectoryName","dir","Validate","isClass","isNaN","String","DeepFreeze","propNames","Extend","copyIsArray","clone","deep","IsPlainObject","HasOwn","classToType","MakeImmutable","ObjectGetter","defaultValue","keys","ObjectGet"],"mappings":"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A;AACA;AACA;;;;;;;;;;;;ACNA;AACA;AACA;AACA;;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;ACdA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE;AACA,kFAAkF;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,cAAc;AACd,cAAc;AACd,cAAc;AACd,eAAe;AACf,eAAe;AACf,eAAe;AACf,gBAAgB;AAChB;;;;;;;;;;;;AC7DA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA,yCAAyC;;;;;;;;;;;;ACLzC,uBAAuB;AACvB;AACA;AACA;;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;;;;;;;;;;;ACPA;AACA;;;;;;;;;;;;ACDA;AACA,gJAAsE,mBAAmB,UAAU,EAAE,EAAE;AACvG,CAAC;;;;;;;;;;;;ACFD;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACLA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACJA;AACA;AACA;;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;;AAEA;AACA,yNAAkF,aAAa,EAAE;;AAEjG;AACA,qDAAqD,4BAA4B;AACjF;AACA;;;;;;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;;AAEA,8BAA8B,aAAa;;AAE3C;AACA;AACA;AACA;AACA;AACA,yCAAyC,oCAAoC;AAC7E,6CAA6C,oCAAoC;AACjF,KAAK,4BAA4B,oCAAoC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA;AACA,kCAAkC,2BAA2B;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;;;;;;ACpEA;AACA,UAAU;AACV;;;;;;;;;;;;ACFA;;;;;;;;;;;;ACAA;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD,CAAC;AACD;AACA,qBAAqB;AACrB;AACA,SAAS;AACT,GAAG,EAAE;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;;;;;;;;;;;ACxCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf;AACA;AACA;AACA;;;;;;;;;;;;ACfA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf;AACA;;;;;;;;;;;;ACfA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;AClBA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;ACNA;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;ACZA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AChBA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;ACNA,cAAc;;;;;;;;;;;;ACAd;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,qDAAqD,OAAO,EAAE;AAC9D;;;;;;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACPA;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA,OAAO,YAAY,cAAc;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,GAAG;AACR;AACA;;;;;;;;;;;;ACxBA;AACA;AACA;;AAEA;AACA,oEAAoE,iCAAiC;AACrG;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACJA;AACA;AACA,kDAAkD;AAClD;AACA,uCAAuC;AACvC;;;;;;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACLA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;;;;;;;;;;;;ACLA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACXA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,sBAAsB;AAChF,kFAAkF,wBAAwB;AAC1G;;;;;;;;;;;;ACRA;;;;;;;;;;;;ACAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC,cAAc;AACd,iBAAiB;AACjB;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;ACjCA;AACA;AACA,8BAA8B,mHAAsC;;;;;;;;;;;;ACFpE;AACA;AACA,kJAAuE,qHAA4C;;;;;;;;;;;;ACFnH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACRD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACRD;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACHD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACRD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACRD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACRD;AACA;AACA,8BAA8B,uHAA8C;;;;;;;;;;;;;;;;;;;;;;;;ACF5E;AACA;;AAEA;AACA;AACA,6BAA6B;AAC7B,cAAc;AACd;AACA,CAAC;AACD;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,UAAU;AACV,CAAC;;;;;;;;;;;;;AChBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB,sBAAsB,uBAAuB,WAAW,IAAI;AAC5D,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA,KAAK;AACL;AACA,sBAAsB,mCAAmC;AACzD,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,gCAAgC;AAChG;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0DAA0D,kBAAkB;;AAE5E;AACA;AACA;AACA,oBAAoB,uBAAuB;;AAE3C,oDAAoD,6BAA6B;;AAEjF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,0BAA0B,eAAe,EAAE;AAC3C,0BAA0B,gBAAgB;AAC1C,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,OAAO,QAAQ,iCAAiC;AACpG,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACzOA;;;;;;;;;;;;ACAA;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,eAAe,yBAAyB;AACxC;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClBA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;ACvLtC;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C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","file":"scintilla.dev.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Scintilla\"] = factory();\n\telse\n\t\troot[\"Scintilla\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./Scintilla.js\");\n","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/freeze\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/get-own-property-descriptor\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/get-own-property-names\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/get-prototype-of\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/seal\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();","\"use strict\";\n\nexports.__esModule = true;\n\nvar _getPrototypeOf = require(\"../core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _getOwnPropertyDescriptor = require(\"../core-js/object/get-own-property-descriptor\");\n\nvar _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = (0, _getOwnPropertyDescriptor2.default)(object, property);\n\n  if (desc === undefined) {\n    var parent = (0, _getPrototypeOf2.default)(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = require(\"../core-js/object/set-prototype-of\");\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = require(\"../core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _iterator = require(\"../core-js/symbol/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = require(\"../core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n","require('../../modules/es6.object.freeze');\nmodule.exports = require('../../modules/_core').Object.freeze;\n","require('../../modules/es6.object.get-own-property-descriptor');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function getOwnPropertyDescriptor(it, key) {\n  return $Object.getOwnPropertyDescriptor(it, key);\n};\n","require('../../modules/es6.object.get-own-property-names');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function getOwnPropertyNames(it) {\n  return $Object.getOwnPropertyNames(it);\n};\n","require('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/_core').Object.getPrototypeOf;\n","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n","require('../../modules/es6.object.seal');\nmodule.exports = require('../../modules/_core').Object.seal;\n","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;\n","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;\n","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');\n","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n","module.exports = function () { /* empty */ };\n","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","var core = module.exports = { version: '2.5.4' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n","module.exports = {};\n","module.exports = true;\n","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\nvar gOPN = require('./_object-gopn').f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n","exports.f = Object.getOwnPropertySymbols;\n","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n","exports.f = {}.propertyIsEnumerable;\n","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","module.exports = require('./_hide');\n","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n","var global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function (key) {\n  return store[key] || (store[key] = {});\n};\n","var toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n","exports.f = require('./_wks');\n","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","var $export = require('./_export');\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: require('./_object-create') });\n","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n","// 19.1.2.5 Object.freeze(O)\nvar isObject = require('./_is-object');\nvar meta = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('freeze', function ($freeze) {\n  return function freeze(it) {\n    return $freeze && isObject(it) ? $freeze(meta(it)) : it;\n  };\n});\n","// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\nvar toIObject = require('./_to-iobject');\nvar $getOwnPropertyDescriptor = require('./_object-gopd').f;\n\nrequire('./_object-sap')('getOwnPropertyDescriptor', function () {\n  return function getOwnPropertyDescriptor(it, key) {\n    return $getOwnPropertyDescriptor(toIObject(it), key);\n  };\n});\n","// 19.1.2.7 Object.getOwnPropertyNames(O)\nrequire('./_object-sap')('getOwnPropertyNames', function () {\n  return require('./_object-gopn-ext').f;\n});\n","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = require('./_to-object');\nvar $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return $getPrototypeOf(toObject(it));\n  };\n});\n","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n","// 19.1.2.17 Object.seal(O)\nvar isObject = require('./_is-object');\nvar meta = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('seal', function ($seal) {\n  return function seal(it) {\n    return $seal && isObject(it) ? $seal(meta(it)) : it;\n  };\n});\n","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', { setPrototypeOf: require('./_set-proto').set });\n","'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n","'use strict';\n// ECMAScript 6 symbols shim\nvar global = require('./_global');\nvar has = require('./_has');\nvar DESCRIPTORS = require('./_descriptors');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar META = require('./_meta').KEY;\nvar $fails = require('./_fails');\nvar shared = require('./_shared');\nvar setToStringTag = require('./_set-to-string-tag');\nvar uid = require('./_uid');\nvar wks = require('./_wks');\nvar wksExt = require('./_wks-ext');\nvar wksDefine = require('./_wks-define');\nvar enumKeys = require('./_enum-keys');\nvar isArray = require('./_is-array');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar createDesc = require('./_property-desc');\nvar _create = require('./_object-create');\nvar gOPNExt = require('./_object-gopn-ext');\nvar $GOPD = require('./_object-gopd');\nvar $DP = require('./_object-dp');\nvar $keys = require('./_object-keys');\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function';\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n","require('./_wks-define')('asyncIterator');\n","require('./_wks-define')('observable');\n","require('./es6.array.iterator');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar TO_STRING_TAG = require('./_wks')('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","\r\n\r\nconst Version = {\r\n\r\n\r\n    MAJOR: 0,\r\n    MINOR: 0,\r\n    REVISION: 1,\r\n    VERSION : '0.0.1'\r\n\r\n};\r\n\r\nexport default Version;","/**\r\n* @author       Tobias Beise Ulrich\r\n* @license      MIT\r\n*\r\n* @overview\r\n*\r\n* --- Scintilla ---\r\n*\r\n* v0.0.1\r\n*\r\n* tobiasbu.github.io\r\n*\r\n* Scintilla is simple 2D game engine for HTML5 games.\r\n* The first version is only for browsers based in canvas.\r\n*\r\n*/\r\n\r\nimport Defines from './Define';\r\nimport Extend from './utils/object/Extend';\r\n\r\n/**\r\n* @namespace scintilla\r\n*/\r\nvar scintilla = scintilla || {\r\n  \r\n  Environment : require('./system/PlatformEnvironment').default,\r\n  Core : require('./core'),\r\n\r\n  // DATA STRUCTURES\r\n  Structure : require('./structures'),\r\n\r\n  // RENDER\r\n  Render : require('./render'),\r\n  Color : require('./render/color/Color'),\r\n  Transition : require('./render/transition'),\r\n\r\n  // INPUT\r\n  KeyCode : require('./input/keyboard/KeyCode').default,\r\n  MouseButton : require('./input/mouse/MouseButton').default,\r\n  Input : require('./input'),\r\n\r\n  // MATH\r\n  Math : require('./math/MathUtils').default,\r\n  Random : require('./math/random/RandomGenerator').default,\r\n  BoundingBox : require('./math/BoundingBox').default,\r\n  Matrix3 : require('./math/Matrix3').default,\r\n  Vector2 : require('./math/Vector2').default,\r\n  Rect : require('./math/Rect').default,\r\n  Ease : require('./math/easing').Ease,\r\n\r\n  // ENTITIES\r\n  Scene : require('./scene/'),\r\n  Camera : require('./camera/Camera'),\r\n  Module : require('./modules'),\r\n  Entity : require('./entities'),\r\n  Pool : require('./entities/pool'),\r\n\r\n\r\n  // EVENTS\r\n  Event : require('./event'),\r\n\r\n  // AUDIO\r\n  Audio : require('./audio'),\r\n\r\n  // CACHE AND LOADER\r\n  Resource : require('./resources'),\r\n  Cache : require('./cache/CacheManager'),\r\n  AssetType : require('./loader/AssetsType'),\r\n  Loader : require('./loader'),\r\n  Game : require('./core/Game'),\r\n\r\n  // UTILITIES\r\n  Path : require('./utils/Path'),\r\n  WrapMode : require('./resources/animation/WrapMode').default\r\n};\r\n\r\nExtend(Defines, scintilla);\r\n\r\nmodule.exports = scintilla;\r\n\r\nglobal.scintilla = scintilla;","\r\nmodule.exports = {\r\n    Manager : require('./manager/AudioManager'),\r\n    AudioSource : require('./sound/AudioSource')\r\n};","import DataList from \"../../structures/List\";\r\n\r\nexport default class AudioManager {\r\n\r\n    constructor(game) {\r\n\r\n        this.game = game;\r\n\r\n        this._soundCache = game.system.cache.audio;\r\n        this._noAudio = game.config.audio.noAudio;\r\n        this._sounds = null;\r\n\r\n        //if (!this._noAudio) \r\n        this._sounds = new DataList();  \r\n        this._removalList = [];\r\n        this._system = null;\r\n        this.add = null;\r\n\r\n        this.volume = 1;\r\n        this.mute = false;\r\n        this.muteOnBlur = true;\r\n\r\n        if (this._noAudio === false) {\r\n            this.game.system.events.subscribe('blur', function () {\r\n\r\n                if (this.muteOnBlur === false)\r\n                    return;\r\n\r\n                this._system.onBlur();\r\n\r\n            }, this, 0);\r\n\r\n            this.game.system.events.subscribe('focus', function () {\r\n\r\n                if (this.muteOnBlur === false)\r\n                    return;\r\n\r\n                this._system.onFocus();\r\n\r\n            }, this, 0);\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    /*decode(tag, sound) {\r\n\r\n        sound = sound || null;\r\n\r\n        var soundData = this.game.cache.getAssetInfo('sounds', tag);\r\n\r\n        if (soundData) {\r\n\r\n            if (!soundData.decoded) {\r\n                soundData.isDecoding = true;\r\n\r\n                var self = this;\r\n\r\n                try {\r\n\r\n                    this.context.decodeAudioData(soundData.data, function (buffer) {\r\n\r\n                        if (buffer) {\r\n                            self.game.cache.soundDecoded(tag, buffer);\r\n                            console.log(\"decoded!\")\r\n                            //_this.onSoundDecode.dispatch(key, sound);\r\n                        }\r\n\r\n                    })\r\n\r\n                } catch (error) {\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n    }*/\r\n\r\n    /*add(tag, volume, loop, connect) {\r\n\r\n        if (volume === undefined) {\r\n            volume = 1;\r\n        }\r\n        if (loop === undefined) {\r\n            loop = false;\r\n        }\r\n        if (connect === undefined) {\r\n            connect = true;\r\n        } // connect to master volume\r\n\r\n        var sound = new scintilla.Sound(this.game, tag, volume, loop, connect);\r\n\r\n        _sounds.push(sound);\r\n\r\n        return sound;\r\n\r\n    }*/\r\n\r\n    at(index) {\r\n        if (this._noAudio)\r\n            return null;\r\n\r\n        return this._sounds.at(index);\r\n    }\r\n\r\n    /*get(sourceName) {\r\n\r\n    }*/\r\n\r\n    play(tag, volume, loop, name) {\r\n\r\n        if (this._noAudio) {\r\n            return null;\r\n        }\r\n\r\n        let sound = this.add(tag, volume, loop, name);\r\n\r\n        if (sound !== undefined && sound !== null) {\r\n            sound.play();\r\n            return sound;\r\n        }\r\n\r\n\r\n        return null;\r\n\r\n\r\n    }\r\n\r\n    playPersistent(tag, volume, loop, name) {\r\n\r\n        let sound = this.play(tag, volume, loop, name);\r\n\r\n        if (sound !== null)\r\n            sound.persistent = true;\r\n\r\n\r\n        return sound;\r\n\r\n    }\r\n\r\n    playOnce(tag, volume, loop, name) {\r\n        let sound = this.play(tag, volume, loop, name);\r\n\r\n        if (sound !== null)\r\n            sound.once = true;\r\n\r\n        return sound;\r\n    }\r\n\r\n    get(name) {\r\n\r\n        return this._sounds.each((source) => {\r\n\r\n            if (source.name === name) {\r\n                return source;\r\n            }\r\n\r\n        }) || null;\r\n\r\n    }\r\n\r\n\r\n    remove(sound) {\r\n\r\n        if (this._noAudio)\r\n            return false;\r\n\r\n        var i = _sounds.length;\r\n\r\n        while (i--) {\r\n            if (_sounds[i] === sound) {\r\n                _sounds[i].destroy(false);\r\n                _sounds.splice(i, 1);\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n\r\n    }\r\n\r\n\r\n    stopAll(destroy) {\r\n\r\n        if (this._noAudio) {\r\n            return;\r\n        }\r\n\r\n        if (destroy === undefined) destroy = false;\r\n\r\n        for (let i = 0; i < this._sounds.length; i++) {\r\n\r\n            let source = this._sounds.at(i);\r\n\r\n            if (source) {\r\n                source.stop();\r\n                if (destroy === true) {\r\n                    source.destroy();\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    pauseAll() {\r\n\r\n        if (this._noAudio) {\r\n            return;\r\n        }\r\n\r\n        for (var i = 0; i < _sounds.length; i++) {\r\n            if (_sounds[i]) {\r\n                _sounds[i].pause();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    resumeAll() {\r\n\r\n        if (this._noAudio) {\r\n            return;\r\n        }\r\n\r\n        for (var i = 0; i < _sounds.length; i++) {\r\n            if (_sounds[i]) {\r\n                _sounds[i].resume();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    destroy() {\r\n\r\n        if (this._system === null)\r\n            return;\r\n\r\n        this._system.destroy();\r\n\r\n        this.stopAll();\r\n\r\n        for (let i = 0; i < this._sounds.length; i++) {\r\n\r\n            let sound = this._sounds.at(i)\r\n\r\n            if (sound) {\r\n                sound.destroy();\r\n            }\r\n        }\r\n\r\n        this._sounds.clear();\r\n    }\r\n\r\n}","\r\n\r\nconst AudioSystemType = {\r\n    NOAUDIO : 0,\r\n    WEBAUDIO : 1,\r\n};\r\n\r\nObject.freeze(AudioSystemType);\r\n\r\nexport default AudioSystemType;","\r\nexport default function ClearAudioSources() {\r\n\r\n    if (this._noAudio === true)\r\n        return;\r\n\r\n    for (let i = 0; i < this._sounds.length; i++) {\r\n\r\n        let source = this._sounds.at(i);\r\n\r\n        if (source.persistent === false || source.persistent === undefined || source._pendingRemoval === true) {\r\n            source.stop();\r\n            source.destroy();\r\n            this._sounds.splice(i, 1);\r\n        }\r\n        \r\n    }\r\n\r\n    this._removalList.length = 0;\r\n\r\n}","import Environment from '../../../system/PlatformEnvironment';\r\nimport AudioManager from '../AudioManager';\r\nimport AddWebAudioSource from './webaudio/AddWebAudioSource';\r\nimport CreateWebAudioContext from './webaudio/CreateWebAudioContext';\r\nimport WebAudioSystem from './webaudio/WebAudioSystem';\r\n\r\nexport default function InitializeAudioSystemManager(game) {\r\n\r\n    let audioManager = new AudioManager(game);\r\n\r\n    if (!game.config.audio.noAudio) {\r\n\r\n        let webAudioSupported = Environment.supportAudio && Environment.supportWebAudio;\r\n\r\n        if (webAudioSupported && game.config.audio.webAudio) {\r\n\r\n            let system = new WebAudioSystem(audioManager);\r\n            CreateWebAudioContext(system);\r\n\r\n            audioManager._system = system;\r\n            audioManager.add = AddWebAudioSource.bind(audioManager);\r\n            \r\n        }\r\n    }\r\n\r\n    \r\n\r\n\r\n    return audioManager;\r\n\r\n}","import AudioSystemType from \"./AudioSystemType\";\r\nimport UpdateWebAudioSource from '../../sound/components/UpdateWebAudioSource';\r\n\r\nexport default function UpdateAudioManager() {\r\n    \r\n    if (this._noAudio)\r\n        return;\r\n\r\n\r\n    for (let i = 0; i < this._sounds.length; i++) {\r\n\r\n        let source = this._sounds.at(i);\r\n\r\n        if (this._system.type === AudioSystemType.WEBAUDIO) {\r\n            UpdateWebAudioSource(source);\r\n        }\r\n\r\n        if (source._requireRemoval) {\r\n            this._removalList.push(i);\r\n        }\r\n    }\r\n\r\n    // check removal\r\n    let removalSize = this._removalList.length;\r\n\r\n    if (removalSize === 0)\r\n        return;\r\n\r\n    this._sounds.eraseIndexedList(this._removalList);\r\n    this._removalList.length = 0;\r\n}","import WebAudioSource from \"../../../sound/WebAudioSource\";\r\nimport NullAudioSource from \"../../../sound/NullAudioSource\";\r\n\r\nexport default function AddWebAudioSource(tag, volume, loop, name) {\r\n\r\n    let soundResource = this._soundCache.get(tag);\r\n    let audioSource;\r\n\r\n    if (soundResource === undefined || soundResource === null) {\r\n        console.warn(\"AudioManager.add: Could not add audio source with tag: \\'\" + tag + \"\\.\");\r\n        audioSource = new NullAudioSource(this,null,tag);\r\n    } else {\r\n\r\n        audioSource = new WebAudioSource(this, soundResource, volume, loop, name);\r\n        \r\n    }\r\n\r\n    this._sounds.push(audioSource);\r\n\r\n    return audioSource;\r\n\r\n\r\n}","\r\nexport default function CreateWebAudioContext(audioSystem) {\r\n\r\n    \r\n    audioSystem.context = new AudioContext();\r\n\r\n    if (audioSystem.context.createGain === undefined) {\r\n        audioSystem.masterVolume = audioSystem.context.createGainNode();\r\n    } else {\r\n        audioSystem.masterVolume = audioSystem.context.createGain();\r\n    }\r\n\r\n    audioSystem.masterVolume.gain.value = 1;\r\n    audioSystem.masterVolume.connect(audioSystem.context.destination);\r\n\r\n    audioSystem.destination = audioSystem.masterVolume;\r\n\r\n    audioSystem.locked = audioSystem.context.state === 'suspended' && 'ontouchstart' in window;\r\n}","import CreateWebAudioContext from \"./CreateWebAudioContext\";\r\nimport AudioSystemType from \"../AudioSystemType\";\r\n\r\n\r\nexport default class WebAudioSystem {\r\n\r\n    constructor(manager) {\r\n        this.manager = manager;\r\n\r\n        this.context = null;\r\n        this.masterVolume = null;\r\n        this.destination = null;\r\n        this.locked = null;\r\n        this.type = AudioSystemType.WEBAUDIO;\r\n\r\n        \r\n\r\n        CreateWebAudioContext(this);\r\n    }\r\n\r\n    onFocus() {\r\n        this.context.resume();\r\n    }\r\n\r\n    onBlur() {\r\n        this.context.suspend();\r\n    }\r\n\r\n    destroy() {\r\n        this.destination = null;\r\n        this.masterVolume.disconnect();\r\n        this.masterVolume = null;\r\n        //this.context.suspend();\r\n        this.context.close();\r\n        this.context = null;\r\n    }\r\n\r\n}","\r\nexport default class AudioSource {\r\n\r\n    constructor(manager, resource, name) {\r\n\r\n        this.name = name || '';\r\n        this.manager = manager;\r\n        this._system = manager._system;\r\n        this.resource = resource;\r\n\r\n        this._volume = 1;\r\n        this.duration = 0;\r\n        this.startTime = 0;\r\n        this.currentTime = 0;\r\n        this.position = 0;\r\n        this.speed = 0; // rate\r\n\r\n        this.isPlaying = false;\r\n        this.isPaused = false;\r\n        this.mute = false;\r\n        this.loop = false;\r\n        this.persistent = false;\r\n\r\n        this._ended = false;\r\n        this.once = false;\r\n       \r\n        this._requireRemoval = false;\r\n    }\r\n\r\n    play() {\r\n\r\n        if (this.isPlaying)\r\n            return;\r\n\r\n        if (this.isPaused)\r\n            this.isPaused = false;\r\n        \r\n        this.isPlaying = true;\r\n       \r\n        return this;\r\n    }\r\n\r\n    pause() {\r\n        if (this.isPaused || !this.isPlaying) {\r\n            return this;\r\n        }\r\n\r\n        this.isPlaying = false;\r\n        this.isPaused = true;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    stop() {\r\n        if (!this.isPaused && !this.isPlaying) {\r\n            return this;\r\n        }\r\n\r\n        this.isPlaying = false;\r\n        this.isPaused = false;\r\n\r\n        return this;\r\n    }\r\n\r\n    destroy() {\r\n        this._requireRemoval = true;\r\n        this.isPlaying = false;\r\n        this.isPaused = false;\r\n        this.tag = undefined;\r\n    }\r\n\r\n\r\n}","import AudioSource from \"./AudioSource\";\r\n\r\nexport default class NullAudioSource extends AudioSource {\r\n\r\n    get volume() {\r\n        return 1;\r\n    }\r\n\r\n    set volume(value) {\r\n        this._volume = value;\r\n    }\r\n\r\n    setVolume(value) {\r\n        this._volume = value;\r\n        return this;\r\n    }\r\n\r\n    play() {\r\n        super.play();\r\n    }\r\n\r\n    pause() {\r\n    }\r\n\r\n    stop() {\r\n        super.stop();\r\n    }\r\n\r\n    destroy() {\r\n   \r\n        super.destroy();        \r\n    }\r\n\r\n}","import AudioSource from \"./AudioSource\";\r\nimport CreateBufferSource from \"./components/CreateBufferSource\";\r\nimport RemoveBufferSource from \"./components/RemoveBufferSource\";\r\nimport StartBufferSource from \"./components/StartBufferSource\";\r\n\r\n\r\nexport default class WebAudioSource extends AudioSource {\r\n\r\n    constructor(manager, resource, volume, loop, name) {\r\n\r\n        super(manager, resource, name);\r\n\r\n\r\n        this.buffer = null;\r\n        this.duration = resource.duration;\r\n        this.gainNode = this._system.context.createGain();\r\n        this.gainNode.connect(this._system.destination);\r\n\r\n        this.volume = volume || 1;\r\n        this.loop = loop || false;\r\n\r\n\r\n\r\n    }\r\n\r\n    get volume() {\r\n        return this.gainNode.gain.value;\r\n    }\r\n\r\n    set volume(value) {\r\n        if (this.gainNode)\r\n            this.gainNode.gain.setValueAtTime(value, 0);\r\n\r\n        this._volume = value;\r\n    }\r\n\r\n    setVolume(value) {\r\n        this._volume = value;\r\n        return this;\r\n    }\r\n\r\n    play() {\r\n        super.play();\r\n\r\n        RemoveBufferSource(this);\r\n        this.buffer = CreateBufferSource(this);\r\n        StartBufferSource(this);\r\n    }\r\n\r\n    pause() {\r\n\r\n    }\r\n\r\n    stop() {\r\n        super.stop();\r\n\r\n        RemoveBufferSource(this);\r\n\r\n        return this;\r\n    }\r\n\r\n    destroy() {\r\n        \r\n        RemoveBufferSource(this);\r\n\r\n        this.buffer = null;\r\n        \r\n        if (this.gainNode !== null) {\r\n            this.gainNode.disconnect();\r\n            this.gainNode = null;\r\n        }\r\n        \r\n        super.destroy();\r\n\r\n        \r\n    }\r\n\r\n}","\r\nexport default function CreateBufferSource(webAudioSource) {\r\n\r\n    let self = webAudioSource;\r\n    let bufferSource = webAudioSource._system.context.createBufferSource();\r\n\r\n    bufferSource.buffer = webAudioSource.resource;\r\n\r\n    bufferSource.connect(webAudioSource.gainNode);\r\n\r\n    bufferSource.onended = function(event) {\r\n        if (event.target === self.buffer)\r\n        {\r\n                // sound ended\r\n                self._ended = true;     \r\n        }\r\n    };\r\n\r\n    return bufferSource;\r\n}","\r\nexport default function RemoveBufferSource(webAudioSource) {\r\n\r\n    if (webAudioSource.buffer) {\r\n        webAudioSource.buffer.stop();\r\n        webAudioSource.buffer.disconnect();\r\n        webAudioSource.buffer = null;\r\n    }\r\n\r\n    webAudioSource.playTime = 0;\r\n    webAudioSource.startTime = 0;\r\n}","\r\nexport default function StartBufferSource(webAudioSource, position) {\r\n\r\n    if (position === undefined) position = 0;\r\n\r\n    let start = webAudioSource._system.context.currentTime;\r\n    let duration = webAudioSource.duration;\r\n    let delay = 0;\r\n    webAudioSource.playTime = start - position;\r\n    webAudioSource.startTime = start;\r\n\r\n    let buffer = webAudioSource.buffer;\r\n\r\n    if (buffer.loop !== undefined) { \r\n        buffer.loop = webAudioSource.loop;\r\n    }\r\n       \r\n\r\n    buffer.start(Math.max(0, start), Math.max(0, delay), Math.max(0, duration));\r\n    webAudioSource.gainNode.gain.value = webAudioSource._volume;\r\n}","import StartBufferSource from \"./StartBufferSource\";\r\nimport CreateBufferSource from \"./CreateBufferSource\";\r\n\r\nexport default function UpdateWebAudioSource(source) {\r\n\r\n    if (source._ended === true) {\r\n\r\n        source._ended = false;\r\n\r\n        \r\n\r\n        if (!source.loop) {\r\n            source.stop();\r\n\r\n        } else {\r\n            source.playTime = source.startTime = 0;\r\n\r\n           \r\n\r\n            //let buffer = webAudioSource.buffer;\r\n\r\n            source.buffer = CreateBufferSource(source);\r\n            StartBufferSource(source,0);\r\n                \r\n            \r\n\r\n        }\r\n\r\n        if (source.once) {\r\n            source.destroy();\r\n            source._pendingRemoval = true;\r\n        }\r\n    }\r\n\r\n}","import DataMap from \"../structures/Map\";\r\n\r\nexport default class Cache {\r\n\r\n    constructor(wrapperFunction) {\r\n        this.resources = new DataMap();\r\n        this.adderWrapper = wrapperFunction || undefined;\r\n    }\r\n\r\n    add(tag, asset) {\r\n\r\n        let resource = asset;\r\n\r\n        if (this.adderWrapper !== undefined) {\r\n            resource = this.adderWrapper(tag, asset);\r\n            if (resource === null)\r\n                return null;\r\n        }\r\n\r\n        this.resources.insert(tag, resource);\r\n\r\n        return resource;\r\n    }\r\n\r\n    has(tag) {\r\n        return this.resources.has(tag);\r\n    }\r\n\r\n    get(tag) {\r\n        return this.resources.get(tag);\r\n    }\r\n\r\n    erase(tag) {\r\n        let res = this.resources.erase(tag);\r\n        res = null;\r\n        return this;\r\n    }\r\n\r\n    clear() {\r\n        this.resources.clear();\r\n    }\r\n\r\n    destroy() {\r\n        this.resources.clear();\r\n        this.resources = null;\r\n    }\r\n\r\n}","import System from \"../core/system/System\";\r\nimport Cache from \"./Cache\";\r\nimport ImageResource from \"../resources/ImageResource\";\r\nimport TilemapResource from \"../resources/tilemap/TilemapResource\";\r\nimport SpritesheetResource from \"../resources/animation/SpritesheetResource\";\r\nimport AnimationMachineResource from \"../resources/animation/AnimationMachineResource\";\r\nimport AssetsType from \"../loader/AssetsType\";\r\nimport Validate from \"../utils/Validate\";\r\n\r\n\r\nconst CacheTypes = [\r\n  'image',\r\n  'json',\r\n  'audio',\r\n  'text',\r\n  'tilemap',\r\n  'animation',\r\n  'animMachine'\r\n];\r\n\r\n/**\r\n* Cache manager - holds file data\r\n* @class Cache\r\n* @constructor\r\n*/\r\nexport default class CacheManager {\r\n\r\nconstructor(game) {\r\n  this.game = game;\r\n\r\n\r\n  let self = this;\r\n\r\n  this.image = new Cache((tag, data) => {\r\n    return new ImageResource(tag, data);\r\n  });\r\n\r\n  this.pattern = new Cache();\r\n  this.pattern.create = function(imageTag, patternParameter) {\r\n    \r\n      let img = self.image.get(imageTag);\r\n\r\n      if (img === null)\r\n        return null;\r\n\r\n      if (!Validate.isString(patternParameter))\r\n        patternParameter = 'repeat';\r\n  \r\n      const pattern = game.system.render.context.createPattern(img.data, patternParameter);\r\n      return this.add(imageTag, {data:pattern, image:img});\r\n  }\r\n  \r\n  this.tilemap = new Cache();\r\n\r\n  /*\r\n  /// TODO\r\n  this.tileset = new Cache((tag, data) => {\r\n    return new TilesetResource(tag, data, self);\r\n  });*/\r\n\r\n  this.json = new Cache();\r\n  this.text = new Cache();\r\n  this.audio = new Cache();\r\n\r\n  this.animation = new Cache((tag, data) => {\r\n\r\n    let resource;\r\n\r\n    if (data.type ===  AssetsType.spritesheet) {\r\n      let image = self.image.get(data.imageTag);\r\n\r\n      resource = new SpritesheetResource(tag, image);\r\n      resource.addStrip(data.x, data.y, data.frameWidth, data.frameHeight, data.numberOfImages, data.framesPerRow, data.spacing);\r\n      if (data.duration !== undefined)\r\n        resource.duration = data.duration;\r\n    }\r\n\r\n    return resource;\r\n\r\n  });\r\n\r\n  this.animMachine = new Cache((tag, data) => {\r\n    \r\n    let resource = new AnimationMachineResource(tag);\r\n\r\n    if (data.animations !== undefined) {\r\n\r\n        for (let i = 0; i < data.animations.length; i++) {\r\n\r\n            let anim = self.animation.get(data.animations[i]);\r\n            resource.add(data.animations[i], anim);          \r\n        }\r\n    }\r\n\r\n    return resource;\r\n\r\n  });  \r\n\r\n\r\n}\r\n\r\n\r\n  hasCache(cacheType) {\r\n    return (typeof CacheTypes[cacheType] !== undefined);\r\n  }\r\n\r\n  getAsset(cacheType, tag) { // return the cache container\r\n\r\n    if (!this.hasCache(cacheType))\r\n      return null;\r\n\r\n    return this[cacheType].get(tag);\r\n\r\n  }\r\n\r\n  clear() {\r\n\r\n    for (let i = 0; i < CacheTypes.length; i++) {\r\n      this[props[i]].clear();\r\n    }\r\n\r\n  }\r\n\r\n  destroy() {\r\n\r\n    for (let i = 0; i < CacheTypes.length; i++) {\r\n      this[props[i]].destroy();\r\n      this[props[i]] = null;\r\n    }\r\n\r\n    this.game = null;\r\n  }\r\n\r\n}\r\n\r\nSystem.register('Cache', CacheManager, 'cache');","import System from '../core/system/System';\r\nimport BoundingBox from '../math/BoundingBox';\r\nimport Transform  from '../transform/Transform';\r\nimport Color from '../render/color/Color';\r\nimport MathUtils from '../math/MathUtils';\r\nimport Vector2 from '../math/Vector2';\r\nimport ResizeCamera from './ResizeCamera';\r\nimport Renderable from '../modules/renderables/Renderable';\r\n\r\n\r\nexport default class Camera {\r\n  \r\n  constructor(game) {\r\n\r\n    this.game = game;\r\n    this.canvas = null;\r\n\r\n   \r\n    this.width = game.config.camera.width;\r\n    this.height = game.config.camera.height;\r\n\r\n\r\n    this.bounds = new BoundingBox(); // render bounds\r\n    this.viewBounds = new BoundingBox(0,0, this.width, this.height); // global bounds\r\n    this._transform = new Transform();\r\n   \r\n    this._pixelUnit = {x:1,y:1};    \r\n    this._aspectRatio = 1;\r\n\r\n    this._backgroundColor = new Color(); //.rgbToHex(0,0,0);\r\n    this._roundPixels = game.config.roundPixels;\r\n\r\n  }\r\n\r\n  get position() { \r\n    return this._transform.position; \r\n  }\r\n  set position(value) { \r\n    this._transform.position.x = value.x;\r\n    this._transform.position.y = value.y; \r\n    this._transform._isDirty = true;\r\n    return this;\r\n  }\r\n  get x() {return this._transform.position.x;}\r\n  set x(value) { \r\n    this._transform.position.x = value; \r\n    this._transform._isDirty = true;\r\n    return this;\r\n  }\r\n  \r\n  get y() {return this._transform.position.y;}\r\n  set y(value) { \r\n    this._transform.position.y = value; \r\n    this._transform._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  get scale() { return this._transform.scale.x; }\r\n  set scale(value) { \r\n    this._transform.scale.x = value; \r\n    this._transform._isDirty = true; \r\n    return this;\r\n  }\r\n\r\n  get angle() { return this._transform.angle; }\r\n  set angle(value) { \r\n    this._transform.angle = value; \r\n    this._transform.rotation = value * MathUtils.toRadian;\r\n    this._transform._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  get origin() { return this._transform.origin; }\r\n  set origin(value) {\r\n    this._transform.x = value.x;\r\n    this._transform.y = value.y;\r\n    this._transform._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  get rotation() { return this._transform.rotation; }\r\n\r\n  set backgroundColor(color) {\r\n    if (color === undefined) { color = 'rgba(0,0,0,0)'; }\r\n    this._backgroundColor = color;\r\n    return this;\r\n  }\r\n  get backgroundColor() {\r\n    return this._backgroundColor = color;\r\n  }\r\n\r\n  set roundPixels(flag) {\r\n    this._roundPixels = flag;\r\n    this._transform._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  get roundPixels() {\r\n    return this._roundPixels;\r\n  }\r\n\r\n  get size() {\r\n    return {x:this.width, y:this.height};\r\n  }\r\n\r\n  centerView() {\r\n    this.x = this.width * 0.5;\r\n    this.y = this.height * 0.5;\r\n    this._transform._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  centerToEntity(entity) {\r\n    this.x = entity.position.x;\r\n    this.y = entity.position.y;\r\n    this._transform._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  setBackgroundColor(r, g, b, a) {\r\n    if (r === undefined) { g = 0; }\r\n    if (g === undefined) { g = 0; }\r\n    if (b === undefined) { b = 0; }\r\n    if (a === undefined) { a = 1; }\r\n    this._backgroundColor = Color.rgba(r,g,b,a);\r\n    return this;\r\n  }\r\n\r\n  setSize(width, height) {\r\n    ResizeCamera(this, this.canvas, width, height);\r\n    this._transform._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  setView(x, y, width, height) {\r\n    this._transform.position.x = x;\r\n    this._transform.position.y = y;\r\n    ResizeCamera(width, height);\r\n    this._transform._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  reset() {\r\n    this._transform.reset();\r\n  }\r\n\r\n  isCulled(entity) {\r\n\r\n      if (entity === undefined || entity === null)\r\n        return false;\r\n\r\n      if (entity instanceof Renderable) {\r\n        return this.bounds.intersects(entity.bounds);\r\n      } else {\r\n        let render = entity.modules.get('render');\r\n        if (render !== null || render !== undefined) {\r\n          return this.bounds.intersects(render.bounds);\r\n        } else {\r\n          return this.bounds.contains(entity.x, entity.y);\r\n        }\r\n      }\r\n\r\n  }\r\n\r\n}\r\n\r\nSystem.register('Camera', Camera, 'camera', function() {\r\n  this.canvas = this.game.system.render.canvas;\r\n  ResizeCamera(this, this.canvas, this.width, this.height);\r\n});","\r\nexport default function ResizeCamera(camera, canvas, width, height) {\r\n\r\n    camera.width = width;\r\n    camera.height = height;\r\n    camera._aspectRatio = width / height;\r\n    camera._pixelUnit.x = canvas.width / camera.width;\r\n    camera._pixelUnit.y = canvas.height / camera.height;\r\n}","import UpdateBounds from \"../transform/UpdateBounds\";\r\nimport ComputeDelimiterPoint from \"../transform/ComputeDelimiterPoint\";\r\nimport ComputeBounds from \"../transform/ComputeBounds\";\r\nimport MathUtils from \"../math/MathUtils\";\r\n\r\n\r\nexport default function UpdateCamera(camera, canvas) {\r\n    \r\n  if (camera._transform._isDirty === false)\r\n    return;\r\n\r\n  let t = camera._transform;\r\n\r\n\r\n  if (t.rotation != t._oldRotation) {\r\n    t._oldRotation = t.rotation;\r\n    t._cosSin.y = Math.sin(t.rotation);\r\n    t._cosSin.x = Math.cos(t.rotation);\r\n  }\r\n\r\n  let origin = {\r\n    x: camera.width * t.origin.x,\r\n    y: camera.height * t.origin.y\r\n  };\r\n\r\n  let pos = {x: (t.position.x + origin.x),\r\n             y: (t.position.y + origin.y)};\r\n\r\n  if (camera._roundPixels) {\r\n    pos.x = MathUtils.round(pos.x);\r\n    pos.y = MathUtils.round(pos.y);\r\n  }\r\n\r\n  // update camera view\r\n  camera.viewBounds\r\n  .setMin(pos.x, pos.y)\r\n  .setMax(pos.x + camera.width, pos.y + camera.height);\r\n\r\n  pos.x = -pos.x;\r\n  pos.y = -pos.y;\r\n\r\n  // compute the basic rotation\r\n  t.matrix.setIdentity()\r\n  .scale(camera._pixelUnit.x, camera._pixelUnit.y) // resolution\r\n  .translate(pos.x , pos.y)\r\n  .scale(t.scale.x, t.scale.x);\r\n  \r\n  // bounds should not be rotated\r\n  ComputeBounds(\r\n    camera.bounds, camera._transform, \r\n    camera.width, camera.height, \r\n    pos);\r\n\r\n    t.matrix\r\n    .radianRotate(t._cosSin.x, t._cosSin.y)\r\n    .translate(-origin.x, -origin.y);\r\n\r\n  \r\n\r\n}","\r\nimport ObjectGet from '../utils/object/ObjectGet';\r\n\r\nexport default class Config {\r\n\r\n    constructor(config)\r\n    {\r\n        if (config === undefined) \r\n            config = {};\r\n\r\n        var callback = ObjectGet.value;\r\n        var callback_2 = ObjectGet.propertyValue;\r\n\r\n        // view and canvas\r\n        this.width = callback(config, 'width', 640);\r\n        this.height = callback(config, 'height', 480);\r\n        this.parent = callback(config, 'parent', null);\r\n        this.debug =  callback(config, 'debug', false);\r\n\r\n        // render\r\n        this.pixelated = callback(config, 'pixelated', false);\r\n        this.doubleBuffer = callback(config, 'doubleBuffer', true);\r\n        this.roundPixels = callback(config, 'roundPixels', false);\r\n        this.floorTiles = callback(config, 'floorTiles', false);\r\n        this.autoResize = callback(config, 'autoResize', false);\r\n\r\n        // loader\r\n        this.loader = {\r\n            baseURL : callback_2(config, 'loader.baseURL', ''),\r\n            path : callback_2(config, 'loader.path', ''),\r\n            responseType : callback_2(config, 'loader.responseType', ''),\r\n            async : callback_2(config, 'loader.async', true)\r\n        };\r\n\r\n        this.audio = {\r\n            noAudio : callback_2(config, 'audio.noAudio', false),\r\n            context : callback_2(config, 'audio.context', null),\r\n            webAudio : callback_2(config, 'audio.webAudio', true),\r\n        };\r\n\r\n        let createKeyboard = callback(config, 'keyboard', true);\r\n\r\n        if (createKeyboard === null) {\r\n            createKeyboard = false;\r\n        }\r\n\r\n        // input\r\n        this.keyboard = {\r\n            active : callback_2(config, 'keyboard.active', createKeyboard),\r\n            enable : callback_2(config, 'keyboard.enable', true),\r\n            target: callback_2(config, 'keyboard.target', window),\r\n        };\r\n\r\n        let createMouse = callback(config, 'mouse', true);\r\n\r\n        if (createMouse === null) {\r\n            createMouse = false;\r\n        }\r\n\r\n        this.mouse = {\r\n            active : callback_2(config, 'mouse.active', createMouse),\r\n            enable : callback_2(config, 'mouse.enable', true),\r\n            target: callback_2(config, 'mouse.target', null),\r\n        };\r\n\r\n        let disableContextMenu = callback(config, 'disableContextMenu', null);\r\n\r\n        if (disableContextMenu === null) {\r\n            disableContextMenu = callback_2(config, 'contextMenu.disable', false);\r\n        }\r\n\r\n        this.contextMenu = {\r\n            disable : disableContextMenu,\r\n            target : callback_2(config, 'contextMenu.target', null)\r\n        };\r\n\r\n\r\n        this.fps = callback(config, 'fps', 60);\r\n        this.time = {\r\n            timeoutMode : callback_2(config, 'time.timeOutMode', false),\r\n        };\r\n\r\n        this.camera = {\r\n            width : callback_2(config, 'camera.width', this.width),\r\n            height : callback_2(config, 'camera.height', this.height)\r\n        };\r\n\r\n       \r\n        /* this.loaderEnableParallel = GetValue(config, 'loader.enableParallel', true);\r\n            this.loaderMaxParallelDownloads = GetValue(config, 'loader.maxParallelDownloads', 4);\r\n            this.loaderCrossOrigin = GetValue(config, 'loader.crossOrigin', undefined);\r\n            \r\n            this.loaderUser = GetValue(config, 'loader.user', '');\r\n            this.loaderPassword = GetValue(config, 'loader.password', '');\r\n    this.loaderTimeout = GetValue(config, 'loader.timeout', 0);*/\r\n\r\n\r\n    }\r\n\r\n}","\r\nimport Config from './Config';\r\nimport GameInitialize from './GameInitialize';\r\n\r\n/**\r\n* Main class of engine. Holds all main data.\r\n* @class Game\r\n* @constructor\r\n*/\r\nexport default class Game {\r\n\r\n  /**\r\n  * @property {string|HTMLElement} parent - The Games DOM parent.\r\n  * @default\r\n  */\r\n constructor() {\r\n   \r\n  this.parent = 'body';\r\n  this.width = 800;\r\n  this.height = 600;\r\n\r\n  // object\r\n  this.config = new Config(config);\r\n\r\n  // boolean\r\n  this.systemInited = false;\r\n  this.isRunning = false;\r\n  this.debugMode = false;\r\n\r\n  // float\r\n  this.timeMode = false;\r\n\r\n\r\n  //objects\r\n  this.debug = null;\r\n  //this.scene = null;\r\n  this.sound = null;\r\n  this.input = null;\r\n  this.pool = null;\r\n  this.systems =  null;\r\n  this.context = null;\r\n  this.time = null;\r\n  this.events = null;\r\n\r\n  this.parseConfiguration(this.config);\r\n\r\n  GameInitialize(this);\r\n }\r\n\r\n  parseConfiguration(config) {\r\n\r\n    //this.config = config;\r\n\r\n    if (config['debug'])\r\n    {\r\n        this.debugMode = config['debug'];\r\n\r\n    }\r\n\r\n    if (config['width'])\r\n    {\r\n        this.width = config['width'];\r\n    }\r\n\r\n    if (config['height'])\r\n    {\r\n        this.height = config['height'];\r\n    }\r\n\r\n    if (config['parent'])\r\n    {\r\n        this.parent = config['parent'];\r\n    }\r\n\r\n  }\r\n\r\n\r\n  destroy() {\r\n\r\n    this.physics.destroy();\r\n    this.sound.destroy();\r\n    this.input.destroy();\r\n\r\n    this.debug = null;\r\n    this.cache = null;\r\n    this.load = null;\r\n    this.canvas = null;\r\n    this.scene = null;\r\n    this.sound = null;\r\n    this.draw = null;\r\n    this.universe = null;\r\n    this.world = null;\r\n    this.input = null;\r\n    this.time = null;\r\n    this.render = null;\r\n    this.component = null;\r\n    this.instance = null;\r\n    this.animationCache = null;\r\n    this.updateGameMethod = null;\r\n\r\n\r\n  }\r\n\r\n}\r\n\r\n//scintilla.Game.prototype.constructor = scintilla.Game;\r\n\r\n\r\nmodule.exports = Game;","import Physics from \"../physics/physics\";\r\nimport Input from \"../input/Input\";\r\nimport GameTime from \"../time/GameTime\";\r\nimport InitializeSystems from \"./system/components/InitializeSystems\";\r\nimport AppendDOM from \"../dom/AppendDOM\";\r\nimport InitializeAudioSystemManager from \"../audio/manager/components/InitializeAudioSystemManager\";\r\nimport InitializeRender from \"../render/components/InitializeRender\";\r\nimport Random from \"../math/random/RandomGenerator\";\r\n\r\n  /**\r\n    * Initialize engine\r\n    *\r\n    * @method Game#init()\r\n    * @protected\r\n    */\r\nexport default function GameInitialize(game) {\r\n\r\n    if (game.systemInited)\r\n        return;\r\n\r\n    let render = InitializeRender(game, game.config);\r\n \r\n    let canvas = render.canvas;\r\n\r\n    if (render.doubleBuffer)\r\n    {\r\n        canvas = render._domCanvas;\r\n    }\r\n\r\n    AppendDOM(canvas, game.config.parent);\r\n\r\n    // Core system\r\n    game.physics = new Physics(game);\r\n    game.input = new Input(game);\r\n    game.time = new GameTime(game);\r\n\r\n    Random.reset([(Date.now() * Math.random()).toString()]);\r\n  \r\n\r\n    InitializeSystems(game, render);\r\n\r\n    game.audio = InitializeAudioSystemManager(game);\r\n\r\n    game.input.init();\r\n    game.time.init(game.system.loop);\r\n    game.systemInited = true;\r\n    game.isRunning = true;\r\n\r\n    \r\n    Object.seal(game);\r\n\r\n    console.log(\"scintilla started!\");\r\n\r\n}","import System from \"./system/System\";\r\nimport RequestAnimationFrame from \"../dom/RequestAnimationFrame\";\r\nimport UpdateStep from \"../time/UpdateStep\";\r\nimport UpdateCamera from \"../camera/UpdateCamera\";\r\nimport BeginDrawRender from \"../render/components/BeginDrawRender\";\r\nimport DrawRender from \"../render/components/DrawRender\";\r\nimport EndDrawRender from \"../render/components/EndDrawRender\";\r\nimport PreUpdateScene from \"../scene/components/PreUpdateScene\";\r\nimport UpdateScene from \"../scene/components/UpdateScene\";\r\nimport DrawUI from \"../render/ui/DrawUI\";\r\nimport DrawTransition from \"../render/transition/DrawTransition\";\r\nimport UpdateTransition from \"../render/transition/UpdateTransition\";\r\nimport UpdateAudioManager from \"../audio/manager/components/UpdateAudioManager\";\r\n\r\n\r\n\r\n/*\r\n*\r\n* core game loop system\r\n*\r\n* @class GameLoop\r\n* @protected\r\n*/\r\nexport default class GameLoop {\r\n\r\n    constructor(game, system) {\r\n        this.game = game;\r\n        this.system = system;\r\n        this.updateStep = new UpdateStep(game, game.config);\r\n        this.entityUpdateList = null;\r\n        this.currentScene = null;\r\n        this.camera = null;\r\n        this.canvas = null;\r\n        this.renderer = null;\r\n    }\r\n\r\n    loop(deltaTime, timeStamp) {\r\n\r\n         // Core Managers\r\n\r\n        UpdateAudioManager.call(this.game.audio);\r\n\r\n         this.game.input.update(timeStamp);\r\n        \r\n         UpdateTransition(this.game.system.transition, deltaTime);\r\n\r\n         // Entities and Scene Update\r\n\r\n        this.currentScene = this.game.scene.currentScene;\r\n\r\n        let shouldUpdate = (this.currentScene != null && this.currentScene !== undefined);\r\n        //let changeScene = (this.game.scene._changeScene != null || this.game.scene._changeScene !== undefined)\r\n\r\n\r\n\r\n        //if (changeScene)\r\n        PreUpdateScene(this.game.scene);\r\n        //this.game.scene.preUpdate();\r\n        \r\n\r\n        \r\n\r\n        if (shouldUpdate)\r\n        {\r\n         \r\n            this.entityUpdateList.beginUpdate(deltaTime);\r\n\r\n            let lastCameraState = this.camera._transform._isDirty;\r\n\r\n            UpdateScene(this.game.scene, deltaTime);\r\n            /*if (this.game.scene._setup)\r\n            {\r\n                // global scene update\r\n                if (this.currentScene.update !== undefined)\r\n                    this.currentScene.update(deltaTime);\r\n            } else {\r\n                if (this.currentScene.loading !== undefined)\r\n                    this.currentScene.loading(deltaTime);\r\n            }*/\r\n\r\n            UpdateCamera(this.camera, this.canvas);\r\n\r\n            //this.entityUpdateList.transformUpdate(this.camera);\r\n            \r\n            this.entityUpdateList.update(deltaTime);\r\n\r\n            \r\n            if (lastCameraState)\r\n                this.camera._transform._isDirty = false;\r\n\r\n           \r\n\r\n        }\r\n\r\n    }\r\n\r\n    render(deltaTime) {\r\n\r\n        BeginDrawRender(this.renderer);\r\n\r\n        if (this.currentScene !== null || this.currentScene !== undefined)\r\n        {\r\n            // Scenes\r\n            DrawRender(this.renderer, this.camera, deltaTime);\r\n\r\n            // User Interface\r\n            DrawUI(this.system.ui, this.game.scene);\r\n\r\n        }\r\n\r\n        EndDrawRender(this.system.render);\r\n\r\n        // Transition\r\n        this.renderer.context.setTransform(1, 0, 0, 1, 0, 0);\r\n\r\n        DrawTransition(this.system.transition, this.renderer.canvas, this.renderer.context);\r\n\r\n        // Debug\r\n        if (this.system.ui.debug !== null && this.system.ui.debug !== undefined) {\r\n            this.system.ui.debug.test();\r\n        }\r\n\r\n        if (this.renderer.doubleBuffer) {\r\n            this.renderer._domContext.drawImage(this.renderer.canvas, 0, 0); \r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nSystem.register('GameLoop', GameLoop, 'loop', function() {\r\n    this.updateStep.init(this);\r\n    this.entityUpdateList = this.game.system.entityList;\r\n    this.camera = this.system.camera;\r\n    this.canvas = this.system.render.canvas;\r\n    this.renderer = this.system.render;\r\n});","\r\nmodule.exports = {\r\n    Config : require('./Config'),\r\n    System : require('./system/System'),\r\n    SceneSystem : require('./system/SceneSystem'),\r\n    GameLoop : require('./GameLoop')\r\n}","\r\n\r\nconst SceneSystem = [\r\n    'Cache',\r\n    'Loader',\r\n    'EntityFactory',\r\n    'EntityHierarchy',\r\n    'Camera',\r\n    'SceneManager',\r\n    'UserInterface',\r\n    'Transition',\r\n    'EventManager',\r\n    'PoolManager'\r\n];\r\n\r\nObject.freeze(SceneSystem);\r\n\r\nexport default SceneSystem;\r\n","import SceneSystem from \"./SceneSystem\";\r\n\r\n\r\nexport var GameSystems = {};\r\n\r\nconst System = {\r\n\r\n    /** @inner \r\n     * Register a game system.\r\n     * \r\n     * @param {String} key Long description of system\r\n     * @param {Class} system The system class\r\n     * @param {String} systemName The short description name of the system\r\n     * @param {Function} [initFunc] [optional] Initialize function for the system.\r\n     */\r\n    register(key, system, systemName, initFunc)\r\n    {\r\n        GameSystems[key] = {\r\n            name: systemName, \r\n            system: system, \r\n            init : initFunc\r\n        };\r\n    }\r\n    \r\n}\r\n\r\nexport default System;\r\n","import { GameSystems } from \"../System\";\r\nimport RequestDepthSorting from \"../../../render/components/RequestDepthSorting\";\r\nimport RequestRenderableLayerIDChange from \"../../../render/components/RequestRenderableLayerIDChange\";\r\nimport RegisterFocusChangeEvent from \"../../../event/engine/RegisterFocusChangeEvent\";\r\n\r\nexport default function InitializeSystems(game, render) {\r\n    \r\n    let systems = {};\r\n \r\n    // register all game systems\r\n    for (let property in GameSystems) {\r\n\r\n        let registered = GameSystems[property];\r\n        systems[registered.name] = new registered.system(game, systems);\r\n    }\r\n\r\n    // set core system to game class\r\n    game.system = systems;\r\n    game.scene = systems.scene;\r\n    game.render = render;\r\n    game.events = systems.events;\r\n    systems.render = render;\r\n\r\n    // initialize systems\r\n    for (let property in GameSystems) {\r\n\r\n        \r\n        let registered = GameSystems[property];\r\n        let InitializeSystemFunction = registered.init;\r\n        \r\n        if (InitializeSystemFunction === undefined) continue;\r\n\r\n        InitializeSystemFunction.call(systems[registered.name]);\r\n    }\r\n\r\n    // register engine events\r\n\r\n    // window and document blur\r\n    RegisterFocusChangeEvent(game.events);\r\n\r\n    // render events callbacks\r\n    systems.events.subscribe('__render_depthsorting', RequestDepthSorting, render);\r\n    systems.events.subscribe('__render_layeridchange', RequestRenderableLayerIDChange, render);\r\n\r\n    return systems;\r\n\r\n}","import { GameSystems } from \"../System\";\r\nimport SceneSystem from \"../SceneSystem\";\r\n\r\n\r\n\r\nexport default function InjectSystems(game, scene) {\r\n        \r\n    scene.game = game;\r\n\r\n    for (let property in SceneSystem)\r\n    {\r\n        \r\n        let sys = GameSystems[SceneSystem[property]];\r\n\r\n        if (sys !== undefined)\r\n            scene[sys.name] = game.system[sys.name];\r\n    }\r\n\r\n    // Special injections, input and sound:\r\n\r\n    scene['key'] = game.input.keyboard;\r\n    scene['mouse'] = game.input.mouse;\r\n    scene['audio'] = game.audio;\r\n\r\n    /*for (let property in gameSystems) {\r\n\r\n        let sys = gameSystems[property];\r\n        scene[sys.name] = property[sys.system];\r\n    }*/\r\n}","import { GameSystems } from \"../System\";\r\nimport SceneSystem from \"../SceneSystem\";\r\n\r\nexport default function UnjectSystems(scene) {\r\n\r\n        for (let property in SceneSystem) {\r\n\r\n            let sys = GameSystems[SceneSystem[property]];\r\n\r\n            if (sys !== undefined)\r\n            {\r\n                delete scene[sys.name]; // = undefined;\r\n            }\r\n        }\r\n\r\n        delete scene['key']; \r\n        delete scene['mouse'];\r\n        delete scene['audio']; \r\n}","\r\n\r\nexport default function AppendDOM(element, parent, overflowHidden) {\r\n\r\n    if (overflowHidden === undefined) overflowHidden = true;\r\n\r\n    let appendTo;\r\n    let target = null;\r\n  \r\n      if (parent)\r\n      {\r\n          if (typeof parent === 'string')  {\r\n              target = document.getElementById(parent);\r\n          }\r\n          else if (typeof parent === 'object' && parent.nodeType === 1) {\r\n              target = parent;\r\n          }\r\n      }\r\n  \r\n      // Fallback, covers an invalid ID and a non HTMLelement object\r\n      if (!target) {\r\n          target = document.body;\r\n      }\r\n  \r\n      if (overflowHidden && target.style)  {\r\n          target.style.overflow = 'hidden';\r\n      }\r\n  \r\n      target.appendChild(element);\r\n  \r\n      return element;\r\n  }","\r\n\r\nexport default class RequestAnimationFrame {\r\n    \r\n    constructor(timeoutMode) {\r\n\r\n        if (timeoutMode === undefined) { timeoutMode = false; }\r\n\r\n        this.isRunning = false;\r\n        this._isTimeOutMode = timeoutMode;\r\n\r\n        this.thick = 0;\r\n        this.lastTime = 0;\r\n\r\n        //callbacks\r\n\r\n        // game loop\r\n        this.loopCallback = null;\r\n\r\n        // timeout/animation callback \r\n        this.timeOutIdentifier = null;\r\n\r\n        /*let vendors = [\r\n            'ms',\r\n            'moz',\r\n            'webkit',\r\n            'o'\r\n        ];\r\n\r\n        for (let x = 0; x < vendors.length && !window.requestAnimationFrame; x++)\r\n        {\r\n            window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n            window.cancelAnimationFrame  = window[vendors[x] + 'CancelAnimationFrame'];\r\n        }*/\r\n\r\n        var self = this;\r\n\r\n        this.updateRequestAnimationFrame = function(timeStamp) {\r\n\r\n            self.lastTime = self.thick;\r\n            self.thick = timeStamp;\r\n            //this.game.update(time);\r\n            self.loopCallback(timeStamp);\r\n    \r\n            self.timeOutIdentifier = window.requestAnimationFrame(self.updateRequestAnimationFrame);\r\n    \r\n        }\r\n    \r\n        this.updateTimeout = function() {\r\n    \r\n            let dateTime = Date.now();\r\n            let delay = Math.max(16 + self.lastTime - dateTime, 0);\r\n            self.lastTime = self.thick;\r\n            self.thick = delay;\r\n            self.loopCallback(delay);\r\n            //this.game.update(Date.now());\r\n            self.timeOutIdentifier = window.setTimeout(self.updateTimeout, delay);\r\n    \r\n        }\r\n    }\r\n\r\n\r\n\r\n    start(loopCallback) {\r\n\r\n        if (this.isRunning)\r\n            return;\r\n\r\n        this.isRunning = true;\r\n\r\n        this.loopCallback = loopCallback;\r\n\r\n        if (!window.requestAnimationFrame || this._isTimeOutMode) {\r\n            this._isTimeOutMode = true;\r\n            this.timeOutIdentifier = window.setTimeout(this.updateTimeout, 0);\r\n        } else {\r\n            this._isTimeOutMode = false;\r\n            this.timeOutIdentifier = window.requestAnimationFrame(this.updateRequestAnimationFrame);\r\n        }\r\n\r\n    }\r\n\r\n\r\n    stop() {\r\n\r\n        if (this._isTimeOutMode)\r\n        {\r\n            clearTimeout(this.timeOutIdentifier);\r\n        }\r\n        else\r\n        {\r\n            window.cancelAnimationFrame(this.timeOutIdentifier);\r\n        }\r\n\r\n        this.isRunning = false;\r\n\r\n    }\r\n\r\n    destroy() {\r\n        this.stop();\r\n        this.loopingCallback = null;\r\n    }\r\n\r\n}\r\n","/*\r\n*\r\n* Base class for Entities\r\n*\r\n*/\r\nexport default class Entity {\r\n\r\n    constructor(name, game)\r\n    {\r\n        this._name = name || 'New Entity';\r\n        this._active = true;\r\n        this._pool = null;\r\n       // this._priority = 0;\r\n        this.game = game || undefined; \r\n        this.persistent = false;\r\n    }\r\n\r\n    /*set priority(value) {\r\n        this._priority = value;\r\n    }\r\n\r\n    get priority() {\r\n        return this._priority;\r\n    }*/\r\n\r\n    get active() {return this._active;}\r\n    set active(value)\r\n    {\r\n        value = !!value;\r\n\r\n        if (value !== this._active)\r\n            this._active = value;\r\n\r\n        return this._active;\r\n    }\r\n\r\n    get name() {return this._name;}\r\n    set name(value)\r\n    {\r\n        value = !!value;\r\n\r\n        if (value !== this._name)\r\n            this._name = value;\r\n\r\n        return this._name;\r\n    }\r\n\r\n    destroy()\r\n    {\r\n        \r\n    }\r\n\r\n};","import System from \"../core/system/System\";\r\nimport SceneEntity from \"./SceneEntity\";\r\nimport InitializeEntity from \"./hierarchy/InitializeEntity\";\r\n\r\n\r\nexport default class EntityFactory {\r\n    \r\n    constructor(game) {\r\n        this.game = game;\r\n        this.scene = null;\r\n        this.entityList = null;\r\n    }\r\n\r\n    empty(entityName) {\r\n        entityName = entityName || 'Scene Entity ' + this.entityList.length;\r\n        return new SceneEntity(entityName, this.game);\r\n    }\r\n\r\n    sprite(tag, entityName, config) {\r\n\r\n        if (config === undefined)\r\n            config = {};\r\n\r\n        let entity = this.empty(entityName);\r\n        let spr = entity.modules.attach.sprite(tag, config.x, config.y, config.width, config.height);\r\n\r\n        if (this.scene.current_scene !== null) {\r\n            InitializeEntity(entity, this.game);\r\n        }\r\n\r\n\r\n\r\n        return entity;\r\n    }\r\n\r\n    tilemap(tag, entityName) {\r\n        let entity = this.empty(entityName);\r\n        entity.modules.attach.tilemap(tag);\r\n\r\n        if (this.scene.current_scene !== null) {\r\n            InitializeEntity(entity, this.game);\r\n        }\r\n\r\n        return entity;\r\n    }\r\n\r\n    spritesheet(tag, entityName) {\r\n        let entity = this.empty(entityName);\r\n        entity.modules.attach.spritesheet(tag);\r\n\r\n        if (this.scene.current_scene !== null) {\r\n            InitializeEntity(entity, this.game);\r\n        }\r\n\r\n        return entity;\r\n    }\r\n\r\n    rectangle(width, height, entityName) {\r\n        let entity = this.empty(entityName);\r\n        entity.modules.attach.rectangle(width, height);\r\n\r\n        if (this.scene.current_scene !== null) {\r\n            InitializeEntity(entity, this.game);\r\n        }\r\n\r\n        return entity;\r\n    }\r\n\r\n}\r\n\r\nSystem.register('EntityFactory', EntityFactory, 'create', \r\nfunction() {\r\n    this.entityList = this.game.system.entityList;\r\n    this.scene = this.game.scene;\r\n});","import System from \"../core/system/System\";\r\nimport DataList from \"../structures/List\";\r\nimport UpdateTransform from '../transform/UpdateTransform';\r\nimport ModulesUpdater from \"../modules/components/ModulesUpdater\";\r\nimport DestroyEntity from \"./hierarchy/DestroyEntity\";\r\nimport DetachModules from \"../modules/components/DetachModules\";\r\nimport AttachModules from \"../modules/components/AttachModules\";\r\nimport PrioritySorting from \"./hierarchy/PrioritySorting\";\r\n\r\n\r\nexport default class EntityUpdateList {\r\n\r\n    constructor(game)\r\n    {\r\n        this.game = game;\r\n        this._instances = new DataList();\r\n        this._destroyInstances = new DataList();\r\n        this._removalInstances = new DataList();\r\n        this._pendingInstances = new DataList();\r\n        this._camera = null;\r\n        this._requirePrioritySorting = false;\r\n    }\r\n\r\n    get length() {return this._instances.size;}\r\n\r\n    addInstance(instance) {\r\n        if (this._instances.indexOf(instance) === -1 && this._pendingInstances.indexOf(instance) === -1) {\r\n            this._pendingInstances.push(instance);\r\n            //if (instance._priority !== 0) {\r\n                //this._requirePrioritySorting = true;\r\n            //}\r\n        }\r\n        return instance;\r\n    }\r\n\r\n    destroyInstance(instance) {\r\n\r\n        if (instance === undefined) return false;\r\n\r\n        if (this._instances.has(instance) && this._destroyInstances.indexOf(instance) === -1) {\r\n            this._destroyInstances.push(instance);\r\n             return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    removeInstance(instance) {\r\n\r\n        let index = this._instances.indexOf(instance);\r\n\r\n        if (index > -1 && this._destroyInstances.indexOf(instance) === -1 && this._removalInstances.indexOf(instance) === -1) {\r\n            this._removalInstances.push(instance);\r\n            return true;\r\n            //DetachModules(instance.modules, this.game);\r\n            //return this._instances.eraseAt(instance);\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    update(dt) {\r\n\r\n        let instances =  this._instances;\r\n\r\n        for (let i = 0; i < instances.size; i++) {\r\n\r\n            let element = instances.at(i);\r\n\r\n            if (!element.active)\r\n                continue;\r\n\r\n                UpdateTransform(element._transform, this._camera._transform);\r\n\r\n                ModulesUpdater(element.modules, this.game);\r\n\r\n                if (element.update !== undefined)\r\n                    element.update.call(element, dt); //update(dt);\r\n\r\n       \r\n                if (element._transform._isDirty)\r\n                    element._transform._isDirty = false;\r\n            \r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n    beginUpdate()\r\n    {\r\n        let destroySize = this._destroyInstances.length;\r\n        let removalSize = this._removalInstances.length;\r\n        let insertSize = this._pendingInstances.length;\r\n        \r\n        if (insertSize === 0 && removalSize === 0 && destroySize === 0)\r\n            return;\r\n\r\n\r\n        if (destroySize > 0) {\r\n           \r\n            for (let i = 0; i < destroySize; i++) {\r\n                let instance = this._destroyInstances.at(i);\r\n        \r\n                if (instance !== undefined) {\r\n                    DestroyEntity(instance, this.game, false);\r\n                    instance = null;\r\n                }\r\n            }\r\n\r\n            this._instances.eraseList(this._destroyInstances, destroySize);\r\n            this._destroyInstances.childs.length = 0;\r\n        }\r\n\r\n        if (removalSize > 0) {\r\n            for (let i = 0; i < removalSize; i++) {\r\n                let instance = this._removalInstances.at(i);\r\n        \r\n                if (instance !== undefined) {\r\n                    DetachModules(instance.modules, this.game);\r\n                    this._instances.erase(instance);\r\n                }\r\n            }\r\n\r\n            this._removalInstances.childs.length = 0;\r\n\r\n        }\r\n\r\n        \r\n        /*let content = this._pendingInstances.content();\r\n\r\n        for (let i = 0; i < insertSize; i++) {\r\n\r\n            let element = content[i];\r\n            this._instances.push(element);\r\n            this._pendingInstances.eraseAt(i);\r\n        }*/\r\n\r\n        let content = this._pendingInstances.content();\r\n\r\n        if (insertSize !== 0) {\r\n            for (let i = 0; i < insertSize; i++) {\r\n\r\n                let instance =  content[i];\r\n                AttachModules(instance.modules, this.game);\r\n                this._instances.push(instance);\r\n                //this._pendingInstances.eraseAt(i);\r\n            }\r\n\r\n \r\n           /* if (this._requirePrioritySorting) {\r\n                this._instances.sort(PrioritySorting);\r\n            }*/\r\n            //this._instances.concat(this._pendingInstances);\r\n            //this._pendingInstances.childs.length = 0;\r\n            content.length = 0;\r\n        }        \r\n\r\n    }\r\n\r\n}\r\n\r\nSystem.register('EntityUpdateList', EntityUpdateList, 'entityList', \r\nfunction() {\r\n\r\n    this._camera = this.game.system.camera;\r\n});\r\n\r\n","\r\n//import EntityHierarchy from './EntityHierarchy'\r\nimport BoundingBox from '../math/BoundingBox'\r\nimport Transform from '../transform/Transform'\r\nimport ModuleManager from '../modules/ModuleManager';\r\nimport Entity from './Entity';\r\n\r\nexport default class SceneEntity extends Entity //Hierarchy\r\n{\r\n    constructor(name, game)\r\n    {\r\n        name = name || 'New SceneEntity';\r\n        super(name, game || null)\r\n        this._transform = new Transform();\r\n        this._pool = null;\r\n        this.modules = new ModuleManager(this);\r\n        this.scene = null;       \r\n        this._pendingRemoval = false;\r\n    }\r\n\r\n    get isPooled() {\r\n        return this._pool !== null;\r\n    }\r\n\r\n    /**\r\n     * If the object is pooled, send back to his pool.\r\n     * @returns {Boolean} True if the object was sent to pool, otherwise false.\r\n     */\r\n    back() {\r\n        if (this.isPooled) {\r\n            \r\n            if (this.scene !== null) {\r\n                this._pendingRemoval = true;\r\n                return this.game.system.pool.push(this);\r\n            } else {\r\n                return false;\r\n            }\r\n\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    set x(value) {\r\n        this._transform.position.x = value;\r\n        this._transform.markDirty();\r\n    }\r\n\r\n    get x() { return this._transform.position.x; }\r\n\r\n    set y(value) {\r\n        this._transform.position.y = value;\r\n        this._transform.markDirty();\r\n    }\r\n\r\n    get y() { return this._transform.position.y; }\r\n\r\n    get position() { return this._transform.position; }\r\n    set position(value) { this._transform.position = value; this._transform._isDirty = true; }\r\n\r\n    get origin() { return this._transform.origin; }\r\n    set origin(value) { this._transform.origin = value; this._transform._isDirty = true; }\r\n    set ['origin.x'](value) { this._transform.origin.x = value; this._transform._isDirty = true;}\r\n    set ['origin.y'](value) { this._transform.origin.y = value; this._transform._isDirty = true;}\r\n\r\n    get scale() { return this._transform.scale; }\r\n    set scale(value) { this._transform.scale = value; this._transform._isDirty = true; }\r\n    set ['scale.x'](value) { this._transform.scale.x = value; this._transform._isDirty = true;}\r\n    set ['scale.y'](value) { this._transform.scale.y = value; this._transform._isDirty = true;}\r\n\r\n    get angle() { return this._transform.angle; }\r\n    set angle(value) { this._transform.angle = value; this._transform._isDirty = true; }\r\n   \r\n    \r\n}","import ClearModules from \"../../modules/components/ClearModules\";\r\nimport DestroyEntity from \"./DestroyEntity\";\r\n\r\nexport default function ClearEntities(entityList, game) {\r\n\r\n    for (let i = 0; i < entityList._instances.length; i++) {\r\n\r\n        let instance = entityList._instances.at(i);\r\n\r\n        if (instance.isPooled === true) {\r\n            game.system.pool.push(instance);\r\n        } else {\r\n            DestroyEntity(instance, game, true);\r\n        }\r\n\r\n    }\r\n\r\n    for (let i = 0; i < entityList._pendingInstances.length; i++) {\r\n\r\n        let instance = entityList._instances.at(i);\r\n\r\n        if (instance.isPooled === true) {\r\n            game.system.pool.push(instance);\r\n        } else {\r\n            DestroyEntity(instance, game, true);\r\n        }\r\n    }\r\n\r\n    entityList._pendingInstances.destroy();//.length = 0;\r\n    entityList._destroyInstances.destroy();//.length = 0;\r\n    entityList._instances.destroy();//.length = 0;\r\n\r\n}","import SceneEntity from \"../SceneEntity\";\r\nimport Extend from \"../../utils/object/Extend\";\r\n\r\nexport default function CreateEntityFrom(value, game) {\r\n\r\n    let entity;\r\n\r\n    if (value instanceof SceneEntity) {\r\n\r\n        entity = value;\r\n\r\n    } else if (typeof value === SceneEntity)  {\r\n\r\n        entity = new value(value.name, game);\r\n\r\n    } else if (typeof value === 'object') {\r\n\r\n        let placeholder = new SceneEntity(value.name || undefined, game);\r\n        entity = Extend(true, placeholder, value);\r\n\r\n    } else if (typeof value === 'function') {\r\n        let entityHolder = new SceneEntity(value.name, game);\r\n        let placeholder = new value();\r\n\r\n        entity = Extend(true, entityHolder, placeholder);\r\n    }\r\n\r\n    return entity;\r\n\r\n}","import ClearModules from \"../../modules/components/ClearModules\";\r\n\r\nexport default function DestroyEntity(instance, game, verifyPersistance) {\r\n\r\n\r\n    if (instance === undefined)\r\n        return;\r\n\r\n    if (verifyPersistance === undefined) verifyPersistance = false;\r\n\r\n    if (instance['destroy'] !== undefined && instance['destroy'] !== null) {\r\n        instance.destroy.call(instance);\r\n    }\r\n\r\n    let completelyDestroy = true;\r\n\r\n    if (verifyPersistance === true) {\r\n        completelyDestroy = (instance.persistent === false);\r\n    }\r\n\r\n    if (completelyDestroy === false)\r\n        return;\r\n\r\n    let pool;\r\n\r\n    if (instance.isPooled === true) {\r\n        pool = game.system.pool.get(instance._pool);\r\n    }\r\n\r\n    if (pool !== undefined) {\r\n        pool.remove(instance);\r\n    }\r\n\r\n    ClearModules(instance.modules, game);\r\n    instance._transform = null;\r\n    instance.modules = null;\r\n    instance.scene = null;\r\n    instance = null;\r\n\r\n}","import Entity from \"../Entity\";\r\nimport System from \"../../core/system/System\";\r\nimport CreateEntityFrom from \"./CreateEntityFrom\";\r\nimport InitializeEntity from \"./InitializeEntity\";\r\n\r\nexport default class EntityHierarchy {\r\n\r\n    constructor(game) {\r\n        this.game = game;\r\n        this._entityList = null;\r\n    }\r\n\r\n    get count() {return this._entityList._instances.size;}\r\n\r\n    find(name) {\r\n        \r\n        let instances = [];\r\n        let count = this._entityList._instances.size;\r\n\r\n        for (let i = 0; i < count; i++) {\r\n            if (this._entityList[i].name !== name)\r\n                continue;\r\n\r\n            instances.push(this._entityList[i]);\r\n        }\r\n\r\n        return instances;\r\n\r\n    }\r\n\r\n    findFirst(name) {\r\n        this._entityList.each(entity => {\r\n\r\n            if (entity.name === name)\r\n                return entity;\r\n            \r\n        });\r\n\r\n        return null;\r\n    }\r\n\r\n    findLast(name) {\r\n        \r\n        let count = this._entityList._instances.size;\r\n\r\n        for (let i = count - 1; i >= 0; i--) {\r\n            if (this._entityList[i].name === name)\r\n                return this._entityList[i];\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    get(index) {\r\n        return this._entityList._instances.at(index) || null;\r\n    }\r\n\r\n    create(entityBase, count) {\r\n\r\n        let entity = CreateEntityFrom(entityBase, this.game);\r\n        InitializeEntity(entity, this.game);\r\n        return entity;\r\n    }\r\n\r\n    destroy(entity) {\r\n        return this._entityList.destroyInstance(entity);\r\n    }\r\n\r\n    destroyAt(index) {\r\n        /// TODO\r\n    }\r\n\r\n    clear() {\r\n        /// TODO\r\n    }\r\n\r\n}\r\n\r\nSystem.register('EntityHierarchy', EntityHierarchy, 'entity', function() {\r\n    this._entityList = this.game.system.entityList;\r\n});","\r\nexport default function InitializeEntity(entity, game) {\r\n\r\n    // inject scene\r\n    entity.scene = game.scene.currentScene;\r\n            \r\n    if (entity['start'] !== undefined && entity['start'] !== null) {\r\n        entity.start.call(entity);\r\n    }\r\n\r\n    game.system.entityList.addInstance(entity);\r\n\r\n    return entity;\r\n \r\n\r\n}","\r\nexport default function PrioritySorting(a, b) {\r\n    return a._priority < b._priority;\r\n}","\r\nmodule.exports = {\r\n    Entity : require('./Entity'),\r\n    SceneEntity : require('./SceneEntity'),\r\n    EntityUpdateList : require('./EntityUpdateList'),\r\n    EntityFactory : require('./EntityFactory'),\r\n    Hierarchy : require('./hierarchy/EntityHierarchy')\r\n}","import DataList from \"../../structures/List\";\r\nimport CreateEntityFrom from \"../hierarchy/CreateEntityFrom\";\r\nimport PreparePooledToGame from \"./PreparePooledToGame\";\r\nimport RemovePooledFromGame from \"./RemovePooledFromGame\";\r\n\r\nexport default class Pool {\r\n    \r\n    constructor(game, name, baseEntity, count) {\r\n\r\n        this.game = game;\r\n        this._baseEntity = baseEntity;\r\n        this.name = name || baseEntity.name || 'Entity Pool';\r\n        \r\n        this._pool = new DataList();\r\n        this._pooledEntities = new DataList();\r\n\r\n        if (count === undefined) count = 1;\r\n\r\n        this.add(count);\r\n    }\r\n\r\n    get length() {\r\n        return this._pool.size;\r\n    }\r\n\r\n    add(count) {\r\n\r\n        if (count === undefined) count = 1;\r\n\r\n        for (let i = 0; i < count; i++) {\r\n\r\n            let entity = CreateEntityFrom( this._baseEntity, this.game);\r\n\r\n            if (entity['start'] !== undefined && entity['start'] !== null) {\r\n                entity.start.call(entity);\r\n            }\r\n\r\n            this._pool.push(entity);\r\n        }\r\n\r\n        return this;\r\n        \r\n    }\r\n\r\n    pull() {\r\n        if (this._pool.size === 0) {\r\n            console.warn(\"Pool.pull: Could not pull entity. The pool is empty\");\r\n            return null;\r\n        }\r\n        \r\n        let pooled = this._pool.popFront();\r\n\r\n        if (pooled !== undefined && pooled !== null) {\r\n\r\n            if (PreparePooledToGame(this, pooled, this.game) === true) {\r\n                this._pooledEntities.push(pooled);\r\n                return pooled;\r\n            } else {\r\n                this._pool.push(pooled);\r\n            }\r\n        } else {\r\n            console.warn(\"Pool.pull: Could not pull entity. The pool is empty\");\r\n        }\r\n\r\n        return null;\r\n        \r\n        \r\n    }\r\n\r\n    push(entity) {\r\n        if (entity === undefined) return false;\r\n\r\n        //if (entity instanceof this._mergedBaseEntity) {\r\n\r\n            let index = this._pooledEntities.indexOf(entity);\r\n\r\n            if (index !== -1) {\r\n\r\n                RemovePooledFromGame(entity, this.game);\r\n                this._pooledEntities.eraseAt(index);\r\n                this._pool.push(entity);\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n\r\n           \r\n        /*} else {\r\n            console.warn(\"Pool.push: Could not push the entity back to the pool. The entity is not entity of type: \" + this._baseEntity.name);\r\n            return false;\r\n        }*/\r\n    }\r\n\r\n    remove(entity) {\r\n        let index = this._pooledEntities.indexOf(entity);\r\n\r\n        if (index > -1) {\r\n            this._pooledEntities.eraseAt(index);\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n    \r\n    clear() {\r\n        this._pool.clear();\r\n        this._pooledEntities.clear();\r\n        return this;\r\n    }\r\n\r\n    backAll() {\r\n        for (let i = 0; i < this._pooledEntities.length; i++) {\r\n\r\n            let entity = this._pooledEntities.at(i);\r\n            RemoveEntityFromGame(entity, this.game);\r\n            this._pool.push(entity);\r\n        }\r\n\r\n        this._pooledEntities.childs.length = 0;\r\n        return this;\r\n    }\r\n}","import DataMap from \"../../structures/Map\";\r\nimport Pool from \"./Pool\";\r\nimport System from \"../../core/system/System\";\r\n\r\nexport default class PoolManager {\r\n\r\n  constructor(game) {\r\n\r\n    this._poolsMap = new DataMap();\r\n    this.game = game;\r\n\r\n  }\r\n\r\n  has (poolName) {\r\n    return this._poolsMap.has(poolName);\r\n  }\r\n\r\n\r\n  get(pool) {\r\n    return this._poolsMap.get(pool);\r\n  }\r\n\r\n  // create objects pool\r\n  create(poolName, entityBase, size) {\r\n\r\n    if (entityBase === undefined || entityBase === null) return null;\r\n    if (size === undefined) size = 1;\r\n\r\n    if (this._poolsMap.has(poolName)) {\r\n      console.warn('PoolManager.create: Could not create pool named \\'' + poolName + '\\'. There is already a pool registered with this name.');\r\n      return null;\r\n    }\r\n\r\n    let pool = new Pool(this.game, poolName, entityBase, size);\r\n    this._poolsMap.insert(poolName, pool);\r\n\r\n    return pool;\r\n\r\n  }\r\n\r\n  // get a obj\r\n  pull(poolName) {\r\n\r\n    let pool = this._poolsMap.get(poolName);\r\n\r\n    if (pool !== null && pool !== undefined) {\r\n      return pool.pull();\r\n    } else {\r\n      console.warn(\"PoolManager.pull: The specified pool container don't exists: \" + poolName);\r\n      return null;\r\n    }\r\n\r\n  }\r\n\r\n  push(entity) {\r\n\r\n    if (entity.pool !== null) {\r\n\r\n      let pool = this._poolsMap.get(entity._pool);\r\n      if (pool !== null && pool !== undefined) {\r\n        pool.push(entity);\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n\r\n  }\r\n\r\n\r\n  clearAll() {\r\n\r\n    this._poolsMap.each((key, value) => {\r\n      value.clear();\r\n    });\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n\r\n}\r\n\r\nSystem.register('PoolManager', PoolManager, 'pool');\r\n","\r\nexport default function PreparePooledToGame(pool, entity, game) {\r\n    if (game.scene.currentScene === null || game.scene.currentScene === undefined)\r\n    {\r\n        console.warn(\"Pool.pull: Could not pull entity. There is no active scene.\");\r\n        return false;\r\n    }\r\n\r\n    entity.active = true;\r\n    entity._pool = pool.name;\r\n    entity.scene = game.scene.currentScene;\r\n    game.system.entityList.addInstance(entity);\r\n    return true;\r\n}","export default function RemovePooledFromGame(entity, game) {\r\n\r\n    game.system.entityList.removeInstance(entity);\r\n    entity.active = false;\r\n    entity._pool = null;\r\n    entity.scene = null;\r\n}\r\n","\r\nmodule.exports = {\r\n    Pool : require('./Pool'),\r\n    PoolManager : require('./PoolManager')\r\n};","\r\nimport DataMap from '../structures/Map';\r\nimport Signal from './Signal';\r\nimport Validate from '../utils/Validate';\r\nimport GameEvents from './GameEvents';\r\nimport System from '../core/system/System';\r\n\r\nexport default class EventManager {\r\n\r\n    constructor() {\r\n        this._signalsMap = new DataMap();\r\n    }\r\n\r\n    create(eventName) {\r\n\r\n        let has = this._signalsMap.get(eventName);\r\n\r\n        if (has !== undefined && has != null) return has;\r\n\r\n        let signal = new Signal();\r\n\r\n        this._signalsMap.insert(eventName, signal);\r\n\r\n        return signal;\r\n    }\r\n\r\n    subscribe(eventName, delegate, context, priority) {\r\n\r\n        let signal = this._signalsMap.get(eventName);\r\n\r\n        if (signal === undefined || signal === null) {\r\n            console.warn(\"EventManager.subscribe: There is no registered event called \\'\" + eventName + '\\'.');\r\n            return this;\r\n        }\r\n\r\n        if (!Validate.isFunction(delegate)) {\r\n            console.warn(\"EventManager.subscribe: The variable is not a function.\");\r\n            return this;\r\n        }\r\n\r\n        signal.subscribe(delegate, context, priority);\r\n\r\n        return this;\r\n\r\n    } \r\n\r\n    subscribeOnce(eventName, delegate, context, priority) {\r\n\r\n        let signal = this._signalsMap.get(eventName);\r\n\r\n        if (signal === undefined || signal === null) {\r\n            console.warn(\"EventManager.subscribeOnce: There is no registered event called \\'\" + eventName + '\\'.');\r\n            return this;\r\n        }\r\n\r\n        if (!Validate.isFunction(delegate)) {\r\n            console.warn(\"EventManager.subscribeOnce: The variable \\'\" + eventName +\"\\' is not a function.\");\r\n            return this;\r\n        }\r\n\r\n        signal.subscribeOnce(delegate, context, priority);\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    /**\r\n    * Dispatch a event to subscribed Signal\r\n    * @param {String} eventName The subscribed Signal name.\r\n    * @param {...*} [params] Parameters that should be passed to each handler.\r\n    */\r\n    dispatch(eventName) {\r\n\r\n        let signal = this._signalsMap.get(eventName);\r\n\r\n        if (signal === undefined || signal === null) {\r\n            //console.warn(\"EventManager.dispatch: There is no registered event called \\'\" + eventName + '\\'.');\r\n            return this;\r\n        }\r\n\r\n\r\n        let args = (arguments.length > 1) ? [arguments[1]] : Array.apply(null, arguments);\r\n\r\n        signal.dispatch(args);\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    has(eventName) {\r\n        return this._signalsMap.has(eventName);\r\n    }\r\n\r\n} \r\n\r\nfunction BulkEventCreation(manager, events) {\r\n\r\n    for (let i = 0; i < events.length; i++) {\r\n        manager.create(events[i]);\r\n    } \r\n\r\n}\r\n\r\n\r\nSystem.register('EventManager', EventManager, 'events', function() {\r\n    BulkEventCreation(this, GameEvents);\r\n});","\r\n// list of events\r\nconst GameEvents = [\r\n    '__render_depthsorting',\r\n    '__render_layeridchange',\r\n    'asset_complete',\r\n    'transition_pause_end',\r\n    'transition_end',\r\n    // window events\r\n    'hidden',\r\n    'visible',\r\n    'focus',\r\n    'blur'\r\n];\r\n\r\nObject.freeze(GameEvents);\r\n\r\nexport default GameEvents;","/** @license\r\n * JS Signals <http://millermedeiros.github.com/js-signals/>\r\n * Released under the MIT license\r\n * Author: Miller Medeiros\r\n * Version: ::VERSION_NUMBER:: - Build: ::BUILD_NUMBER:: (::BUILD_DATE::)\r\n*/\r\n\r\nimport DataList from '../structures/List';\r\nimport SignalBinding from './SignalBinding';\r\nimport IndexOfListener from './components/IndexOfListener';\r\nimport ValidateListener from './components/ValidateListener';\r\nimport RegisterListener from './components/RegisterListener';\r\nimport Validate from '../utils/Validate';\r\n\r\n\r\n\r\n// Based on https://github.com/millermedeiros/js-signals\r\n /**\r\n * Custom event broadcaster\r\n * Inspired by Robert Penner's AS3 Signals.\r\n * @name Signal\r\n * @author Miller Medeiros\r\n * @class\r\n */\r\nexport default class Signal {\r\n\r\n    /**\r\n     * @constructor\r\n     */\r\n    constructor() {\r\n        this._bindings = new DataList();\r\n        this.active = true;\r\n        this._shouldPropagate = true;\r\n    }\r\n\r\n    set propagate(value) {this._shouldPropagate = value;}\r\n    get propagate() {return this._shouldPropagate;}\r\n    get count() {return this._bindings.size;}\r\n\r\n\r\n    /**\r\n     * Check if listener was attached to Signal.\r\n     * @param {Function} listener The listener\r\n     * @param {Object} [context] Context\r\n     * @return {boolean} if Signal has the specified listener.\r\n     */\r\n    has(listener, context) {\r\n        return IndexOfListener(this, listener, context) !== -1;\r\n    }\r\n\r\n    /**\r\n     * Add a listener to the signal.\r\n     * @param {Function} listener Signal handler function.\r\n     * @param {Object} [listenerContext] Context on which listener will be executed (object that should represent the `this` variable inside listener function).\r\n     * @param {Number} [priority] The priority level of the event listener. Listeners with higher priority will be executed before listeners with lower priority. Listeners with same priority level will be executed at the same order as they were added. (default = 0)\r\n     * @return {Signal} return this signal.\r\n     */\r\n    subscribe(listener, context, priority) {\r\n        ValidateListener(listener, 'subscribe');\r\n        RegisterListener(this, listener, context, priority, false);\r\n        return this;\r\n    }\r\n\r\n    subscribeOnce(listener, context, priority) {\r\n        ValidateListener(listener, 'subscribeOnce');\r\n        RegisterListener(this, listener, context, priority, true);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Remove a single listener from the dispatch queue.\r\n     * @param {Function} listener Handler function that should be removed.\r\n     * @param {Object} [context] Execution context (since you can add the same handler multiple times if executing in a different context).\r\n     * @return {Function} Listener handler function.\r\n     */\r\n    unsubscribe(listener, context) {\r\n        ValidateListener(listener, 'unsubscribe');\r\n\r\n        let i = IndexOfListener(this, listener, context);\r\n        if (i !== -1) {\r\n            this._bindings.at(i)._destroy();\r\n            this._bindings.eraseAt(i);\r\n           \r\n        }\r\n\r\n        return listener;\r\n    }\r\n\r\n    unsubscribeAll() {\r\n\r\n    }\r\n\r\n     /**\r\n    * Dispatch/Broadcast Signal to all listeners added to the queue.\r\n    * @param {...*} [params] Parameters that should be passed to each handler.\r\n    */\r\n    dispatch(params) {\r\n        if (!this.active)\r\n            return;\r\n        \r\n        let size = this._bindings.length;\r\n\r\n        if (!size)\r\n            return;\r\n\r\n        let paramsSize = arguments.length;\r\n\r\n        if (paramsSize > 1)\r\n        {\r\n            params = Array.prototype.slice.call(arguments);\r\n        }\r\n\r\n        let binds = this._bindings.childs.slice();\r\n\r\n        do { size--; } \r\n        while (binds[size] && this._shouldPropagate && binds[size].execute(params) !== false);\r\n    }\r\n\r\n    destroy() {\r\n        this.unsubscribeAll();\r\n        delete this._bindings;\r\n    }\r\n\r\n}","\r\n\r\nexport default class SignalBinding {\r\n    \r\n    constructor(signal, listener, listenerContext, priority, once) {\r\n\r\n        this._signal = signal;\r\n        this._listener = listener;\r\n        this._context = listenerContext;\r\n        this._priority = priority || 0;\r\n        this.active = true;\r\n        this.args = undefined;\r\n        this._isOnce = once || false;\r\n    }\r\n\r\n    get isOnce() {return this._isOnce;}\r\n    get listener() { return this._listener; }\r\n    get signal() {return this._signal;}\r\n\r\n    execute(argsArray) {\r\n        let handlerReturn, params;\r\n\r\n            if (this.active && !!this._listener) {\r\n\r\n                params = this.args ? this.args.concat(argsArray) : argsArray;\r\n                handlerReturn = this._listener.apply(this._context, params);\r\n                if (this._isOnce) {\r\n                    this.detach();\r\n                   \r\n                }\r\n\r\n            }\r\n        return handlerReturn;\r\n    }\r\n\r\n    \r\n\r\n    detach() {\r\n        if (!this.isBound())\r\n            return;\r\n        this._signal.unsubscribe(this._listener, this._context);\r\n        \r\n    }\r\n\r\n     /**\r\n         * @return {Boolean} `true` if binding is still bound to the signal and have a listener.\r\n         */\r\n    isBound() {\r\n        return (!!this._signal && !!this._listener);\r\n    }\r\n\r\n     /**\r\n         * Delete instance properties\r\n         * @private\r\n         */\r\n    _destroy() {\r\n        delete this._signal;\r\n        delete this._listener;\r\n        delete this.context;\r\n    }\r\n\r\n}","\r\n   \r\n\r\nexport default function AddBinding(signal, binding) {\r\n\r\n        let n = signal._bindings.length;\r\n\r\n        do { --n; } while (signal._bindings.at(n) && binding._priority <= signal._bindings.at(n)._priority);\r\n\r\n        signal._bindings.insert(binding,n);\r\n}\r\n","\r\nexport default function IndexOfListener(signal, listener, context) {\r\n \r\n    let r = signal._bindings.each(function (element, index) {\r\n        \r\n        if (element._listener === listener && element._context === context) {\r\n            return index;\r\n        }\r\n        \r\n    });\r\n\r\n\r\n    if (r === undefined)\r\n        r = -1;\r\n\r\n    return r;\r\n}","import SignalBinding from \"../SignalBinding\";\r\nimport IndexOfListener from \"./IndexOfListener\";\r\nimport AddBinding from \"./AddBinding\";\r\n\r\nexport default function RegisterListener(signal, listener, listenerContext, priority, isOnce) {\r\n\r\n    let binding = null;\r\n    let index = IndexOfListener(signal, listener, listenerContext);\r\n\r\n    if (index !== -1) {\r\n        binding = signal._bindings[index];\r\n        if (binding.isOnce !== isOnce) {\r\n            throw new Error('You cannot add'+ (isOnce? '' : 'Once') +'() then add'+ (!isOnce? '' : 'Once') +'() the same listener without removing the relationship first.');\r\n        }\r\n    } else {\r\n\r\n        binding = new SignalBinding(signal, listener, listenerContext, priority, isOnce);\r\n        AddBinding(signal, binding);\r\n    }\r\n\r\n    return binding;\r\n    \r\n}","\r\nexport default function ValidateListener(listener, func) \r\n{\r\n    if (typeof listener !== 'function') \r\n        throw new Error( 'Signal.{fn}: Listener should be a function.'.replace('{fn}', func) );\r\n    \r\n}","export default function RegisterFocusChangeEvent(eventManager) {\r\n\r\n    /* The visibilitychange event is fired when the content of a tab has become visible or has been hidden.*/\r\n    let visibilitychange;\r\n\r\n    // check if have visibility change\r\n    if (document.hidden !== undefined) {\r\n        visibilitychange = 'visibilitychange';\r\n    } else {\r\n        let vendors = ['webkit', 'moz', 'ms'];\r\n\r\n        vendors.forEach(\r\n            function (prefix) {\r\n                if (document[prefix + 'Hidden'] !== undefined) {\r\n                    document.hidden = function () {\r\n                        return document[prefix + 'Hidden'];\r\n                    };\r\n\r\n                    visibilitychange = prefix + 'visibilitychange';\r\n                }\r\n            });\r\n    }\r\n\r\n    // register event listener\r\n    let onVisibilityChange = function (event) {\r\n        if (document.hidden || event.type === 'pause') {\r\n            eventManager.dispatch('hidden');\r\n        } else {\r\n            eventManager.dispatch('visible');\r\n        }\r\n    };\r\n\r\n    if (visibilitychange) {\r\n        document.addEventListener(visibilitychange, onVisibilityChange, false);\r\n    }\r\n\r\n    window.onblur = function () {\r\n        eventManager.dispatch('blur');\r\n    };\r\n\r\n    window.onfocus = function () {\r\n        eventManager.dispatch('focus');\r\n    };\r\n\r\n\r\n\r\n}","\r\nmodule.exports = {\r\n    Signal : require('./Signal'),\r\n    EventManager : require('./EventManager')\r\n};","import Keyboard from \"./keyboard/Keyboard\";\r\nimport Mouse from \"./mouse/Mouse\";\r\nimport InitializeMouse from \"./mouse/components/InitializeMouse\";\r\nimport InitializeKeyboard from \"./keyboard/components/InitializeKeyboard\";\r\nimport UpdateKeyboard from \"./keyboard/components/UpdateKeyboard\";\r\nimport UpdateMouse from \"./mouse/components/UpdateMouse\";\r\nimport InputData from \"./InputData\";\r\nimport ObjectGet from \"../utils/object/ObjectGet\";\r\nimport ResetKeyboard from \"./keyboard/components/ResetKeyboard\";\r\nimport DisableContextMenu from \"./mouse/components/DisableContextMenu\";\r\n\r\nexport default class Input {\r\n\r\n  constructor(game) {\r\n\r\n    this.game = game;\r\n    this.mouse = null;\r\n    this.keyboard = null;\r\n    this.data = null;\r\n\r\n  }\r\n\r\n  init() {\r\n\r\n    let gameConfig = this.game.config;\r\n    \r\n    if (gameConfig.keyboard.active) {\r\n      this.keyboard = new Keyboard(this.game);\r\n    }\r\n\r\n    if (gameConfig.mouse.active) {\r\n      this.mouse = new Mouse(this.game);\r\n    }\r\n\r\n    this.data = new InputData(this);\r\n\r\n    InitializeKeyboard(this.keyboard, this.game);\r\n\r\n    InitializeMouse(this.mouse, this.game);\r\n\r\n    \r\n    if (gameConfig.contextMenu.disable) {\r\n      DisableContextMenu(this.game, gameConfig.contextMenu.target);\r\n    }\r\n\r\n\r\n\r\n  }\r\n\r\n  update(timeStamp) {\r\n\r\n    UpdateKeyboard(this.keyboard);\r\n\r\n    this.data.updateClientRect();\r\n\r\n    UpdateMouse(this.mouse, this.data, timeStamp);\r\n\r\n  }\r\n\r\n  reset() {\r\n   \r\n    ResetKeyboard(this.keyboard);\r\n\r\n    if (this.mouse)\r\n      this.mouse.reset();\r\n  }\r\n\r\n}","import Rect from \"../math/Rect\";\r\nimport Vector2 from \"../math/Vector2\";\r\nimport MathUtils from \"../math/MathUtils\";\r\n\r\n\r\nexport default class InputData {\r\n\r\n    constructor(manager) {\r\n        this.manager = manager;\r\n        this.canvas = manager.game.system.render.domCanvas;\r\n        this.clientRect = new Rect();\r\n        this.boundingClientRect = null;\r\n        this.scale = new Vector2(1, 1);\r\n    }\r\n\r\n    updateClientRect() {\r\n\r\n        let rect = this.clientRect;\r\n        let clientRect = this.canvas.getBoundingClientRect();\r\n        this.boundingClientRect = clientRect;\r\n\r\n        rect.x = clientRect.left + window.pageXOffset - document.documentElement.clientLeft;\r\n        rect.y = clientRect.top + window.pageYOffset - document.documentElement.clientTop;\r\n        rect.width = clientRect.width;\r\n        rect.height = clientRect.height;\r\n\r\n        \r\n\r\n    }\r\n\r\n    transformX(x) {\r\n        let rect = this.boundingClientRect;\r\n        return MathUtils.floor((x - rect.left) / (rect.right - rect.left) * this.canvas.width);\r\n    }\r\n\r\n    transformY(y) {\r\n        let rect = this.boundingClientRect;\r\n        return MathUtils.floor((y - rect.top) / (rect.bottom - rect.top) * this.canvas.height);\r\n    }\r\n\r\n    clientRectTransformX(x) {\r\n        return (x - this.clientRect.x) * this.scale.x;\r\n    }\r\n\r\n    clientRectTransformY(y) {\r\n        return (y - this.clientRect.y) * this.scale.y;\r\n    }\r\n\r\n}","import DataList from \"../structures/List\";\r\nimport DataMap from \"../structures/Map\";\r\n\r\nexport default class InputSystem {\r\n\r\n    constructor(game) {\r\n        this.game = game;\r\n\r\n        this._enabled = true;\r\n\r\n        this._eventQueue = new DataList();\r\n        this._buttonWatcher = new DataMap();\r\n        this._buttonGarbage = [];\r\n    \r\n        this.eventTarget = null;\r\n        this.eventHandler = null;\r\n    \r\n        this.preventDefault = true;\r\n    }\r\n\r\n    get enabled() {\r\n        return this._enabled;\r\n    }\r\n    set enabled(value) {\r\n        value = !!value;\r\n\r\n        if (value !== this._enabled) {\r\n            if (!value)\r\n                this.reset();\r\n\r\n            this._enabled = value;\r\n        }\r\n    }\r\n\r\n    clear() {\r\n        this._buttonWatcher.clear();\r\n        this._buttonGarbage.splice(0, this._buttonGarbage.length);\r\n        this._eventQueue.clear();\r\n    }\r\n\r\n    reset () {\r\n        \r\n    }\r\n\r\n\r\n}","import ButtonStatus from \"./ButtonStatus\";\r\n\r\nexport default class Button {\r\n\r\n    constructor(code, game) {\r\n\r\n        this.game = game;\r\n        this.code = code; \r\n\r\n        this._enabled = true;    \r\n        this.status = ButtonStatus.NONE; \r\n\r\n        this.press = false;\r\n        this.down = false;\r\n        this.up = false;\r\n\r\n        this.preventDefault = true;\r\n      \r\n        this.downTime = 0;\r\n        this.downDuration = -2500;\r\n        this.upTime = 0;\r\n        this.upDuration = -2500;\r\n      \r\n\r\n    }\r\n\r\n    get enabled() {return this._enabled;}\r\n    set enabled(value) {\r\n        value = !!value;\r\n\r\n        if (value !== this._enabled)\r\n        {\r\n            if (!value)\r\n                this.reset();\r\n\r\n            this._enabled = value;\r\n        }\r\n    }\r\n\r\n    isPressing() {\r\n        return this.press;\r\n    }\r\n\r\n    isPressed() {\r\n        return (this.down && this.status === ButtonStatus.PRESSED);\r\n    }\r\n\r\n    isReleased() {\r\n        return (!this.down && this.upDuration === 0);\r\n    }\r\n\r\n    reset() {   \r\n        this.press = false;\r\n        this._event = ButtonStatus.NONE;\r\n        this.down = false;\r\n        this.up = false;\r\n    \r\n        this.downTime = 0;\r\n        this.downDuration = -2500;\r\n        this.upTime = 0;\r\n        this.upDuration = -2500;\r\n    }\r\n\r\n\r\n}","\r\nconst ButtonStatus = {\r\n    /**\r\n     * No key/button status\r\n     * @param {number} 0\r\n     */\r\n    NONE : 0,\r\n    \r\n    /**\r\n     * \r\n     */\r\n    IDLE : 1,\r\n    /**\r\n     * Key/button is pressed\r\n     * @param {number} 2\r\n     */\r\n    PRESSED : 2,\r\n     /**\r\n     * Key/button was pressed\r\n     * @param {number} 3\r\n     */\r\n    POST_PRESSED : 3,\r\n    /**\r\n     * Key/button is released\r\n     * @param {number} 4\r\n     */\r\n    RELEASED : 4,\r\n};\r\n\r\n//Object.freeze(ButtonEvent);\r\n\r\nexport default ButtonStatus;","import ButtonStatus from \"../ButtonStatus\";\r\nimport Button from \"../Button\";\r\n\r\n/**\r\n * \r\n * @param {KeyboardEvent|MouseEvent} event \r\n * @param {Button} button \r\n */\r\nexport default function ProcessButtonDown(event, button) {\r\n\r\n    if (button.preventDefault === true) {\r\n        event.preventDefault();\r\n    }\r\n\r\n    if (!button.enabled) {\r\n        return;\r\n    }\r\n\r\n    if (button.down === true) {\r\n        return;\r\n    }\r\n\r\n    // set key properties\r\n    button.press = true;\r\n    button.down = true;\r\n    button.up = false;\r\n\r\n    // set press time duration\r\n    button.downTime = event.timeStamp; \r\n    button.downDuration = 0;\r\n    button.upDuration = button.downTime - button.upTime;\r\n\r\n    button.status = ButtonStatus.PRESSED;\r\n\r\n\r\n}","\r\nimport Button from \"../Button\";\r\nimport ButtonStatus from \"../ButtonStatus\";\r\n\r\n/**\r\n * \r\n * @param {KeyboardEvent|MouseEvent} event \r\n * @param {Button} button \r\n */\r\nexport default function ProcessButtonUp(event, button) {\r\n\r\n    if (button.preventDefault === true) {\r\n        event.preventDefault();\r\n    }\r\n\r\n    if (!button.enabled) {\r\n        return;\r\n    }\r\n\r\n    // set key properties\r\n    button.press = false;\r\n    button.down = false;\r\n    button.up = true;\r\n\r\n    // set press time duration\r\n    button.upTime = event.timeStamp;\r\n    button.downDuration = button.upTime - button.downTime;\r\n    button.upDuration = 0;\r\n    button.downTime = 0;\r\n\r\n\r\n    button.status = ButtonStatus.RELEASED;\r\n\r\n}","import ButtonStatus from \"../button/ButtonStatus\";\r\nimport DataMap from \"../../structures/Map\";\r\n\r\n\r\n/**\r\n * \r\n * @param {DataMap} watcher \r\n * @param {Array} garbage \r\n *\r\n */\r\nexport default function WatchButtons(watcher, garbage) {\r\n\r\n    if (watcher.length === 0) \r\n        return;\r\n\r\n    watcher.each(function (code, button) {\r\n\r\n        if (button.status === ButtonStatus.PRESSED) {\r\n            button.status = ButtonStatus.POST_PRESSED;\r\n           \r\n        } else if (button.status === ButtonStatus.RELEASED) {\r\n            button.status = ButtonStatus.NONE;\r\n            garbage.push(code);\r\n        }\r\n\r\n    });\r\n\r\n    if (garbage.length !== 0) {\r\n        watcher.eraseList(garbage);\r\n        garbage.splice(0, garbage.length);\r\n    }\r\n\r\n}","\r\nexport const Button = require('./button/Button');\r\nexport const Keyboard = require('./keyboard/Keyboard');\r\nexport const Mouse = require('./mouse/Mouse');\r\nexport const Input = require('./Input');","\r\nconst KeyCode = {\r\n    Backspace: 8,\r\n    Tab: 9,\r\n    Enter: 13,\r\n    Shift: 16,\r\n    Ctrl: 17,\r\n    Alt: 18,\r\n    Pause: 19,\r\n    CapsLock: 20,\r\n    Escape: 27,\r\n    Space:32,\r\n    PageUp: 33,\r\n    PageDown: 34,\r\n    End: 35,\r\n    Home: 36,\r\n    Left: 37,\r\n    Up: 38,\r\n    Right: 39,\r\n    Down: 40,\r\n    Insert: 45,\r\n    Delete:\t46,\r\n    Num0: 48,\r\n    Num1: 49,\r\n    Num2: 50,\r\n    Num3: 51,\r\n    Num4: 52,\r\n    Num5:\t53,\r\n    Num6: 54,\r\n    Num7: 55,\r\n    Num8: 56,\r\n    Num9: 57,\r\n    A: 65,\r\n    B: 66,\r\n    C: 67,\r\n    D: 68,\r\n    E: 69,\r\n    F: 70,\r\n    G: 71,\r\n    H: 72,\r\n    I: 73,\r\n    J: 74,\r\n    K: 75,\r\n    L: 76,\r\n    M: 77,\r\n    N: 78,\r\n    O: 79,\r\n    P: 80,\r\n    Q: 81,\r\n    R: 82,\r\n    S: 83,\r\n    T: 84,\r\n    U: 85,\r\n    V: 86,\r\n    W: 87,\r\n    X: 88,\r\n    Y: 89,\r\n    Z: 90,\r\n    LSystem: 91,\r\n    RSystem: 92,\r\n    SelectK:\t93,\r\n    Numpad0: 96,\r\n    Numpad1: 97,\r\n    Numpad2: 98,\r\n    Numpad3: 99,\r\n    Numpad4: 100,\r\n    Numpad5: 101,\r\n    Numpad6: 102,\r\n    Numpad7: 103,\r\n    Numpad8: 104,\r\n    Numpad9: 105,\r\n    Multiply: 106,\r\n    Add: 107,\r\n    Subtract: 109,\r\n    DecimalPoint: 110,\r\n    Divide: 111,\r\n    F1:\t112,\r\n    F2:\t113,\r\n    F3:\t114,\r\n    F4:\t115,\r\n    F5:\t116,\r\n    F6:\t117,\r\n    F7:\t118,\r\n    F8:\t119,\r\n    F9:\t120,\r\n    F10: 121,\r\n    F11: 122,\r\n    F12: 123,\r\n    NumLock: 144,\r\n    ScrollLock: 145,\r\n    SemiColon: 186,\r\n    Equal: 187,\r\n    Comma: 188,\r\n    Dash: 189,\r\n    Period:\t190,\r\n    Slash: 191,\r\n    LBraket: 219,\r\n    BackSlash: 220,\r\n    RBracket: 221,\r\n    Quote: 222,\r\n};\r\n    \r\nexport default KeyCode;","import DataMap from '../../structures/Map';\r\nimport DataList from '../../structures/List';\r\nimport ResetKeyboard from './components/ResetKeyboard';\r\nimport InputSystem from '../InputSystem';\r\n\r\n\r\nexport default class Keyboard extends InputSystem{\r\n\r\n  constructor(game) {\r\n\r\n    super(game);\r\n\r\n    this._keyMapping = new DataMap();\r\n    this.lastKey = null;\r\n\r\n  }\r\n\r\n\r\n  reset() {\r\n    ResetKeyboard(this);\r\n    return this;\r\n  }\r\n\r\n  stop() {\r\n\r\n    var target = this.eventTarget;\r\n\r\n    target.removeEventListener('keydown', this.eventHandler);\r\n    target.removeEventListener('keyup', this.eventHandler);\r\n\r\n    this._keyMapping.clear();\r\n    ResetKeyboard(this);\r\n    return this;\r\n  }\r\n\r\n\r\n  pressed(keycode) {\r\n\r\n    let key = this._keyMapping.get(keycode);\r\n    \r\n    return key.isPressed();\r\n  }\r\n\r\n  release(keycode) {\r\n    return this._keyMapping.get(keycode).isReleased();\r\n  }\r\n\r\n  press(keycode) {\r\n    return this._keyMapping.get(keycode).status;\r\n  }\r\n}","import ObjectGet from \"../../../utils/object/ObjectGet\";\r\n\r\nimport Button from \"../../button/Button\";\r\n\r\nimport KeyCode from \"./../KeyCode\";\r\n\r\nimport StartKeyboardListeners from \"./StartKeyboardListeners\";\r\nimport ResetKeyboard from \"./ResetKeyboard\";\r\n\r\n\r\nexport default function InitializeKeyboard(keyboard, game) {\r\n\r\n    if (!keyboard)\r\n        return;\r\n\r\n    let keyMapping = keyboard._keyMapping;\r\n\r\n    for (let prop in KeyCode) {\r\n\r\n        if (KeyCode.hasOwnProperty(prop)) {\r\n            let value = KeyCode[prop];\r\n            let key = new Button(value, game);\r\n            keyMapping.insert(value, key);\r\n        }\r\n    }\r\n\r\n    //ResetKeyboard(keyboard);\r\n\r\n    let config = game.config.keyboard;\r\n    let target = ObjectGet.value(config, 'target', window);    \r\n    keyboard._enabled = ObjectGet.value(config, 'enable', true);\r\n    \r\n    keyboard.eventTarget = target;\r\n    keyboard.eventHandler = StartKeyboardListeners(keyboard, target);\r\n\r\n\r\n\r\n}","import Keyboard from \"../Keyboard\";\r\n\r\n/**\r\n * \r\n * @param {Keyboard} keyboard \r\n */\r\nexport default function ResetKeyboard(keyboard) {\r\n\r\n    if (!keyboard)\r\n        return;\r\n\r\n    keyboard._keyMapping.each(function (code, key) {\r\n          key.reset();         \r\n    });\r\n\r\n    keyboard.clear();\r\n\r\n\r\n\r\n}","import Keyboard from \"../Keyboard\";\r\n\r\n/**\r\n * \r\n * @param {Keyboard} keyboard \r\n * @param {HTMLElement} target \r\n */\r\nexport default function StartKeyboardListeners(keyboard, target) {\r\n\r\n    let eventQueue = keyboard._eventQueue;\r\n\r\n    // key event handler\r\n    const handler = function (event) {\r\n\r\n      if (event.defaultPrevented) {\r\n        return;\r\n      }\r\n\r\n      if (keyboard.preventDefault) {\r\n        event.preventDefault();\r\n      }\r\n\r\n      eventQueue.push(event);\r\n\r\n    };\r\n\r\n    target.addEventListener('keydown', handler, false);\r\n    target.addEventListener('keyup', handler, false);\r\n\r\n    return handler;\r\n  \r\n\r\n\r\n}","import ProcessButtonDown from \"../../button/components/ProcessButtonDown\";\r\nimport ProcessButtonUp from \"../../button/components/ProcessButtonUp\";\r\nimport WatchButtons from \"../../components/WatchButtons\";\r\n\r\nimport ButtonStatus from \"../../button/ButtonStatus\";\r\n\r\nimport Keyboard from \"../Keyboard\";\r\n\r\n\r\n\r\n\r\n/**\r\n * Updates Keyboard logic\r\n * \r\n * @param {Keyboard} keyboard Keyboard Manager\r\n */\r\nexport default function UpdateKeyboard(keyboard) {\r\n\r\n    if (!keyboard)\r\n        return;\r\n\r\n    if (!keyboard.enabled)\r\n        return;\r\n\r\n    WatchButtons(keyboard._buttonWatcher, keyboard._buttonGarbage);\r\n\r\n    let eventSize = keyboard._eventQueue.size;\r\n\r\n    if (eventSize === 0)\r\n        return;\r\n\r\n\r\n    // clear and copy queue\r\n    let queue = keyboard._eventQueue.splice(0, eventSize);\r\n\r\n    // process key events\r\n    for (let i = 0; i < eventSize; i++) {\r\n        let event = queue[i];\r\n        let code = event.keyCode;\r\n\r\n        // check if is valid scintilla key\r\n        let key = keyboard._keyMapping.get(code);\r\n\r\n        if (key === undefined || key === null) {\r\n            continue;\r\n        }\r\n\r\n        if (event.type === 'keydown') {\r\n\r\n            if (key.press === false) {\r\n                if (key.status === ButtonStatus.NONE) {\r\n                    keyboard._buttonWatcher.insert(code, key);\r\n                }\r\n\r\n                ProcessButtonDown(event, key);\r\n            }\r\n\r\n        } else { \r\n            ProcessButtonUp(event, key);\r\n        }\r\n\r\n        \r\n    }\r\n\r\n}","\r\n\r\nimport MouseButton, { LogicalMouseButton } from './MouseButton';\r\nimport DataList from '../../structures/List';\r\nimport Vector2 from '../../math/Vector2';\r\nimport DataMap from '../../structures/Map';\r\nimport InputSystem from '../InputSystem';\r\n\r\n\r\n  export const MouseEvent = {\r\n  NONE : 0,\r\n  PRESS : 1,\r\n  PRESSED : 2,\r\n  RELEASE : 3\r\n  };\r\n\r\n\r\nexport default class Mouse extends InputSystem {\r\n  \r\n  constructor(game) {\r\n\r\n    super(game);\r\n\r\n    this._buttonsList = new DataList();\r\n    this._isDirty = false;\r\n\r\n    this.event = null;\r\n    this.moved = false;\r\n    this.buttons = 0;\r\n    this.down = false;\r\n    \r\n\r\n    this.clientPosition = new Vector2();\r\n    this.position = new Vector2();\r\n\r\n  }\r\n\r\n  get x() {\r\n    return this.position.x;\r\n  }\r\n\r\n  set x(value) {\r\n    this.position.x = value;\r\n  }\r\n\r\n  get y() {\r\n    return this.position.y;\r\n  }\r\n\r\n  set y(value) {\r\n    this.position.y = value;\r\n  }\r\n\r\n \r\n  stop() {\r\n\r\n    let target = this.eventTarget;\r\n\r\n    target.removeEventListener('mousemove', this.handler);\r\n    target.removeEventListener('mousedown', this.handler);\r\n    target.removeEventListener('mouseup', this.handler);\r\n    target.removeEventListener('mouseenter', this.handler);\r\n    target.removeEventListener('mouseleave', this.handler);\r\n  }\r\n\r\n  /*onMouseMove(event) {\r\n\r\n    if (!this.active)\r\n      return;\r\n\r\n\r\n    var rect = this.canvas.getBoundingClientRect();\r\n\r\n\r\n    this.x = Math.floor((event.clientX-rect.left)/(rect.right-rect.left)*this.canvas.width);\r\n    this.y = Math.floor((event.clientY-rect.top)/(rect.bottom-rect.top)*this.canvas.height);\r\n    //this.x = event.clientX - rect.left;\r\n    //this.y = event.clientY - rect.top;\r\n\r\n  }\r\n\r\n  onMouseDown(event) {\r\n\r\n    if (!this.active)\r\n      return;\r\n\r\n\r\n\r\n    var value = event.button;\r\n\r\n    if (this._mouseButtonsLocksPressed[value] != MouseEvent.PRESSED && this._mouseButtonsLocksPressed[value] != MouseEvent.PRESS) {\r\n      this._mouseButtonsLocksPressed[value] = MouseEvent.PRESSED;\r\n      this._mouseDownDuration[value] = 1;\r\n    }\r\n\r\n    this._mouseButtons[value] = true;\r\n    this._mouseButtonsLocks[value] = MouseEvent.PRESS;\r\n\r\n    event.preventDefault();\r\n\r\n  }\r\n\r\n  onMouseUp(event) {\r\n\r\n    if (!this.active)\r\n      return;\r\n\r\n    var value = event.button;\r\n\r\n    this._mouseButtons[value] = false;\r\n    this._mouseButtonsLocks[value] = MouseEvent.RELEASE;\r\n    this._mouseButtonsLocksPressed[value] = MouseEvent.NONE;\r\n\r\n    event.preventDefault();\r\n\r\n\r\n  }*/\r\n\r\n  pressed(button) {\r\n\r\n    // var buttonLock = false;\r\n\r\n    // if (this._mouseButtonsLocksPressed[button] == MouseEvent.PRESSED) {\r\n    //   buttonLock = true;\r\n    //   this._mouseButtonsLocksPressed[button] = MouseEvent.PRESS;\r\n    // }\r\n\r\n    // var hit = this._mouseButtons[button] && buttonLock;\r\n\r\n    // return hit;\r\n    \r\n    let mouseButton = this._buttonsList.get(button);\r\n\r\n    if (mouseButton)\r\n      return mouseButton.isPressed();\r\n\r\n    return null;\r\n\r\n  }\r\n\r\n  release(button) {\r\n\r\n    \r\n    \r\n    // var buttonLock = false;\r\n\r\n  \t// if (this._mouseButtonsLocks[button] ==  MouseEvent.PRESSED ||\r\n    //     this._mouseButtonsLocks[button] ==  MouseEvent.PRESS ||\r\n    //     this._mouseButtonsLocks[button] ==  MouseEvent.NONE)\r\n  \t// \tbuttonLock = false;\r\n  \t// else\r\n  \t// \tbuttonLock = true;\r\n\r\n  \t// var hit = !this._mouseButtons[button] && buttonLock;\r\n\r\n  \t// this._mouseButtonsLocks[button] = MouseEvent.NONE;\r\n\r\n  \t// return hit;\r\n\r\n  }\r\n\r\n  /**\r\n   * Check if a Mouse button is pressing.\r\n   * \r\n   * @param {MouseButton} button \r\n   */\r\n  press(button) {\r\n    return (this.buttons & (LogicalMouseButton[button] || 0));\r\n  }\r\n\r\n  /*update() {\r\n\r\n    for (var i = 0; i < this._mouseButtons.length; i++) {\r\n\r\n          if (this._mouseButtonsLocksPressed[i] ==  MouseEvent.PRESSED) {\r\n              if (this._mouseDownDuration[i] > 0)\r\n                this._mouseDownDuration[i]--;\r\n              else\r\n                this._mouseButtonsLocksPressed[i] = MouseEvent.PRESS;\r\n          } else\r\n            continue;\r\n\r\n\r\n    }\r\n\r\n  }*/\r\n\r\n  posRelativeTo(object) {\r\n\r\n    var vec2 = {x:0,y:0};\r\n\r\n    vec2.x = this.x - object.x;\r\n    vec2.y = this.y - object.y;\r\n\r\n\r\n    return vec2;\r\n\r\n  }\r\n\r\n  destroy() {\r\n    this.stop();\r\n    this.game = null;\r\n  }\r\n\r\n\r\n}\r\n\r\n","\r\nexport const LogicalMouseButton = {\r\n    Left : 1,\r\n    Middle : 2,\r\n    Right : 4,\r\n    Back : 8,\r\n    Forward : 16\r\n};\r\n\r\nconst MouseButton = {\r\n    Left : 0,\r\n    Middle : 1,\r\n    Right : 2,\r\n    Back : 3,\r\n    Forward : 4\r\n};\r\n\r\nObject.freeze(MouseButton);\r\n\r\nexport default MouseButton;","import Validate from \"../../../utils/Validate\";\r\n\r\nexport default function DisableContextMenu(game, target) {\r\n\r\n    if (!target) {\r\n        target = document.body;\r\n    } else if (Validate.isString(target)) {\r\n\r\n        if (target === 'canvas') {\r\n            target = game.system.render.domCanvas;\r\n        } else {\r\n            target = document.getElementsByClassName(target).item(0);\r\n        }\r\n    }\r\n\r\n    target.addEventListener('contextmenu', function (event)\r\n    {\r\n        event.preventDefault();\r\n        return false;\r\n    });\r\n\r\n}","import StartMouseListener from \"./StartMouseListener\";\r\nimport MouseButton, {\r\n    LogicalMouseButton\r\n} from \"../MouseButton\";\r\nimport Button from \"../../button/Button\";\r\nimport ObjectGet from \"../../../utils/object/ObjectGet\";\r\n\r\n\r\n\r\nexport default function InitializeMouse(mouse, game) {\r\n\r\n    if (!mouse)\r\n        return;\r\n\r\n    for (let prop in LogicalMouseButton) {\r\n\r\n        if (LogicalMouseButton.hasOwnProperty(prop)) {\r\n            let value = LogicalMouseButton[prop];\r\n            mouse._buttonsList.push(new Button(value, game));\r\n        }\r\n    }\r\n\r\n    let gameConfig = game.config.mouse;\r\n    let target = ObjectGet.value(gameConfig, 'target', null);\r\n    let enable = ObjectGet.value(gameConfig, 'enable', true);\r\n\r\n    if (!target) {\r\n        target = game.system.render.domCanvas;\r\n    }\r\n\r\n    mouse._enabled = enable;\r\n    mouse.eventTarget = target;\r\n    mouse.eventHandler = StartMouseListener(mouse, target);\r\n\r\n\r\n}","import ProcessButtonDown from \"../../button/components/ProcessButtonDown\";\r\nimport Mouse from \"../Mouse\";\r\nimport Button from \"../../button/Button\";\r\nimport InputData from \"../../InputData\";\r\n\r\n/*\r\n Left button=1, \r\n Right button=2, \r\n Middle (wheel) button=4, \r\n 4th button (typically, \"Browser Back\" button)=8,\r\n 5th button (typically, \"Browser Forward\" button)=16.\r\n*/\r\n\r\n/**\r\n * \r\n * @param {MouseEvent} event \r\n * @param {Button} button \r\n * @param {Mouse} mouse \r\n * @param {InputData} inputData\r\n */\r\nexport default function ProcessMouseButtonDown(event, button, mouse, inputData) {\r\n\r\n    if (event.buttons) {\r\n        mouse.buttons = event.buttons;\r\n    }\r\n\r\n    ProcessButtonDown(event, button);\r\n\r\n    mouse.event = event;\r\n\r\n    mouse.clientPosition.set(inputData.clientRectTransformX(event.pageX), inputData.clientRectTransformY(event.pageY));\r\n    mouse.x = inputData.transformX(event.clientX);\r\n    mouse.y = inputData.transformY(event.clientY);\r\n\r\n    mouse._isDirty = true;\r\n    mouse.down = true;\r\n\r\n    \r\n\r\n}","\r\nimport ProcessButtonUp from \"../../button/components/ProcessButtonUp\";\r\nimport Button from \"../../button/Button\";\r\nimport InputData from \"../../InputData\";\r\n\r\nimport Mouse from \"../Mouse\";\r\n\r\n/**\r\n * \r\n * @param {MouseEvent} event \r\n * @param {Button} button \r\n * @param {Mouse} mouse \r\n * @param {InputData} inputData \r\n */\r\nexport default function ProcessMouseButtonUp(event, button, mouse, inputData) {\r\n\r\n    if (event.buttons) {\r\n        mouse.buttons = event.buttons;\r\n    }\r\n\r\n    ProcessButtonUp(event, button);\r\n\r\n    mouse.clientPosition.set(inputData.clientRectTransformX(event.pageX), inputData.clientRectTransformY(event.pageY));\r\n    mouse.x = inputData.transformX(event.clientX);\r\n    mouse.y = inputData.transformY(event.clientY);\r\n\r\n    mouse.event = event;\r\n\r\n    mouse._isDirty = true;\r\n    mouse.down = false;\r\n\r\n}","import Mouse from \"../Mouse\";\r\nimport InputData from \"../../InputData\";\r\n\r\n/**\r\n * \r\n * @param {MouseEvent} event \r\n * @param {Mouse} mouse \r\n * @param {InputData} inputData \r\n */\r\nexport default function ProcessMouseMove(event, mouse, inputData) {\r\n\r\n    mouse.event = event;\r\n\r\n    //mouse.clientPosition.set(event.clientX, event.clientY);\r\n\r\n    mouse.clientPosition.set(inputData.clientRectTransformX(event.pageX), inputData.clientRectTransformY(event.pageY));\r\n    mouse.x = inputData.transformX(event.clientX);\r\n    mouse.y = inputData.transformY(event.clientY);\r\n\r\n    mouse.moved = true;\r\n\r\n    mouse._isDirty = true;\r\n\r\n}","import Mouse from \"../Mouse\";\r\n\r\n/**\r\n * \r\n * @param {Mouse} mouse \r\n * @param {HTMLElement} target\r\n */\r\nexport default function StartMouseListener(mouse, target) {\r\n\r\n    // mouse event handler\r\n    let eventQueue = mouse._eventQueue;\r\n\r\n    let config = {\r\n        passive: false\r\n    };\r\n\r\n    let handler = function (event) {\r\n\r\n        if (event.defaultPrevented) {\r\n            return;\r\n        }\r\n\r\n        if (mouse.preventDefault) {\r\n            event.preventDefault();\r\n        }\r\n\r\n        eventQueue.push(event);\r\n\r\n    };\r\n\r\n\r\n    target.addEventListener('mousedown', handler, config);\r\n    target.addEventListener('mousemove', handler, config);\r\n    target.addEventListener('mouseup', handler, config);\r\n    target.addEventListener('mouseenter', handler, config);\r\n    target.addEventListener('mouseleave', handler, config);\r\n\r\n    return handler;\r\n\r\n}","\r\nimport InputData from \"../../InputData\";\r\nimport WatchButtons from \"../../components/WatchButtons\";\r\nimport ButtonStatus from \"../../button/ButtonStatus\";\r\n\r\nimport Mouse from \"../Mouse\";\r\n\r\nimport ProcessMouseMove from \"./ProcessMouseMove\";\r\nimport ProcessMouseButtonDown from \"./ProcessMouseButtonDown\";\r\nimport ProcessMouseButtonUp from \"./ProcessMouseButtonUp\";\r\n\r\n\r\n/**\r\n * \r\n * @param {Mouse} mouse \r\n * @param {InputData} inputData \r\n * @param {number} timeStamp \r\n */\r\nexport default function UpdateMouse(mouse, inputData, timeStamp) {\r\n\r\n    if (!mouse)\r\n        return;\r\n\r\n    if (!mouse._enabled)\r\n        return;\r\n\r\n    WatchButtons(mouse._buttonWatcher, mouse._buttonGarbage);\r\n\r\n    mouse._isDirty = false;\r\n\r\n    let eventSize = mouse._eventQueue.size;\r\n\r\n    if (eventSize === 0)\r\n        return;\r\n\r\n    // clear and copy queue\r\n    let queue = mouse._eventQueue.splice(0, eventSize);\r\n\r\n    for (let i = 0; i < eventSize; i++) {\r\n        let event = queue[i];\r\n        let button;\r\n        let buttonCode = event.button;\r\n\r\n        if (buttonCode !== undefined)\r\n            button = mouse._buttonsList.get(buttonCode);\r\n\r\n        switch (event.type) {\r\n            case 'mousemove':\r\n                {\r\n                    ProcessMouseMove(event, mouse, inputData);\r\n                    break;\r\n                }\r\n            case 'mousedown':\r\n                {\r\n\r\n                    if (button.press === false) {\r\n                        if (button.status === ButtonStatus.NONE) {\r\n                            mouse._buttonWatcher.insert(buttonCode, button);\r\n                        }\r\n\r\n                        ProcessMouseButtonDown(event, button, mouse, inputData);\r\n                    }\r\n\r\n                    break;\r\n                }\r\n            case 'mouseup':\r\n                {\r\n\r\n                    ProcessMouseButtonUp(event, button, mouse, inputData);\r\n\r\n                    break;\r\n                }\r\n        }\r\n\r\n    }\r\n\r\n}","\r\nconst AssetsType = {\r\n    'none' : 0,\r\n    'image' : 1,\r\n    'audio' : 2,\r\n    'text' : 3,\r\n    'svg' : 4,\r\n    'script' : 5,\r\n    'json' : 6,\r\n    'webFont' : 7,\r\n    'tilemapJSON' : 8,\r\n    'spritesheet' : 9,\r\n    'animMachine' : 10\r\n};\r\n\r\nObject.freeze(AssetsType);\r\n\r\nexport default AssetsType;","\r\nimport ObjectGet from '../utils/object/ObjectGet';\r\nimport XHR from './XHR';\r\nimport LoaderState from './LoaderState';\r\nimport AssetsType from './AssetsType';\r\nimport NextAsset from './components/NextAsset';\r\nimport Path from '../utils/Path';\r\n\r\nexport default class File {\r\n\r\n    constructor(config) {\r\n\r\n        this.type = ObjectGet.value(config, 'type', null);\r\n        this.tag = ObjectGet.value(config, 'tag', null);\r\n        this.useExternal =  ObjectGet.value(config, 'useExternal', false);\r\n\r\n        if (this.type === null || this.tag === null)\r\n        {\r\n            throw new Error('Loader.File: Invalid tag.');\r\n        }\r\n\r\n        this.url = ObjectGet.value(config, 'url', undefined);\r\n\r\n        if (this.url === undefined)\r\n            this.url = ObjectGet.value(config, 'path', '') + this.tag + '.' + ObjectGet.value(config, 'ext', '');\r\n        else if (typeof(this.url) !== 'function')\r\n        {\r\n            if (!this.useExternal || this.useExternal !== undefined)\r\n                this.url = ObjectGet.value(config, 'path', '').concat(this.url);\r\n\r\n        }\r\n\r\n        // Web fonts is managed by WebFontLoader provided by google\r\n        // There is no need to create XHR settings and request\r\n        if (this.type !== AssetsType.webFont || this.type !== AssetsType.spritesheet) {\r\n\r\n            this.xhrSettings = XHR.createSettings(ObjectGet.value(config, 'responseType', undefined));\r\n            \r\n            if (ObjectGet.value(config, 'xhrSettings', false))\r\n                this.xhrSettings = XHR.merge(this.xhrSettings, ObjectGet.value(config, 'xhrSettings', {}));\r\n        }\r\n\r\n\r\n        this.loader = null;\r\n        this.state = LoaderState.PENDING;\r\n        this.totalBytes = 0;\r\n        this.loadedBytes = 0;\r\n        this.progress = 0;\r\n        this.data = undefined;\r\n        this.source = null;\r\n        this.xhrRequest = null;\r\n        this.config = ObjectGet.value(config,'config',{});\r\n        this.crossOrigin = undefined;\r\n\r\n        this.onComplete = undefined;\r\n\r\n    }\r\n\r\n    load(gameLoader) {\r\n        this.loader = gameLoader;\r\n\r\n        if (this.state === LoaderState.FINISHED) {\r\n            this.onDone();\r\n\r\n            NextAsset.call(this.loader, this);\r\n            //this.loader.next(this);\r\n            \r\n        }\r\n        else\r\n        {\r\n\r\n            this.source = Path.getURL(this.url, gameLoader.baseURL);\r\n            \r\n            if (this.source.indexOf('data:') === 0 || this.source == null)\r\n            {\r\n                console.warn(\"Loader.File.load: unsupported URI.\");\r\n            }\r\n            else\r\n            {\r\n                this.xhrRequest = XHR.createFileRequest(this, gameLoader.xhr);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    onLoad(event) {\r\n       \r\n        this.clearXHR();\r\n\r\n        if (event.target && event.target.status !== 200)\r\n        {\r\n            NextAsset.call(this.loader, this);\r\n\r\n        } else {\r\n            \r\n            if (this.onPostLoad !== undefined)\r\n                this.onPostLoad(this.loader, this.xhrRequest);\r\n\r\n            NextAsset.call(this.loader, this);\r\n        }\r\n      \r\n    }\r\n\r\n    onError(event)\r\n    {\r\n        console.error(\"Loader.File: Error on load file: \\\"\" + this.url + \"\\\".\")\r\n\r\n        this.clearXHR();\r\n\r\n        NextAsset.call(this.loader, this);\r\n    }\r\n\r\n    onProgress(event)\r\n    {\r\n        if (event.lengthComputable)\r\n        {\r\n            this.loadedBytes = event.loaded;\r\n            this.totalBytes = event.total;\r\n\r\n            this.progress = Math.min((this.loadedBytes / this.totalBytes), 1);\r\n\r\n        }\r\n    }\r\n\r\n    onDone() {\r\n        this.state = LoaderState.DONE;\r\n\r\n        this.loader.game.events.dispatch('file_complete_' + this.tag);\r\n\r\n    }\r\n\r\n    onProcessing(processingCallback)\r\n    {\r\n        this.state = LoaderState.PROCESSING;\r\n\r\n        this.onDone();\r\n\r\n        processingCallback(this);\r\n    }\r\n\r\n\r\n    clearXHR()\r\n    {\r\n        if (this.xhrRequest)\r\n        {\r\n            this.xhrRequest.onload = undefined;\r\n            this.xhrRequest.onerror = undefined;\r\n            this.xhrRequest.onprogress = undefined;\r\n            //this.xhrRequest.onreadystatechange = undefined;\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        this.loader = null;\r\n        this.cache = null;\r\n        this.xhrSettings = null;\r\n        this.data = null;\r\n    }\r\n\r\n\r\n}\r\n\r\n","\r\nexport default class ListInjector {\r\n\r\n    constructor()\r\n    {\r\n        this.list = {};\r\n    }\r\n\r\n    inject(toObj)\r\n    {\r\n        for (var key in this.list)\r\n        {\r\n            toObj[key] = this.list[key];\r\n        }\r\n    }\r\n\r\n    register(key, func)\r\n    {\r\n        this.list[key] = func;\r\n    }\r\n\r\n    destroyfunction()\r\n    {\r\n        this.list = {};\r\n    }\r\n\r\n};","\r\n\r\nimport System from '../core/system/System';\r\nimport ObjectGet from '../utils/object/ObjectGet';\r\nimport XHR from './XHR'\r\nimport AssetTypeHandler from './assets/AssetTypeHandler';\r\nimport LoaderState from './LoaderState'\r\nimport InitializeLoader from './components/InitializeLoader';\r\n\r\n\r\n\r\n// Class LoaderManager\r\nexport default class LoadManager {\r\n  \r\n  constructor(game) {\r\n\r\n    this.game = game;\r\n    this.cache = null;\r\n\r\n    this._filesQueue = null;\r\n    this._filesLoading = null;\r\n    this._successFiles = null;\r\n    this._failedFiles = null;\r\n    this._processedFiles = null;\r\n\r\n    this._filesQueueCount = null;\r\n    this._loadedFilesCount = null;\r\n\r\n    this.isDownloading = false;\r\n    this._totalFiles = 0;\r\n\r\n    this.progress = null;\r\n    this.path = null;\r\n    this.baseURL = null;\r\n    this.state = null;\r\n    this.webFontLoader = undefined;\r\n    this.events = null;\r\n    this.crossOrigin = undefined;\r\n\r\n    let gameConfig = game.config.loader;\r\n\r\n    this.xhr = XHR.createSettings(\r\n      ObjectGet.value(config, 'responseType', gameConfig.responseType),\r\n      ObjectGet.value(config, 'async', gameConfig.async),\r\n      //scintilla.ObjectGet.propertyValue(config, 'user', gameConfig.loaderUser),\r\n      //scintilla.ObjectGet.propertyValue(config, 'password', gameConfig.loaderPassword),\r\n      ObjectGet.value(config, 'timeout', gameConfig.timeout)\r\n  );\r\n  \r\n\r\n    AssetTypeHandler.inject(this);\r\n\r\n  }\r\n\r\n  get totalQueuedFiles() {\r\n    return this._filesQueueCount - this._loadedFilesCount;\r\n  }\r\n\r\n  /*get totalQueuedFiles() {\r\n    return this._filesQueue.size;\r\n  }*/\r\n\r\n\r\n  setPath(path) {\r\n\r\n    if (path === undefined) path = '';\r\n\r\n    if (path !== '' && path.substr(-1) !== '/')\r\n        path = path.concat('/');\r\n\r\n    this.path = path;\r\n\r\n    return this;\r\n  }\r\n\r\n  setBaseURL(baseUrl) {\r\n\r\n    if (baseURL === undefined) baseUrl = '';\r\n\r\n    if (baseUrl !== '' && baseUrl.substr(-1) !== '/')\r\n    {\r\n      baseUrl = baseUrl.concat('/');\r\n    }\r\n\r\n    this.baseURL = baseUrl;\r\n\r\n    return this;\r\n  }\r\n\r\n  setCrossOrigin(crossOrigin) {\r\n    this.crossOrigin = crossOrigin;\r\n    return this;\r\n  }\r\n\r\n  reset() {\r\n\r\n    this.isDownloading = false;\r\n    this._filesQueue.clear();\r\n    this._successFiles.clear();\r\n    this._failedFiles.clear();\r\n    this._processedFiles.clear();\r\n\r\n    this._filesQueueCount = 0;\r\n    this._loadedFilesCount = 0;\r\n\r\n    this.progress = 0;\r\n    this.state = LoaderState.IDLE;\r\n\r\n  }\r\n\r\n\r\n\r\n  /*end : function() {\r\n\r\n    if (this.state === LoaderState.PROCESSING)\r\n        return;\r\n  \r\n    this.progress = 1;\r\n    this.isDownloading = false;\r\n    this.state = LoaderState.PROCESSING;\r\n\r\n    \r\n    this._filesQueue.clear();\r\n    this._failedFiles.length = 0;\r\n    \r\n    this.processFiles();\r\n\r\n    this._successFiles.clear();\r\n\r\n    this.state = LoaderState.DONE;\r\n    //this.game.scene.preloadComplete();\r\n\r\n  },*/\r\n\r\n\r\n\r\n  loadAsset(file) {\r\n\r\n      if (!file.crossOrigin) {\r\n          file.crossOrigin = this.crossOrigin;\r\n      }\r\n\r\n\r\n    file.load(this);\r\n  }\r\n\r\n  isLoading() {\r\n    return (this.state === LoaderState.LOADING || this.state === LoaderState.PROCESSING);\r\n  }\r\n\r\n  isOK() {\r\n    return (this.state === LoaderState.IDLE || this.state === LoaderState.DONE || this.state === LoaderState.ERROR);\r\n  }\r\n\r\n  downloadIsDone() {\r\n    return (this._filesQueue.length === (this._successCount + this._fileErrorCount));\r\n  }\r\n\r\n\r\n};\r\n\r\nSystem.register('Loader',LoadManager,'load', InitializeLoader);","\r\nconst LoaderState = {\r\n    NONE : 0,\r\n    IDLE : 1,\r\n    PENDING : 2,\r\n    LOADING : 3,\r\n    PROCESSING : 4,\r\n    ERROR : 5,\r\n    FINISHED : 6,\r\n    DONE : 7, \r\n};\r\n\r\nObject.freeze(LoaderState);\r\n\r\nexport default LoaderState;","\r\nconst URLObject = {\r\n\r\n    createFromResponse : function(asset, response, type)\r\n    {\r\n\r\n        if (typeof URL === 'function') {\r\n            asset.src = URL.createObjectURL(response);\r\n        } else  {\r\n            let reader = new FileReader();\r\n\r\n            reader.onload = function ()\r\n            {\r\n                asset.removeAttribute('crossOrigin');\r\n                asset.src = 'data:' + (response.type || type) + ';base64,' + reader.result.split(',')[1];\r\n            };\r\n\r\n            reader.onerror = asset.onerror;\r\n\r\n            reader.readAsDataURL(response);\r\n        }   \r\n    },\r\n\r\n\r\n    revoke : function(data)\r\n    {\r\n        if (typeof URL === 'function')\r\n        {\r\n            URL.revokeObjectURL(data.src);\r\n        }\r\n    }\r\n};\r\n\r\nmodule.exports = URLObject;","\r\n\r\nconst XHR = {\r\n\r\n    createFileRequest(file, settings) {\r\n        var xhrSettings = XHR.merge(settings, file.xhrSettings);\r\n\r\n        var xmlHttpRequest = new XMLHttpRequest();\r\n        xmlHttpRequest.open(\"GET\", file.source, xhrSettings.async);\r\n\r\n        if (file.xhrSettings.responseType !== undefined)\r\n            xmlHttpRequest.responseType = file.xhrSettings.responseType;\r\n\r\n        xmlHttpRequest.timeout = xhrSettings.timeout;\r\n\r\n        xmlHttpRequest.onload = file.onLoad.bind(file);\r\n        xmlHttpRequest.onerror = file.onError.bind(file);\r\n        xmlHttpRequest.onprogress = file.onProgress.bind(file);\r\n        \r\n        if (file.onReadyStateChange !== undefined)\r\n            xmlHttpRequest.onreadystatechange = file.onReadyStateChange.bind(file);\r\n\r\n        xmlHttpRequest.send();\r\n\r\n        return xmlHttpRequest;\r\n    },\r\n\r\n    createSettings(type, doAsync, timeout) {\r\n        if (type === undefined) \r\n            type = '';\r\n\r\n        if (doAsync === undefined) \r\n            doAsync = true;\r\n\r\n        if (timeout === undefined)\r\n            timeout = 0;\r\n\r\n        let settings = {\r\n            responseType: type,\r\n            timeout: timeout,\r\n            async: doAsync,\r\n        };\r\n\r\n        return settings;\r\n    },\r\n\r\n    merge(a, b) {\r\n        let out = {};\r\n\r\n        if (a === undefined)\r\n            out = XHR.createSettings(); // : Extend(global);\r\n        // else\r\n            // do something cool\r\n\r\n        if (b)\r\n        {\r\n            for (let setting in b)\r\n            {\r\n                if (b[setting] !== undefined)\r\n                    out[setting] = b[setting];\r\n            }\r\n        }\r\n    \r\n        return out;\r\n    }\r\n\r\n};\r\n\r\nexport default XHR;\r\n\r\n","import AssetTypeHandler from \"./AssetTypeHandler\";\r\nimport AssetsType from \"../AssetsType\";\r\nimport AddAsset from \"../components/AddAsset\";\r\nimport File from \"../File\";\r\nimport LoaderState from \"../LoaderState\";\r\nimport NextAsset from \"../components/NextAsset\";\r\n\r\n\r\n\r\nexport default class AdditionalLoaderResource extends File {\r\n\r\n    constructor(tag, type, config) {\r\n\r\n        config.type = type;\r\n\r\n        let assetConfig = {\r\n            type: type,\r\n            tag: tag,\r\n            config: config\r\n        };\r\n\r\n        super(assetConfig);\r\n    }\r\n\r\n    load(gameLoader) {\r\n        this.loader = gameLoader;\r\n\r\n        if (this.state === LoaderState.FINISHED) {\r\n            this.onDone();\r\n\r\n        }\r\n        /// Do nothing\r\n        NextAsset.call(this.loader, this);\r\n\r\n    }\r\n\r\n    onProcessing(processingCallback) {\r\n\r\n        this.state = LoaderState.PROCESSING;\r\n       \r\n        this.data = this.config;\r\n        \r\n        this.onDone();\r\n\r\n        processingCallback(this);\r\n    }\r\n\r\n}\r\n\r\n\r\nAssetTypeHandler.register('spritesheet', function (tag, imageTag, config) {\r\n\r\n    let resource;\r\n    let options = config;\r\n\r\n    if (!Array.isArray(config)) {\r\n\r\n        options = Array.prototype.slice.call(arguments, 2, arguments.length - 2);\r\n\r\n    }\r\n\r\n        resource = new AdditionalLoaderResource(tag, AssetsType.spritesheet, {\r\n            imageTag: imageTag,\r\n            x: options[0] || 0,\r\n            y: options[1] || 0,\r\n            frameWidth: options[2] || 0,\r\n            frameHeight: options[3] || 0,\r\n            numberOfImages: options[4] || 0,\r\n            framesPerRow: options[5] || undefined,\r\n            spacing: options[6] || undefined,\r\n            duration: options[7] || arguments[3],\r\n        });\r\n\r\n\r\n    AddAsset.call(this, resource);\r\n\r\n    return this;\r\n});\r\n\r\nAssetTypeHandler.register('animMachine', function (tag, animations) {\r\n\r\n    let resource = new AdditionalLoaderResource(tag, AssetsType.animMachine, {\r\n        animations: animations || [],\r\n\r\n    });\r\n\r\n    AddAsset.call(this, resource);\r\n\r\n    return this;\r\n});","\r\nimport ListInjector from '../ListInjector'\r\n\r\nvar AssetTypeHandler = new ListInjector();\r\n\r\nexport default AssetTypeHandler;","import File from \"../File\";\r\nimport AssetTypeHandler from \"./AssetTypeHandler\";\r\nimport AssetsType from \"../AssetsType\";\r\nimport ObjectGet from \"../../utils/object/ObjectGet\";\r\nimport FindAudioURLPath from \"./FindAudioURLPath\";\r\nimport AddAsset from \"../components/AddAsset\";\r\nimport LoaderState from \"../LoaderState\";\r\nimport Environment from \"../../system/PlatformEnvironment\";\r\n\r\nexport default class AudioFile extends File {\r\n\r\n    constructor(tag, url, path, xhrSettings, context) {\r\n\r\n        \r\n\r\n        let assetConfig = {\r\n            tag: tag,\r\n            type: AssetsType.audio,\r\n            ext: ObjectGet.value(url, 'type', ''),\r\n            responseType: 'arraybuffer',\r\n            url: ObjectGet.value(url, 'uri', url),\r\n            path: path,\r\n            xhrSettings: xhrSettings\r\n        };\r\n\r\n        super(assetConfig);\r\n\r\n        this.context = context;\r\n\r\n    }\r\n\r\n    onProcessing(processingCallback)\r\n    {\r\n        this.state = LoaderState.PROCESSING;\r\n\r\n        let self = this;\r\n\r\n        // interesting read https://github.com/WebAudio/web-audio-api/issues/1305\r\n        this.context.decodeAudioData(this.xhrRequest.response,\r\n            function (audioBuffer)\r\n            {\r\n                self.data = audioBuffer;\r\n                self.onDone();\r\n                processingCallback(self);\r\n            },\r\n            function (e)\r\n            {\r\n                console.error('AudioFile.onProcessing: Failed to decode audio data of the file \\'' + self.tag + '\\':', e.message);\r\n                self.state = LoaderState.ERROR;\r\n                processingCallback(self);\r\n            }\r\n        );\r\n\r\n    this.context = null;\r\n\r\n    }\r\n\r\n    static create(loader, tag, urls, config, xhrSettings) {\r\n\r\n\r\n\r\n        /*if ((audioConfig && audioConfig.noAudio))\r\n        {\r\n            console.info('Skipping loading audio \\'' + key + '\\' since sounds are disabled.');\r\n            return null;\r\n        }*/\r\n\r\n        if (!Environment.supportWebAudio && !Environment.supportAudio) {\r\n            console.warn('AudioFile.create: WebAudio is not supported.');\r\n            return null;\r\n        }\r\n\r\n        let url = FindAudioURLPath(urls);\r\n\r\n        if (!url) {\r\n            console.warn('AudioFile.create: URL is not supported for audio file \\'' + tag + '\\'.');\r\n            return null;\r\n        }\r\n\r\n        //if (deviceAudio.webAudio && !(audioConfig && audioConfig.disableWebAudio))\r\n        //{\r\n        return new AudioFile(tag, url, loader.path, xhrSettings,  game.audio._system.context);\r\n        //}\r\n        /*else\r\n        {\r\n            return new HTML5AudioFile(key, url, loader.path, config, game.sound.locked);\r\n        }*/\r\n\r\n    }\r\n\r\n}\r\n\r\nAssetTypeHandler.register('audio', function (tag, url, path, xhrSettings)\r\n{\r\n\r\n    let audio = AudioFile.create(this, tag, url, config, xhrSettings);\r\n\r\n    if (audio)\r\n    {\r\n        AddAsset.call(this, audio);\r\n    }\r\n\r\n    return this;\r\n\r\n});\r\n\r\nmodule.exports = AudioFile;","import ObjectGet from \"../../utils/object/ObjectGet\";\r\nimport Environment from '../../system/PlatformEnvironment';\r\n\r\n// based on phaser - https://github.com/photonstorm/phaser/blob/src/loader/filetypes/AudioFile.js\r\nexport default function FindAudioURLPath(urls)\r\n{\r\n    if (urls.constructor !== Array)\r\n        urls = [urls];\r\n\r\n    for (let i = 0; i < urls.length; i++)\r\n    {\r\n        let url = ObjectGet.value(urls[i], 'uri', urls[i]);\r\n\r\n        if (url.indexOf('blob:') === 0 || url.indexOf('data:') === 0)\r\n        {\r\n            return url;\r\n        }\r\n\r\n        let type = url.match(/\\.([a-zA-Z0-9]+)($|\\?)/);\r\n        type = ObjectGet.value(urls[i], 'type', type ? type[1] : '').toLowerCase();\r\n\r\n   \r\n\r\n\r\n        if (Environment.audioFormats[type])\r\n        {\r\n            return {\r\n                uri: url,\r\n                type: type\r\n            };\r\n        }\r\n    }\r\n\r\n    return null;\r\n}","\r\nimport LoaderState from '../LoaderState'\r\nimport File from '../File'\r\nimport URLObject from '../URLObject'\r\nimport ObjectGet from '../../utils/object/ObjectGet'\r\nimport Path from '../../utils/Path'\r\nimport AssetsType from '../AssetsType';\r\nimport AddAsset from '../components/AddAsset';\r\nimport AssetTypeHandler from './AssetTypeHandler';\r\n\r\nexport default class ImageFile extends File {\r\n    \r\n\r\n    constructor(tag, url, path, xhrSettings, config)\r\n    {\r\n        let assetTag = null;\r\n        \r\n        if (typeof tag === 'string')\r\n        {\r\n            assetTag = tag;\r\n        }\r\n        else\r\n        {\r\n            assetTag = ObjectGet.value(tag, 'tag', '');\r\n        }\r\n\r\n        let assetConfig = {\r\n            type: AssetsType.image,\r\n            tag: assetTag,\r\n            ext: ObjectGet.value(tag, 'ext', Path.getExtension(url)),\r\n            url: ObjectGet.value(tag, 'file', url),\r\n            path: path,\r\n            responseType: 'blob',\r\n            xhrSettings: ObjectGet.value(tag, 'xhr', xhrSettings),\r\n            config: ObjectGet.value(tag, 'config', config)\r\n        };\r\n\r\n        super(assetConfig);\r\n    }\r\n\r\n    onProcessing(processingCallback)\r\n    {\r\n        this.state = LoaderState.PROCESSING;\r\n        this.data = new Image();\r\n        this.data.crossOrigin = this.crossOrigin;\r\n\r\n\r\n        var self = this;\r\n\r\n        this.data.onload = function () {\r\n\r\n            URLObject.revoke(self.data);\r\n\r\n            self.onDone();\r\n\r\n            processingCallback(self);\r\n        };\r\n\r\n        this.data.onerror = function () {\r\n\r\n            URLObject.revoke(self.data);\r\n\r\n            console.warn(\"Loader.ImageFile: Error on load file: \" + self.url + \".\")\r\n\r\n            self.state = LoaderState.ERROR;\r\n\r\n            processingCallback(self);\r\n\r\n        };\r\n\r\n\r\n        URLObject.createFromResponse(this.data, this.xhrRequest.response, 'image/' + this.config.ext);\r\n    }\r\n\r\n}\r\n\r\nAssetTypeHandler.register('image', function (tag, url, path, xhrSettings, force)\r\n{\r\n\r\n    AddAsset.call(this, new ImageFile(tag, url, this.path, xhrSettings), force);\r\n\r\n    return this;\r\n\r\n});\r\n\r\nmodule.exports = ImageFile;","import File from \"../File\";\r\nimport ObjectGet from \"../../utils/object/ObjectGet\";\r\nimport LoaderState from \"../LoaderState\";\r\nimport AssetsType from \"../AssetsType\";\r\nimport AddAsset from \"../components/AddAsset\";\r\nimport AssetTypeHandler from \"./AssetTypeHandler\";\r\n\r\nexport default class JSONFile extends File {\r\n\r\n    constructor(tag, url, path, xhrSettings, config) {\r\n\r\n        let assetConfig = {\r\n            type: AssetsType.json,\r\n            ext: ObjectGet.value(tag, 'ext', 'json'),\r\n            responseType: 'text',\r\n            tag: tag,\r\n            url: ObjectGet.value(tag, 'file', url),\r\n            path: path,\r\n            xhrSettings: ObjectGet.value(tag, 'xhr', xhrSettings)\r\n        };\r\n\r\n        super(assetConfig);\r\n\r\n        if (typeof assetConfig.url === 'object') {\r\n            this.data = assetConfig.url;\r\n            this.state = LoaderState.DONE;\r\n        }\r\n\r\n    }\r\n\r\n    onProcessing(processingCallback) {\r\n        this.state = LoaderState.PROCESSING;\r\n        this.data = JSON.parse(this.xhrRequest.responseText);\r\n        this.onDone();\r\n        processingCallback(this);\r\n    }\r\n\r\n}\r\n\r\nAssetTypeHandler.register('json', function (tag, url, path, xhrSettings) {\r\n    //this.addAsset(new JSONFile(tag, url, this.path, xhrSettings));\r\n    AddAsset.call(this,new JSONFile(tag, url, this.path, xhrSettings));\r\n    return this;\r\n});","\r\nimport File from \"../File\";\r\nimport ObjectGet from \"../../utils/object/ObjectGet\";\r\nimport AssetsType from \"../AssetsType\";\r\nimport Path from \"../../utils/Path\";\r\nimport LoaderState from \"../LoaderState\";\r\nimport AddAsset from \"../components/AddAsset\";\r\nimport AssetTypeHandler from \"./AssetTypeHandler\";\r\nimport URLObject from '../URLObject'\r\n\r\nexport default class SVGFile extends File {\r\n\r\n    constructor(tag, url, path, xhrSettings) {\r\n\r\n        var tag = (typeof tag === 'string') ? tag : ObjectGet.value(tag, 'key', '');\r\n\r\n        let assetConfig = {\r\n            type: AssetsType.svg,\r\n            ext: ObjectGet.value(tag, 'ext', Path.getExtension(url) || 'svg'),\r\n            responseType: 'text',\r\n            tag: tagFile,\r\n            url: ObjectGet.value(tag, 'file', url),\r\n            path: path,\r\n            xhrSettings: ObjectGet.value(tag, 'xhr', xhrSettings)\r\n        };\r\n\r\n        super(assetConfig);\r\n\r\n    }\r\n\r\n    onProcessing(processingCallback) {\r\n        this.state = LoaderState.PROCESSING;\r\n\r\n        let self = this;\r\n        let svg = [ this.xhrLoader.responseText ];\r\n        let blob;\r\n\r\n        try {\r\n            blob = new window.Blob(svg, { type: 'image/svg+xml;charset=utf-8' });\r\n        } catch (e) {\r\n            self.state = LoaderState.ERROR;\r\n            processingCallback(self);\r\n            return;\r\n        }\r\n\r\n\r\n        this.data = new Image();\r\n        this.data.crossOrigin = this.crossOrigin;\r\n       \r\n        this.data.onload = function () {\r\n\r\n            URLObject.revoke(self.data);\r\n\r\n            self.onDone();\r\n\r\n            processingCallback(self);\r\n        };\r\n\r\n        this.data.onerror = function () {\r\n\r\n            URLObject.revoke(self.data);\r\n\r\n            console.warn(\"Loader.SVGFile: Error on load file: \" + self.url + \".\")\r\n\r\n            self.state = LoaderState.ERROR;\r\n\r\n            processingCallback(self);\r\n\r\n        };\r\n\r\n        URLObject.createFromResponse(this.data, blob, 'image/svg+xml');\r\n    }\r\n\r\n}\r\n\r\nAssetTypeHandler.register('svg', function (tag, url, path, xhrSettings) {\r\n    AddAsset.call(this,new SVGFile(tag, url, this.path, xhrSettings));\r\n    return this;\r\n});","import File from \"../File\";\r\nimport ObjectGet from \"../../utils/object/ObjectGet\";\r\nimport AssetsType from \"../AssetsType\";\r\nimport Path from \"../../utils/Path\";\r\nimport LoaderState from \"../LoaderState\";\r\nimport AddAsset from \"../components/AddAsset\";\r\nimport AssetTypeHandler from \"./AssetTypeHandler\";\r\n\r\nexport default class ScriptFile extends File {\r\n\r\n    constructor(tag, url, path, xhrSettings, config) {\r\n\r\n        let tagFile = (typeof tag === 'string') ? tag : ObjectGet.value(tag, 'key', '');\r\n\r\n        let assetConfig = {\r\n            type: AssetsType.script,\r\n            ext: ObjectGet.value(tag, 'ext', Path.getExtension(url) || 'js'),\r\n            responseType: 'text',\r\n            tag: tagFile,\r\n            url: ObjectGet.value(tag, 'file', url),\r\n            path: path,\r\n            xhrSettings: ObjectGet.value(tag, 'xhr', xhrSettings)\r\n        };\r\n\r\n        super(assetConfig);\r\n\r\n    }\r\n\r\n    onPostLoad(loader, xhrLoader) {\r\n        this.state = LoaderState.PROCESSING;\r\n\r\n        \r\n\r\n        // create the element\r\n        this.data = document.createElement('script');\r\n        this.data.language = 'javascript';\r\n        this.data.type = 'text/javascript';\r\n        this.data.defer = false;\r\n        this.data.text = this.xhrRequest.responseText;\r\n\r\n        // append to html document\r\n        document.head.appendChild(this.data);\r\n\r\n        this.loader.game.events.dispatch('file_postload_' + this.tag);\r\n\r\n        //this.onDone();\r\n\r\n        //processingCallback(this);\r\n    }\r\n\r\n}\r\n\r\nAssetTypeHandler.register('script', function (tag, url, path, xhrSettings) {\r\n    //this.addAsset(new ScriptFile(tag, url, this.path, xhrSettings));\r\n    AddAsset.call(this, new ScriptFile(tag, url, this.path, xhrSettings));\r\n    return this;\r\n});","\r\nimport LoaderState from '../LoaderState'\r\nimport File from '../File'\r\nimport ObjectGet from '../../utils/object/ObjectGet'\r\nimport Path from '../../utils/Path'\r\nimport AssetsType from '../AssetsType';\r\nimport AddAsset from '../components/AddAsset';\r\nimport AssetTypeHandler from './AssetTypeHandler';\r\n\r\nexport default class TextFile extends File {\r\n\r\n    constructor(tag, url, path, xhrSettings, config)\r\n    {\r\n        let assetTag = null;\r\n        \r\n        if (typeof tag === 'string')\r\n        {\r\n            assetTag = tag;\r\n        }\r\n        else\r\n        {\r\n            assetTag = ObjectGet.value(tag, 'tag', '');\r\n        }\r\n\r\n        let useExternal = false;\r\n\r\n        if (path !== undefined)\r\n        {\r\n            if (typeof(path) === \"boolean\")\r\n                useExternal = path;\r\n\r\n            \r\n        }\r\n\r\n        let assetConfig = {\r\n            type: AssetsType.text,\r\n            tag: assetTag,\r\n            ext: ObjectGet.value(tag, 'ext', Path.getExtension(url)),\r\n            url: ObjectGet.value(tag, 'file', url),\r\n            path: path,\r\n            responseType: '',\r\n            xhrSettings: ObjectGet.value(tag, 'xhr', xhrSettings),\r\n            config: ObjectGet.value(tag, 'config', config),\r\n            useExternal : useExternal\r\n        };\r\n\r\n        super(assetConfig);\r\n    }\r\n    \r\n    //onLoad(event) {}\r\n\r\n    /*onReadyStateChange(event)\r\n    {\r\n\r\n        console.log(event.target);\r\n        if (this.xhrRequest.status == 200)\r\n        {\r\n            if (this.xhrRequest.readyState == 4)\r\n            {\r\n                this.state = LoaderState.PROCESSING;\r\n                //this.data = window.URL.createObjectURL(this.xhrRequest.response);\r\n                this.data = this.xhrRequest.responseText;\r\n                \r\n                //console.log(this.data);\r\n                this.onDone();\r\n\r\n                //processingCallback(this);\r\n                super.onLoad(event);\r\n            }  \r\n        } else {\r\n            super.onLoad(event);\r\n        }\r\n    }*/\r\n\r\n    onProcessing(processingCallback)\r\n    {\r\n        this.state = LoaderState.PROCESSING;\r\n            //this.data = window.URL.createObjectURL(this.xhrRequest.response);\r\n            this.data = this.xhrRequest.responseText;\r\n            /*var style = document.createElement('style');\r\n            style.innerHTML = this.data;\r\n            document.head.appendChild(style)*/\r\n           // console.log(\"data:\" + this.data);\r\n            this.onDone();\r\n\r\n            processingCallback(this);\r\n    }\r\n\r\n}\r\n\r\nAssetTypeHandler.register('text', function (tag, url, path, xhrSettings)\r\n{\r\n    let endPointPath = this.path;\r\n\r\n    if (path !== undefined)\r\n    {\r\n        \r\n        if (typeof(path) === \"boolean\") // external link\r\n            endPointPath = path;\r\n        \r\n    }\r\n\r\n    AddAsset.call(this, new TextFile(tag, url, endPointPath, xhrSettings));\r\n    //this.addAsset(new TextFile(tag, url, endPointPath, xhrSettings));\r\n\r\n    return this;\r\n\r\n});\r\n\r\nmodule.exports = TextFile;","import File from '../File'\r\nimport JSONFile from './JSONFile';\r\nimport LoaderState from '../LoaderState';\r\nimport Path from '../../utils/Path';\r\nimport AssetsType from '../AssetsType';\r\nimport AddAsset from '../components/AddAsset';\r\nimport AssetTypeHandler from './AssetTypeHandler';\r\n\r\n\r\nfunction CheckImagesSources(loader, source, fullPath) {\r\n\r\n    if (source === undefined)\r\n        return;\r\n\r\n      \r\n\r\n    let size = source.length;\r\n\r\n   \r\n\r\n    if (size <= 0)\r\n        return;\r\n\r\n    for (let i = 0; i < size; i++) {\r\n\r\n        let tileset = source[i];\r\n\r\n        if (tileset.image) {\r\n            let name = Path.getFilenameWithoutExtension(tileset.image) || tileset.name;\r\n            let path = Path.getPathWithoutRoot(fullPath).concat(Path.getFilename(tileset.image));\r\n            loader.image(name, path, undefined, undefined, false);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default class TilemapFileJSON extends JSONFile {\r\n\r\n    constructor(tag, url, path, xhrSettings) {\r\n\r\n        super(tag, url, path, xhrSettings);\r\n        this.type = AssetsType.tilemapJSON;\r\n\r\n    }\r\n\r\n    onPostLoad(loader, xhrLoader) {\r\n\r\n        this.state = LoaderState.PROCESSING;\r\n        this.data = JSON.parse(xhrLoader.responseText);\r\n\r\n        // check tileset images and pipe to the loader\r\n        CheckImagesSources(loader, this.data.tilesets, this.url);\r\n    }\r\n\r\n    onProcessing(processingCallback) {\r\n        this.onDone();\r\n        processingCallback(this);\r\n    }\r\n\r\n\r\n}\r\n\r\nAssetTypeHandler.register('tilemapJSON', function (tag, url, path, xhrSettings) {\r\n    //this.addAsset(new TilemapFileJSON(tag, url, this.path, xhrSettings));\r\n    AddAsset.call(this, new TilemapFileJSON(tag, url, this.path, xhrSettings));\r\n    return this;\r\n});","import File from \"../File\";\r\nimport AssetsType from \"../AssetsType\";\r\nimport LoaderState from \"../LoaderState\";\r\nimport Validate from \"../../utils/Validate\";\r\nimport AddAsset from \"../components/AddAsset\";\r\nimport AssetTypeHandler from \"./AssetTypeHandler\";\r\nimport NextAsset from \"../components/NextAsset\";\r\n\r\n\r\nexport default class WebFontFile extends File {\r\n\r\n    constructor(tag, provider, fontFamily, timeout) {\r\n\r\n        let assetConfig = {\r\n            type: AssetsType.webFont,\r\n            tag: tag,\r\n            config : {\r\n                provider : provider || 'google',\r\n                families : fontFamily,\r\n                timeout : timeout || 3000,\r\n            }\r\n        };\r\n\r\n        super(assetConfig)\r\n\r\n    }\r\n\r\n    load(gameLoader) {\r\n        this.loader = gameLoader;\r\n\r\n        if (this.state === LoaderState.FINISHED) {\r\n            this.onDone();\r\n            NextAsset.call(this.loader, this);\r\n        } else if (this.loader.webFontLoader !== undefined && this.loader.webFontLoader.state === LoaderState.DONE) {\r\n            if (this.fontLoad !== undefined)\r\n                this.fontLoad();\r\n        }\r\n        \r\n        // Do nothing, wait for signal\r\n    }\r\n\r\n    fontLoad() {\r\n\r\n        if (WebFont !== undefined) {\r\n\r\n            this.state = LoaderState.PROCESSING;\r\n\r\n            let provider = this.config['provider'];\r\n\r\n            if (!Validate.isArray(this.config.families)) {\r\n                let families = [];\r\n                families.push(this.config.families);\r\n                this.config.families = families;\r\n            }\r\n\r\n            let WebFontProvider = {\r\n                families : this.config.families\r\n            }\r\n\r\n            let WebFontConfig = {\r\n                timeout : this.config.timeout,\r\n                inactive : this.onError.bind(this),\r\n                fontactive : this.onLoad.bind(this),\r\n                classes : true\r\n            }\r\n\r\n            \r\n\r\n            WebFontConfig[provider] = WebFontProvider;\r\n\r\n            WebFont.load(WebFontConfig);\r\n        }\r\n    }\r\n\r\n    onLoad(familyName, fvd) {\r\n\r\n        this.data = {\r\n            family : familyName,\r\n            fvd : fvd\r\n        }\r\n\r\n        //this.loader.next(this, true);\r\n        NextAsset.call(this.loader, this);\r\n\r\n        \r\n    }\r\n}\r\n\r\nAssetTypeHandler.register('webFont', function (tag, provider, fontFamily, timeout) {\r\n    //this.addAsset(new WebFontFile(tag, provider, fontFamily, timeout));\r\n    AddAsset.call(this, new WebFontFile(tag, provider, fontFamily, timeout));\r\n    return this;\r\n});","\r\nmodule.exports = {\r\n    AssetsTypeHandler : require('./AssetTypeHandler'),\r\n    ImageFile : require('./ImageFile'),\r\n    AudioFile : require('./AudioFile'),\r\n    SVGFile : require('./SVGFile'),\r\n    TextFile : require('./TextFile'),\r\n    ScriptFile : require('./ScriptFile'),\r\n    JSONFile : require('./JSONFile'),\r\n    TilemapJSON : require('./TilemapJSON'),\r\n    WebFontFile : require('./WebFontFile'),\r\n    AdditionalResources : require('./AdditionalLoaderResources')\r\n}","import AssetsType from \"../AssetsType\";\r\nimport ScriptFile from \"../assets/ScriptFile\";\r\n\r\nlet webFontLoader = null;\r\n\r\nconst webFontLoaderChecker = function(loader, asset) {\r\n\r\n    if (asset.type !== AssetsType.webFont)\r\n        return;\r\n\r\n    if (webFontLoader !== null)\r\n        return;\r\n\r\n    if (WebFont !== undefined)\r\n        return;\r\n\r\n    webFontLoader = new ScriptFile('webFontLoader',\"https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js\");\r\n    loader._filesQueue.insert(webFontLoader);\r\n    loader._filesQueueCount++;\r\n\r\n    loader.game.events.create('file_postload_webFontLoader').subscribeOnce(\r\n        () => {\r\n        asset.fontLoad();\r\n        });\r\n\r\n\r\n};\r\n\r\nexport default function AddAsset(asset, check) {\r\n\r\n    if (check === undefined) check = true;\r\n\r\n    if (!this.isOK() && check)\r\n        return -1;\r\n\r\n    // is if web font, we should load the WebFontLoader\r\n    webFontLoaderChecker(this, asset);\r\n\r\n\r\n    asset.path = this.path;\r\n    this._filesQueue.insert(asset);\r\n    this._filesQueueCount++;\r\n    return asset;\r\n\r\n}","import LoaderState from \"../LoaderState\";\r\nimport DeleteSucceedQueuedAsset from \"./DeleteSucceedQueuedAsset\";\r\n\r\nexport default function AssetProcessingUpdate(file) {\r\n    \r\n    if (file.state === LoaderState.ERROR)\r\n    {\r\n       this._failedFiles.insert(file);\r\n\r\n        /*if (file.linkFile)\r\n        {\r\n            this.queue.delete(file.linkFile);\r\n        }*/\r\n\r\n        //return this.deleteFromSuccessQueue(file);\r\n        return DeleteSucceedQueuedAsset.call(this, file);\r\n    }\r\n\r\n\r\n    this._processedFiles.insert(file);\r\n\r\n    return  DeleteSucceedQueuedAsset.call(this, file);//this.deleteFromSuccessQueue(file);\r\n\r\n  }","import LoaderState from \"../LoaderState\";\r\nimport ProcessDoneAssets from \"./ProcessDoneAssets\";\r\n\r\nexport default function DeleteSucceedQueuedAsset(file) {\r\n    \r\n    this._successFiles.erase(file);\r\n\r\n    if (this._successFiles.size === 0 && this.state === LoaderState.PROCESSING)\r\n        ProcessDoneAssets.call(this);\r\n        \r\n}","\r\nimport DataSet from '../../structures/Set'\r\nimport EventManager from '../../event/EventManager';\r\nimport LoaderState from '../LoaderState';\r\n\r\nexport default function InitializeLoader() {\r\n\r\n    this.cache = this.game.system.cache;\r\n\r\n    this._filesQueue = new DataSet();\r\n    this._filesLoading = new DataSet();\r\n    this._successFiles = new DataSet();\r\n    this._failedFiles = new DataSet();\r\n    this._processedFiles = new DataSet();\r\n    //this.events = new EventManager();\r\n\r\n    this._filesQueueCount = 0;\r\n    this._loadedFilesCount = 0;\r\n\r\n    this.progress = 0;\r\n    this.path = '';\r\n    this.baseURL = '';\r\n    this.state = LoaderState.IDLE;\r\n}","import LoaderState from \"../LoaderState\";\r\nimport ProcessDoneAssets from \"./ProcessDoneAssets\";\r\nimport AssetProcessingUpdate from \"./AssetProcessingUpdate\";\r\n\r\nexport default function LoaderFinished() {\r\n\r\n    if (this.state === LoaderState.PROCESSING)\r\n        return;\r\n  \r\n    this.progress = 1;\r\n    this.isDownloading = false;\r\n    this.state = LoaderState.PROCESSING;\r\n\r\n    this._processedFiles.clear();\r\n\r\n    if (this._successFiles.size === 0)\r\n    {\r\n        ProcessDoneAssets.call(this);// this.processingDone();\r\n\r\n    } else {\r\n     \r\n      this._successFiles.each(function(file) {\r\n        file.onProcessing(AssetProcessingUpdate.bind(this));\r\n      },this);\r\n    }\r\n   \r\n  }","import ProcessAssetsQueue from \"./ProcessAssetsQueue\";\r\nimport LoaderFinished from \"./LoaderFinished\";\r\n//import UpdateProgress from \"./UpdateProgress\";\r\n\r\n\r\nexport default function NextAsset(concludedFile, hasError) {\r\n\r\n    if (hasError) {\r\n        this._failedFiles.insert(concludedFile);\r\n    } else { \r\n        this._successFiles.insert(concludedFile);\r\n    }\r\n\r\n    this._filesLoading.erase(concludedFile);\r\n    this._loadedFilesCount++;\r\n\r\n    //this.updateProgress();\r\n    //UpdateProgress.call(this);\r\n\r\n    if (this._filesQueue.size > 0)//(this._loadedFilesCount < this._filesQueueCount)\r\n    {\r\n        //this.processFileQueue();\r\n        ProcessAssetsQueue.call(this);\r\n    } else if (this._filesLoading.size === 0) {\r\n      \r\n        //this.loadFinished();\r\n        LoaderFinished.call(this);\r\n    }\r\n\r\n}","import LoaderState from \"../LoaderState\";\r\n\r\nexport default function ProcessAssetsQueue() {\r\n\r\n    let self = this;\r\n\r\n    this._filesQueue.each(function(file) {\r\n\r\n      if (file.state === LoaderState.FINISHED ||\r\n         file.state === LoaderState.PENDING) //  && this.inflight.size < this.maxParallelDownloads))\r\n      {\r\n        \r\n\r\n        self._filesLoading.insert(file);\r\n\r\n        self._filesQueue.erase(file);\r\n\r\n        self.loadAsset(file);\r\n      }\r\n\r\n    });\r\n\r\n}","import PreloadSceneComplete from \"../../scene/components/PreloadSceneComplete\";\r\nimport LoaderState from \"../LoaderState\";\r\nimport AssetsType from \"../AssetsType\";\r\nimport ParseTiledJSON from \"../../resources/tilemap/parser/ParseTiledJSON\";\r\n\r\nexport default function ProcessDoneAssets() {\r\n\r\n    this._successFiles.clear();\r\n    this._filesQueue.clear();\r\n\r\n    let cache = this.cache;\r\n\r\n\r\n    if (this._processedFiles.size > 0)\r\n    {\r\n\r\n      // sort the assets by type priority \r\n      this._processedFiles.sort((a, b) => {\r\n        return (a.type > b.type);\r\n      });\r\n\r\n      let self = this;\r\n\r\n      // add assets to cache\r\n      this._processedFiles.each(function(file) {\r\n\r\n       let asset;\r\n\r\n        switch (file.type)\r\n        {\r\n          default:\r\n            break;\r\n\r\n          case AssetsType.svg: \r\n          case AssetsType.image: {\r\n            asset = cache.image.add(file.tag,file.data);\r\n            break;\r\n          }\r\n\r\n          case AssetsType.audio: {\r\n            asset = cache.audio.add(file.tag, file.data);\r\n            break;\r\n          }\r\n          case AssetsType.json: {\r\n            asset = cache.json.add(file.tag, file.data);\r\n            break;\r\n          }\r\n          \r\n          case AssetsType.tilemapJSON: {\r\n            asset = ParseTiledJSON(file.tag, file.data, cache);\r\n            cache.tilemap.add(file.tag, asset);\r\n            break;\r\n          }\r\n\r\n          case AssetsType.spritesheet: {\r\n            asset = cache.animation.add(file.tag,file.data);\r\n            break;\r\n          }\r\n\r\n          case AssetsType.animMachine: {\r\n            asset = cache.animMachine.add(file.tag,file.data);\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (asset !== undefined)\r\n          self.game.events.dispatch('asset_complete', asset, file.type);\r\n\r\n      });\r\n\r\n      //\r\n    }\r\n    this._processedFiles.clear();\r\n    this.state = LoaderState.DONE;\r\n\r\n    //this.game.scene.preloadComplete();\r\n    PreloadSceneComplete.call(this.game.scene);\r\n  }","import LoaderFinished from \"./LoaderFinished\";\r\nimport ProcessAssetsQueue from \"./ProcessAssetsQueue\";\r\nimport LoaderState from \"../LoaderState\";\r\n\r\nexport default function StartLoadAssets() {\r\n\r\n    if (!this.isOK())\r\n    {\r\n        return -1;\r\n    }\r\n\r\n    this.progress = 0;\r\n    this._loadedFilesCount = 0;\r\n    this.state = LoaderState.LOADING;\r\n    this._filesQueueCount = this._filesQueue.size;\r\n\r\n    if (this._filesQueue.size === 0)\r\n    {\r\n      //console.log(0);\r\n      //this.loadFinished();\r\n      LoaderFinished.call(this);\r\n    }\r\n    else\r\n    {\r\n      this.isDownloading = true;\r\n      this._successFiles.clear();\r\n      this._failedFiles.clear();\r\n      this._filesLoading.clear();\r\n\r\n      //this.processFileQueue();\r\n      ProcessAssetsQueue.call(this);\r\n    }\r\n\r\n  }","\r\nmodule.exports = {\r\n\r\n    LoaderState: require('./LoaderState'),\r\n    File: require('./File'),\r\n    XHR: require('./XHR'),\r\n    URLObject : require('./URLObject'),\r\n    AssetsType : require('./AssetsType'),\r\n    Assets: require('./assets'), \r\n    LoaderManager: require('./LoaderManager'),\r\n\r\n};","import Vector2 from './Vector2';\r\nimport Rect from './Rect';\r\n\r\nexport default class BoundingBox {\r\n\r\n  constructor(x, y, width, height) {\r\n\r\n    this.min = new Vector2();\r\n    this.max = new Vector2();\r\n\r\n    if (x instanceof BoundingBox) {\r\n\r\n      this.min.copy(x.min);\r\n      this.max.copy(x.max);\r\n\r\n    } else {\r\n      x = x || Infinity;\r\n      y = y || Infinity;\r\n      width = width || -Infinity;\r\n      height = height || -Infinity;\r\n\r\n      this.min.x = x;\r\n      this.min.y = y;\r\n      this.max.x = width;\r\n      this.max.y = height;\r\n    }\r\n  }\r\n\r\n\r\n  get center() {\r\n    return new Vector2(\r\n      (this.max.x - this.min.x) / 2,\r\n      (this.max.y - this.min.y) / 2\r\n    );\r\n  }\r\n\r\n  get size() {\r\n    return new Vector2(\r\n      (this.max.x - this.min.x),\r\n      (this.max.y - this.min.y)\r\n    );\r\n  }\r\n\r\n\r\n  set(minX, minY, maxX, maxY) {\r\n\r\n    this.min.set(minX, minY);\r\n    this.max.set(maxX, maxY);\r\n    //this.box.set(this.min.x,this.min.y,this.max.x-this.min.x,this.max.y-this.min.y);\r\n    return this;\r\n\r\n  }\r\n\r\n  setMin(minX, minY) {\r\n    this.min.x = minX;\r\n    this.min.y = minY;\r\n    return this;\r\n  }\r\n\r\n  setMax(maxX, maxY) {\r\n    this.max.x = maxX;\r\n    this.max.y = maxY;\r\n    return this;\r\n  }\r\n\r\n  move(x, y) {\r\n    this.min.x += x;\r\n    this.min.y += y;\r\n    this.max.x += x;\r\n    this.max.y += y;\r\n  }\r\n\r\n  intersects(bounds) {\r\n    return (\r\n      (this.max.x >= bounds.min.x &&\r\n        this.max.y >= bounds.min.y &&\r\n        this.min.x <= bounds.max.x &&\r\n        this.min.y <= bounds.max.y) ||\r\n\r\n      (this.min.x >= bounds.max.x &&\r\n        this.min.y >= bounds.max.y &&\r\n        this.max.x <= bounds.min.x &&\r\n        this.max.y <= bounds.min.y));\r\n  }\r\n\r\n  contains(x, y) {\r\n    return (\r\n      x > this.min.x &&\r\n      y > this.min.y &&\r\n      x < this.max.x &&\r\n      y < this.max.y);\r\n  }\r\n\r\n  expand(xRadius, yRadius) {\r\n\r\n    yRadius = yRadius || xRadius;\r\n\r\n    if (this.max.x > this.min.x) {\r\n      this.min.x -= xRadius;\r\n      this.max.x += xRadius;\r\n    } else {\r\n      this.min.x += xRadius;\r\n      this.max.x -= xRadius;\r\n    }\r\n\r\n    if (this.max.y > this.min.y) {\r\n      this.min.y -= yRadius;\r\n      this.max.y += yRadius;\r\n    } else {\r\n      this.min.y += yRadius;\r\n      this.max.y -= yRadius;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  decrease(xRadius, yRadius) {\r\n    return this.expand(-xRadius, -yRadius);\r\n  }\r\n\r\n  merge(value) {\r\n\r\n    // merge with another bounds\r\n    if (value instanceof BoundingBox) {\r\n      this.min.x = Math.min(this.min.x, value.min.x);\r\n      this.min.y = Math.min(this.min.y, value.min.y);\r\n      this.max.x = Math.max(this.max.x, value.max.x);\r\n      this.max.y = Math.max(this.max.y, value.max.y);\r\n      return this;\r\n    } else if (value instanceof Vector2) {\r\n      return this.mergeWithPoint(value.x, value.y);\r\n    } else {\r\n      this.min.x = Math.min(this.min.x, value);\r\n      this.min.y = Math.min(this.min.y, value);\r\n      this.max.x = Math.max(this.max.x, value);\r\n      this.max.y = Math.max(this.max.y, value);\r\n      return this;\r\n    }\r\n  }\r\n\r\n  mergeWithPoint(x, y) {\r\n    this.min.x = Math.min(this.min.x, x);\r\n    this.min.y = Math.min(this.min.y, y);\r\n    this.max.x = Math.max(this.max.x, x);\r\n    this.max.y = Math.max(this.max.y, y);\r\n    return this;\r\n  }\r\n\r\n  extend(bounds) {\r\n    // min merge\r\n    if (bounds.min.x < this.min.x)\r\n      this.min.x = bounds.min.x;\r\n\r\n    if (bounds.min.y < this.min.y)\r\n      this.min.y = bounds.min.y;\r\n\r\n    // max merge\r\n    if (bounds.max.x > this.max.x)\r\n      this.max.x = bounds.max.x;\r\n\r\n    if (bounds.max.y > this.max.y)\r\n      this.max.y = bounds.max.y;\r\n\r\n    return this;\r\n  }\r\n\r\n  extendByPoint(x, y) {\r\n    if (x < this.min.x) this.min.x = x;\r\n    if (y < this.min.y) this.min.y = y;\r\n    if (x > this.max.x) this.max.x = x;\r\n    if (y > this.max.y) this.max.y = y;\r\n\r\n    return this;\r\n  }\r\n\r\n  limit(xmin, ymin, xmax, ymax) {\r\n    if (this.min.x < xmin)\r\n      this.min.x = xmin;\r\n\r\n    if (this.min.y < ymin)\r\n      this.min.y = ymin;\r\n\r\n    if (this.max.x > xmax)\r\n      this.max.x = xmax;\r\n\r\n    if (this.max.y > ymax)\r\n      this.max.y = ymax;\r\n  }\r\n\r\n  offset(x, y) {\r\n    let o = {\r\n      x: x,\r\n      y: y\r\n    };\r\n    o.x -= this.min.x;\r\n    o.y -= this.min.y;\r\n\r\n    if (this.max.x > this.min.x)\r\n      o.x /= this.max.x - this.min.x;\r\n\r\n    if (this.max.y > this.min.y)\r\n      o.y /= this.max.y - this.min.y;\r\n\r\n    return o;\r\n  }\r\n\r\n  toString() {\r\n    return \"{ min: \" + this.min.toString() + \", max: \" + this.max.toString() + \" }\";\r\n  }\r\n\r\n  copy(bounds) {\r\n    this.min.copy(bounds.min);\r\n    this.max.copy(bounds.max);\r\n    return this;\r\n  }\r\n\r\n}","const MathUtils = {\r\n\r\n\r\n  toRadian: Math.PI / 180,\r\n  toDegree: 180 / Math.PI,\r\n  TAU: Math.PI * 2,\r\n  //HALFPI : Math.PI / 2,\r\n  EPSILON: Math.pow(2, -52),\r\n  HALFPI: 1.5707963267948966,\r\n\r\n  floor: function (value) {\r\n    return (value >> 0);\r\n  },\r\n\r\n  round: function (value) {\r\n    // With a bitwise or.\r\n    //let rounded = (0.5 + value) | 0;\r\n    // FASTEST - A double bitwise not.\r\n    return ~~(0.5 + value);\r\n\r\n    // Finally, a left bitwise shift.\r\n    //rounded = (0.5 + value) << 0;\r\n  },\r\n\r\n  abs: function (value) {\r\n    return ((value < 0) ? (-value) : (value));\r\n  },\r\n\r\n  max: function (a, b) {\r\n    return (a < b) ? b : a;\r\n  },\r\n\r\n  min: function (a, b) {\r\n    return !(b < a) ? a : b;\r\n  },\r\n\r\n  sign : function(value) {\r\n    return (value < 0) ? -1 : (value > 0) ? 1 : 0;\r\n  },\r\n\r\n  clamp: function (value, min, max) {\r\n    return (value > min) ? (value < max) ? value : max : min;\r\n  },\r\n\r\n  lerp: function (fromValue, toValue, t) {\r\n    return (1.0 - t) * fromValue + t * toValue;\r\n  },\r\n\r\n  clampedLerp: function (fromValue, toValue, t) {\r\n    t = MathUtils.clamp(t, 0.0, 1.0);\r\n    return MathUtils.lerp(fromValue, toValue, t);\r\n  },\r\n  \r\n\r\n  impreciseLerp: function (fromValue, toValue, t) {\r\n    return fromValue + t * (toValue - fromValue);\r\n  },\r\n\r\n  distance: function (x0, y0, x1, y1) {\r\n    return Math.sqrt((x0 -= x1) * x0 + (y0 -= y1) * y0);\r\n  },\r\n\r\n  angleBetween: function (x0, y0, x1, y1) {\r\n    let angle = this.toDegree(Math.atan2(y1 - y0, x1 - x0));\r\n\r\n    if (angle < 0 && angle >= -180)\r\n      angle = 360 + angle;\r\n\r\n\r\n    return angle;\r\n  },\r\n\r\n  radianToDegree: function (radians) {\r\n    return radians * MathUtils.toDegree;\r\n  },\r\n\r\n  degreeToRadian: function (degrees) {\r\n    return degrees * MathUtils.toRadian;\r\n  },\r\n\r\n  manhattan: function (from_x, from_y, to_x, to_y) {\r\n    return {\r\n      x: MathUtils.abs(to_x - from_x),\r\n      y: MathUtils.abs(to_y - from_y)\r\n    };\r\n  },\r\n\r\n  inManhattanRadius: function (from_x, from_y, to_x, to_y, radius, radius_y) {\r\n    if (radius_y === undefined) radius_y = radius;\r\n    var dist = this.manhattan(from_x, from_y, to_x, to_y);\r\n    if (dist.x <= radius && dist.y <= radius_y)\r\n      return true;\r\n    else\r\n      return false;\r\n  },\r\n \r\n  average : function() {\r\n    let length = arguments.length;\r\n    if (length === 0)\r\n      return 0;\r\n    return (this.sum.apply(this, arguments) / length);\r\n\r\n  },\r\n\r\n  sum : function() {\r\n    let length = arguments.length;\r\n    if (length === 0)\r\n      return 0;\r\n    let r = arguments[0];\r\n    for (let i = 1; i < length; i++) {\r\n      r += arguments[i];\r\n    }\r\n    return r;\r\n  },\r\n\r\n  sub : function() {\r\n    let length = arguments.length;\r\n    if (length === 0)\r\n      return 0;\r\n    let r = arguments[0];\r\n    for (let i = 1; i < length; i++) {\r\n      r -= arguments[i];\r\n    }\r\n    return r;\r\n  },\r\n\r\n  lerpAngle: function (fromValue, toValue, t) {\r\n\r\n    /*var shortest_angle = ((((toValue - fromValue) % 360) + 540) % 360) - 180;\r\n    return shortest_angle * t;*/\r\n\r\n    var end = toValue;\r\n    var start = fromValue;\r\n\r\n    var difference = Math.abs(end - start);\r\n    if (difference > 180) {\r\n      // We need to add on to one of the values.\r\n      if (end > start) {\r\n        // We'll add it on to start...\r\n        start += 360;\r\n      } else {\r\n        // Add it on to end.\r\n        end += 360;\r\n      }\r\n    }\r\n\r\n    // Interpolate it.\r\n    var value = (start + ((end - start) * t));\r\n\r\n    // Wrap it..\r\n    var rangeZero = 360;\r\n\r\n    if (value >= 0 && value <= 360)\r\n      return value;\r\n\r\n    return (value % rangeZero);\r\n\r\n\r\n  }\r\n\r\n};\r\n\r\nObject.freeze(MathUtils);\r\n\r\nexport default MathUtils;","\r\n/*\r\n\r\n\r\n* | a | b | x | * | 0 | 2 | 4 |\r\n* | c | d | y | * | 1 | 3 | 5 |\r\n* | 0 | 0 | 1 |\r\n\r\n* | 0 | 3 | 6 | * | a | c | x |\r\n* | 1 | 4 | 7 | * | b | d | y |\r\n* | 2 | 5 | 8 | * | 0 | 0 | 1 |\r\n\r\na = scale_x\r\nb = cos\r\nx = x translate\r\n\r\nc = scale_y\r\nd = sin\r\ny = y translate\r\n\r\nHTML5/CSS3 uses matrices in column-major order based.\r\n\r\n*/\r\n\r\nexport default class Matrix3 {\r\n  \r\n  /*\r\n  * Constructor is identity only\r\n  */\r\n  constructor(a, b) {\r\n\r\n    /*a = a || i;\r\n    b = b || 0;\r\n    x = x || 0;\r\n\r\n    c = c || 0;   \r\n    d = d || i;   \r\n    y = y || 0;*/\r\n\r\n    a = a || 0;\r\n    b = b || 0;\r\n\r\n    this.a = [];\r\n\r\n    // first column\r\n    this.a[0] = a;\r\n    this.a[1] = b;\r\n    this.a[2] = b;\r\n    // second column\r\n    this.a[3] = b;\r\n    this.a[4] = a;\r\n    this.a[5] = b;\r\n    // third column\r\n    this.a[6] = b; \r\n    this.a[7] = b;\r\n    this.a[8] = a;\r\n    //this.at = null;\r\n\r\n  }\r\n\r\n  at(i, j) {\r\n    return this.a[i + j * 3];\r\n  }\r\n\r\n  set(i, j, value) {\r\n    this.a[i + j * 3] = value;\r\n    return this;\r\n  }\r\n\r\n  setIdentity() {\r\n    return this.setTransform(\r\n      1,0,0,\r\n      0,1,0,\r\n      0,0,1\r\n    );\r\n  }\r\n\r\n  setTransform(a, b, c, d, e, f, g, h, i) {\r\n\r\n    this.a[0] = a;\r\n    this.a[1] = b;\r\n    this.a[2] = c; // 0\r\n\r\n    this.a[3] = d;\r\n    this.a[4] = e;\r\n    this.a[5] = f; // 0\r\n\r\n    this.a[6] = g; // x\r\n    this.a[7] = h; // y\r\n    this.a[8] = i;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  translate(x, y) {\r\n\r\n\r\n  /* | a | b | x | * | 0 | 2 | 4 |\r\n  *  | c | d | y | * | 1 | 3 | 5 |\r\n\r\n  * | 0 | 3 | 6 | * | a | c | x |\r\n  * | 1 | 4 | 7 | * | b | d | y |\r\n  * | 2 | 5 | 8 |\r\n  */\r\n    // 4 = 0 * x * 2 * y + 4\r\n    // 5 = 1 * x * 3 * y + 5\r\n\r\n    // 6 = 1 * x + 3 * y + 5\r\n    // 7 = 1 * x + 4 * y + 7\r\n    this.a[6] = this.a[0] * x + this.a[3] * y + this.a[6];\r\n    this.a[7] = this.a[1] * x + this.a[4] * y + this.a[7];\r\n    return this;\r\n  }\r\n\r\n  scale(x, y) {\r\n\r\n    this.a[0] *= x; // a\r\n    this.a[1] *= x; // b\r\n\r\n    this.a[3] *= y; // c\r\n    this.a[4] *= y; // d\r\n\r\n    this.a[6] *= x; // x\r\n    this.a[7] *= y; // y\r\n    return this;\r\n\r\n  }\r\n\r\n  rotate(radianAngle) {\r\n    let cos = Math.cos(radianAngle);\r\n    let sin = Math.sin(radianAngle);\r\n\r\n    return this.radianRotate(cos, sin);\r\n }\r\n\r\n radianRotate(cos, sin) {\r\n return this.transform(cos, sin, -sin, cos, 0, 0);\r\n }\r\n\r\n transform(a, b, c, d, x, y) {\r\n  let a00 = this.a[0]; // a\r\n  let a01 = this.a[1]; // b\r\n\r\n  let a10 = this.a[3]; // c\r\n  let a11 = this.a[4]; // d\r\n\r\n  let a20 = this.a[6]; // x\r\n  let a21 = this.a[7]; // y\r\n\r\n  this.a[0] = a * a00 + b * a10; // a * a0 + b * c0;\r\n  this.a[1] = a * a01 + b * a11; // a * b0 + b * d0;\r\n\r\n  this.a[3] = c * a00 + d * a10; // c * a0 + d * c0;\r\n  this.a[4] = c * a01 + d * a11; // c * b0 + d * d0;\r\n\r\n  this.a[6] = x * a00 + y * a10 + a20; // x * a0 + y * c0 + x0;\r\n  this.a[7] = x * a01 + y * a11 + a21; // x * b0 + y * d0 + y0;\r\n\r\n  return this;\r\n }  \r\n\r\n setModelMatrix(position, scale, rotation, origin) {\r\n    this.a[0] = rotation.x * scale.x; // a\r\n    this.a[1] = rotation.y * scale.x; // b\r\n    this.a[3] = -rotation.y * scale.y; // c\r\n    this.a[4] =  rotation.x * scale.y; // d\r\n    this.a[6] = position.x; // x\r\n    this.a[7] = position.y; // y\r\n\r\n    /*if (origin !== undefined) {\r\n      this.a[6] -= origin.x * this.a[0] + origin.y * this.a[3];\r\n      this.a[7] -= origin.y * this.a[1] + origin.y * this.a[4];\r\n    }*/\r\n\r\n    return this;\r\n    /*\r\n    a  =  _transform._cosSin.x * _transform.scale.x;\r\n    b  = _transform._cosSin.y * _transform.scale.x;\r\n    c  = -_transform._cosSin.y * _transform.scale.y;\r\n    d  =  _transform._cosSin.x * _transform.scale.y;\r\n    x =  _transform.position.x;\r\n    y =  _transform.position.y;\r\n\r\n    x -= _transform.origin.x * a + _transform.origin.y * c;\r\n    y -= _transform.origin.y * b + _transform.origin.y * d;\r\n    */\r\n\r\n    \r\n }\r\n\r\n\r\n multiply(other) {\r\n\r\n    // faster way\r\n    let a00 = this.a[0]; // a - 0\r\n    let a01 = this.a[1]; // b - 1\r\n    let a10 = this.a[3]; // c - 3\r\n    let a11 = this.a[4]; // d - 4\r\n    let a20 = this.a[6]; // x - 6\r\n    let a21 = this.a[7]; // y - 7\r\n\r\n    this.a[0] = other.a[0] * a00 + other.a[1] * a10; // a1 * a0 + b1 * c0;\r\n    this.a[1] = other.a[0] * a01 + other.a[1] * a11; // a1 * b0 + b1 * d0;\r\n\r\n    this.a[3] = other.a[3] * a00 + other.a[4] * a10; // c1 * a0 + d1 * c0;\r\n    this.a[4] = other.a[3] * a01 + other.a[4] * a11; // c1 * b0 + d1 * d0;\r\n\r\n    this.a[6] = other.a[6] * a00 + other.a[7] * a10 + a20; // x1 * a0 + y1 * c0 + x0;\r\n    this.a[7] = other.a[6] * a01 + other.a[7] * a11 + a21; // x1 * b0 + y1 * d0 + y0;\r\n\r\n    return this;\r\n }\r\n\r\n concat(other) {\r\n\r\n  let a = this.a[0]; // a - 0\r\n  let b = this.a[1]; // b - 1\r\n  let c = this.a[3]; // c - 3\r\n  let d = this.a[4]; // d - 4\r\n  let x = this.a[6]; // x - 6\r\n  let y = this.a[7]; // y - 7\r\n\r\n  this.a[0] = a * other.a[0] + b * other.a[3]; // a * pt.a + b * pt.c;\r\n  this.a[1] = a * other.a[1] + b * other.a[4]; // a * pt.b + b * pt.d;\r\n\r\n  this.a[3] = c * other.a[0] + d * other.a[3]; // c * pt.a + d * pt.c;\r\n  this.a[4] = c * other.a[1] + d * other.a[4]; // c * pt.b + d * pt.d;\r\n\r\n  this.a[6] = x * other.a[0] + y * other.a[3] + other.a[6]; // x * pt.a + y * pt.c + pt.x;\r\n  this.a[7] = x * other.a[1] + y * other.a[4] + other.a[7]; // x * pt.b + y * pt.d + pt.y;\r\n\r\n  return this;\r\n }\r\n\r\n transformPoint(x, y) {\r\n\r\n  let point = {x:0,y:0}\r\n\r\n  point.x = x * this.a[0] + y * this.a[3] + this.a[6];\r\n  point.y = x * this.a[1] + y * this.a[4] + this.a[7];\r\n\r\n  return point;\r\n}\r\n\r\n transpose() {\r\n  return this.setAll(\r\n    mat.a[0], mat.a[3], mat.a[6],\r\n    mat.a[1], mat.a[4], mat.a[7],\r\n    mat.a[2], mat.a[5], mat.a[8]\r\n  );\r\n }\r\n\r\n toString() {\r\n  let str = \"\";\r\n   for(let y = 0; y < 3; y++) {\r\n      for(let x = 0; x < 3; x++) {\r\n        let val = this.at(x, y); \r\n        //str += val.toString() + \" \";\r\n        //console.log(\"---- \" + (x + y * 3).toString());\r\n        str += val + \" \";\r\n      }\r\n      str += \"\\n\"\r\n   }\r\n\r\n   return str;\r\n    \r\n }\r\n \r\n \r\n static identity() { return new Matrix3(1); }\r\n\r\n static zero() { return new Matrix3(0); }\r\n\r\n static transpose(mat) {\r\n  let copy = Matrix3.zero;\r\n  return copy.setAll(\r\n    mat.a[0], mat.a[3], mat.a[6],\r\n    mat.a[1], mat.a[4], mat.a[7],\r\n    mat.a[2], mat.a[5], mat.a[8]\r\n  );\r\n\r\n }\r\n\r\n static multiplySlow(a, b) {\r\n    var mat = Matrix3.zero(); // zeroes\r\n    let val;\r\n\r\n    for (let i = 0; i < 3; ++i)\r\n    {\r\n      for (let j = 0; j < 3; ++j)\r\n      {\r\n        for (let k = 0; k < 3; ++k)\r\n        {\r\n          val = mat.at(i, k);\r\n          val += a.at(i, j) * b.at(j, k);\r\n          mat.set(i, k, val);\r\n        }\r\n      }\r\n    }\r\n\r\n    return mat;\r\n }\r\n\r\n}\r\n\r\n","\r\n/**\r\n* Simple class for rectangle. Usage for collision.\r\n* @class Rect\r\n* @constructor\r\n*/\r\n\r\nexport default class Rect {\r\n  \r\n  constructor(x, y, width, height) {\r\n    this.x = x || 0;\r\n    this.y = y || 0;\r\n    this.width = width || 0;\r\n    this.height = height || 0;\r\n  }\r\n\r\n  get center() {\r\n    var vec = {};\r\n    vec.x = this.x + this.width / 2;\r\n    vec.y = this.y + this.height / 2;\r\n    return vec;\r\n  }\r\n\r\n  set(x,y,width,height) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = width;\r\n    this.height = height;\r\n    return this;\r\n  }\r\n\r\n  setPostion(x,y) {\r\n    this.x = x;\r\n    this.y = y;\r\n    return this;\r\n  }\r\n\r\n  setSize(width, height) {\r\n    this.width = width;\r\n    this.height = height;\r\n    return this;\r\n  }\r\n\r\n  copy(rect) {\r\n    this.x = rect.x;\r\n    this.y = rect.y;\r\n    this.width = rect.width;\r\n    this.height = rect.height;\r\n    return this;\r\n  }\r\n\r\n  \r\n  intersects(rect) {\r\n    return Rect.intersects(this, rect);\r\n  }\r\n\r\n  contains(x,y) {\r\n  return Rect.contains(this,x,y);\r\n  }\r\n\r\n\r\n  static intersects(rect1, rect2) {\r\n\r\n    if (rect1.width <= 0 || rect1.height <= 0 || rect2.width <= 0 || rect2.height <= 0)\r\n      return false;\r\n  \r\n    return    !(rect1.x > rect2.x + rect2.width ||\r\n               rect1.x + rect1.width < rect2.x ||\r\n               rect1.y > rect2.y + rect2.height ||\r\n               rect1.y + rect1.height < rect2.y);\r\n  }\r\n\r\n  static contains(rect, x, y) {\r\n  \r\n    if (rect.width <= 0 && rect.height <= 0 )\r\n      return false;\r\n  \r\n    return (x > rect.x &&\r\n            x < rect.x + rect.width &&\r\n            y >= rect.y &&\r\n            y < rect.y + rect.height);\r\n  \r\n  }\r\n  \r\n  static intersectionArea(rect1,rect2) {\r\n  \r\n      var out = new scintilla.Rect();\r\n  \r\n      if (scintilla.Rect.intersects(rect1,rect2)) {\r\n  \r\n         out.y = Math.max(a.y, b.y);\r\n         out.x = Math.max(a.x, b.x);\r\n         out.width = Math.min(a.x + a.width, b.x + b.width) - out.x;\r\n         out.height = Math.min(a.y + a.height, b.y + b.height) - out.y;\r\n  \r\n      }\r\n  \r\n      return out;\r\n  \r\n  }\r\n  \r\n\r\n}\r\n\r\n\r\n\r\n","\r\n\r\nimport MathUtils from './MathUtils';\r\n\r\n/**\r\n* Class for points and vectors.\r\n* @class Vector2\r\n* @constructor\r\n*/\r\nexport default class Vector2 {\r\n  \r\n  constructor(x,y, managed) {\r\n\r\n    this.x = x || 0;\r\n    this.y = y || 0;\r\n    this.managed = managed || undefined;\r\n  }\r\n\r\n  set(x,y) {\r\n\r\n    this.x = x;\r\n    this.y = y || x;\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n  }\r\n\r\n  move(x,y) {\r\n\r\n    this.x += x;\r\n    this.y += y;\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  scale(x, y) {\r\n\r\n    this.x *= x;\r\n    this.y *= y || x;\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  rotate(radians) {\r\n\r\n    let x = this.x;\r\n    let y = this.y;\r\n    this.x = x * Math.cos(radians) - y * Math.sin(radians);\r\n    this.y = x * Math.sin(radians) + y * Math.cos(radians);\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  rotateAround(radians, other) {\r\n\r\n    /*var x = this.x;\r\n    var y = this.y;*/\r\n    let dx = this.x-other.x;\r\n    let dy = this.y-other.y;\r\n\r\n    let c = Math.cos(radians);\r\n    let s = Math.sin(radians);\r\n\r\n    /*this.x = c * (x-other.x) - s * (y-other.y) + other.x;\r\n    this.y = s * (x-other.x) + c * (y-other.y) + other.y;*/\r\n\r\n\r\n    this.x =  other.x + (c * dx - s * dy);\r\n    this.y =  other.y + (s * dx + c * dy);\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  copy(otherVector) {\r\n\r\n    this.x = otherVector.x;\r\n    this.y = otherVector.y;\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  normalize() {\r\n\r\n    let mag = this.length();\r\n    if (mag > 0) {\r\n      this.x = this.x / mag;\r\n      this.y = this.y / mag;\r\n    }\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  round() {\r\n    this.x = MathUtils.round(this.x);\r\n    this.y = MathUtils.round(this.y);\r\n    return this;\r\n  }\r\n\r\n  reverse() {\r\n    this.x = -this.x;\r\n    this.y = -this.y;\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n  }\r\n\r\n  add(other) {\r\n    this.x += other.x;\r\n    this.y += other.y;\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n  }\r\n\r\n  sub(other) {\r\n    this.x -= other.x;\r\n    this.y -= other.y;\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n  }\r\n\r\n  perp() {\r\n\r\n    let x = this.x;\r\n    this.x = this.y;\r\n    this.y = -x;\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n  }\r\n\r\n  \r\n\r\n  dot(other) {\r\n    return Vector2.dot(this,other);\r\n  }\r\n\r\n  project(other) {\r\n    return Vector2.project(this,other);\r\n  }\r\n\r\n  clone() {\r\n    return new Vector2(this.x,this.y);\r\n  }\r\n\r\n  length() {\r\n    return Math.sqrt(this.squaredLenght());\r\n  }\r\n\r\n  toString() {\r\n    return \"{ x: \" + this.x + \", y: \" + this.y + \" }\"\r\n  }\r\n\r\n  squaredLenght() {\r\n    return Vector2.dot(this,this);\r\n  }\r\n\r\n  static abs(vector) {\r\n    return new Vector2(Math.abs(vector.x), Math.abs(vector.y));\r\n  }\r\n\r\n  static scalar(a, b) {\r\n    return a.x * b.y - a.y * b.x;\r\n  }\r\n\r\n  static distance(a, b) {\r\n    return MathUtils.distance(a.x,a.y,b.x,b.y);\r\n  }\r\n\r\n  static angleBetween(a, b) {\r\n    return MathUtils.angleBetween(a.x,a.y,b.x,b.y);\r\n  }\r\n\r\n  static dot(a, b) {\r\n    return (a.x * b.x) + (a.y * b.y);\r\n  }\r\n\r\n  static project(a,b) {\r\n    let dp = Vector2.dot(a,b);\r\n    var proj = new Vector2(\r\n      ( dp / (b.x*b.x + b.y*b.y) ) * b.x,\r\n      ( dp / (b.x*b.x + b.y*b.y) ) * b.y\r\n    );\r\n    return proj;\r\n  };\r\n\r\n  // project for unit vector\r\n  static projectNormal(a,b) {\r\n    let dp = Vector2.dot(a,b);\r\n    let proj = new Vector2(   dp / b.x,   dp / b.y );\r\n    return proj;\r\n  };\r\n\r\n  static reflect(vec,axis) {\r\n\r\n    let r = Vector2.project(vec,axis);\r\n    r.scale(2);\r\n    r.sub(vec);\r\n    return r;\r\n\r\n  };\r\n\r\n  static reflectNormal(vec,axis) {\r\n\r\n    let r = Vector2.projectNormal(vec,axis);\r\n    r.scale(2);\r\n    r.sub(vec);\r\n    return r;\r\n\r\n  };\r\n\r\n\r\n  static lerp(a, b, t) {\r\n    let vec = new Vector2(\r\n      MathUtils.lerp(a.x,b.x,t),\r\n      MathUtils.lerp(a.y,b.y,t)\r\n    );\r\n    return vec;\r\n  }\r\n\r\n  get magnitude() {return Math.sqrt((this.x * this.x) + (this.y * this.y));}\r\n  get normal() {\r\n    let mag = this.magnitude;\r\n    let vec = new Vector2(this.x / mag,this.y / mag);\r\n    return vec;\r\n  }\r\n\r\n}\r\n\r\n","import EaseIn from \"./EaseIn\";\r\nimport EaseOut from './EaseOut';\r\nimport EaseInOut from \"./EaseInOut\";\r\nimport EasingType from \"./EasingType\";\r\n\r\n/**\r\n * Easing functions\r\n */\r\nconst Ease = {\r\n\r\n\r\n    /**\r\n     * Ease-in functions\r\n     */\r\n    in: EaseIn,\r\n\r\n    /**\r\n     * Ease-out functions\r\n     */\r\n    out: EaseOut,\r\n\r\n    /**\r\n     * Ease-in-out functions\r\n     */\r\n    inout: EaseInOut,\r\n\r\n\r\n    Type : EasingType,\r\n}\r\n\r\nObject.freeze(Ease);\r\n\r\nexport default Ease;","import MathUtils from \"../MathUtils\";\r\nimport EasingType, { EASE_BACK_CONST } from \"./EasingType\";\r\n\r\n\r\nclass EaseInFunctions {\r\n\r\n\r\n    /**\r\n     * \r\n     * @param {Number} from \r\n     * @param {Number} to \r\n     * @param {Number} t \r\n     * @param {Number} [duration]\r\n     */\r\n    linear(from, to, t) {\r\n        return MathUtils.lerp(from, to, t);\r\n    }\r\n\r\n    stepped(from, to, t) {\r\n\r\n        if (t < 0.5)\r\n            return from;\r\n\r\n        return from + to;\r\n    }\r\n\r\n    cut(from, to, t, levels) {\r\n        if (levels === undefined) levels = 2;\r\n        return MathUtils.lerp(from, to, MathUtils.floor(t * levels) / levels);\r\n    }\r\n\r\n    sine(from, to, t) {\r\n        return to * (Math.sin(t * MathUtils.HALFPI - MathUtils.HALFPI) + 1) + from;\r\n    }\r\n\r\n    power(from, to, t, power) {\r\n        return to * Math.pow(t, power) + from;\r\n    }\r\n\r\n    quadratic(from, to, t) {\r\n        return this.power(from, to, t, 2);\r\n    }\r\n\r\n    cubic(from, to, t) {\r\n        return this.power(from, to, t, 3);\r\n    }\r\n\r\n    quartic(from, to, t) {\r\n        return this.power(from, to, t, 4);\r\n    }\r\n\r\n    quintic(from, to, t) {\r\n        return this.power(from, to, t, 5);\r\n    }\r\n\r\n    exponential(from, to, t) {\r\n        return (t == 0) ? from : to * Math.pow(2, 10 * (t - 1)) + from;\r\n    }\r\n\r\n    circ(from, to, t) {\r\n        return -to * (Math.sqrt(1 - t * t) - 1) + from\r\n    }\r\n\r\n    elastic(from, to, t, duration) {\r\n        if (duration === undefined) duration = 1;\r\n\r\n        if (t == 0)\r\n            return from;\r\n        if ((t /= duration) == 1)\r\n            return from + to;\r\n\r\n        let p = duration * 0.3;\r\n        let s = p / 4;\r\n        // this is a fix, again, with post-increment operators\r\n        let postFix = to * Math.pow(2, 10 * (t -= 1));\r\n        return -(postFix * Math.sin((t * duration - s) * (2 * Math.PI) / p)) + from;\r\n    }\r\n\r\n    back(from, to, t) {\r\n        return to * t * t * ((EASE_BACK_CONST + 1) * t - EASE_BACK_CONST) + from;\r\n    }\r\n\r\n    /**\r\n     * Ease-in by specific EasingType.\r\n     * \r\n     * @param {EasingType} type The type of easing\r\n     * @param {Number} from Start point\r\n     * @param {Number} to End point\r\n     * @param {Number} t Normalized time\r\n     * @param {Number} [arg] Additional argument for specific types:\r\n     * \r\n     * @constant EasingType.CUT: The cell levels of the interpolation\r\n     * @constant EasintType.ELASTIC: The duration of the easing.\r\n     * @constant EasintType.POWER: The pow product.\r\n     */\r\n    by(type, from, to, t, arg) {\r\n\r\n        if (arg === undefined) arg = 3;\r\n\r\n        switch (type) {\r\n\r\n            case EasingType.NONE:\r\n                return t;\r\n            case EasingType.STEPPED:\r\n                return this.stepped(from, to, t);\r\n            case EasingType.CUT:\r\n                return this.cut(from, to, t, arg);\r\n            case EasingType.LINEAR:\r\n                return this.linear(from, to, t);\r\n            case EasingType.SINE:\r\n                return this.sine(from, to, t);\r\n            case EasingType.QUADRATIC:\r\n                return this.power(from, to, t, 2);\r\n            case EasingType.CUBIC:\r\n                return this.power(from, to, t, 3);\r\n            case EasingType.QUARTIC:\r\n                return this.power(from, to, t, 4);\r\n            case EasingType.QUINTIC:\r\n                return this.power(from, to, t, 5);\r\n            case EasingType.POWER:\r\n                return this.power(from, to, t, arg);\r\n            case EasingType.EXPONENTIAL:\r\n                return this.exponential(from, to, t);\r\n            case EasingType.CIRC:\r\n                return this.circ(from, to, t);\r\n            case EasingType.BACK:\r\n                return this.back(from, to, t);\r\n            case EasingType.ELASTIC:\r\n                return this.elastic(from, to, t, arg);\r\n        }\r\n\r\n        return t;\r\n    }\r\n\r\n\r\n};\r\n\r\nconst EaseIn = new EaseInFunctions();\r\n\r\nObject.freeze(EaseIn);\r\n\r\nexport default EaseIn;","import MathUtils from \"../MathUtils\";\r\nimport EaseIn from \"./EaseIn\";\r\nimport EasingType, { EASE_BACK_CONST } from \"./EasingType\";\r\n\r\n\r\nclass EaseInOutFunctions {\r\n\r\n    linear(from, to, t) {\r\n        return MathUtils.lerp(from, to, t);\r\n    }\r\n\r\n    stepped(from, to, t) {\r\n        return to * ((t < 0.5) ? 0 : 1) + from;\r\n    }\r\n\r\n    cut(from, to, t, levels) {\r\n        if (levels === undefined) levels = 2;\r\n        return MathUtils.lerp(from, to, MathUtils.floor(t * levels) / levels);\r\n    }\r\n\r\n    sine(from, to, t) {\r\n        return to * ((Math.sin(t * Math.PI - MathUtils.HALFPI) + 1) / 2) + from;\r\n    }\r\n\r\n    power(from, to, t, power) {\r\n\r\n        t *= 2;\r\n        if (t < 1)\r\n            return EaseIn.power(from, to, t, power) / 2;\r\n\r\n        let sign = (power % 2 == 0) ? -1 : 1;\r\n        return to * (sign / 2.0 * (Math.pow(s - 2, power) + sign * 2)) + from;\r\n    }\r\n\r\n    quadratic(from, to, t) {\r\n        return this.power(from, to, t, 2);\r\n    }\r\n\r\n    cubic(from, to, t) {\r\n        return this.power(from, to, t, 3);\r\n    }\r\n\r\n    quartic(from, to, t) {\r\n        return this.power(from, to, t, 4);\r\n    }\r\n\r\n    quintic(from, to, t) {\r\n        return this.power(from, to, t, 5);\r\n    }\r\n\r\n    exponential(from, to, t) {\r\n\r\n        if (t == 0.0 || t == 1.0)\r\n            return (to * t) + from;\r\n\r\n        if (t < 0.5) {\r\n            return (to * 0.5 * Math.pow(2, (20 * t) - 10)) + from;\r\n        } else {\r\n            return (to * -0.5 * Math.pow(2, (-20 * t) + 10) + 1) + from;\r\n        }\r\n    }\r\n\r\n    circ(from, to, t) {\r\n\r\n        if (t / 2 < 1)\r\n            return -to / 2 * (Math.sqrt(1 - t * t) - 1) + from;\r\n\r\n        return to / 2 * (Math.sqrt(1 - t * (t -= 2)) + 1) + from;\r\n\r\n    }\r\n\r\n    elastic(from, to, t, duration) {\r\n        if (duration === undefined) duration = 1;\r\n\r\n        if (t == 0)\r\n            return from;\r\n\r\n        if ((t /= duration / 2) == 2)\r\n            return from + to;\r\n\r\n        let p = duration * (0.3 * 1.5);\r\n\r\n\r\n        let s = p / 4;\r\n        let postFix = 0;\r\n\r\n\r\n        if (to >= Math.abs(to)) {\r\n            s = p / (2 * Math.PI) * Math.asin(to / to);\r\n        }\r\n\r\n        if (t < 1) {\r\n            postFix = to * Math.pow(2, 10 * (t -= 1));\r\n            return -0.5 * (postFix * Math.sin((t * duration - s) * (2 * Math.PI) / p)) + from;\r\n        }\r\n\r\n        // postIncrement is evil\r\n        postFix = to * Math.pow(2, -10 * (t -= 1));\r\n        return postFix * Math.sin((t * duration - s) * (2 * Math.PI) / p) * 0.5 + to + from;\r\n    }\r\n\r\n    back(from, to, t) {\r\n\r\n        if (t == 0)\r\n            return from;\r\n\r\n        if ((t /= 0.5) == 2)\r\n            return from + to;\r\n\r\n        let p = (.3 * 1.5);\r\n        let s = EASE_BACK_CONST;\r\n\r\n        if (t < 1)\r\n            return to / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + from;\r\n\r\n        return to / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + from;\r\n    }\r\n\r\n    /**\r\n     * Ease-in and ease out by specific EasingType.\r\n     * \r\n     * @param {EasingType} type The type of easing\r\n     * @param {Number} from Start point\r\n     * @param {Number} to End point\r\n     * @param {Number} t Normalized time\r\n     * @param {Number} [arg] Additional argument for specific types:\r\n     * \r\n     * @constant EasingType.CUT: The cell levels of the interpolation\r\n     * @constant EasintType.ELASTIC: The duration of the easing.\r\n     * @constant EasintType.POWER: The pow product.\r\n     */\r\n    by(type, from, to, t, arg) {\r\n\r\n        if (arg === undefined) arg = 1;\r\n\r\n        switch (type) {\r\n\r\n            case EasingType.NONE:\r\n                return t;\r\n            case EasingType.CUT:\r\n                return this.cut(from, to, t, arg);\r\n            case EasingType.LINEAR:\r\n                return this.linear(from, to, t);\r\n            case EasingType.SINE:\r\n                return this.sine(from, to, t);\r\n            case EasingType.QUADRATIC:\r\n                return this.power(from, to, t, 2);\r\n            case EasingType.CUBIC:\r\n                return this.power(from, to, t, 3);\r\n            case EasingType.QUARTIC:\r\n                return this.power(from, to, t, 4);\r\n            case EasingType.QUINTIC:\r\n                return this.power(from, to, t, 5);\r\n            case EasingType.POWER:\r\n                return this.power(from, to, t, arg);\r\n            case EasingType.EXPONENTIAL:\r\n                return this.exponential(from, to, t);\r\n            case EasingType.CIRC:\r\n                return this.circ(from, to, t);\r\n            case EasingType.BACK:\r\n                return this.back(from, to, t);\r\n            case EasingType.ELASTIC:\r\n                return this.elastic(from, to, t, arg);\r\n        }\r\n\r\n        return t;\r\n    }\r\n\r\n}\r\n\r\nconst EaseInOut = new EaseInOutFunctions();\r\n\r\nObject.freeze(EaseInOut);\r\n\r\nexport default EaseInOut;","import MathUtils from '../../math/MathUtils'\r\nimport EasingType, { EASE_BACK_CONST } from './EasingType';\r\n\r\nclass EaseOutFunction {\r\n\r\n    linear(from, to, t) {\r\n        return MathUtils.lerp(from, to, t);\r\n    }\r\n\r\n    stepped(from, to, t) {\r\n        return to * ((t < 0.5) ? 0 : 1) + from;\r\n    }\r\n\r\n    cut(from, to, t, levels) {\r\n        if (levels === undefined) levels = 2;\r\n        return MathUtils.lerp(from, to, MathUtils.floor(t * levels) / levels);\r\n    }\r\n\r\n    sine(from, to, t) {\r\n        return -from * (Math.sin(t * MathUtils.HALFPI) + 1) + from + to;\r\n    }\r\n\r\n    power(from, to, t, power) {\r\n        let sign = power % 2 == 0 ? -1 : 1;\r\n        return to * (sign * Math.pow(t - 1, power) + sign) + from;\r\n    }\r\n\r\n    quadratic(from, to, t) {\r\n        return this.power(from, to, t, 2);\r\n    }\r\n\r\n    cubic(from, to, t) {\r\n        return this.power(from, to, t, 3);\r\n    }\r\n\r\n    quartic(from, to, t) {\r\n        return this.power(from, to, t, 4);\r\n    }\r\n\r\n    quintic(from, to, t) {\r\n        return this.power(from, to, t, 5);\r\n    }\r\n\r\n    exponential(from, to, t) {\r\n        return (t == 1) ? from : to * (1 - Math.pow(2, 10 * t)) + from;\r\n    }\r\n\r\n    circ(from, to, t) {\r\n        return to * Math.sqrt(1 - (t - 1) * t) + from\r\n    }\r\n\r\n    elastic(from, to, t, duration) {\r\n        if (duration === undefined) duration = 1;\r\n\r\n        if (t == 0)\r\n            return from;\r\n        if ((t /= duration) == 1)\r\n            return from + to;\r\n\r\n        let p = duration * 0.3;\r\n        let s = p / 4;\r\n        return (to * Mathf.pow(2, -10 * t) * Math.sin((t - s) * (2 * Math.PI) / p) + 1) + from;\r\n    }\r\n\r\n    back(from, to, t) {\r\n        //let f = (1 - t);\r\n        //return to * (1 - (f * f * f - f * Mathf.Sin(f * Math.PI))) + from;\r\n        return to * ((t - 1) * t * ((EASE_BACK_CONST + 1) * t + EASE_BACK_CONST) + 1) + from;\r\n    }\r\n\r\n    /**\r\n     * Ease-out by specific EasingType.\r\n     * \r\n     * @param {EasingType} type The type of easing\r\n     * @param {Number} from Start point\r\n     * @param {Number} to End point\r\n     * @param {Number} t Normalized time\r\n     * @param {Number} [arg] Additional argument for specific types:\r\n     * \r\n     * @constant EasingType.CUT: The cell levels of the interpolation\r\n     * @constant EasintType.ELASTIC: The duration of the easing.\r\n     * @constant EasintType.POWER: The pow product.\r\n     */\r\n    by(type, from, to, t, arg) {\r\n\r\n        if (arg === undefined) arg = 1;\r\n\r\n        switch (type) {\r\n\r\n            case EasingType.NONE:\r\n                return t;\r\n            case EasingType.STEPPED:\r\n                return this.stepped(from, to, t);\r\n            case EasingType.CUT:\r\n                return this.cut(from, to, t, arg);\r\n            case EasingType.LINEAR:\r\n                return this.linear(from, to, t);\r\n            case EasingType.SINE:\r\n                return this.sine(from, to, t);\r\n            case EasingType.QUADRATIC:\r\n                return this.power(from, to, t, 2);\r\n            case EasingType.CUBIC:\r\n                return this.power(from, to, t, 3);\r\n            case EasingType.QUARTIC:\r\n                return this.power(from, to, t, 4);\r\n            case EasingType.QUINTIC:\r\n                return this.power(from, to, t, 5);\r\n            case EasingType.POWER:\r\n                return this.power(from, to, t, arg);\r\n            case EasingType.EXPONENTIAL:\r\n                return this.exponential(from, to, t);\r\n            case EasingType.CIRC:\r\n                return this.circ(from, to, t);\r\n            case EasingType.BACK:\r\n                return this.back(from, to, t);\r\n            case EasingType.ELASTIC:\r\n                return this.elastic(from, to, t, arg);\r\n        }\r\n\r\n        return t;\r\n    }\r\n\r\n}\r\n\r\nconst EaseOut = new EaseOutFunction();\r\n\r\nObject.freeze(EaseOut);\r\n\r\nexport default EaseOut;\r\n\r\n//module.exports = EaseOut;","\r\n/**\r\n * Describes the easing method type\r\n */\r\nconst EasingType = {\r\n    /**\r\n     * No easing : 0\r\n     */\r\n    NONE : 0,\r\n    /**\r\n     * Clamped interpolation between tMin and tMax : 1\r\n     */\r\n    STEPPED : 1,\r\n    /**\r\n     * Linear interpolation : 2\r\n     */\r\n    LINEAR : 2,\r\n    CUT : 3,\r\n    SINE : 4,\r\n    QUADRATIC : 5,\r\n    CUBIC : 6,\r\n    QUARTIC : 7,\r\n    QUINTIC : 8,\r\n    POWER : 9,\r\n    EXPONENTIAL : 10,\r\n    CIRC : 11,\r\n    BACK : 12,\r\n    ELASTIC : 13,\r\n    BOUNCE : 14,\r\n    \r\n    \r\n};\r\n\r\nexport const EASE_BACK_CONST = 1.70158;\r\n\r\nObject.freeze(EasingType);\r\n\r\nexport default EasingType;\r\n","\r\nmodule.exports = {\r\n\r\n    Ease : require('./Ease').default,\r\n    Type : require('./EasingType').default,  \r\n    \r\n};","\r\n// From http://baagoe.com/en/RandomMusings/javascript/\r\n// Johannes BaagÃ¸e <baagoe@baagoe.com>, 2010\r\nexport default function Mash() {\r\n    let n = 0xefc8249d;\r\n  \r\n    let mash = function(data) {\r\n      data = data.toString();\r\n      for (var i = 0; i < data.length; i++) {\r\n        n += data.charCodeAt(i);\r\n        var h = 0.02519603282416938 * n;\r\n        n = h >>> 0;\r\n        h -= n;\r\n        h *= n;\r\n        n = h >>> 0;\r\n        h -= n;\r\n        n += h * 0x100000000; // 2^32\r\n      }\r\n      return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\r\n    };\r\n  \r\n    mash.version = 'Mash 0.9';\r\n    return mash;\r\n  }","import Mash from \"./Mash\";\r\nimport MathUtils from \"../MathUtils\";\r\n\r\n\r\n// ms\r\n//const uint32 a = 214013;\r\n//const uint32 c = 2531011;\r\n// b\r\n//const RNG_A = 8253729;\r\n//const RNG_B = 2396403;\r\n// Alea\r\nconst RNG_A = 2091639;\r\nconst RNG_B = 2.3283064365386963e-10; // 2^-32;\r\nconst FRAC = 1.1102230246251565e-16; // 2^-53\r\n\r\n\r\n// From http://baagoe.com/en/RandomMusings/javascript/\r\nclass RandomGenerator {\r\n\r\n    constructor() {\r\n        this.c = 1;\r\n        this.s0 = 0;\r\n        this.s1 = 0;\r\n        this.s2 = 0;\r\n        this.n = 0xefc8249d;\r\n        this._mash = Mash();\r\n    }\r\n\r\n    rand() {\r\n        // common lcg =  (a * seed + c);\r\n        var t = RNG_A * this.s0 + this.c * RNG_B; // 2^-32\r\n        this.s0 = this.s1;\r\n        this.s1 = this.s2;\r\n        this.c = t | 0;\r\n        this.s2 = t - this.c;\r\n        return this.s2;\r\n    }\r\n\r\n    uint32() {\r\n        return this.rand() * 0x100000000; // ^32\r\n    }\r\n\r\n    frac() {\r\n        return this.rand() + (this.rand() * 0x200000 | 0) * FRAC;\r\n    }\r\n\r\n    // 0...1\r\n    real() {\r\n        return this.uint32() + this.frac();\r\n    }\r\n\r\n    // real range\r\n    range(from, to) {\r\n        return this.frac() * (to - from) + from;\r\n    }\r\n\r\n    // integer\r\n    irange(from, to) {\r\n        return MathUtils.floor(this.range(0, to - from) + from);\r\n        //MathUtils.floor(Math.random() * (max - min)) + min;\r\n    }\r\n\r\n    reset(seeds) {\r\n        this.n = 0xefc8249d;\r\n        this.s0 = this._mash(' ');\r\n        this.s1 = this._mash(' ');\r\n        this.s2 = this._mash(' ');\r\n        this.c = 1;\r\n\r\n        for (let i = 0; i < seeds.length && (seeds[i] != null); i++) {\r\n            let seed = seeds[i];\r\n\r\n            this.s0 -= this._mash(seed);\r\n            this.s0 += ~~(this.s0 < 0);\r\n            this.s1 -= this._mash(seed);\r\n            this.s1 += ~~(this.s1 < 0);\r\n            this.s2 -= this._mash(seed);\r\n            this.s2 += ~~(this.s2 < 0);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nlet Random = new RandomGenerator();\r\n\r\nObject.seal(Random);\r\n\r\nexport default Random;","\r\nexport default class Module\r\n{\r\n    constructor(moduleType, moduleName, moduleManager)\r\n    {\r\n        this._moduleType = moduleType || \"none\";\r\n        this._moduleName = moduleName || \"noName\";\r\n        this._enabled = true;\r\n        this.entity = null;\r\n        this.moduleManager = moduleManager || null;\r\n\r\n        Object.freeze(this._moduleType);\r\n        Object.freeze(this._moduleName);\r\n\r\n        if (moduleManager !== null)\r\n        {\r\n            this.entity = moduleManager.entity;\r\n        }\r\n\r\n    }\r\n\r\n\r\n    get type() {return this._moduleType;}\r\n    get name() {return this._moduleName;}\r\n    get enabled() {return this._enabled;}\r\n    set enabled(value) {\r\n        value = !!value;\r\n\r\n        if (value !== this._enabled)\r\n        {\r\n            this._enabled = value;\r\n        }\r\n    }\r\n}\r\n\r\n//module.exports = Module;","import ModuleProvider from \"./ModuleProvider\";\r\nimport GetRenderModule from \"./components/GetRenderModule\";\r\n\r\n\r\n\r\nexport default class ModuleAttacher\r\n{\r\n    constructor(moduleManager) {\r\n        this.moduleManager = moduleManager;\r\n    }\r\n\r\n    sprite(tag, frameX, frameY, frameWidth, frameHeight) {\r\n        return ModuleProvider.attach(this.moduleManager, 'sprite', [tag, frameX, frameY, frameWidth, frameHeight]);\r\n    }\r\n\r\n    tilemap(tag) {\r\n\r\n        if (tag === undefined || tag == null) {\r\n            console.warn(\"ModuleAttacher.tilemap: Can not create Tilemap module without a proper tag name.\");\r\n            return null;\r\n        }\r\n\r\n        return ModuleProvider.attach(this.moduleManager, 'tilemap', tag);\r\n    }\r\n\r\n    spritesheet(tag) {\r\n\r\n        let spriteModule = GetRenderModule(this.moduleManager, 'spritesheet', \"SpriteSheet\");\r\n\r\n        if (spriteModule === null)\r\n            return null;\r\n        else\r\n            return ModuleProvider.attach(this.moduleManager,'spritesheet', [spriteModule, tag]);\r\n\r\n\r\n    }\r\n\r\n\r\n    animMachine(tag) {\r\n\r\n        let spriteModule = GetRenderModule(this.moduleManager, 'animMachine', \"AnimationMachine\");\r\n\r\n        if (spriteModule === null)\r\n            return null;\r\n        else\r\n            return ModuleProvider.attach(this.moduleManager,'animMachine', [spriteModule, tag]);\r\n    }\r\n\r\n    rectangle(width, height, color) {\r\n        return ModuleProvider.attach(this.moduleManager, 'rectangle', [width, height, color]);\r\n    }\r\n}","import DataMap from '../structures/Map';\r\nimport DataList from '../structures/List';\r\nimport ModuleAttacher from './ModuleAttacher';\r\nimport Validate from '../utils/Validate';\r\n\r\nconst ModulesMap = {\r\n    'sprite': 'render'\r\n};\r\n\r\nexport default class ModuleManager {\r\n    constructor(entity) {\r\n        this.entity = entity || null;\r\n        this.attached = new DataMap();\r\n        this._pendingModulesInitialization = new DataList();\r\n        this.attach = new ModuleAttacher(this);\r\n    }\r\n\r\n    detach(moduleName, index) {\r\n\r\n    }\r\n\r\n    has(moduleType) {\r\n        return this.attached.has(moduleType);\r\n    }\r\n\r\n    hasByName(moduleName) {\r\n\r\n        let moduleType = ModulesMap[moduleName];\r\n\r\n        if (moduleType === undefined)\r\n            return false;\r\n\r\n        return this.has(moduleType);\r\n    }\r\n\r\n    get(moduleType) {\r\n        return this.attached.get(moduleType);\r\n    }\r\n\r\n    getByName(moduleType) {\r\n\r\n        if (!Validate.isString(moduleName))\r\n            return null;\r\n\r\n        let r =  this.attached.find(function (key, value) {\r\n\r\n            if (value.name === moduleName)\r\n                return value;\r\n\r\n        });\r\n\r\n        return r || null;\r\n\r\n    }\r\n}","\r\n\r\nimport DataMap from '../structures/Map'\r\nimport InitializeModuleBase from './components/InitializeModuleBase';\r\n\r\n\r\nclass ModuleProviderManager\r\n{\r\n    constructor()\r\n    {\r\n        this.proxyModules = new DataMap();\r\n    }\r\n\r\n    attach(moduleManager, moduleName, args)\r\n    {\r\n        let attached = moduleManager.attached;\r\n\r\n        if (attached.has(moduleName))\r\n            throw new Error('ModuleManager.attach: Could not attach module ' + moduleName + '. Already exists');\r\n\r\n        if (!this.proxyModules.has(moduleName))\r\n            throw new Error('ModuleManager.attach: Module type ' + moduleName + ' don\\'t exists.');\r\n\r\n        // create a new module\r\n        let newModule = this.proxyModules.get(moduleName)(moduleManager, args);\r\n\r\n        // initialize entity module\r\n        InitializeModuleBase(newModule, moduleManager.entity);\r\n\r\n        // attach the new module to manager\r\n        attached.insert(newModule.type, newModule);\r\n\r\n        // add to pending initialization list only modules that require this option\r\n        if (newModule.type === 'render') {\r\n            moduleManager._pendingModulesInitialization.push(newModule);\r\n        }\r\n\r\n        return newModule;\r\n    }\r\n\r\n    register(moduleName, func)\r\n    {\r\n        if (!ModuleProvider.proxyModules.has(moduleName))\r\n        ModuleProvider.proxyModules.insert(moduleName, func); // { type: moduleType, func: func }\r\n        \r\n    }    \r\n}\r\n\r\nvar ModuleProvider = new ModuleProviderManager();\r\n\r\nexport default ModuleProvider;","import Module from \"../Module\";\r\nimport ObjectGet from \"../../utils/object/ObjectGet\";\r\n\r\nexport default class AnimationBaseModule extends Module {\r\n\r\n  constructor(moduleName, moduleManager, config) {\r\n\r\n    super('animation', moduleName, moduleManager);\r\n\r\n    this._resource = ObjectGet.value(config, 'resource', null);\r\n    this._spriteModule = ObjectGet.value(config, 'spriteModule', null);\r\n\r\n    this.isPlaying = false;\r\n    this.isPaused = false;\r\n    this._timer = 0;\r\n    this._position = 0;\r\n    this.currentFrame = 0;\r\n    this.speed = 0;\r\n  }\r\n\r\n  setDuration(value) {\r\n\r\n    if (this._resource === null)\r\n      return;\r\n\r\n    this._resource.duration = value;\r\n  }\r\n\r\n  play() {\r\n\r\n    if (this.isPlaying || this._resource === null)\r\n      return this;\r\n\r\n    this.isPlaying = true;\r\n    this.isPaused = false;\r\n\r\n    return this;\r\n  }\r\n\r\n  pause() {\r\n    if (this.isPaused || this._resource === null)\r\n      return this;\r\n\r\n    this.isPaused = true;\r\n    this.isPlaying = false;\r\n\r\n    return this;\r\n  }\r\n\r\n  stop() {\r\n    this.isPaused = false;\r\n    this.isPlaying = false;\r\n    this.currentFrame = 0;\r\n    this._timer = 0;\r\n    return this;\r\n  }\r\n\r\n  restart() {\r\n    this.stop();\r\n    this.isPlaying = true;\r\n    return this;\r\n  }\r\n}\r\n\r\n","import Module from \"../Module\";\r\nimport Animation from \"../../resources/animation/AnimationResource\";\r\nimport ModuleProvider from \"../ModuleProvider\";\r\nimport AnimationBaseModule from \"./AnimationBaseModule\";\r\nimport InitializeAnimationModule from \"./components/InitializeAnimationModule\";\r\nimport ResourceType from \"../../resources/ResourceType\";\r\nimport SetSpritesheetFrame from \"./components/SetSpritesheetFrame\";\r\n\r\nexport default class AnimationControl extends AnimationBaseModule {\r\n\r\n  constructor(moduleManager, config) {\r\n\r\n    super('animationControl', moduleManager, config);\r\n\r\n    // playing stuff\r\n    this.loop = false;\r\n\r\n    InitializeAnimationModule(this); \r\n  }\r\n\r\n\r\n  get trackPosition() {\r\n    return this._position;\r\n  }\r\n\r\n  get animation() {\r\n    return this._resource;\r\n  }\r\n\r\n  set animation(animation) {\r\n    \r\n    let animResource;\r\n    \r\n    if (typeof(animation) === 'string') {\r\n      if (this._resource.name === animation) {\r\n        return;\r\n      }\r\n      animResource = this.entity.game.system.cache.animation.get(animation);\r\n    } else if (animation instanceof AnimationResource) {\r\n      animResource = animation;\r\n    } \r\n\r\n    if (animResource !== undefined) {\r\n      this._resource = animResource;\r\n      //this.loop = animation.loop;\r\n    } else {\r\n      console.warn(\"AnimationControl.setAnimation: Could not set animation. The animation is undefined.\");\r\n    }\r\n  }\r\n\r\n  getKeyFrame(frameIndex) {\r\n    if (this._resource === null)\r\n      return null;\r\n\r\n    return this._resource.get(frameIndex);\r\n  } \r\n\r\n  stop() {\r\n\r\n    super.stop();\r\n\r\n    if (this._resource === null)\r\n      return;\r\n\r\n    if (this._resource.type === ResourceType.Spritesheet) {\r\n      SetSpritesheetFrame(this._spriteModule, this._resource.get(0));\r\n    }\r\n  }\r\n\r\n}\r\n\r\nModuleProvider.register('spritesheet',function(moduleManager, args) {\r\n\r\n  let asset = args[1];\r\n\r\n  if (args[1] !== undefined) {\r\n    // this.entity.game.system.cache.image.get(tag);\r\n    asset = moduleManager.entity.game.system.cache.animation.get(asset);\r\n  }\r\n\r\n  let config = {\r\n    resource : asset,\r\n    spriteModule : args[0]\r\n  };\r\n\r\n  let spritesheetModule = new AnimationControl(moduleManager,config);\r\n\r\n  return spritesheetModule;\r\n\r\n});","import DataMap from '../../structures/Map';\r\nimport AnimationBaseModule from \"./AnimationBaseModule\";\r\nimport ModuleProvider from '../ModuleProvider';\r\nimport InitializeAnimationModule from './components/InitializeAnimationModule';\r\nimport ResourceType from '../../resources/ResourceType';\r\nimport SetSpritesheetFrame from './components/SetSpritesheetFrame';\r\nimport AnimationMachineResource from '../../resources/animation/AnimationMachineResource';\r\n\r\nexport default class AnimationMachine extends AnimationBaseModule {\r\n\r\n  constructor(moduleManager, config) {\r\n\r\n    super('animMachine', moduleManager, config);\r\n\r\n    this._currentState = null;\r\n\r\n    InitializeAnimationModule(this);\r\n\r\n  }\r\n\r\n  set machine(animMachine) {\r\n\r\n    let resource;\r\n\r\n    if (typeof (animMachine) === 'string') {\r\n\r\n      if (this._resource !== null) {\r\n        if (this._resource.name === animMachine) {\r\n          return;\r\n        }\r\n      }\r\n\r\n      resource = this.entity.game.system.cache.animMachine.get(animMachine);\r\n    } else if (animMachine instanceof AnimationMachineResource) {\r\n      resource = animMachine;\r\n    }\r\n\r\n    if (resource !== undefined) {\r\n      this._resource = resource;\r\n      InitializeAnimationModule(this);\r\n\r\n    } else {\r\n      console.warn(\"AnimationControl.setAnimation: Could not set animation. The animation is undefined.\");\r\n    }\r\n  }\r\n\r\n  get machine() {\r\n    return this._resource;\r\n  }\r\n\r\n  get currentState() {\r\n    return this._currentState;\r\n  }\r\n\r\n  setState(stateName) {\r\n    if (this.resource === null)\r\n      return;\r\n\r\n    let animation = this._resource.get(stateName);\r\n\r\n    if (animation !== null && animation !== undefined) {\r\n      this._currentState = animation;\r\n      //this._currentStateName = animation.name;\r\n      this.restart();\r\n\r\n\r\n\r\n    } else {\r\n      console.warn(\"AnimationMachine.setState: Invalid state name \\'\" + stateName + \"\\\".\");\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  stop() {\r\n\r\n\r\n    super.stop();\r\n\r\n    if (this._currentState === null)\r\n      return;\r\n\r\n    if (this._currentState.type === ResourceType.Spritesheet) {\r\n      SetSpritesheetFrame(this._spriteModule, this._currentState.get(0));\r\n    }\r\n  }\r\n\r\n  setFrame(index, resetTimer) {\r\n\r\n    if (resetTimer === undefined) resetTimer = true;\r\n\r\n    if (index >= this._currentAnimObj.length)\r\n      index = this._currentAnimObj.length - 1\r\n    else if (index < 0)\r\n      index = 0;\r\n\r\n    this.currentFrame = index;\r\n\r\n    // set in sprite\r\n\r\n    this._gameObject.component['render'].setFrameRect(this._currentAnimObj.getFrame(this.currentFrame));\r\n    this._gameObject.component['render'].setImage(this._currentAnimObj.source);\r\n\r\n\r\n    if (resetTimer)\r\n      this._timer = 0;\r\n\r\n  }\r\n\r\n  setSpeed(time) {\r\n\r\n    this.frameSpeed = time;\r\n\r\n  }\r\n\r\n  add(name, image) {\r\n\r\n    return this.animations[name] = new scintilla.Animation(name, image);\r\n  }\r\n\r\n  addFromCache(container, name) {\r\n\r\n    var anim = this.game.animationCache.get(container, name);\r\n\r\n    if (anim) {\r\n\r\n      this.animations[name] = anim;\r\n\r\n      if (this.currentAnimation == null) {\r\n        this.setState(name);\r\n      }\r\n\r\n      return anim;\r\n    } else\r\n      return null;\r\n\r\n\r\n  }\r\n\r\n\r\n  remove(name) {\r\n\r\n    if (this.animations[name])\r\n      delete this.animations[name];\r\n\r\n\r\n  }\r\n\r\n}\r\n\r\nModuleProvider.register('animMachine', function (moduleManager, args) {\r\n\r\n  let asset;\r\n\r\n  if (args[1] !== undefined) {\r\n    // this.entity.game.system.cache.image.get(tag);\r\n    asset = moduleManager.entity.game.system.cache.animMachine.get(args[1]);\r\n  }\r\n\r\n\r\n\r\n  let config = {\r\n    resource: asset,\r\n    spriteModule: args[0]\r\n  };\r\n\r\n  let animMachine = new AnimationMachine(moduleManager, config);\r\n\r\n  return animMachine;\r\n\r\n});","import SetSpritesheetFrame from \"./SetSpritesheetFrame\";\r\nimport ResourceType from \"../../../resources/ResourceType\";\r\n\r\nexport default  function InitializeAnimationModule(animationModule) {\r\n\r\n\r\n    let resource = animationModule._resource;\r\n\r\n    if (resource !== null) {\r\n\r\n        if (animationModule.name === 'animMachine') {\r\n            let state = resource.at(0);\r\n            animationModule._currentState = state || null;\r\n            resource = state;\r\n        } else {\r\n            animationModule.loop = resource.loop;\r\n        }\r\n\r\n        if (resource.type === ResourceType.Spritesheet) {\r\n            SetSpritesheetFrame(animationModule._spriteModule, resource.get(0));\r\n        }\r\n        //this._currentStateName = state.name || null;\r\n\r\n        animationModule.play();\r\n      }\r\n}","\r\nexport default function SetSpritesheetFrame(spriteModule, keyFrame) {\r\n\r\n    if (spriteModule === null)\r\n        return;\r\n\r\n    if (keyFrame.image === undefined || keyFrame.image === null)\r\n        return;\r\n\r\n    if (spriteModule.resource === null || spriteModule.resource !== keyFrame.image) {\r\n        spriteModule.setImage(keyFrame.image, false);\r\n    }\r\n\r\n    spriteModule.setFrameRect(keyFrame.frame);    \r\n    \r\n}","\r\nimport SetSpritesheetFrame from \"./SetSpritesheetFrame\";\r\nimport ResourceType from \"../../../resources/ResourceType\";\r\nimport WrapMode from \"../../../resources/animation/WrapMode\";\r\n\r\nexport default function UpdateAnimationModule(animationModule, resource, deltaTime) {\r\n\r\n  if (resource === undefined || resource === null)\r\n    return;\r\n\r\n\r\n    // if not paused and we have a valid animation\r\n    if (animationModule.isPlaying === true) {\r\n\r\n      // add delta time\r\n      animationModule._timer += deltaTime; // * this.frameSpeed;\r\n\r\n      let duration;\r\n      let currentKeyFrame = resource.get(animationModule.currentFrame);\r\n\r\n      if (resource.uniformDuration) {\r\n        duration = resource.duration;\r\n      } else {\r\n        duration = currentKeyFrame.duration;\r\n      }\r\n\r\n      animationModule._position = animationModule._timer / duration;\r\n\r\n      // if current time is bigger then the frame time advance one frame\r\n      if (animationModule._timer >= duration) {\r\n\r\n        // reset time, but keep the remainder\r\n        animationModule._timer = 0;\r\n        animationModule._position = 0;\r\n\r\n        // get next Frame index\r\n        if (animationModule.currentFrame + 1 < resource.size) {\r\n          animationModule.currentFrame++;\r\n        } else {\r\n\r\n          let last =  animationModule.currentFrame;\r\n          animationModule.currentFrame = 0;\r\n               \r\n          // reset to start\r\n          if (resource.wrapMode === WrapMode.Once || animationModule.loop === false) {\r\n            animationModule.stop();\r\n            animationModule.currentFrame = last;\r\n          }\r\n\r\n          // animation has ended\r\n          if (animationModule['onAnimationEnd'] !== undefined) {\r\n            animationModule.onAnimationEnd.call(animationModule.entity);\r\n          }\r\n        }\r\n\r\n        // set the current frame, not reseting the time\r\n        if (resource.type === ResourceType.Spritesheet) {\r\n          currentKeyFrame = resource.get(animationModule.currentFrame);\r\n          SetSpritesheetFrame(animationModule._spriteModule, currentKeyFrame);\r\n        }\r\n\r\n      }\r\n\r\n    }\r\n}","\r\nmodule.exports = {\r\n    AnimationBaseModule : require('./AnimationBaseModule'),\r\n    AnimationControl : require('./AnimationControl'),\r\n    AnimationMachine : require('./AnimationMachine')\r\n};","import Renderable from \"../renderables/Renderable\";\r\nimport Tilemap from \"../renderables/tilemap/Tilemap\";\r\nimport Sprite from \"../renderables/Sprite\";\r\n\r\nexport default function AttachModules(moduleManager, game) {\r\n\r\n    // RENDERABLES\r\n\r\n\r\n\r\n    moduleManager._pendingModulesInitialization.each(entityModule => {\r\n\r\n        if (entityModule instanceof Tilemap) {\r\n\r\n            for (let i = 0; i < entityModule.layers.length; i++) {\r\n                game.system.render.layer.addRenderable(entityModule.layers.at(i), entityModule.layerID || 0);\r\n            }\r\n        } else {\r\n\r\n            game.system.render.layer.addRenderable(entityModule, entityModule.layerID || 0);\r\n        }\r\n    });\r\n\r\n    moduleManager._pendingModulesInitialization.clear();\r\n\r\n}","import DestroyRenderable from \"../renderables/components/DestroyRenderable\";\r\n\r\nexport default function ClearModules(moduleManager, game) {\r\n\r\n    \r\n    moduleManager.attached.each(function(key, value) {\r\n\r\n        if (value.type === 'render') {\r\n            DestroyRenderable(value, game.render);\r\n        }\r\n\r\n        value.entity = null;\r\n        value.moduleManager = null;\r\n\r\n        \r\n\r\n    });\r\n\r\n    moduleManager.attached.clear();\r\n    \r\n    \r\n\r\n}","import Renderable from \"../renderables/Renderable\";\r\n\r\nexport default function DetachModules(moduleManager, game) {\r\n    \r\n    let manager = moduleManager;\r\n\r\n    moduleManager.attached.each(function(key, entityModule) {\r\n        if (entityModule instanceof Renderable) {\r\n\r\n            game.system.render.layer.removeRenderable(entityModule);\r\n            manager._pendingModulesInitialization.push(entityModule);\r\n        }\r\n\r\n        \r\n    });\r\n\r\n\r\n\r\n     \r\n\r\n}","import ModuleProvider from \"../ModuleProvider\";\r\n\r\nexport default function GetRenderModule(moduleManager, attacherName, formalName) {\r\n\r\n    let spriteModule;\r\n\r\n    if (moduleManager.has('render') === false) {\r\n        spriteModule = ModuleProvider.attach(moduleManager, 'sprite');\r\n    } else {\r\n        spriteModule = moduleManager.getByName('sprite');\r\n    }\r\n\r\n    if (spriteModule === undefined || spriteModule === null) {\r\n        console.warn(\"ModuleAttacher.\" + attacherName + \": Could not create \" + formalName + \" module. There is no Sprite module attached. The current Renderable module is not compatible with \" + formalName + \" module.\");\r\n        return null;\r\n    }\r\n\r\n    return spriteModule;\r\n}","\r\nexport default function InitializeModuleBase(entityModule, instace) {\r\n\r\n    entityModule.entity = instace;\r\n    entityModule.moduleManager = instace.modules;\r\n\r\n}","import InitializeModuleBase from \"./InitializeModuleBase\";\r\nimport RenderableUpdate from \"../renderables/components/RenderableUpdate\";\r\nimport UpdateAnimationModule from \"../animation/components/UpdateAnimationModule\";\r\n\r\nexport default function ModulesUpdater(modulesManager, game)\r\n{\r\n   \r\n    let entity = modulesManager.entity;\r\n\r\n\r\n    let animationModule = modulesManager.attached.get('animation');\r\n    if (animationModule !== undefined && animationModule !== null) {\r\n        let resource;\r\n        if (animationModule.name === 'animationControl') {\r\n            resource = animationModule._resource;\r\n        } else if (animationModule.name === 'animMachine') {\r\n            resource = animationModule._currentState;\r\n        }\r\n\r\n        if (resource !== undefined) {\r\n            UpdateAnimationModule(animationModule, resource, game.system.loop.updateStep.hiDeltaTime);\r\n        }\r\n    }\r\n\r\n    \r\n    let render = modulesManager.attached.get('render');\r\n    if (render !== undefined || render !== null) {\r\n        RenderableUpdate(entity, render, game.system.camera, game.system.loop.updateStep);\r\n    }\r\n    \r\n\r\n}\r\n\r\n","\r\nmodule.exports = {\r\n    Module : require('./Module'),\r\n    ModuleProvider : require('./ModuleProvider'),\r\n    ModuleAttacher : require('./ModuleAttacher'),\r\n    Renderables : require('./renderables'),\r\n    Animation : require('./animation')\r\n};","\r\nimport BoundingBox from '../../math/BoundingBox';\r\nimport Vector2 from '../../math/Vector2'\r\nimport Module from '../Module';\r\n\r\nexport default class Renderable extends Module\r\n{\r\n    constructor(moduleName, moduleManager)\r\n    {\r\n        super('render', moduleName || 'renderable', moduleManager);\r\n\r\n        this._layerID = 0;\r\n        this._depth = 0;\r\n        this._alpha = 1;\r\n        this._depthSorting = 0;\r\n        this._bounds = new BoundingBox();\r\n        this._originInPixels = {x:0, y:0};\r\n        this._originIsDirty = true;\r\n    }\r\n\r\n    get bounds() {return this._bounds;}\r\n\r\n    get depth() { return this._depthSorting; }\r\n    get layerName() { }\r\n    get layer() { return this._layerID; }\r\n    get alpha() { return this._alpha; }\r\n    set depth(value) {\r\n\r\n        if (this.entity.game !== undefined) {\r\n            if (value !== this._depthSorting)\r\n            {\r\n                this._depthSorting = value;\r\n                this.entity.game.system.events.dispatch('__render_layersorting', this._layerID);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    set layer(value) {\r\n        if (this.game != null)\r\n        {\r\n            if (value === 'number')\r\n            {\r\n                //this.game.render.get\r\n            }\r\n        }\r\n    }   \r\n\r\n    set alpha(value) {\r\n        this._alpha = value;\r\n    }\r\n\r\n\r\n\r\n}","import Renderable from \"./Renderable\";\r\nimport Rect from \"../../math/Rect\";\r\nimport DrawImage from \"./components/DrawImage\";\r\nimport ModuleProvider from \"../ModuleProvider\";\r\nimport UpdateTransformBounds from \"../../transform/UpdateTransformBounds\";\r\n\r\n\r\nexport default class Sprite extends Renderable {\r\n\r\n    constructor(moduleManager)\r\n    {\r\n        super('sprite', moduleManager);\r\n\r\n        //this._type = \"sprite\";\r\n        this.resource = null;\r\n        this.frame = new Rect();\r\n   \r\n    \r\n    }\r\n\r\n    get width() {return this.frame.width; }\r\n    get height() {return this.frame.height; }\r\n\r\n    setFrame(x, y, width, height)\r\n    {\r\n        this.frame.set(x,y,width,height);\r\n        return this;\r\n    }\r\n\r\n    setFrameRect(rect) {\r\n        this.frame.copy(rect);\r\n        return this;\r\n    }\r\n\r\n    setSprite(tag) {\r\n\r\n        if (this.entity !== null && this.entity !== undefined) {\r\n            let sprite = this.entity.game.system.cache.image.get(tag);\r\n\r\n            //if (sprite !== null) {\r\n                this.setImage(sprite, true);\r\n\r\n        } else {\r\n            Console.warn(\"Sprite.setSprite: Could not set Sprite. The entity is null in the game\");\r\n        }\r\n        return this;\r\n        \r\n    }\r\n\r\n    setImage(image, fullFrame) {\r\n\r\n        /*if (image === null)\r\n        {\r\n            Console.warn(\"Sprite.setImage: Could not set Sprite source image. The image is null.\");\r\n            return this;\r\n        }*/\r\n\r\n        if (fullFrame === undefined) fullFrame = true;\r\n      \r\n        if (this.resource !== image)\r\n          this.resource = image;\r\n      \r\n        if (fullFrame === true && image !== null) {\r\n            this.setFrame(0,0,this.resource.width,this.resource.height);\r\n        }\r\n      \r\n        return this;\r\n      \r\n    }\r\n\r\n    render(context)\r\n    {\r\n        if (!this._enabled)\r\n            return false;\r\n\r\n        if (!this.resource)\r\n            return false;\r\n\r\n        DrawImage(context, \r\n            this.resource.data, this.frame,\r\n            this.entity._transform, this._originInPixels);\r\n   \r\n       return true;\r\n    }\r\n}\r\n\r\nModuleProvider.register('sprite', function(moduleManager, config) {\r\n\r\n    var spr = new Sprite(moduleManager);\r\n\r\n    if (config !== undefined) {\r\n        if (config[0] !== undefined)\r\n        {   \r\n            spr.setSprite(config[0]);\r\n\r\n            if (spr.resource !== null) {\r\n                if (config[1] === undefined) config[1] = 0; // framex\r\n                if (config[2] === undefined) config[2] = 0; // framey\r\n                if (config[3] === undefined) config[3] = spr.resource.width; // framew\r\n                if (config[4] === undefined) config[4] = spr.resource.height; // frameh\r\n\r\n                spr.setFrame(config[1], config[2], config[3], config[4]);\r\n            }\r\n        } \r\n    }\r\n\r\n\r\n    return spr;\r\n\r\n});","\r\nexport default function AnimateTilemap(tilemap, time) {\r\n\r\n    let animator = tilemap.animator;\r\n\r\n    if (animator === undefined)\r\n        return;\r\n\r\n    //console.log(time.hiDeltaTime);\r\n\r\n    let len = animator.animatedTiles.size;\r\n\r\n    if (len === 0)\r\n        return;\r\n\r\n    let delta = time.hiDeltaTime;\r\n\r\n\r\n    for (let i = 0; i < len; i++) {\r\n\r\n        let animatedTile = animator.animatedTiles.at(i); \r\n\r\n        animatedTile.t += delta;\r\n        \r\n        let GID = animatedTile.tileGID;\r\n        let currentKeyFrame = GID.keyFrames[animatedTile.frame];\r\n\r\n        if (animatedTile.t >= currentKeyFrame.duration) {\r\n\r\n            animatedTile.t = 0;\r\n           \r\n\r\n            if (animatedTile.frame + 1 < GID.keyFrames.length)\r\n                animatedTile.frame++;\r\n            else \r\n                animatedTile.frame = 0;\r\n            \r\n\r\n            let nextGID = GID.keyFrames[animatedTile.frame].tileID;//GID.tileset.getTile(GID.keyFrames[animatedTile.frame].tileID).id;\r\n            \r\n            GID.currentFrame = nextGID;\r\n\r\n            \r\n        }\r\n\r\n    }\r\n\r\n}","import MathUtils from \"../../../math/MathUtils\";\r\nimport CullingMethod from \"./CullingMethod\";\r\n\r\nfunction LimitCulling(culling, tilemap) {\r\n\r\n    // limit culling\r\n\r\n    if (culling.start.x < 0)\r\n    culling.start.x = 0;\r\n\r\n    if (culling.start.y < 0)\r\n    culling.start.y = 0;\r\n\r\n    if (culling.end.x > tilemap.width)\r\n    culling.end.x = tilemap.width;\r\n    \r\n    if (culling.end.y > tilemap.height)\r\n    culling.end.y = tilemap.height;\r\n\r\n}\r\n\r\nexport default function CullTiles(tilemap, camera) {\r\n    \r\n    let t = tilemap.entity._transform;\r\n    let rot = camera._transform.rotation + t.rotation;\r\n\r\n    // 90 DEGREE ROTATION\r\n    // We will use the linear culling that is faster\r\n\r\n\r\n\r\n    if (rot % MathUtils.HALFPI === 0) {\r\n\r\n        let tx = t.position.x - tilemap._originInPixels.x;\r\n        let ty = t.position.y - tilemap._originInPixels.y;\r\n\r\n\r\n        tilemap.culling.method = CullingMethod.LINEAR;\r\n\r\n            tilemap.culling.start.x =  Math.floor((camera.viewBounds.min.x - tx) / tilemap.tileWidth);\r\n            tilemap.culling.start.y =  Math.floor((camera.viewBounds.min.y - ty) / tilemap.tileHeight);\r\n            tilemap.culling.end.x =  Math.ceil((camera.viewBounds.max.x - tx) / tilemap.tileWidth);\r\n            tilemap.culling.end.y =  Math.ceil((camera.viewBounds.max.y - ty) / tilemap.tileHeight);\r\n\r\n        LimitCulling(tilemap.culling, tilemap);\r\n\r\n        // TODO FOR 90 Deg TILES\r\n\r\n\r\n    } else {\r\n\r\n        tilemap.culling.method = 1;\r\n\r\n        // TODO ROTATED TILES\r\n\r\n    }\r\n    \r\n\r\n}","\r\nconst CullingMethod = {\r\n    LINEAR : 0,\r\n    LINEAR90DEG : 1 \r\n};\r\n\r\nexport default CullingMethod;","import TilemapLayer from \"../tilemap/TilemapLayer\";\r\nimport Tilemap from \"../tilemap/Tilemap\";\r\n\r\nexport default function DestroyRenderable(renderable, render) {\r\n\r\n    if (renderable instanceof Tilemap) {\r\n        for (let i = 0; i < renderable.layers.length; i++) {\r\n            let layer = renderable.layers.at(i);\r\n            DestroyRenderable(layer, render);\r\n        }\r\n        renderable.layers.clear();\r\n    }\r\n\r\n    render.layer.removeRenderable(renderable);\r\n\r\n    renderable._bounds = null;\r\n    renderable.resource = null;\r\n    renderable.frame = null;\r\n\r\n   \r\n\r\n}","\r\n\r\nfunction DrawImage(context, source, frame, transform, destination)\r\n{\r\n    \r\n\r\n    if (context === undefined) return false;\r\n\r\n    if (source === undefined || source == null) return false;\r\n\r\n    let matrix = transform.matrix;\r\n\r\n    context.setTransform(\r\n        matrix.a[0], matrix.a[1], // 2\r\n        matrix.a[3], matrix.a[4], // 5\r\n        matrix.a[6],\r\n        matrix.a[7]);\r\n    \r\n    //context.globalAlpha = this.alpha;\r\n    \r\n    context.drawImage(\r\n            source, // image\r\n            frame.x, // sx - pos crop x\r\n            frame.y, // sy - pos crop y\r\n            frame.width, // sWidth - crop width\r\n            frame.height, // sHeight - crop height\r\n            -destination.x, // destination x\r\n            -destination.y, // destination y\r\n            frame.width,\r\n            frame.height\r\n            );\r\n      \r\n        return true;\r\n        \r\n}\r\n\r\n\r\nexport default DrawImage;","import MathUtils from \"../../../math/MathUtils\";\r\nimport CullingMethod from \"./CullingMethod\";\r\n\r\nexport default function DrawTilemapLayer(context, tilemap, layer, transform) {\r\n\r\n    let draws = 0;\r\n    let matrix = transform.matrix;\r\n    let x = matrix.a[6];\r\n    let y = matrix.a[7];\r\n\r\n    if (tilemap.floorTiles)\r\n    {\r\n       x = MathUtils.round(x);\r\n       y = MathUtils.round(y);\r\n    }\r\n    context.setTransform(\r\n        matrix.a[0], matrix.a[1], // 2\r\n        matrix.a[3], matrix.a[4], // 5\r\n        x, y);\r\n\r\n    if (tilemap.culling.method <= 1) {\r\n\r\n        let idx = 0;\r\n\r\n        for (let j = tilemap.culling.start.y; j < tilemap.culling.end.y; j++) {\r\n            for (let i = tilemap.culling.start.x; i < tilemap.culling.end.x; i++) {\r\n    \r\n                //if (tilemap.culling.method == CullingMethod.LINEAR)\r\n                    idx = i + j * tilemap.width;\r\n                //else if (tilemap.culling.method == CullingMethod.LINEAR90DEG)\r\n                //    idx = j + i * tilemap.width;\r\n\r\n                let tile = layer.tiles[idx];\r\n\r\n                if (tile == null || tile === undefined) continue;\r\n\r\n                let frame;\r\n\r\n                if (tile.data.isAnimated === false || tile.data.isAnimated === undefined)\r\n                    frame = tile.data.st;\r\n                else\r\n                    frame = tile.data.tileset.getTile(tile.data.currentFrame).st;\r\n\r\n                \r\n\r\n                context.drawImage(\r\n                tile.data.tileset.image.data, // image\r\n                frame.x, // sx - pos crop x\r\n                frame.y, // sy - pos crop y\r\n                frame.width, // sWidth - crop width\r\n                frame.height, // sHeight - crop height\r\n                tile.x - tilemap._originInPixels.x, // destination x\r\n                tile.y - tilemap._originInPixels.y,  // destination y\r\n                frame.width,\r\n                frame.height\r\n                    );\r\n\r\n                draws++;\r\n            }\r\n        }\r\n    }\r\n    \r\n   //for (let i = 0; i < layer.culledTiles.lenght; i++) {\r\n    /*for (let i = 0; i < layer.tiles.length; i++) {\r\n\r\n        let tile = layer.tiles[i];\r\n\r\n        if (tile == null || tile === undefined) continue;\r\n\r\n        context.drawImage(\r\n            tile.data.tileset.image.data, // image\r\n            tile.frame.x, // sx - pos crop x\r\n            tile.frame.y, // sy - pos crop y\r\n            tile.frame.width, // sWidth - crop width\r\n            tile.frame.height, // sHeight - crop height\r\n            tile.x, // destination x\r\n            tile.y,  // destination y\r\n            tile.frame.width,\r\n            tile.frame.height\r\n                );\r\n\r\n        draws++;\r\n\r\n    }*/\r\n\r\n    return draws;\r\n\r\n}","import ComputeBounds from \"../../../transform/ComputeBounds\";\r\n\r\nexport default function RenderableBoundsUpdate(renderable, entity, camera) {\r\n\r\n    if (!entity._transform._isDirty && !camera._transform._isDirty)\r\n        return;\r\n\r\n    if (renderable._originIsDirty) {\r\n        // destination\r\n        renderable._originInPixels.x = entity._transform.origin.x * renderable.width;\r\n        renderable._originInPixels.y = entity._transform.origin.y * renderable.height;\r\n        // renderable._originIsDirty = false;\r\n    }\r\n\r\n    ComputeBounds(\r\n        renderable._bounds, entity._transform, \r\n        renderable.width, renderable.height,\r\n        renderable._originInPixels);\r\n\r\n}","\r\nimport CullTiles from \"./CullTiles\";\r\nimport AnimateTilemap from './AnimateTilemap';\r\nimport RenderableBoundsUpdate from \"./RenderableBoundsUpdate\";\r\n\r\n\r\nexport default function RenderableUpdate(entity, renderable, camera, gameTime) {\r\n\r\n    if (renderable.name === 'tilemap') {\r\n\r\n        if (renderable._originIsDirty) {\r\n            // destination\r\n            renderable._originInPixels.x = entity._transform.origin.x * renderable.pixelsWidth;\r\n            renderable._originInPixels.y = entity._transform.origin.y * renderable.pixelsHeight;\r\n        }\r\n\r\n        AnimateTilemap(renderable, gameTime);\r\n\r\n        if (!entity._transform._isDirty && !camera._transform._isDirty)\r\n            return;\r\n\r\n        CullTiles(renderable, camera);\r\n\r\n        for (let i = 0; i < renderable.layers.length; i++) {\r\n            RenderableBoundsUpdate(renderable, entity, camera);\r\n        }\r\n\r\n    } else {\r\n        \r\n        RenderableBoundsUpdate(renderable, entity, camera);\r\n    }\r\n\r\n\r\n}","\r\nexport const Renderable = require('./Renderable');\r\nexport const Primitives = require('./primitives');\r\nexport const Sprite = require('./Sprite');\r\nexport const Tilemap = require('./tilemap/Tilemap');","\r\nimport Rectangle from \"./rectangle/Rectangle\";\r\n\r\nexport default {\r\n    Rectangle\r\n};","\r\nexport default function DrawRectangle(context, transform, rectangle) {\r\n\r\n    if (context === undefined) return false;\r\n\r\n   let matrix = transform.matrix;\r\n\r\n    context.setTransform(\r\n        matrix.a[0], matrix.a[1], // 2\r\n        matrix.a[3], matrix.a[4], // 5\r\n        matrix.a[6], matrix.a[7]);\r\n\r\n   /* if (rectangle.outlineWidth > 0) {\r\n        context.lineWidth = rectangle.outlineWidth;\r\n        context.strokeStyle = rectangle.outlineColor;\r\n        context.strokeRect(0, 0, rectangle.width, rectangle.height);\r\n    }*/\r\n\r\n    context.fillStyle = rectangle.color._css;\r\n    context.fillRect(0, 0, rectangle.width, rectangle.height);\r\n\r\n    return true;\r\n}\r\n\r\n","import Renderable from './../../Renderable';\r\nimport Color from '../../../../render/color/Color';\r\nimport ModuleProvider from '../../../ModuleProvider';\r\nimport DrawRectangle from './DrawRectangle';\r\n\r\nexport default class Rectangle extends Renderable {\r\n\r\n    constructor(moduleManager, width, height) {\r\n\r\n        super('rectangle', moduleManager);\r\n\r\n        this._width = width || 100;\r\n        this._height = height || 100;\r\n        this._color = Color.magenta;\r\n\r\n    }\r\n\r\n    set width(value) {this._width = value;}\r\n    set height(value) {this._height = value;}\r\n    get width() {return this._width; }\r\n    get height() {return this._height; }\r\n\r\n    set color(value) {this._color.set(value);}\r\n    get color() {return this._color;}\r\n\r\n    get outlineColor() {return -1;}\r\n    get outlineWidth() {return -1;}\r\n\r\n    render(context) {\r\n\r\n        if (!this._enabled)\r\n            return false;\r\n\r\n        return DrawRectangle(context, this.entity._transform, this);\r\n    }\r\n\r\n}\r\n\r\nModuleProvider.register('rectangle', function(moduleManager, config) {\r\n\r\n    return new Rectangle(moduleManager, config[0], config[1]);\r\n\r\n});","import Renderable from \"../Renderable\";\r\nimport ModuleProvider from \"../../ModuleProvider\";\r\nimport TilemapLayer from \"./TilemapLayer\";\r\nimport TilemapAnimator from \"./TilemapAnimator\";\r\nimport DataList from \"../../../structures/List\";\r\n\r\nexport default class Tilemap extends Renderable {\r\n    \r\n    constructor(moduleManager, resource)\r\n    {\r\n        super('tilemap', moduleManager);\r\n\r\n        //this._type = \"tilemap\";\r\n        this.resource = resource;\r\n        this.tileWidth = resource.metadata.tileWidth;\r\n        this.tileHeight = resource.metadata.tileHeight;\r\n        this.width = resource.metadata.width;\r\n        this.height = resource.metadata.height;\r\n        this.orientation = resource.metadata.orientation;\r\n        this.pixelsWidth = resource.metadata.pixelsWidth;\r\n        this.pixelsHeight = resource.metadata.pixelsHeight;\r\n        this.animator = undefined;\r\n\r\n        this.culling = {\r\n            method : 0,\r\n            start : {x: 0, y: 0},\r\n            end : {x : 0, y : 0}\r\n        }\r\n\r\n        this.floorTiles = false;\r\n        this.tilesets = resource.tilesets;\r\n        this.layers = new DataList();\r\n        this.objectLayers = resource.objectLayers;\r\n\r\n        let animations = false;\r\n        let layersSize = resource.tileLayers.length;\r\n\r\n\r\n        for (let i = layersSize - 1; i >= 0; i--)\r\n        {\r\n            let layerData = resource.tileLayers.at(i);\r\n\r\n            if (layerData.hasAnimatedTiles)\r\n                animations = true;\r\n\r\n            this.layers.push(new TilemapLayer(this, layerData));\r\n        }\r\n\r\n        if (animations === true) {\r\n            this.animator = new TilemapAnimator(this, this.layers);\r\n        }\r\n\r\n    }\r\n    \r\n    getObjectsLayer(name) {\r\n        return this.resource.getObjectsLayer(name);\r\n    }\r\n\r\n    getTileLayer(name) {\r\n        return this.resource.getTileLayer(name);\r\n    }\r\n\r\n}\r\n\r\nModuleProvider.register('tilemap', function(moduleManager, tag) {\r\n\r\n    let res = null;\r\n    let cache = moduleManager.entity.game.system.cache;\r\n\r\n    if (cache !== undefined)\r\n        res = cache.tilemap.get(tag);\r\n\r\n    let tilemap = new Tilemap(moduleManager, res);\r\n    tilemap.floorTiles = moduleManager.entity.game.config.floorTiles || false;\r\n\r\n    return tilemap;\r\n\r\n});","import DataList from \"../../../structures/List\";\r\n\r\nexport default class TilemapAnimator {\r\n\r\n    constructor(tilemap, layers) {\r\n\r\n        this.tilemap = tilemap;\r\n        this.animatedTiles = new DataList();\r\n\r\n\r\n\r\n        for (let i = 0; i < layers.length; i++) {\r\n\r\n            if (!layers.at(i).data.hasAnimatedTiles) continue;\r\n\r\n            let animatedSet = layers.at(i).data.animatedTiles;\r\n\r\n\r\n\r\n            for (let j = 0; j < animatedSet.size; j++) {\r\n\r\n                let animID = animatedSet.at(j);\r\n\r\n                let tileGID = tilemap.resource.getTileGID(animID)\r\n\r\n                let hasGid = this.animatedTiles.find(\r\n                    (tileData) => {\r\n                        return tileData.tileGID.gid === tileGID.gid;\r\n                    });\r\n\r\n                if (hasGid !== null)\r\n                    continue;\r\n\r\n\r\n\r\n\r\n                this.animatedTiles.push({\r\n                    t: 0, // frameTime\r\n                    frame: 0,\r\n                    tileGID: tileGID\r\n                });\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    update() {\r\n\r\n    }\r\n\r\n}","import Renderable from \"../Renderable\";\r\nimport DrawTilemapLayer from \"../components/DrawTilemapLayer\";\r\n\r\nexport default class TilemapLayer extends Renderable {\r\n\r\n    constructor(tilemap, layerData) {\r\n\r\n        super('tilemapLayer', tilemap.moduleManager);     \r\n        this.tilemap = tilemap;\r\n        this.data = layerData;\r\n    }\r\n\r\n\r\n    get width() {return this.data.width * this.tilemap.tileWidth;}\r\n    get height() {return this.data.height * this.tilemap.tileHeight;}\r\n\r\n\r\n    render(context) {\r\n\r\n        if (!this._enabled && !this.tilemap._enabled)\r\n            return false;\r\n\r\n        return DrawTilemapLayer(context, this.tilemap, this.data, this.tilemap.moduleManager.entity._transform);\r\n\r\n    }\r\n\r\n    getTile(x, y) {\r\n        return this.data.getTile(x, y);\r\n    }\r\n\r\n}","\r\nimport SAT from './sat/SAT'\r\nimport SATResponse from './sat/SATResponse'\r\n\r\nexport default class Physics {\r\n\r\n\r\n  constructor(game) {\r\n\r\n    this.game = null;\r\n    this.sat = null;\r\n    this.response = null;\r\n\r\n   \r\n    this.game = game;\r\n    this.colliadables = [];\r\n\r\n  }\r\n\r\n  init() {\r\n\r\n    this.sat = new SAT();\r\n    this.response = new SATResponse();\r\n\r\n  }\r\n\r\n  getColliadables() {\r\n    return this.colliadables;\r\n  }\r\n\r\n  addColliderObj(obj) {\r\n    this.colliadables.push(obj);\r\n  }\r\n\r\n  removeColliderObj(obj) {\r\n\r\n    var i = this.colliadables.indexOf(obj);\r\n\r\n    if(i != -1) {\r\n      this.colliadables.splice(i, 1);\r\n    }\r\n\r\n  }\r\n\r\n  clear() {\r\n\r\n    this.colliadables = [];\r\n    this.colliadables.length = 0;\r\n\r\n  }\r\n\r\n\r\n\r\n  get length() {return this.colliadables.length;}\r\n\r\n}\r\n\r\n","\r\nimport Vector2 from '../../math/Vector2' \r\n\r\nexport default class SAT {\r\n\r\n  constructor()\r\n  {\r\n\r\n    this.VECTORS = [];\r\n    for (var v = 0; v < 10; v++) { \r\n      VECTORS.push(new Vector2()); \r\n    }\r\n\r\n    this.ARRAYS = [];\r\n    for (var a = 0; a < 5; a++) { \r\n      ARRAYS.push([]); \r\n    }\r\n  }\r\n\r\n  flattenPointsOn(points, normal, result) {\r\n          var min = Number.MAX_VALUE;\r\n          var max = -Number.MAX_VALUE;\r\n          var len = points.length;\r\n          for (var i = 0; i < len; i++) {\r\n              // The magnitude of the projection of the point onto the normal\r\n              var dot = points[i].dot(normal);\r\n              if (dot < min) { min = dot; }\r\n              if (dot > max) { max = dot; }\r\n          }\r\n          result[0] = min;\r\n          result[1] = max;\r\n  };\r\n\r\n  isSeparatingAxis(posA, posB, pointsA, pointsB, axis, response) {\r\n\r\n    var rangeA = ARRAYS.pop();\r\n    var rangeB = ARRAYS.pop();\r\n\r\n    // magnitude between the two polygons\r\n    var offsetV = VECTORS.pop().copy(posB).sub(posA);\r\n    var projectedOffset = offsetV.dot(axis);\r\n\r\n    // Project the polygons onto the axis.\r\n    flattenPointsOn(pointsA, axis, rangeA);\r\n    flattenPointsOn(pointsB, axis, rangeB);\r\n\r\n    // Move B's range to its position relative to A.\r\n    rangeB[0] += projectedOffset;\r\n    rangeB[1] += projectedOffset;\r\n\r\n    // Check if there is a gap. If there is, this is a separating axis and we can stop\r\n    if (rangeA[0] > rangeB[1] || rangeB[0] > rangeA[1]) {\r\n        VECTORS.push(offsetV);\r\n        ARRAYS.push(rangeA);\r\n        ARRAYS.push(rangeB);\r\n        return true;\r\n    }\r\n\r\n    if (response) {\r\n        var overlap = 0;\r\n        // A starts further left than B\r\n        if (rangeA[0] < rangeB[0]) {\r\n\r\n          response.aInB = false;\r\n\r\n          // A ends before B does. We have to pull A out of B\r\n          if (rangeA[1] < rangeB[1]) {\r\n\r\n            overlap = rangeA[1] - rangeB[0];\r\n            response.bInA = false;\r\n\r\n          // B is fully inside A.  Pick the shortest way out.\r\n          } else {\r\n\r\n            var option1 = rangeA[1] - rangeB[0];\r\n            var option2 = rangeB[1] - rangeA[0];\r\n            overlap = option1 < option2 ? option1 : -option2;\r\n\r\n          }\r\n        // B starts further left than A\r\n        } else {\r\n\r\n          response.bInA = false;\r\n\r\n          // B ends before A ends. We have to push A out of B\r\n          if (rangeA[1] > rangeB[1]) {\r\n\r\n            overlap = rangeA[0] - rangeB[1];\r\n            response.aInB = false;\r\n\r\n          // A is fully inside B.  Pick the shortest way out.\r\n          } else {\r\n\r\n            var option1 = rangeA[1] - rangeB[0];\r\n            var option2 = rangeB[1] - rangeA[0];\r\n            overlap = option1 < option2 ? option1 : -option2;\r\n\r\n          }\r\n        }\r\n        // If this is the smallest amount of overlap we've seen so far, set it as the minimum overlap.\r\n        var absOverlap = Math.abs(overlap);\r\n\r\n        if (absOverlap < response.overlap) {\r\n\r\n          response.overlap = absOverlap;\r\n          response.overlapN.copy(axis);\r\n\r\n          if (overlap < 0)\r\n            response.overlapN.reverse();\r\n        }\r\n      }\r\n\r\n      VECTORS.push(offsetV);\r\n      ARRAYS.push(rangeA);\r\n      ARRAYS.push(rangeB);\r\n\r\n\r\n\r\n      return false;\r\n\r\n  };\r\n\r\n  testPolygonPolygon(a,b,response) {\r\n\r\n    // collider a\r\n\r\n    var pointsA = a.shape.getPoints();\r\n    var normalsA =  a.shape.getNormals();\r\n    var normalsALen = normalsA.length;\r\n\r\n    // collider b\r\n\r\n    var pointsB = b.shape.getPoints();\r\n    var normalsB =  b.shape.getNormals();\r\n    var normalsBLen = normalsB.length;\r\n\r\n\r\n    // If any of the edge normals of A is a separating axis, no intersection.\r\n    while (normalsALen--) {\r\n        if (isSeparatingAxis(a.position, b.position, pointsA, pointsB, normalsA[normalsALen],response)) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n\r\n    // If any of the edge normals of B is a separating axis, no intersection.\r\n    while (normalsBLen--) {\r\n        if (isSeparatingAxis(a.position, b.position, pointsA, pointsB, normalsB[normalsBLen], response)) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n\r\n\r\n    // Since none of the edge normals of A or B are a separating axis, there is an intersection\r\n    // and we've already calculated the smallest overlap (in isSeparatingAxis).  Calculate the\r\n    // final overlap vector.\r\n      if (response) {\r\n          response.a = a;\r\n          response.b = b;\r\n          response.overlapV.copy(response.overlapN).scale(response.overlap);\r\n      }\r\n    return true;\r\n\r\n  };\r\n\r\n}\r\n\r\n\r\n","\r\nexport default class SATResponse {\r\n\r\n    constructor()\r\n    {\r\n        this.a = null;\r\n        this.b = null;\r\n        this.overlapN = new Vector2();\r\n        this.overlapV = new Vector2();\r\n        this.aInB = true;\r\n        this.bInA = true;\r\n        this.overlap = Number.MAX_VALUE;\r\n        this.indexShapeA = -1;\r\n        this.indexShapeB = -1;\r\n        this.clear();\r\n    }\r\n\r\n    clear()\r\n    {\r\n        this.aInB = true;\r\n        this.bInA = true;\r\n        this.overlap = Number.MAX_VALUE;\r\n        this.indexShapeA = -1;\r\n        this.indexShapeB = -1;\r\n        return this;\r\n    }\r\n}\r\n","\r\nexport const RenderingType = {\r\n    NEAREST : 0,\r\n    LINEAR : 1\r\n}","import RenderLayerManagment from './layer/RenderLayersManagement';\r\n\r\nexport default class Render {\r\n    \r\n\r\n    constructor(game) {\r\n        \r\n        this.game = game;\r\n        this.doubleBuffer = false;\r\n        this.smoothing = null;\r\n        this.imageRendering = null;\r\n        this.canvas = null;\r\n        this.context = null;\r\n        this.layer = new RenderLayerManagment(this.game);\r\n        this._backgroundColor = '#000';     \r\n        this._alpha = 1;\r\n        this._enable = true;\r\n        this.clear = true;\r\n        this.drawCalls = 0;\r\n    }\r\n\r\n    get domCanvas() {\r\n        if (this.doubleBuffer) {\r\n            return this._domCanvas;\r\n        } else {\r\n            return this.canvas;\r\n        }\r\n    }\r\n\r\n    get backgroundColor() {return this._backgroundColor;}\r\n    set backgroundColor(value) {\r\n        this._backgroundColor = value;\r\n    }\r\n    get alpha() {return this._alpha;}\r\n    set alpha(value) {\r\n\r\n        if (this._alpha !== value)\r\n        {\r\n            this.currentContext.globalAlpha = value;\r\n            this._alpha = value;\r\n        }\r\n\r\n        return this._alpha;\r\n    }\r\n}\r\n\r\n//System.register('Render', Render, 'render');","\r\n\r\nconst CanvasInterpolation = {\r\n\r\n    crisp : function(canvas)\r\n    {\r\n        var types = [ 'optimizeSpeed', 'crisp-edges', '-moz-crisp-edges', '-webkit-optimize-contrast', 'optimize-contrast', 'pixelated' ];\r\n        types.forEach(function (type)\r\n        {\r\n            canvas.style['image-rendering'] = type;\r\n        });\r\n        canvas.style.msInterpolationMode = 'nearest-neighbor';\r\n        return canvas;\r\n    },\r\n\r\n    bicubic : function(canvas)\r\n    {\r\n        canvas.style['image-rendering'] = 'auto';\r\n        canvas.style.msInterpolationMode = 'bicubic';\r\n        return canvas;\r\n    }\r\n};\r\n\r\nObject.freeze(CanvasInterpolation);\r\n\r\nexport default CanvasInterpolation;","\r\nimport DataList from '../../structures/List';\r\n\r\n// based in pixi\r\nclass CanvasListManager {\r\n\r\n    constructor() {\r\n        this.list = new DataList();\r\n    }\r\n\r\n    create(gameParent, width, height) {\r\n\r\n        let canvasContainer = this.firstFree();\r\n        let canvas;\r\n\r\n        // no parent found\r\n        if (canvasContainer === null) {\r\n\r\n            canvasContainer = {\r\n                parent: gameParent,\r\n                canvas: document.createElement('canvas')\r\n            };\r\n\r\n            this.list.push(canvasContainer);\r\n\r\n            canvas = canvasContainer.canvas;\r\n\r\n        } else {\r\n\r\n            canvasContainer.parent = gameParent;\r\n            canvas = canvasContainer.canvas;\r\n        }\r\n\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n\r\n        return canvas;\r\n    }\r\n\r\n    filter(gameParent) { // functional programming\r\n\r\n        var list = scintilla.CanvasList.list;\r\n\r\n        return list.parent === gameParent;\r\n\r\n    }\r\n\r\n    firstFree() {\r\n\r\n        this.list.each((canvas) => {\r\n\r\n            if (!canvas.parent) {\r\n                return canvas;\r\n            }\r\n\r\n        });\r\n\r\n        return null;\r\n    }\r\n\r\n    remove(parent) {\r\n\r\n        var list = this.list;\r\n\r\n        for (var i = 0; i < list.length; i++)\r\n        {\r\n            if (list[i].parent === parent)\r\n            {\r\n                list[i].parent = null;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    clear() {\r\n        /// TODO\r\n    }\r\n\r\n}\r\n\r\nvar CanvasManager = new CanvasListManager();\r\n\r\nObject.seal(CanvasManager);\r\n\r\nexport default CanvasManager;","import { RenderingType } from \"../Define\";\r\n\r\n\r\nexport default class CanvasSmoothing {\r\n\r\n    constructor(context) {\r\n        this.context = context;\r\n        this.prefix = this.getPrefix(context);\r\n    }\r\n\r\n    getPrefix(context) {\r\n\r\n        let vendors = [ 'i', 'webkitI', 'msI', 'mozI', 'oI' ];\r\n        for (let i = 0; i < vendors.length; i++)\r\n        {\r\n            let s = vendors[i] + 'mageSmoothingEnabled';\r\n\r\n            if (s in context)\r\n                return s;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    setEnable(flag) {\r\n\r\n        if (flag === 'undefined') flag = true;\r\n\r\n        if (this.prefix === '' || this.prefix === undefined)\r\n            this.prefix = this.getPrefix(this.context);\r\n\r\n        if (this.prefix)\r\n            this.context[this.prefix] = flag;\r\n\r\n        return this.context;\r\n    }\r\n\r\n    set(renderType) {\r\n        if (renderType == RenderingType.NEAREST)\r\n            this.setEnable(false);\r\n        else\r\n            this.setEnable(true);\r\n    }\r\n\r\n}\r\n","\r\nmodule.exports = {\r\n    Smoothing : require('./CanvasSmoothing'),\r\n    Manager : require('./CanvasListManager'),\r\n    Interpolation : require('./CanvasInterpolation')\r\n};","import MathUtils from '../../math/MathUtils'\r\nimport ParseColor from './components/ParseColor';\r\nimport Ease from '../../math/easing/Ease';\r\nimport EasingType from '../../math/easing/EasingType';\r\nimport MakeImmutable from '../../utils/object/MakeImmutable';\r\nimport SetColor from './components/SetColor';\r\n\r\n\r\nfunction ColorNormUpdate(color) {\r\n    color._css = 'rgba(' +\r\n        MathUtils.floor(color.r * 255) + ',' +\r\n        MathUtils.floor(color.g * 255) + ',' +\r\n        MathUtils.floor(color.b * 255) + ',' +\r\n        color.a + ')';\r\n}\r\n\r\nfunction ColorUpdate(color) {\r\n    color._css = 'rgba(' +\r\n        color._r + ',' +\r\n        color._g + ',' +\r\n        color._b + ',' +\r\n        color._a + ')';\r\n}\r\n\r\nclass Color {\r\n\r\n    constructor(r, g, b, a) {\r\n\r\n        if (r === undefined) r = 0;\r\n        if (g === undefined) g = 0;\r\n        if (b === undefined) b = 0;\r\n        if (a === undefined) a = 1;\r\n\r\n        this._r = r;\r\n        this._g = g;\r\n        this._b = b;\r\n        this._a = a;\r\n        this._css = null;\r\n\r\n        ColorUpdate(this);\r\n    }\r\n\r\n\r\n    get rgba() {\r\n        return this._css;\r\n    }\r\n    get r() {\r\n        return this._r;\r\n    }\r\n    get g() {\r\n        return this._g;\r\n    }\r\n    get b() {\r\n        return this._b;\r\n    }\r\n    get a() {\r\n        return this._a;\r\n    }\r\n    set a(value) {\r\n        this._a = value;\r\n        ColorUpdate(this);\r\n    }\r\n\r\n    set(color) {\r\n\r\n        SetColor(this, color);\r\n\r\n        ColorUpdate(this);\r\n\r\n        return this;\r\n    }\r\n\r\n    setNorm(r, g, b, a) {\r\n        if (r === undefined)\r\n            return;\r\n\r\n        this._r = Math.round(r * 255.0);\r\n        this._g = Math.round(g * 255.0);\r\n        this._b = Math.round(b * 255.0);\r\n\r\n        if (a !== undefined)\r\n            this._a = Math.round(a * 255.0);\r\n\r\n        ColorUpdate(this);\r\n\r\n        return this;\r\n    }\r\n\r\n    setRGB(r, g, b) {\r\n        return this.setRGBA(r, g, b, 255);\r\n    }\r\n\r\n    setRGBA(r, g, b, a) {\r\n        if (r === undefined)\r\n            return this;\r\n\r\n        this._r = r || 0;    \r\n        this._g = g || 0;\r\n        this._b = b || 0;\r\n\r\n        if (a !== undefined)\r\n            this._a = a;\r\n\r\n        ColorUpdate(this);\r\n\r\n        return this;\r\n    }\r\n\r\n    setColor(color, a) {\r\n        this._r = color.r;\r\n        this._g = color.g;\r\n        this._b = color.b;\r\n        if (a !== undefined)\r\n            this._a = a;\r\n        else\r\n            this._a = color.a;\r\n        ColorUpdate(this);\r\n        return this;\r\n    }\r\n\r\n    parse(value) {\r\n        let parsedValue = ParseColor(value);\r\n        this._r = parsedValue.r;\r\n        this._g = parsedValue.g;\r\n        this._b = parsedValue.b;\r\n        this._a = parsedValue.a;\r\n        ColorUpdate(this);\r\n        return this;\r\n    }\r\n\r\n    lerp(toColor, t) {\r\n\r\n        this._r = MathUtils.lerp(this._r, toColor.r);\r\n        this._g = MathUtils.lerp(this._g, toColor.g);\r\n        this._b = MathUtils.lerp(this._b, toColor.b);\r\n        this._a = MathUtils.lerp(this._a, toColor.a);\r\n        ColorUpdate(this);\r\n        return this;\r\n\r\n    }\r\n\r\n    /*ease(to, t, easingType, easingMode, easingArg) {\r\n         if (easingType === undefined) easingType = EasingType.LINEAR;\r\n         if (easingMode === undefined) easingMode = 0;\r\n         if (easingArg === undefined) easingArg = 1;\r\n \r\n        let easer = Ease.in;\r\n\r\n         switch (easingMode) {\r\n             case 1: {\r\n                easer = Ease.out;\r\n                break;\r\n             }\r\n             case 2: {\r\n                easer = Ease.inout;\r\n                break;\r\n             }\r\n         }\r\n\r\n         this._r = easer.by(easingType, this._r, to.r, t, easingArg);\r\n         this._g = easer.by(easingType, this._g, to.g, t, easingArg);\r\n         this._b = easer.by(easingType, this._b, to.b, t, easingArg);\r\n         this._a = easer.by(easingType, this._a, to.a, t, easingArg);\r\n\r\n         ColorUpdate(this);\r\n         return this;\r\n    }*/\r\n\r\n    to32() {\r\n        /// TODO\r\n    }\r\n\r\n    toCSS() {\r\n        /// TODO\r\n    }\r\n\r\n    toInt() {\r\n        /// TODO\r\n    }\r\n\r\n    toHex() {\r\n        /// TODO\r\n    }\r\n\r\n    // static functions\r\n\r\n    static ease(from, to, t, easingType, easingMode, easingArg, destinationColor) {\r\n\r\n        if (easingType === undefined) easingType = EasingType.LINEAR;\r\n        if (easingMode === undefined) easingMode = 0;\r\n        if (easingArg === undefined) easingArg = 3;\r\n\r\n\r\n        let easer = Ease.in;\r\n\r\n        switch (easingMode) {\r\n            case 1:\r\n                {\r\n                    easer = Ease.out;\r\n                    break;\r\n                }\r\n            case 2:\r\n                {\r\n                    easer = Ease.inout;\r\n                    break;\r\n                }\r\n        }\r\n\r\n        if (destinationColor === undefined)\r\n            destinationColor = new Color();\r\n\r\n        destinationColor.setRGBA(\r\n            easer.by(easingType, from.r, to.r, t, easingArg),\r\n            easer.by(easingType, from.g, to.g, t, easingArg),\r\n            easer.by(easingType, from.b, to.b, t, easingArg),\r\n            easer.by(easingType, from.a, to.a, t, easingArg));\r\n\r\n        return destinationColor;\r\n    }\r\n\r\n    static get red() {\r\n        return new Color(255, 0, 0);\r\n    }\r\n    static get green() {\r\n        return new Color(0, 255, 0);\r\n    }\r\n    static get blue() {\r\n        return new Color(0, 0, 255);\r\n    }\r\n    static get cyan() {\r\n        return new Color(0, 255, 255);\r\n    }\r\n    static get magenta() {\r\n        return new Color(255, 0, 255);\r\n    }\r\n    static get yellow() {\r\n        return new Color(255, 255, 0);\r\n    }\r\n    static get black() {\r\n        return new Color(0);\r\n    }\r\n    static get white() {\r\n        return new Color(255);\r\n    }\r\n    static get gray() {\r\n        return new Color(255 / 2.0);\r\n    }\r\n    static get transparent() {\r\n        return new Color(0, 0, 0, 0);\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\nexport default Color;\r\n\r\n/*MakeImmutable([\r\n    Color.red,\r\n    Color.green,\r\n    Color.blue,\r\n    Color.cyan,\r\n    Color.magenta,\r\n    Color.yellow,\r\n    Color.black,\r\n    Color.white,\r\n    Color.gray,\r\n    Color.transparent], false);*/\r\n\r\n/*\r\nMakeImmutable([\r\nColor.red = new Color(255, 0, 0),\r\nColor.green = new Color(0, 255, 0),\r\nColor.blue = new Color(0, 0, 255),\r\nColor.cyan = new Color(0, 255, 255),\r\nColor.magenta = new Color(255, 0, 255),\r\nColor.yellow = new Color(255, 255, 0),\r\nColor.black = new Color(0),\r\nColor.white = new Color(255),\r\nColor.gray = new Color(255/2.0),\r\nColor.transparent = new Color(0, 0, 0, 0),], true);*/","import Color from \"../Color\";\r\n\r\nconst CSS_REGEX_PATTERN = /^(?:\\w*|rgba?)\\(?\\s*(\\d+)\\s*\\,?(?:\\s*(\\d+)\\s*)?\\,?(?:\\s*(\\d+)\\s*)?\\,?(?:\\s*(\\d+(?:\\.\\d+)?))?\\s*\\)?$/;\r\n\r\nexport default function CSSToColor(value, source) {\r\n\r\n    let color;\r\n\r\n    if (source === undefined)\r\n        color = new Color();\r\n    else\r\n        color = source;\r\n\r\n    let regex = (CSS_REGEX_PATTERN).exec(value.toLowerCase());\r\n\r\n    if (regex) {\r\n        let r = parseInt(regex[0], 10) || 0;\r\n        let g = parseInt(regex[1], 10) || 0;\r\n        let b = parseInt(regex[3], 10) || 0;\r\n        let a = 1;\r\n\r\n        if (regex[4] !== undefined)\r\n            a = parseFloat(regex[4], 10) || 1;\r\n\r\n        color.setRGBA(r,g,b,a);\r\n    }\r\n\r\n    return color;\r\n\r\n}","import Color from \"../Color\";\r\n\r\nconst HEX_SHORTHAND_REGEX_PATTERN = /^#?([a-f\\d])([a-f\\d])([a-f\\d])([a-f\\d])?$/i;\r\nconst HEX_REGEX_PATTERN = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})?$/i;\r\n\r\n// Source: https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\r\nexport default function HexToColor(value, source) {\r\n\r\n    let color;\r\n\r\n    if (source === undefined)\r\n        color = new Color();\r\n    else\r\n        color = source;\r\n\r\n    // Hexadecimal can contains alpha in short '#f00e' or full '#F00eaecd'\r\n    // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\r\n    hex = hex.replace(HEX_SHORTHAND_REGEX_PATTERN,\r\n        function (m, r, g, b, a) {\r\n\r\n            if (a !== undefined)\r\n                a = 'F';\r\n\r\n            return r + r + g + g + b + b + a + a;\r\n        });\r\n\r\n    let result = HEX_REGEX_PATTERN.exec(hex);\r\n\r\n    if (result) {\r\n        color.setRGBA(\r\n            parseInt(result[1], 16),\r\n            parseInt(result[2], 16),\r\n            parseInt(result[3], 16),\r\n            (result[4] === undefined) ? 1 : parseInt(result[4], 16)\r\n        );\r\n    }\r\n\r\n    return color;\r\n\r\n}","import Color from \"../Color\";\r\n\r\nexport default function IntToColor(value, source) {\r\n\r\n    let color = source || new Color();\r\n    let r, g, b, a;\r\n\r\n    if (value >= 16777216) // 256 ^ 3\r\n        a = color >>> 24;\r\n    else\r\n        a = 1;\r\n\r\n\r\n    r = color >> 16 & 0xFF;\r\n    g = color >> 8 & 0xFF;\r\n    b = color & 0xFF;\r\n\r\n    color.setRGBA(r, g, b, a);\r\n\r\n    return color;\r\n\r\n}","import Color from \"../Color\";\r\n\r\nexport default function ObjectToColor(value, source) {\r\n\r\n    if (source === undefined) {\r\n        return new Color(value.r, value.g, value.b, value.a);\r\n    } else {\r\n        source.setRGBA(value.r, value.g, value.b, value.a);\r\n    }\r\n\r\n    \r\n\r\n}","import IntToColor from \"./IntToColor\";\r\nimport CSSToColor from \"./CSSToColor\";\r\nimport HexToColor from \"./HexToColor\";\r\nimport ObjectToColor from \"./ObjectToColor\";\r\n\r\nexport default function ParseColor(value) {\r\n\r\n    let type = typeof value;\r\n  \r\n    if (type === 'number') {\r\n  \r\n      return IntToColor(value);\r\n  \r\n    } else if (type === 'string') {\r\n  \r\n      if (value.substr(0, 3).toLowerCase() === 'rgb') {\r\n        return CSSToColor(value);\r\n      } else {\r\n        return HexToColor(value);\r\n      }\r\n  \r\n    } else if (type === 'object') {\r\n  \r\n        return ObjectToColor(value);\r\n    }\r\n  \r\n}","import Color from \"../Color\";\r\nimport IntToColor from \"./IntToColor\";\r\nimport CSSToColor from \"./CSSToColor\";\r\nimport HexToColor from \"./HexToColor\";\r\nimport ObjectToColor from \"./ObjectToColor\";\r\n\r\n\r\nexport default function SetColor(source, value) {\r\n\r\n    /*if ((source instanceof Color) === false) {\r\n        source = new Color();\r\n    }*/\r\n\r\n    let type = typeof value;\r\n  \r\n    if (type === 'number') {\r\n  \r\n      return IntToColor(value, source);\r\n  \r\n    } else if (type === 'string') {\r\n  \r\n      if (value.substr(0, 3).toLowerCase() === 'rgb') {\r\n        return CSSToColor(value, source);\r\n      } else {\r\n        return HexToColor(value, source);\r\n      }\r\n  \r\n    } else if (type === 'object') {\r\n  \r\n        return ObjectToColor(value, source);\r\n    } \r\n  \r\n}","\r\nexport default function BeginDrawRender(render) {\r\n\r\n    if (render.clear)\r\n    {\r\n        render.context.clearRect(0, 0, render.canvas.width, render.canvas.height);\r\n    }\r\n\r\n    render.context.fillStyle = render._backgroundColor;  \r\n    render.context.fillRect(0, 0, render.canvas.width, render.canvas.height);\r\n\r\n    render.drawCalls = 0;\r\n\r\n}","\r\nimport DrawRenderLayer from './DrawRenderLayer';\r\nimport RenderScene from '../../scene/components/RenderScene';\r\n\r\nexport default function DrawRender(render, camera, delta) {\r\n        \r\n    if (!render._enable)\r\n        return;\r\n\r\n       /* let clip = (camera.x !== 0 ||\r\n             camera.y !== 0 ||\r\n             camera.width !== render.context.canvas.width ||\r\n             camera.height !== render.context.canvas.height);*/\r\n\r\n    // alpha\r\n    if (render._alpha !== 1)\r\n    {\r\n        render.context.globalAlpha = 1;\r\n        render._alpha = 1;\r\n    }\r\n\r\n    // blend\r\n    render.context.globalCompositeOperation = 'source-over';\r\n   \r\n   \r\n    if (render.game.scene._setup === true) {\r\n    \r\n        for (let i = 0; i < render.layer.renderLayers.length; i++)\r\n        {\r\n            let layer = render.layer.renderLayers.at(i);\r\n\r\n            if (!layer.enable)\r\n                continue;\r\n\r\n            let drawCalls = 0;   \r\n            drawCalls += DrawRenderLayer(layer,camera, render.context);\r\n\r\n            render.drawCalls += drawCalls;\r\n        }\r\n\r\n        //camera.game.system.draw.bounds(camera.bounds);\r\n    }\r\n\r\n\r\n  \r\n\r\n    \r\n}","import SortDepth from \"../layer/SortDepth\";\r\n\r\n\r\nexport default function DrawRenderLayer(layer, camera, context)\r\n{\r\n    \r\n    if (!layer.__enable)\r\n        return 0;\r\n\r\n    let drawCalls = 0;\r\n\r\n    if (layer.__isDirty)\r\n    {\r\n        layer.renderList.sort(SortDepth);\r\n\r\n        layer.__isDirty = false;\r\n    }\r\n\r\n    var self = this;\r\n    let size = layer.renderList.size;\r\n\r\n    for (let i = 0; i < size; i++)\r\n    {\r\n        let element = layer.renderList.at(i);\r\n\r\n        if (camera.bounds.intersects(element.bounds))\r\n        {\r\n            \r\n            context.globalAlpha = element.alpha;\r\n            \r\n            drawCalls += element.render(context);\r\n\r\n        //camera.game.system.draw.bounds(element.bounds);\r\n        }\r\n    }\r\n\r\n    return drawCalls;\r\n\r\n}","\r\nexport default function EndDrawRender(render) {\r\n\r\n    \r\n    render.context.globalAlpha = 1;\r\n    render.context.globalCompositeOperation = 'source-over';\r\n\r\n}\r\n","import CanvasManager from \"../canvas/CanvasListManager\";\r\nimport CanvasInterpolation from \"../canvas/CanvasInterpolation\";\r\nimport CanvasSmoothing from \"../canvas/CanvasSmoothing\";\r\nimport { RenderingType } from \"../Define\";\r\nimport Render from \"../Render\";\r\nimport Environment from '../../system/PlatformEnvironment';\r\n\r\nexport default function InitializeRender(game, config) {\r\n\r\n  if (!Environment.features.canvas) {\r\n    throw new Error('Game.CreateRender: Could not create Canvas element. Canvas is not supported in your platform.');\r\n  }\r\n\r\n\r\n  let render = new Render(game);\r\n\r\n  render.imageRendering = (config.pixelated) ? RenderingType.NEAREST : RenderingType.LINEAR;\r\n\r\n    if (config.canvas) {\r\n      render.canvas = config.canvas;\r\n    } else {\r\n      render.canvas = CanvasManager.create(game, config.width, config.height);\r\n    }\r\n\r\n    // create context\r\n    render.context = render.canvas.getContext(\"2d\", { alpha: false });  \r\n    render.smoothing = new CanvasSmoothing(render.context);\r\n\r\n    // set pixelated\r\n    if (config.pixelated) {\r\n      \r\n      CanvasInterpolation.crisp(render.canvas);\r\n      render.smoothing.set(render.imageRendering);\r\n    }\r\n\r\n    if (config.doubleBuffer) {\r\n      render.doubleBuffer = true;\r\n      render._domCanvas = CanvasManager.create(game, config.width, config.height);\r\n      render._domContext = render._domCanvas.getContext(\"2d\", { alpha: false });  \r\n    }\r\n\r\n    return render;\r\n\r\n\r\n\r\n    // default definition\r\n    /*let defaultDef = {\r\n      tabindex: '1',\r\n      width: width,\r\n      height: height,\r\n      id: Math.random().toString(36).substr(2, 9),\r\n      class: \"\",\r\n      container: \"body\",\r\n      style: \"padding: 0;margin: auto;display: block;top: 0; bottom: 0;left: 0;right: 0;border:1px solid #d3d3d3;background-color: #f1f1f1;\"\r\n    };\r\n  \r\n    let CO = defaultDef;\r\n    let canvas;\r\n\r\n    canvas = document.createElement('canvas');\r\n    //canvas.parent = parent;\r\n    canvas.setAttribute(\"id\", CO.id);\r\n    canvas.setAttribute(\"width\", CO.width);\r\n    canvas.setAttribute(\"height\", CO.height);\r\n    canvas.setAttribute(\"style\", CO.style);*/\r\n}","\r\nexport default function RequestDepthSorting(layerID) {\r\n\r\n    let layer = this.layer.renderLayers.at(layerID);\r\n\r\n    if (layer === undefined) return;\r\n\r\n    if (layer.__isDirty === true)\r\n        return;\r\n\r\n    layer.__isDirty = true;\r\n\r\n}","\r\n/// TODO - BETTER\r\nexport default function RequestRenderableLayerIDChange(renderable, oldLayerID, toLayerID) {\r\n\r\n    // if the to layer is the same of old, we don't change\r\n    if (oldLayerID === toLayerID)\r\n        return oldLayerID;\r\n\r\n    let oldLayer = this.layer.renderLayers.at(oldLayerID);\r\n    \r\n\r\n    // if we don't find the old layer ID \r\n    if (oldLayer === undefined) {\r\n\r\n        // we need to check if the renderable is somewhere\r\n        oldLayer = this.layer.findRenderableLayer(renderable);\r\n\r\n        // still undefined\r\n        if (oldLayer === undefined) {\r\n\r\n            // we add to default layer\r\n            this.layer.renderLayers.at(0).add(renderable);\r\n            return 0;\r\n        }\r\n    }\r\n\r\n    let toLayer = this.layer.renderLayers.at(toLayerID);\r\n\r\n    // if tolayer is undefined or same has oldLayer\r\n    if (toLayer === undefined || toLayer === oldLayer)\r\n        return oldLayerID;\r\n    \r\n\r\n    // find the renderable index\r\n    let index = oldLayer.renderList.indexOf(renderer);\r\n\r\n    if (index === -1)\r\n        return oldLayerID;\r\n\r\n    oldLayer.removeAt(index);\r\n    toLayer.add(renderer);\r\n\r\n    return toLayerID;\r\n    \r\n    \r\n}","\r\nmodule.exports = {\r\n    Canvas : require('./canvas'),\r\n    RenderLayer : require('./layer/RenderLayer'),\r\n    RenderLayerManagement : require('./layer/RenderLayersManagement'),\r\n    Render : require('./Render'),\r\n    UI : require('./ui/UI'),\r\n    Transition : require('./transition/Transition')\r\n};","import DataList from \"../../structures/List\";\r\n\r\nexport default class RenderLayer { \r\n    \r\n    constructor(game,layerName) {\r\n\r\n        this._name = layerName;\r\n        this.game = game;       \r\n        this.renderList = new DataList(true);\r\n        this.__drawCalls = 0;\r\n        this.__enable = true;\r\n        this.__isDirty = false;\r\n    }\r\n\r\n    get drawCalls() {return this.__drawCalls;}\r\n\r\n    // Add renderable components\r\n    add(renderer) {\r\n    \r\n        if (renderer === undefined)\r\n            return;\r\n\r\n        this.renderList.push(renderer);\r\n        this.__isDirty = true;\r\n\r\n    }\r\n\r\n    has(renderer) {\r\n        return this.renderList.indexOf(renderer) !== -1;\r\n    }\r\n\r\n    remove(renderer) {\r\n        return this.renderList.remove(renderer);\r\n    }\r\n\r\n    removeAt(index) {\r\n        return this.renderList.eraseAt(index);\r\n    }\r\n\r\n    at(index)  {\r\n        if (index < 0 || index >= this.__renderers.size)\r\n        {\r\n            throw new Error('RenderLayer.at: Renderer at '+ index +' does not exist in the render layer list: \\\"' + name + \"\\\".\");\r\n        }\r\n        return this.renderList.at(index);\r\n\r\n    }\r\n\r\n    get length() {return this.__renderers.length;}\r\n    get name() {return this._name;}\r\n    get enable() {return this.__enable;}\r\n    set enable(value) {\r\n        value = !!value;\r\n    \r\n        if (value !== this._enabled)\r\n        {\r\n            //if (!value)\r\n            //    this.reset();\r\n\r\n            this._enabled = value;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n/*\r\n      this.__renderers.sort(\r\n\r\n          function(a, b) {\r\n      \r\n            if (a.depth > b.depth) {\r\n      \r\n              return 1;\r\n      \r\n            } else if (a.depth < b.depth) {\r\n      \r\n              return -1;\r\n      \r\n            } else {\r\n      \r\n              if (a.z > b.z) {\r\n                return 1;\r\n              } else {\r\n                return -1;\r\n              }\r\n      \r\n      \r\n            }\r\n          });\r\n*/","\r\nimport DataMap from '../../structures/Map';\r\nimport RenderLayer from './RenderLayer';\r\nimport DataList from '../../structures/List';\r\nimport Renderable from '../../modules/renderables/Renderable';\r\n\r\nexport default class RenderLayersManagement {\r\n\r\n    constructor(game) {\r\n        this.game = game;\r\n        this.renderLayers = new DataList();\r\n        //this.__renderLayersMap = new DataMap();\r\n        this.add('default');\r\n    }\r\n\r\n    has(id) {\r\n        return this.renderLayers.hasAt(id);\r\n    }\r\n\r\n\r\n    add(name) {\r\n\r\n        if (this.contains(name))\r\n        {\r\n            throw new Error(\"RenderLayerManagement.add: There is already a RenderLayer called: \\\"\" +  name + \"\\\".\");\r\n        }\r\n       \r\n        //this.__renderLayersMap.set(name, this.__renderLayers.length);\r\n        this.renderLayers.push(new RenderLayer(this.game, name));\r\n    }\r\n\r\n    remove(name)\r\n    {\r\n        if (typeof name !== 'string')\r\n            throw new Error(\"RenderLayerManagement.remove: The value name is not a string.\");\r\n\r\n        if (name === \"default\")\r\n            throw new Error(\"RenderLayerManagement.remove: You can not remove the \\\"default\\\" layer.\");\r\n\r\n        if (!this.__renderLayersMap.has(name))\r\n            throw new Error(\"RenderLayerManagement.remove: Could not remove layer. There is no layer named \\\"\" + name + \"\\\".\");\r\n\r\n        var index = this.__renderLayersMap.get(name);\r\n\r\n        this.renderLayers.erase(name);\r\n    }\r\n\r\n    contains(layerName)\r\n    {\r\n        if (typeof layerName !== 'string')\r\n            throw new Error(\"RenderLayerManagement.contains: The value name is not a string.\");\r\n\r\n        let val = this.renderLayers.each(function(layer) {\r\n           \r\n            if (layer.name == layerName)\r\n            {\r\n                return true;\r\n            }\r\n        });\r\n\r\n        return val || false;\r\n    }\r\n\r\n\r\n    findRenderableLayer(renderable) {\r\n        return this.renderLayers.each(function(layer) {\r\n            if (layer.has(renderable))\r\n                return layer;\r\n        }) || null;\r\n    }\r\n\r\n    findRenderableAtLayer(renderable, layerIndex) {\r\n\r\n        if (layerIndex === undefined) layerIndex = 0;\r\n\r\n        return this.renderLayers.at(layerIndex).has(renderable);\r\n    }\r\n\r\n    removeRenderable(renderable) {\r\n        return this.renderLayers.each(function(layer) {\r\n            let idx = layer.renderList.indexOf(renderable);\r\n\r\n            if (idx !== -1) {\r\n                return layer.removeAt(idx);\r\n            }\r\n        }) || null;\r\n    }\r\n\r\n    addRenderable(renderable, layerIndex) {\r\n\r\n        if (layerIndex === undefined) layerIndex = 0;\r\n\r\n        if (layerIndex >= this.renderLayers.size)\r\n            layerIndex = this.renderLayers.size - 1;\r\n        else if (layerIndex < 0)\r\n            layerIndex = 0;\r\n\r\n        if (renderable instanceof Renderable) {\r\n\r\n            let layer = this.findRenderableLayer(renderable);\r\n\r\n            if (layer !== null) {\r\n                console.warn(\"RenderLayerManagement.addRenderable: Could not add renderable. The renderable is already in the layer \\'\" + layer.name + \"\\'.\");\r\n                return false;\r\n            } else {\r\n                this.renderLayers.at(layerIndex).add(renderable);\r\n                return true;\r\n            }\r\n\r\n        } else {\r\n            console.warn(\"RenderLayerManagement.addRenderable: Could not add renderable. It is not a instance of Renderable module.\")\r\n            return false;\r\n        }\r\n    }\r\n\r\n}","\r\nexport default function SortDepth(a, b) {\r\n    return a._depthSorting - b._depthSorting;\r\n}","import TranstionStyle from \"./TransitionStyle\";\r\nimport TransitionState from \"./TransitionState\";\r\n\r\n\r\nexport default function DrawTransition(transition, canvas, context) {\r\n\r\n    if (transition._state === TransitionState.NONE)\r\n        return;\r\n\r\n    context.globalCompositeOperation = 'source-over';\r\n\r\n    let settings = transition.settings;\r\n\r\n    switch(settings.style) {\r\n        case TranstionStyle.NONE: return;\r\n        case TranstionStyle.FILL: {\r\n\r\n            context.fillStyle = transition._tColor.rgba;  \r\n            context.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n            break;\r\n        }\r\n    }\r\n\r\n}","import TransitionSettings from \"./TransitionSettings\";\r\nimport TransitionState from \"./TransitionState\";\r\nimport Color from \"../color/Color\";\r\nimport TransitionBehavior from \"./TranstionBehavior\";\r\nimport System from \"../../core/system/System\";\r\n\r\n\r\nexport default class Transition {\r\n \r\n    constructor(game) {\r\n        this.game = game;\r\n\r\n        this.settings = new TransitionSettings(this);\r\n        this._behaviour = TransitionBehavior.NONE;\r\n        this._state = TransitionState.NONE;\r\n        this._alpha = 0;     \r\n        this._tColor = Color.transparent;\r\n        this._startColor = new Color();\r\n        this._t = 0;\r\n    }\r\n\r\n    in() {\r\n\r\n        let old = this._behaviour;\r\n\r\n        if (old === TransitionBehavior.FADEIN)\r\n            return;\r\n\r\n        this._alpha = 0;\r\n        this._t = 0;\r\n        let oldAlpha = 0;//this._color.a;\r\n        this._startColor.setColor(this.settings.inColor, 0);\r\n        this._tColor.setColor(this._startColor, 0);\r\n        this.settings.inColor.a = 1;\r\n        this._behaviour = TransitionBehavior.FADEIN;\r\n        this._state = TransitionState.IN;\r\n\r\n    }\r\n\r\n    out() {\r\n\r\n        if (this._behaviour === TransitionBehavior.FADEOUT)\r\n            return;\r\n\r\n        this._t = 0;\r\n        this._startColor.setColor(this.settings.outColor, 1);\r\n        this._tColor.setColor(this._startColor, 1);\r\n        this.settings.outColor.a = 0;\r\n        this._behaviour = TransitionBehavior.FADEOUT;\r\n        this._state = TransitionState.OUT;\r\n\r\n    }\r\n\r\n    inout() {\r\n\r\n        this.in();\r\n        this._behaviour = TransitionBehavior.FADEINOUT;\r\n    }\r\n\r\n    by(type) {\r\n\r\n        switch(type) {\r\n            case TransitionBehavior.NONE: return;\r\n            case TransitionBehavior.FADEINOUT: return this.inout();\r\n            case TransitionBehavior.FADEIN: return this.in();\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        this._tColor.setColor(this._startColor, 0);\r\n        this._t = 0;\r\n        this._behaviour = TransitionBehavior.NONE;\r\n        this._state = TransitionState.NONE;\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nSystem.register('Transition', Transition, 'transition');","import Color from \"../color/Color\";\r\nimport EasingType from \"../../math/easing/EasingType\";\r\nimport TranstionStyle from \"./TransitionStyle\";\r\n\r\n\r\nexport default class TransitionSettings {\r\n\r\n    constructor(parent) {\r\n        this.transition = parent;\r\n\r\n        this.fromAlpha = 0;\r\n        this.toAlpha = 0;\r\n\r\n        this.inColor = Color.black;\r\n        this.outColor = Color.black;\r\n\r\n        this.inDuration = 0.5;\r\n        this.outDuration = 0.5;\r\n\r\n        this.pauseDuration = 0;\r\n        this.style = TranstionStyle.FILL;\r\n\r\n        this.timingInMethod = EasingType.LINEAR;\r\n        this.timingOutMethod = EasingType.LINEAR;\r\n        this.timingInArgument = 3; // step\r\n        this.timingOutArgument = 3;\r\n    }\r\n\r\n    setInColor(color) {\r\n        this.inColor.parse(color);\r\n        return this;\r\n    }\r\n\r\n    setOutColor(color) {\r\n        this.outColor.parse(color);\r\n        return this;\r\n    }\r\n\r\n    setDuration(duration) {\r\n        this.setInDuration(duration);\r\n        this.setOutDuration(duration);\r\n        return this;  \r\n    }\r\n\r\n    setInDuration(duration) {\r\n        this.inDuration = Math.abs(duration);\r\n        return this; \r\n    }\r\n\r\n    setOutDuration(duration) {\r\n        this.outDuration = Math.abs(duration);\r\n        return this; \r\n    }\r\n    \r\n    setPauseDuration(duration) {\r\n        this.pauseDuration = Math.abs(duration);\r\n        return this; \r\n    }\r\n\r\n    setEaseMethod(easingType, parameter) {\r\n        this.setInTiming(easingType, parameter);\r\n        this.setOutTiming(easingType, parameter);\r\n        return this;\r\n    }\r\n\r\n    setEaseInMethod(easingType, parameter) {\r\n        this.timingInMethod = easingType;\r\n        this.timingInArgument = parameter || 1;\r\n        return this; \r\n    }\r\n\r\n    setEaseOutMethod(easingType, parameter) {\r\n        this.timingOutMethod = easingType;\r\n        this.timingOutArgument = parameter || 1;\r\n        return this; \r\n    }\r\n}","\r\nconst TransitionState = {\r\n    NONE : 0,\r\n    IN : 1,\r\n    OUT : 2,\r\n    WAIT : 3,\r\n    IDLE : 4\r\n};\r\n\r\nObject.freeze(TransitionState);\r\n\r\nexport default TransitionState;\r\n","\r\nconst TranstionStyle = {\r\n    NONE : 0,\r\n    FILL : 1,\r\n};\r\n\r\nObject.freeze(TranstionStyle);\r\n\r\nexport default TranstionStyle;","\r\nconst TransitionBehavior = {\r\n    NONE : 0,\r\n    FADEIN : 1,\r\n    FADEOUT : 2,\r\n    FADEINOUT : 3,\r\n    IDLE : 4,\r\n};\r\n\r\nObject.freeze(TransitionBehavior);\r\n\r\nexport default TransitionBehavior;","import TransitionBehavior from \"./TranstionBehavior\";\r\nimport TransitionState from \"./TransitionState\";\r\nimport MathUtils from '../../math/MathUtils';\r\nimport Ease from \"../../math/easing/Ease\";\r\nimport Color from \"../color/Color\";\r\n\r\nexport default function UpdateTransition(transition, deltaTime) {\r\n\r\n    if (transition._behaviour === TransitionBehavior.NONE)\r\n        return;\r\n\r\n    let setg = transition.settings;\r\n    let changeState;\r\n\r\n    // UPDATE STATE\r\n    switch (transition._state) {\r\n\r\n        case TransitionState.IN:\r\n            {\r\n                transition._t += (deltaTime / setg.inDuration);\r\n\r\n                if (transition._t >= 1) {\r\n                    transition._t = 1;\r\n                    changeState = true;\r\n                }\r\n\r\n                // ease(to, t, easingType, easingMode, easingArg)\r\n                Color.ease(\r\n                    transition._startColor, setg.inColor, transition._t,\r\n                    setg.timingInMethod, 0, setg.timingInArgument, transition._tColor);\r\n\r\n                break;\r\n            }\r\n\r\n        case TransitionState.WAIT:\r\n            {\r\n                transition._t += deltaTime / setg.pauseDuration;\r\n\r\n                if (transition._t >= 1) {\r\n                    transition._t = 1;\r\n                    changeState = true;\r\n                }\r\n                break;\r\n            }\r\n\r\n        case TransitionState.OUT:\r\n            {\r\n                transition._t += deltaTime / setg.outDuration;\r\n\r\n                if (transition._t >= 1) {\r\n                    transition._t = 1;\r\n                    changeState = true;\r\n                }\r\n                Color.ease(\r\n                    transition._startColor, setg.outColor, transition._t,\r\n                    setg.timingOutMethod, 1, setg.timingOutArgument, transition._tColor);\r\n                break;\r\n            }\r\n    }\r\n\r\n    if (changeState === undefined)\r\n        return;\r\n\r\n\r\n    /// CHANGE TRANSITION STATE\r\n\r\n    transition._t = 0;\r\n\r\n    switch (transition._behaviour) {\r\n        case TransitionBehavior.FADEIN:\r\n        case TransitionBehavior.FADEOUT: // just fade in or out\r\n            {\r\n               \r\n                transition._behaviour = TransitionBehavior.NONE;\r\n                transition._state = TransitionState.IDLE;\r\n                if (transition._behaviour === TransitionBehavior.FADEOUT) {\r\n                    transition._behaviour = TransitionBehavior.FADEOUT;\r\n                }\r\n                transition.game.system.events.dispatch('transition_end');\r\n                break;\r\n            }\r\n        case TransitionBehavior.FADEINOUT: // fade in and out\r\n            {\r\n                if (transition._state === TransitionState.IN) { // end fade in\r\n                    transition._color.setColor(setg.outColor);\r\n                    \r\n                    if (setg.pauseDuration > 0) {\r\n                        transition._state = TransitionState.WAIT;\r\n                    } else {\r\n                        transition._state = TransitionState.OUT;\r\n                    }\r\n                } else if (transition._state === TransitionState.WAIT) { // end pause beteween\r\n                   \r\n                    transition._state = TransitionState.OUT;\r\n                    transition.game.system.events.dispatch('transition_pause_end');\r\n                } else if (transition._state === TransitionState.OUT) { // end fade out\r\n                   \r\n                    transition._state = TransitionState.IDLE;\r\n                    transition._behaviour = TransitionBehavior.NONE;\r\n                    transition.game.system.events.dispatch('transition_end');\r\n                }\r\n                break;\r\n            }\r\n    }\r\n}","\r\nmodule.exports = {\r\n    State : require('./TransitionState'),\r\n    Style : require('./TransitionStyle'),\r\n    Behavior : require('./TranstionBehavior')\r\n}","\r\nconst AspectRatio = {\r\n    Square : 0,\r\n    Pillarbox : 1,\r\n    Letterbox : 2,\r\n\r\n    computeViewPort(currentAspectRatio, desiredAspect) {\r\n\r\n        let ratioBox = {\r\n            x : 0,\r\n            y : 0,\r\n            w : 1,\r\n            h : 1,\r\n            style : 0,\r\n        };\r\n\r\n        // If the current aspect ratio is already approximately equal to the desired aspect ratio,\r\n        // use a full-screen Rect (in case it was set to something else previously)\r\n        if (Math.round(currentAspectRatio * 100) / 100 == Math.round(desiredAspect * 100) / 100)\r\n        {\r\n            return ratioBox;\r\n        }\r\n\r\n        // Pillarbox\r\n        if (currentAspectRatio > desiredAspect)\r\n        {\r\n            let inset = 1.0 - desiredAspect / currentAspectRatio;\r\n            ratioBox.x = inset / 2;\r\n            ratioBox.y = 0;\r\n            ratioBox.w = 1.0 - inset;\r\n            ratioBox.h =  1.0;\r\n            ratioBox.style = AspectRatio.Pillarbox;\r\n        }\r\n        else  // Letterbox\r\n        {\r\n            let inset = 1.0 - currentAspectRatio / desiredAspect;\r\n\r\n            ratioBox.x = 0;\r\n            ratioBox.y = inset / 2;\r\n            ratioBox.w = 1.0;\r\n            ratioBox.h = 1.0 - inset;\r\n            ratioBox.style = AspectRatio.Letterbox;\r\n        }\r\n\r\n        return ratioBox;\r\n    }\r\n}\r\n\r\nexport default AspectRatio;","\r\nexport default class Debug {\r\n  \r\n  constructor(game, drawer) {\r\n\r\n    this.game = game;\r\n    this.draw = drawer;\r\n    this.context = drawer.context;\r\n    this.x = 8;\r\n    this.y = 12;\r\n    this.lineHeight = 14;\r\n    this.column = 100;\r\n    this.font =\"10px Verdana\";\r\n    this.textColor = 'white';\r\n    this.bgcolor = '#000';\r\n    this.textShadow = '#000';\r\n\r\n  }\r\n\r\n  test() {\r\n\r\n    this.draw.disablePointTransform = true;\r\n    this.x = 4;\r\n    this.y = 12;\r\n    //this.context.setTransform(1, 0, 0, 1, 0, 0);\r\n    this.context.strokeStyle = this.bgcolor;\r\n    this.context.font = this.font;\r\n    this.draw.alpha = 0.5;\r\n    this.draw.rect(0,0,this.game.width,(14 * 3)+ 4,this.bgcolor);\r\n    this.draw.alpha = 1;\r\n    this.drawLine(\"FPS: \" + Math.round(this.game.time.fps) + \" / \" + this.game.time.desiredFps);\r\n    //this.drawLine(\"Instances in view: \" + this.game.camera.instancesInView);\r\n    this.drawLine(\"Instances: \" + this.game.system.entityList.length);\r\n    this.drawLine(\"Draw Calls: \" + this.game.system.render.drawCalls);/*this.game.physics.length);*/\r\n    this.x += this.game.width / 2;\r\n    //this.y = 12+8;\r\n    //this.drawLine(\"Sounds count \" + this.game.sound.length);\r\n    \r\n    //this.y = 12+8;\r\n\r\n    this.draw.disablePointTransform = false;\r\n\r\n  }\r\n\r\n  drawLine(textLine) {\r\n\r\n    var xx = this.x;\r\n\r\n            this.context.fillStyle = this.textShadow;\r\n            this.context.fillText(textLine, xx + 1, this.y + 1);\r\n            this.context.fillStyle = this.textColor;\r\n\r\n        this.context.fillText(textLine, xx, this.y);\r\n\r\n\r\n    this.y += this.lineHeight;\r\n\r\n  }\r\n\r\n\r\n\r\n}\r\n","import UpdateUIMatrix from \"./UpdateUIMatrix\";\r\nimport RenderScene from \"../../scene/components/RenderScene\";\r\n\r\nexport default function DrawUI(gui, sceneManager) {\r\n\r\n    UpdateUIMatrix(gui);\r\n\r\n \r\n    // blend\r\n    gui.context.globalCompositeOperation = 'source-over';\r\n\r\n    let clip = (gui.viewport.x !== 0 || gui.viewport.x !== 0 || gui.viewport.width !== gui.canvas.width || gui.viewport.height !== gui.canvas.height);\r\n\r\n    if (clip)\r\n    {\r\n        gui.context.save();\r\n        gui.context.beginPath();\r\n        gui.context.rect(\r\n            gui.viewport.x,\r\n            gui.viewport.y,\r\n            gui.viewport.width,\r\n            gui.viewport.height);\r\n        gui.context.clip();\r\n    }\r\n\r\n   \r\n   \r\n    gui.context.setTransform(\r\n        gui.matrix.a[0], gui.matrix.a[1], \r\n        gui.matrix.a[3], gui.matrix.a[4], \r\n        gui.matrix.a[6], gui.matrix.a[7]);\r\n\r\n        \r\n   \r\n    if (gui.backgroundColor.a > 0)\r\n    {\r\n        //gui.context.globalAlpha = gui.backgroundAlpha;\r\n        gui.context.fillStyle = gui.backgroundColor.rgba;  \r\n        gui.context.fillRect(0, 0, gui.width, gui.height);\r\n    }\r\n\r\n    // alpha\r\n    if (gui._alpha !== 1)\r\n    {\r\n        gui.context.globalAlpha = 1;\r\n        gui._alpha = 1;\r\n    }\r\n\r\n    \r\n        RenderScene(sceneManager, gui.draw);\r\n\r\n\r\n    if (clip) {\r\n        gui.context.restore();\r\n    }\r\n\r\n\r\n       \r\n\r\n}\r\n\r\n","import Debug from \"./Debug\";\r\n\r\nexport default function InitializeUI() {\r\n    this.canvas = this.game.system.render.canvas;\r\n    this.context = this.game.system.render.context;\r\n    this.draw.init();\r\n\r\n    if (this.game.config.debug)\r\n        this.debug = new Debug(this.game, this.draw);\r\n}","\r\nimport System from '../../core/system/System';\r\nimport Rect from '../../math/Rect'\r\nimport AspectRatio from './AspectRatio';\r\nimport Matrix3 from '../../math/Matrix3';\r\nimport GUIResize from './UIResize';\r\nimport Debug from './Debug';\r\nimport MathUtils from '../../math/MathUtils';\r\nimport UIDrawer from './UIDrawer';\r\nimport InitializeUI from './InitializeUI';\r\nimport Color from '../color/Color';\r\nimport Vector2 from '../../math/Vector2';\r\n\r\n\r\n\r\n\r\nexport default class UI {\r\n\r\n    constructor(game) {\r\n        this.game = game;\r\n        this.canvas = null;\r\n        this.width = this.game.width;\r\n        this.height = this.game.height;\r\n        this.viewport = new Rect(0, 0, this.width, this.height);\r\n        this.ratiobox = null;\r\n        this.aspectRatio = this.width / this.height;\r\n        this.resolution = 1;\r\n        this._isDirty = true;\r\n        this.matrix = new Matrix3(1);\r\n        this.context = null;\r\n        this._alpha = 1;\r\n        this.viewportOffset = new Vector2();\r\n        this.backgroundColor = Color.transparent;\r\n        this.debug = null;\r\n        this.draw = new UIDrawer(game, this);\r\n    }\r\n\r\n    get alpha() {return this._alpha; }\r\n    set alpha(value) {this._alpha = value;}\r\n\r\n\r\n    setSize(width, height) {\r\n        GUIResize(this, width, height);\r\n        return this;\r\n    }\r\n\r\n    setViewport(x0, y0, x1, y1) {\r\n        this.viewport.x = x0; \r\n        this.viewport.y = y0;\r\n        this.viewport.width = x1;\r\n        this.viewport.height = y1;\r\n        this._isDirty = true;\r\n        return this;\r\n    }\r\n\r\n    setViewportByAspectRatio(aspectRatio) {\r\n\r\n        // TODO: IMPROVE THAT FUNCTION\r\n        let canvasWidth = this.game.system.render.canvas.width;//this.game.system.render.canvas.clientWidth;\r\n        let canvasHeight = this.game.system.render.canvas.height;//this.game.system.render.canvas.clientHeight\r\n\r\n        this.ratiobox = AspectRatio.computeViewPort(canvasWidth / canvasHeight, aspectRatio);\r\n        let borderX = 0;\r\n        let borderY = 0;//rect.y * this.canvas.clientHeight;\r\n\r\n        if (this.ratiobox.style === AspectRatio.Square) {\r\n            this.viewport.set(\r\n                0,\r\n                0,\r\n                canvasWidth,\r\n                canvasHeight);\r\n\r\n            return this;\r\n\r\n        } else {\r\n\r\n            //let areaRatioX = this.width * (canvasWidth / this.width);\r\n            //let areaRatioY = this.height * (canvasHeight / this.height);\r\n\r\n            if (this.ratiobox.style === AspectRatio.Pillarbox)\r\n                borderX = this.ratiobox.x * canvasWidth;//this.canvas.clientWidth;\r\n            else if (this.ratiobox.style === AspectRatio.Letterbox)\r\n                borderY = this.ratiobox.y * canvasHeight;//this.canvas.clientHeight;\r\n            \r\n            this.viewport.set(\r\n                borderX,\r\n                borderY,\r\n                canvasWidth - (borderX*2),\r\n                canvasHeight - (borderY*2));\r\n\r\n        }\r\n        \r\n        let canvasRatioX = canvasWidth * (this.ratiobox.x * 2);\r\n        let viewSize = (canvasWidth - canvasRatioX);\r\n        //let canvasRatioY = canvasHeight * (this.ratiobox.y * 2);\r\n        //console.log(canvasRatioX);\r\n        //let areaRatio = (canvasWidth - canvasRatioX); / canvasHeight; // 1.48\r\n        //console.log(areaRatio);\r\n        \r\n        //let orthoSize = (this.height / 2);// * 100; // 120\r\n        //console.log(orthoSize);\r\n        //let pixelUnit = (canvasHeight / (orthoSize * 2)) * areaRatio;\r\n        \r\n        let pixelUnit = viewSize / this.width;//canvasWidth;\r\n        let invertedResolution = this.width / viewSize;\r\n        this.viewportOffset.x = invertedResolution * borderX;\r\n        this.viewportOffset.y = invertedResolution * borderY;\r\n        this.resolution = pixelUnit;//(this.canvas.clientWidth - canvasRatioX) / this.width;\r\n        this.invertedResolution = invertedResolution;\r\n        //(this.canvas.clientHeight - canvasRatioY) / this.height;\r\n\r\n        this._isDirty = true;\r\n        return this;\r\n    }\r\n\r\n    setSizeByCanvas() {\r\n        GUIResize(this, this.game.system.render.canvas.width, this.game.system.render.canvas.height);\r\n        return this;\r\n    }\r\n\r\n    setSizeByCamera() {\r\n        GUIResize(this, this.game.system.camera.width, this.game.system.camera.height);\r\n        return this;\r\n    }\r\n\r\n    setSizeByAspectRatio(aspectRatio) {\r\n        GUIResize(this, this.game.system.render.canvas.width * aspectRatio, this.game.system.render.canvas.height * aspectRatio);\r\n        return this;\r\n    }\r\n\r\n}\r\n\r\nSystem.register('UserInterface', UI, 'ui', InitializeUI)","//import GameSystemManager from \"../core/GameSystemManager\";\r\nimport Validate from \"../../utils/Validate\";\r\nimport MathUtils from \"../../math/MathUtils\";\r\n\r\n\r\n\r\n\r\nexport default class UIDrawer {\r\n\r\n  constructor(game, ui) {\r\n    this.game = game;\r\n    this.cache = null;\r\n    this.context = null;\r\n    this.canvas = null;\r\n    this.ui = ui;\r\n    this.lastAlpha = 1;\r\n    this.lastColor = '#000';\r\n    this.currentColor = '#FFF';\r\n    this.currentTextAlign = 'center';\r\n    this.disablePointTransform = false;\r\n  }\r\n\r\n  init() {\r\n\r\n    this.cache = this.game.system.cache;\r\n    this.context = this.game.system.render.context;\r\n    this.canvas = this.game.system.render.canvas;\r\n\r\n    return this;\r\n  }\r\n\r\n  set color(value) {\r\n    this.lastColor = this.context.fillStyle;\r\n    this.context.fillStyle = value;\r\n    this.currentColor = this.context.fillStyle;\r\n  }\r\n\r\n  set alpha(value) {\r\n    this.lastAlpha = this.context.globalAlpha;\r\n    this.context.globalAlpha = value;\r\n  }\r\n\r\n  set align(value) {\r\n    this.context.textAlign = value;\r\n    this.currentTextAlign = this.context.textAlign;\r\n  }\r\n\r\n  set composite(value) {\r\n    this.context.globalCompositeOperation = value;\r\n  }\r\n\r\n  defaultComposite() {\r\n    this.context.globalCompositeOperation = 'source-over';\r\n  }\r\n\r\n  // transformPosition(x, y, w, h) {\r\n\r\n  //   if (this.disablePointTransform) {\r\n  //     return {\r\n  //       x: x,\r\n  //       y: y,\r\n  //       w: w || 0,\r\n  //       h: h || 0,\r\n  //     };\r\n  //   } else {\r\n\r\n  //     return {\r\n  //       x: x, //x - this.ui.viewport.x,\r\n  //       y: y,//y - this.ui.viewport.y,\r\n  //       w: w,//(w - this.ui.viewport.x) || 0,\r\n  //       h: h//(h - this.ui.viewport.y) || 0,\r\n  //     };\r\n  //   }\r\n  // }\r\n\r\n  font(fontname, size, style) {\r\n\r\n    if (Validate.isNumber(size))\r\n      size = size.toString() + 'px';\r\n\r\n    if (style === undefined) style = \"normal\";\r\n\r\n    this.context.font = style + \" \" + size + \" \\'\" + fontname + \"\\'\";\r\n\r\n  }\r\n\r\n  text(text, x, y, color, align) {\r\n\r\n    if (color !== undefined)\r\n      this.color = color;\r\n    if (align !== undefined)\r\n      this.align = align;\r\n\r\n\r\n    this.context.textAlign = align;\r\n\r\n    //this.context.save();\r\n    //this.context.translate(x, y);\r\n    this.context.fillText(text, x, y);\r\n    //this.context.restore();\r\n\r\n  }\r\n\r\n  image(source, x, y, scalex, scaley) {\r\n\r\n\r\n\r\n    this.context.drawImage(source,\r\n      0, 0,\r\n      source.width, source.height,\r\n      x, y,\r\n      source.width, source.height\r\n    );\r\n  }\r\n\r\n  imageExtra(source, x, y, scalex, scaley, halign, valign) {\r\n    if (source === undefined || source === null) return;\r\n    if (scalex === undefined) scalex = 1;\r\n    if (scaley === undefined) scaley = 1;\r\n    if (halign === undefined) halign = 0;\r\n    if (valign === undefined) valign = 0;\r\n\r\n    let dx = source.width * halign;\r\n    let dy = source.height * valign;\r\n\r\n    this.context.save();\r\n    this.context.translate(x, y);\r\n    this.context.scale(scalex, scaley);\r\n    //this.context.rotate(scalex, scaley);\r\n\r\n    this.context.drawImage(\r\n      source,\r\n      0, // sx - pos crop x \r\n      0, // sy - pos crop y\r\n      source.width, // sWidth - crop width\r\n      source.height, // sHeight - crop height\r\n      -dx, // destination x\r\n      -dy, // destination y\r\n      source.width, source.height\r\n    );\r\n\r\n    this.context.restore();\r\n  }\r\n\r\n  sprite(tag, x, y, halign, valign) {\r\n\r\n    let source = this.cache.image.get(tag);\r\n\r\n    if (source !== null) {\r\n\r\n      if (halign === undefined) halign = 0;\r\n      if (valign === undefined) valign = 0;\r\n\r\n      let dx = source.width * halign;\r\n      let dy = source.height * valign;\r\n\r\n      this.context.save();\r\n      this.context.translate(x, y);\r\n      this.context.drawImage(\r\n        source.data,\r\n        0, // sx - pos crop x \r\n        0, // sy - pos crop y\r\n        source.width, // sWidth - crop width\r\n        source.height, // sHeight - crop height\r\n        -dx, // destination x\r\n        -dy, // destination y\r\n        source.width, source.height\r\n      );\r\n      this.context.restore();\r\n\r\n    }\r\n\r\n  }\r\n\r\n  spriteScaled(tag, x, y, xscale, yscale, halign, valign) {\r\n\r\n    let source = this.cache.image.get(tag);\r\n\r\n    if (source !== null) {\r\n\r\n      if (halign === undefined) halign = 0;\r\n      if (valign === undefined) valign = 0;\r\n\r\n      let dx = source.width * halign;\r\n      let dy = source.height * valign;\r\n\r\n      this.context.save();\r\n      this.context.translate(x, y);\r\n      this.context.scale(xscale, yscale);\r\n      this.context.drawImage(\r\n        source.data,\r\n        0, // sx - pos crop x \r\n        0, // sy - pos crop y\r\n        source.width, // sWidth - crop width\r\n        source.height, // sHeight - crop height\r\n        -dx, // destination x\r\n        -dy, // destination y\r\n        source.width, source.height\r\n      );\r\n      this.context.restore();\r\n\r\n    }\r\n  }\r\n\r\n  spriteTransformed(tag, x, y, xscale, yscale, angle, halign, valign) {\r\n\r\n    let source = this.cache.image.get(tag);\r\n\r\n    if (source !== null) {\r\n\r\n      if (halign === undefined) halign = 0;\r\n      if (valign === undefined) valign = 0;\r\n\r\n      let dx = source.width * halign;\r\n      let dy = source.height * valign;\r\n\r\n      this.context.save();\r\n      this.context.translate(x, y);\r\n      this.context.scale(xscale, yscale);\r\n      this.context.rotate(angle * MathUtils.toRadian);\r\n      this.context.drawImage(\r\n        source.data,\r\n        0, // sx - pos crop x \r\n        0, // sy - pos crop y\r\n        source.width, // sWidth - crop width\r\n        source.height, // sHeight - crop height\r\n        -dx, // destination x\r\n        -dy, // destination y\r\n        source.width, source.height\r\n      );\r\n      this.context.restore();\r\n\r\n    }\r\n  }\r\n\r\n  spriteSkew(tag, x, y, skewX, skewY, halign, valign) {\r\n    let source = this.cache.image.get(tag);\r\n\r\n    if (source !== null) {\r\n\r\n      if (halign === undefined) halign = 0;\r\n      if (valign === undefined) valign = 0;\r\n\r\n      let dx = source.width * halign;\r\n      let dy = source.height * valign;\r\n\r\n      this.context.save();\r\n      this.context.transform(1, Math.tan(skewX), 0, 1, x, y);\r\n      this.context.transform(1, 0, Math.tan(skewY), 1, 0, 0);\r\n      this.context.drawImage(\r\n        source.data,\r\n        0, // sx - pos crop x \r\n        0, // sy - pos crop y\r\n        source.width, // sWidth - crop width\r\n        source.height, // sHeight - crop height\r\n        -dx, // destination x\r\n        -dy, // destination y\r\n        source.width, source.height\r\n      );\r\n      this.context.restore();\r\n\r\n    }\r\n  }\r\n\r\n\r\n  spriteAskew(tag, x, y, skewX, skewY, halign, valign) {\r\n    let source = this.cache.image.get(tag);\r\n\r\n    if (source !== null) {\r\n\r\n      if (halign === undefined) halign = 0;\r\n      if (valign === undefined) valign = 0;\r\n\r\n      let dx = source.width * halign;\r\n      let dy = source.height * valign;\r\n\r\n      this.context.save();\r\n      this.context.transform(1, Math.atan(skewX), 0, 1, x, y);\r\n      this.context.transform(1, 0, Math.atan(skewY), 1, 0, 0);\r\n      this.context.drawImage(\r\n        source.data,\r\n        0, // sx - pos crop x \r\n        0, // sy - pos crop y\r\n        source.width, // sWidth - crop width\r\n        source.height, // sHeight - crop height\r\n        -dx, // destination x\r\n        -dy, // destination y\r\n        source.width, source.height\r\n      );\r\n      this.context.restore();\r\n\r\n    }\r\n  }\r\n\r\n  spriteRskew(tag, x, y, skewX, skewY, halign, valign) {\r\n    let source = this.cache.image.get(tag);\r\n\r\n    if (source !== null) {\r\n\r\n      if (halign === undefined) halign = 0;\r\n      if (valign === undefined) valign = 0;\r\n\r\n      let dx = source.width * halign;\r\n      let dy = source.height * valign;\r\n\r\n      this.context.save();\r\n      this.context.transform(1, skewX, 0, 1, x, y);\r\n      this.context.transform(1, 0, skewY, 1, 0, 0);\r\n      this.context.drawImage(\r\n        source.data,\r\n        0, // sx - pos crop x \r\n        0, // sy - pos crop y\r\n        source.width, // sWidth - crop width\r\n        source.height, // sHeight - crop height\r\n        -dx, // destination x\r\n        -dy, // destination y\r\n        source.width, source.height\r\n      );\r\n      this.context.restore();\r\n\r\n    }\r\n  }\r\n\r\n  spritePart(tag, x, y, frameX, frameY, frameWidth, frameHeight, halign, valign) {\r\n    let source = this.cache.image.get(tag);\r\n\r\n    if (source !== null) {\r\n\r\n      if (halign === undefined) halign = 0;\r\n      if (valign === undefined) valign = 0;\r\n\r\n      let dx = frameWidth * halign;\r\n      let dy = frameHeight * valign;\r\n\r\n      this.context.save();\r\n      this.context.translate(x, y);\r\n      this.context.drawImage(\r\n        source.data,\r\n        frameX, // sx - pos crop x \r\n        frameY, // sy - pos crop y\r\n        frameWidth, // sWidth - crop width\r\n        frameHeight, // sHeight - crop height\r\n        -dx, // destination x\r\n        -dy, // destination y\r\n        frameWidth, frameHeight\r\n      );\r\n      this.context.restore();\r\n\r\n    }\r\n  }\r\n\r\n  spritesheet(tag, x, y, frameNumber, halign, valign, scale, scale_y) {\r\n\r\n    let source = this.cache.animation.get(tag);\r\n\r\n    if (source === null)\r\n      return false;\r\n\r\n    let key = source.get(frameNumber);\r\n\r\n    if (key === null || key === undefined)\r\n      return false;\r\n\r\n    if (key.image === null)\r\n      return false;\r\n\r\n    let frame = key.frame;\r\n\r\n    if (scale === undefined) scale = 1;\r\n    if (scale_y === undefined) scale_y = scale;\r\n    if (halign === undefined) halign = 0;\r\n    if (valign === undefined) valign = 0;\r\n\r\n    let dx = frame.width * halign;\r\n    let dy = frame.height * valign;\r\n\r\n\r\n    this.context.save();\r\n    this.context.translate(x, y);\r\n    this.context.scale(scale, scale_y);\r\n    this.context.drawImage(\r\n      key.image.data,\r\n      frame.x, // sx - pos crop x \r\n      frame.y, // sy - pos crop y\r\n      frame.width, // sWidth - crop width\r\n      frame.height, // sHeight - crop height\r\n      -dx, // destination x\r\n      -dy, // destination y\r\n      frame.width, frame.height\r\n    );\r\n    this.context.restore();\r\n\r\n    return true;\r\n\r\n\r\n  }\r\n\r\n  patternTransformed(tag, x, y, width, height, scale_x, scale_y, angle, halign, valign) {\r\n\r\n    let source = this.cache.pattern.get(tag);\r\n\r\n    if (source === null)\r\n      return false;\r\n\r\n    if (!width) width = source.image.width;\r\n    if (!height) height = source.image.height;\r\n    if (scale_x === undefined) scale_x = 1;\r\n    if (scale_y === undefined) scale_y = scale_x;\r\n    if (halign === undefined) halign = 0;\r\n    if (valign === undefined) valign = 0;\r\n\r\n    let dx = width * halign;\r\n    let dy = height * valign;\r\n    let context = this.context;\r\n\r\n\r\n    context.save();\r\n    context.translate(x, y);\r\n    context.scale(scale_x, scale_y);\r\n\r\n    if (angle !== undefined)\r\n      context.rotate(MathUtils.toRadian * angle);\r\n\r\n    //context.translate(x - dx, y - dy);\r\n    context.fillStyle = source.data;\r\n    context.fillRect(0, 0, width, height);\r\n    //context.fill();\r\n    \r\n    context.restore();\r\n\r\n    return true;\r\n\r\n  }\r\n\r\n  rect(x, y, width, height, color) {\r\n\r\n\r\n    this.context.save();\r\n    this.context.fillStyle = color || this.currentColor;\r\n    this.context.translate(x, y);\r\n\r\n    this.context.fillRect(0, 0, width, height);\r\n    this.context.restore();\r\n\r\n  }\r\n\r\n  outlineRect(x, y, width, height, outlineWidth, color) {\r\n\r\n    color = color || this.currentColor;\r\n\r\n    //this.context.setLineDash([6]);\r\n    this.context.save();\r\n    this.context.translate(x, y);\r\n    this.context.lineWidth = outlineWidth || 1;\r\n    this.context.strokeStyle = color;\r\n    this.context.strokeRect(0, 0, width, height);\r\n    this.context.restore();\r\n    //this.context.rect(x,y,width,height);\r\n    //this.context.stroke();\r\n\r\n  }\r\n\r\n  bounds(bb, color) {\r\n\r\n    if (color === undefined)\r\n      color = 'red';\r\n    this.context.setTransform(1, 0, 0, 1, 0, 0);\r\n    this.outlineRectangle(bb.min.x, bb.min.y, bb.max.x - bb.min.x, bb.max.y - bb.min.y, color, 1);\r\n\r\n  }\r\n\r\n}\r\n\r\n//GameSystemManager.register('UIDrawer',UIDraw,'draw');","\r\nexport default function UIResize(gui, w, h) {\r\n    gui.width = w;\r\n    gui.height = h;\r\n    gui.aspectRatio = w / h;\r\n    //gui.pixelUnit.x = gui.canvas.width / w;\r\n    //gui.pixelUnit.y = gui.canvas.height / h;\r\n    gui._isDirty = true;\r\n}\r\n","\r\nexport default function UpdateUIMatrix(gui) {\r\n\r\n    if (!gui._isDirty)\r\n        return;\r\n\r\n    gui.matrix.setIdentity()\r\n    .scale(gui.resolution, gui.resolution)\r\n    //.translate(gui.viewport.x * gui.invertedResolution, gui.viewport.y *  gui.invertedResolution)\r\n    .translate( gui.viewportOffset.x, gui.viewportOffset.y);\r\n\r\n    gui._isDirty = false;\r\n}\r\n","import Resource from \"./Resource\";\r\nimport ResourceType from \"./ResourceType\";\r\n\r\n/**\r\n* Image that holds image data.\r\n* @class Image\r\n* @constructor\r\n*/\r\nexport default class ImageResource extends Resource {\r\n\r\n    constructor(name, data) {\r\n\r\n      super(name, ResourceType.Image);\r\n      \r\n      this.data = data;\r\n      this.width = 0;\r\n      this.height = 0;\r\n      this.imageUrl = null;\r\n\r\n      if ((this.data.complete || this.data.getContext) && this.data.width && this.data.height) {\r\n\r\n          this.width = this.data.naturalWidth || this.data.width;\r\n          this.height = this.data.naturalHeight || this.data.height;\r\n\r\n      }\r\n  }\r\n\r\n}","import ResourceType from \"./ResourceType\";\r\n\r\n\r\nexport default class Resource {\r\n\r\n    constructor(name, type)\r\n    {\r\n        this.name = name || 'Resource';\r\n        this.type = type || ResourceType.None;\r\n    }\r\n\r\n}","\r\nconst ResourceType = {\r\n    None : -1,\r\n    Image : 0,\r\n    Tilemap : 1,\r\n    Animation : 2,\r\n    Spritesheet : 3,\r\n    AnimationMachine : 4\r\n}\r\n\r\nObject.freeze(ResourceType);\r\n\r\nexport default ResourceType;","import Resource from \"../Resource\";\r\nimport ResourceType from \"../ResourceType\";\r\nimport DataMap from \"../../structures/Map\";\r\n\r\nexport default class AnimationMachineResource extends Resource {\r\n\r\n    constructor(name) {\r\n\r\n        super(name, ResourceType.AnimationMachine);\r\n        this.states = new DataMap();\r\n\r\n    }\r\n\r\n    set duration(miliSeconds) {\r\n        this.states.each((key, value) => {\r\n\r\n            value.duration = miliSeconds;\r\n\r\n        });\r\n    }\r\n\r\n    add(state, animation) {\r\n\r\n        if (this.states.has(state)) {\r\n            Console.warn(\"AnimationMachineResource.add: Could not add state. There is already a state called \\'\" + state + \"\\\".\");\r\n            return this;\r\n        }\r\n\r\n        //let anim = this._cache.get(animationTag);\r\n        if (animation !== undefined) {\r\n            this.states.insert(state, animation);\r\n        } else {\r\n            Console.warn(\"AnimationMachineResource.add: Could not add state with undefined animation.\");\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /// TODO\r\n    /*create(state) {\r\n        if (this.states.has(state)) {\r\n            Console.warn(\"AnimationMachineResource.create: Could not create state. There is already a state called \\'\" + state + \"\\\".\");\r\n            return this;\r\n        }\r\n\r\n        this.states.set(stateName, );\r\n    }*/\r\n\r\n    get(stateName) {\r\n        return this.states.get(stateName);\r\n    }\r\n\r\n    at(index) {\r\n        return this.states.at(index);\r\n    }\r\n\r\n}","import DataList from \"../../structures/List\";\r\nimport Resource from \"../Resource\";\r\nimport ResourceType from \"../ResourceType\";\r\nimport Validate from '../../utils/Validate';\r\nimport AnimationUpdateFrameRate from \"./components/AnimationUpdateFrameRate\";\r\nimport ComputeTotalDuration from \"./components/ComputeTotalDuration\";\r\nimport WrapMode from \"./WrapMode\";\r\n\r\n// storage of animation state\r\nexport default class Animation extends Resource {\r\n\r\n\r\n  constructor(name) {\r\n\r\n    super(name, ResourceType.Animation);\r\n\r\n    this.keyFrames = new DataList(null, false);\r\n    //this._duration = 1;\r\n    this._totalDuration = 1;\r\n    this._frameRate = 30;\r\n    this._secondsPerFrame = 1;\r\n    //this.loop = true;\r\n    this._wrapMode = WrapMode.Loop;\r\n    this.uniformDuration = true;\r\n\r\n    AnimationUpdateFrameRate.call(this, 30, null, 1);\r\n  }\r\n\r\n  get wrapMode() {\r\n    return this._wrapMode; \r\n  }\r\n\r\n  set loop(value) {\r\n    if (value === true) {\r\n      this._wrapMode = WrapMode.Loop;\r\n    }\r\n  }\r\n\r\n \r\n  set duration(value) {\r\n    if (Validate.isNumber(value)) {\r\n      AnimationUpdateFrameRate.call(this, null, value);\r\n    }\r\n  }\r\n\r\n  set frameRate(value) {\r\n    if (Validate.isNumber(value)) {\r\n      AnimationUpdateFrameRate.call(this, value, null);\r\n    }\r\n  }\r\n\r\n  get length() {\r\n    return this.keyFrames.size;\r\n  }\r\n\r\n  get size() {\r\n    return this.keyFrames.size;\r\n  }\r\n\r\n  get duration() {\r\n    return this._totalDuration;\r\n  }\r\n\r\n  get frameRate() {\r\n    return this._frameRate;\r\n  }\r\n\r\n  get secondsPerFrame() {\r\n    return this._secondsPerFrame;\r\n  }\r\n\r\n  get totalDuration() {\r\n    if (this.uniformDuration) {\r\n      return this._totalDuration;\r\n    } else {\r\n      return ComputeTotalDuration(this.keyFrames);\r\n    }\r\n  }\r\n\r\n  get(frameIndex) {\r\n    return this.keyFrames.at(frameIndex);\r\n  }\r\n\r\n  duplicate(frameIndex, atIndex) {\r\n  \r\n    let frame = this.keyFrames.at(frameIndex);\r\n\r\n    if (frame !== null) {\r\n\r\n      if (atIndex === undefined)\r\n        this.keyFrames.push(frame);\r\n      else\r\n        this.keyFrames.splice(atIndex, 0, frame);\r\n    }\r\n\r\n    AnimationUpdateFrameRate.call(this, this._frameRate, null);\r\n\r\n    return this;\r\n  }\r\n\r\n  remove(frameIndex) {\r\n    let frame = this.keyFrames.eraseAt(frameIndex);\r\n    AnimationUpdateFrameRate.call(this, this._frameRate, null);\r\n    return frame;\r\n  }\r\n\r\n}\r\n\r\n","\r\nimport Rect from '../../math/Rect';\r\n\r\nexport default class KeyFrame {\r\n    \r\n    constructor(animation) {\r\n        this.animation = animation;\r\n        this.duration = 0;\r\n        this.progress = 0;\r\n        this.type = 'key';\r\n    }\r\n\r\n    destroy() {\r\n        this.animation = null;\r\n    }\r\n\r\n}\r\n\r\nexport class SpritesheetKeyFrame extends KeyFrame {\r\n\r\n    constructor(animation, image, frame, duration) {\r\n        super(animation);\r\n\r\n        this.duration = duration || 1;\r\n        this.type = 'sprite';\r\n        this.frame = frame || new Rect();\r\n        this.image = image || null;\r\n    }\r\n\r\n    destroy() {\r\n        this.frame = null;\r\n        this.image = null;\r\n        this.animation = null;\r\n    }\r\n\r\n}","import Animation from \"./AnimationResource\";\r\nimport KeyFrame, { SpritesheetKeyFrame } from \"./KeyFrame\";\r\nimport Validate from '../../utils/Validate';\r\nimport ResourceType from \"../ResourceType\";\r\nimport Rect from \"../../math/Rect\";\r\nimport AnimationUpdateFrameRate from \"./components/AnimationUpdateFrameRate\";\r\n\r\nexport default class SpritesheetResource extends Animation {\r\n\r\n    constructor(name, image, duration) {\r\n\r\n        super(name);\r\n\r\n        this.mainImage = image || null;\r\n        this.type = ResourceType.Spritesheet;\r\n\r\n    }\r\n\r\n    addFrame(x, y, width, height, image, duration, shouldUpdateFrameRate) {\r\n\r\n        if (duration === undefined) duration = this._secondsPerFrame;\r\n        if (shouldUpdateFrameRate === undefined) shouldUpdateFrameRate = true;\r\n\r\n        if (image === undefined) {\r\n            image = this.mainImage;\r\n        } else {\r\n            image = this.cache.image.get(image);\r\n        }\r\n    \r\n        let keyFrame = new SpritesheetKeyFrame(\r\n            this, \r\n            image,\r\n            new Rect(x, y, width, height),\r\n            duration\r\n        );\r\n\r\n        this.keyFrames.push(keyFrame);\r\n\r\n        if (shouldUpdateFrameRate === true) {\r\n            AnimationUpdateFrameRate.call(this, this._frameRate, null);\r\n        }\r\n        \r\n        return this;\r\n    }\r\n\r\n    /** Add stripped images frames from the main image of the SpriteSheet animation.\r\n     * \r\n     * @param {Number} x Initial x position of the strip\r\n     * @param {Number} y Initial y position of the strip\r\n     * @param {Number} frameWidth The frame image width.\r\n     * @param {Number} frameHeight The frame image height.\r\n     * @param {Number} numberOfImages The number of frames. Default: 1.\r\n     * @param {Number} [framesPerRow] Optional: Frames per row. Default: Equal to numberOfImages\r\n     * @param {Number|Object} [spacing] Optional: the spacing between the frames images. \r\n     * To define spacing for x and y axis, spacing should be defined as Object ie: {x:Number,y:Number}.\r\n     */\r\n    addStrip(x, y, frameWidth, frameHeight, numberOfImages, framesPerRow, spacing) {\r\n\r\n        if (framesPerRow === undefined) framesPerRow = numberOfImages;\r\n\r\n        if (spacing === undefined) {\r\n            spacing = {x:0,y:0};\r\n        } else if (Validate.isNumber(spacing)) {\r\n            spacing = {x:spacing, y:spacing};\r\n        }\r\n\r\n        let verticalCount = 0;\r\n        let horizontalCount = 0;\r\n        let xx = x;\r\n        let yy = y;\r\n\r\n        for (let i = 0; i < numberOfImages; i++) {\r\n\r\n            this.addFrame(\r\n                xx,\r\n                yy,\r\n                frameWidth,\r\n                frameHeight,\r\n                undefined,\r\n                undefined,\r\n                false\r\n            );\r\n\r\n            //this._size++;\r\n            xx += spacing.x + frameWidth;\r\n\r\n            if (i % framesPerRow == (framesPerRow - 1)) {\r\n                xx = x;\r\n                yy += spacing.y + frameHeight;\r\n            }\r\n        }\r\n\r\n        AnimationUpdateFrameRate.call(this, this._frameRate, null);\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    addImageStrip(image, x, y, frameWidth, frameHeight, numberOfImages, framesPerRow, spacing) {\r\n\r\n    }\r\n\r\n}","\r\nconst WrapMode = {\r\n    Once : 0,\r\n    Loop : 1,\r\n    PingPong : 2\r\n};\r\n\r\nObject.freeze(WrapMode);\r\n\r\nexport default WrapMode;","\r\nexport default function AnimationUpdateFrameRate(frameRate, duration, keyFramesLength) {\r\n\r\n    if (keyFramesLength === undefined) keyFramesLength = this.keyFrames.length;\r\n\r\n    if (duration === null && frameRate === null)\r\n    {\r\n        this._frameRate = 60;\r\n        this._totalDuration = (frameRate / keyFramesLength) * 1000;\r\n    }\r\n    else if (duration && frameRate === null)\r\n    {\r\n        this._totalDuration = duration;\r\n        this._frameRate = keyFramesLength / (duration / 1000);\r\n    }\r\n    else\r\n    {\r\n        this._frameRate = frameRate;\r\n        this._totalDuration = (keyFramesLength / frameRate) * 1000;\r\n    }\r\n\r\n    this._secondsPerFrame = 1000 / this._frameRate;\r\n}","\r\nexport default function ComputeTotalDuration(keyFrames) {\r\n\r\n    let size = keyFrames.size;\r\n\r\n    if (size === 0)\r\n      return 0;\r\n    else {\r\n\r\n      let dur = 0;\r\n\r\n      for (let i = 0; i < size; i++) {\r\n        dur += keyFrames.at(i).duration || 0;\r\n      }\r\n\r\n      return dur;\r\n    }\r\n\r\n}","\r\nmodule.exports = {\r\n    AnimationBase : require('./AnimationResource'),\r\n    Spritesheet : require('./SpritesheetResource'),\r\n    AnimationMachine : require('./AnimationMachineResource')\r\n};","\r\nmodule.exports = {\r\n    ResourceType : require('./ResourceType'),\r\n    Image : require('./ImageResource'),\r\n    Tilemap : require('./tilemap/TilemapResource'),\r\n    Animation : require('./animation')\r\n};","\r\nimport Resource from \"../Resource\";\r\nimport ResourceType from '../ResourceType';\r\nimport ObjectGet from \"../../utils/object/ObjectGet\";\r\n\r\nexport default class TilemapResource extends Resource {\r\n\r\n    constructor(name, metadata, config) {\r\n\r\n        super(name, ResourceType.Tilemap);\r\n\r\n        this.metadata = metadata || null;\r\n        this.tilesets =  ObjectGet.value(config, 'tilesets', null);\r\n        this.tileLayers = ObjectGet.value(config, 'tilelayers', null);\r\n        this.objectLayers = ObjectGet.value(config, 'objectlayers', null);\r\n        \r\n    }\r\n\r\n    getObjectsLayer(name) {\r\n        return this.objectLayers.find(function(a) {\r\n            if (a.name === name) \r\n                return a;\r\n        }) || null;\r\n    }\r\n\r\n    getTileLayer(name) {\r\n        return this.tileLayers.find(function(layer) {\r\n            if (layer.name === name) \r\n                return layer;\r\n        }) || null;\r\n    }\r\n\r\n    getTilesetByGID(gid) {\r\n\r\n        return this.tilesets.each((set)=>{\r\n            if (set.hasGID(gid)) {\r\n                return set;\r\n            }\r\n        }) || null;\r\n\r\n    }\r\n\r\n    getTileGID(gid) {\r\n        return this.tilesets.each((set)=>{\r\n\r\n            let tileGID = set.getTileGID(gid);\r\n\r\n            if (tileGID !== undefined) {\r\n                return tileGID;\r\n            }\r\n        }) || null;\r\n    }\r\n\r\n}\r\n","\r\nconst ObjectType = {\r\n    None : 0,\r\n    Point : 1,\r\n    Rect : 2,\r\n    Ellipse : 3,\r\n    Polygon : 4,\r\n    Polyline : 5,\r\n};\r\n\r\nObject.freeze(ObjectType);\r\n\r\nexport default ObjectType;","\r\nexport default class Tile {\r\n\r\n    constructor(layer, tileData, tileX, tileY, id) {\r\n        this.layer = layer;\r\n        this.data = tileData;\r\n        this.tileX = tileX;\r\n        this.tileY = tileY;\r\n        this.id = id;\r\n        this.frame = tileData.st;\r\n\r\n        // pixels positions\r\n        this.x = Math.round(tileX * tileData.st.width);\r\n        this.y = Math.round(tileY * tileData.st.height);\r\n    }\r\n\r\n}","import Rect from \"../../../math/Rect\";\r\n\r\nexport default class TileGID {\r\n\r\n    constructor(tileset, gid, tileID, u, v, umax, vmax) {\r\n        this.id = tileID;\r\n        this.gid = gid;\r\n        this.tileset = tileset || null;\r\n        this.st = new Rect(u,v,umax,vmax); // tex coords\r\n        this.keyFrames = undefined;\r\n        this.isAnimated = false;\r\n        this.currentFrame = 0;\r\n        this.properties = null;\r\n    }\r\n    \r\n}","\r\nimport ObjectGet from '../../../utils/object/ObjectGet';\r\n\r\nexport default class TileLayerData {\r\n\r\n    constructor(config) {\r\n        this.width = ObjectGet.value(config,'width', 0);\r\n        this.height = ObjectGet.value(config,'height',0);\r\n        this.x = ObjectGet.value(config,'x', 0);\r\n        this.y = ObjectGet.value(config,'y', 0);\r\n        this.name = ObjectGet.value(config, 'name', '');\r\n        this.alpha = ObjectGet.value(config,'alpha', 1);\r\n        //this.type =\"tilelayer\";\r\n        this.visible = ObjectGet.value(config,'visible', true);\r\n        this.tiles =  ObjectGet.value(config,'tiles', []);\r\n        this.hasAnimatedTiles = false;\r\n    }\r\n\r\n    getTile(x, y) {\r\n        let index = x + y * this.width;\r\n\r\n        return this.tiles[index];\r\n    }\r\n\r\n}","import ObjectGet from \"../../../utils/object/ObjectGet\";\r\n\r\nexport default class TilemapMetadata {\r\n\r\n    constructor(config) {\r\n\r\n        this.name = ObjectGet.value(config,'name','tilemap');\r\n        this.width =  ObjectGet.value(config,'width',0);\r\n        this.height =  ObjectGet.value(config,'height',0);\r\n        this.tileWidth =  ObjectGet.value(config,'tileWidth',16);\r\n        this.tileHeight =  ObjectGet.value(config,'tileHeight',16);\r\n        this.pixelsWidth = ObjectGet.value(config,'pixelsWidth',this.width * this.tileWidth);\r\n        this.pixelsHeight = ObjectGet.value(config,'pixelsHeight',this.height * this.tileHeight);\r\n        this.orientation = ObjectGet.value(config, 'orientation', 'orthogonal');\r\n    }\r\n\r\n\r\n}","import ObjectGet from '../../../utils/object/ObjectGet';\r\nimport ObjectType from './ObjectType';\r\n\r\n\r\n\r\nexport default class TilemapObject {\r\n\r\n    constructor(config) {\r\n\r\n        this.x = ObjectGet.value(config, 'x', 0);\r\n        this.y = ObjectGet.value(config, 'y', 0);\r\n        this.width = ObjectGet.value(config, 'width', 0);\r\n        this.height = ObjectGet.value(config, 'height', 0);\r\n        this.rotation = ObjectGet.value(config, 'rotation', 0);\r\n        this.name = ObjectGet.value(config, 'name', \"\");\r\n        this.id = ObjectGet.value(config, 'id', null);\r\n        this.visible = ObjectGet.value(config, 'visible', true);\r\n        this.type = ObjectGet.value(config, 'type', \"\");\r\n\r\n        this.objectType = ObjectType.Rect;\r\n\r\n        if (config['ellipse'] === true) {\r\n            this.objectType = ObjectType.Ellipse;\r\n        } else if (config['point'] === true) {\r\n            this.objectType = ObjectType.Point;\r\n        } else if (config['polygon'] === true) {\r\n            this.objectType = ObjectType.Polygon;\r\n        } else if (config['polyline'] === true) {\r\n            this.objectType = ObjectType.Polyline;\r\n        }\r\n    }\r\n\r\n    contains(x, y) {\r\n\r\n        if (this.width <= 0 && this.height <= 0)\r\n            return false;\r\n\r\n        return (x > this.x &&\r\n            x < this.x + this.width &&\r\n            y >= this.y &&\r\n            y < this.y + this.height);\r\n    }\r\n\r\n    intersects(x, y, width, height) {\r\n\r\n        if (width <= 0 || height <= 0 || this.width <= 0 || this.height <= 0)\r\n            return false;\r\n\r\n        return !(x > this.x + this.width ||\r\n            x + width < this.x ||\r\n            y > this.y + this.height ||\r\n            y + height < this.y);\r\n\r\n    }\r\n\r\n\r\n}","import DataList from \"../../../structures/List\";\r\nimport TileGID from './TileGID';\r\n\r\n\r\n\r\nexport default class Tileset {\r\n\r\n    constructor(name, firstgid, tileWidth, tileHeight, margin, spacing) {\r\n\r\n        this.name = name;\r\n        this.firstgid = firstgid || 1;\r\n        this.tileWidth = tileWidth || 16;\r\n        this.tileHeight = tileHeight || 16;\r\n        this.margin = margin || 0;\r\n        this.spacing = spacing || 0;\r\n        this.image = null;\r\n        this.data = new DataList();\r\n        this.rows = 0;\r\n        this.collumns = 0;\r\n        this.gidCount = 0;\r\n    }\r\n\r\n    getTileGID(gid) {\r\n\r\n        if (gid === 'string') gid = parseInt(gid);\r\n\r\n        if (gid < this.firstgid && gid >= this.firstgid + this.gidCount)\r\n            return null;\r\n\r\n        return this.data.at(gid - this.firstgid);\r\n    }\r\n\r\n    getTile(index) {\r\n\r\n        if (index === 'string') index = parseInt(index);\r\n\r\n        return this.data.at(index);\r\n    }\r\n\r\n    hasGID(gid) {\r\n        return (\r\n            gid >= this.firstgid &&\r\n            gid < this.firstgid + this.gidCount\r\n        );\r\n    }\r\n\r\n    updateData(imageWidth, imageHeight) {\r\n\r\n        if (this.image !== undefined || this.image != null)\r\n        {\r\n            imageWidth = this.image.width;\r\n            imageHeight = this.image.height;\r\n        }\r\n\r\n        //slice into tiles\r\n        let columns = (imageHeight - this.margin * 2 + this.spacing) / (this.tileHeight + this.spacing);\r\n        let rows = (imageWidth - this.margin * 2 + this.spacing) / (this.tileWidth + this.spacing);\r\n\r\n        this.rows = Math.floor(rows);\r\n        this.collumns =  Math.floor(columns);\r\n        this.gidCount = rows * columns;\r\n\r\n        let u = this.margin;\r\n        let v = this.margin;\r\n        let x = 0;\r\n\r\n        this.data.clear();\r\n\r\n        for (let i = 0; i < this.gidCount; i++) {\r\n\r\n                this.data.push(new TileGID(\r\n                    this, \r\n                    this.firstgid + i,\r\n                    i,\r\n                    u, v,\r\n                    this.tileWidth, this.tileHeight));\r\n\r\n            u += this.tileWidth + this.spacing;             \r\n            x++;\r\n\r\n            if (x >= rows)\r\n            {\r\n                x = 0;\r\n                u = this.margin;\r\n                v += this.tileHeight + this.spacing;\r\n            }\r\n\r\n            \r\n        }\r\n\r\n       \r\n    }\r\n\r\n    \r\n\r\n}","\r\n// Bits on the far end of the 32-bit global tile ID are used for tile flags\r\nconst FLIPPED_HORIZONTALLY_FLAG = 0x80000000;\r\nconst FLIPPED_VERTICALLY_FLAG   = 0x40000000;\r\nconst FLIPPED_DIAGONALLY_FLAG   = 0x20000000;\r\n\r\nfunction ParseGIDFlags(flipped_horizontally, flipped_vertically, flipped_diagonally) {\r\n\r\n    let flip = false;\r\n    let rot = 0;\r\n\r\n    return {flipped: flip, rotation : rot};\r\n\r\n}\r\n\r\n// http://docs.mapeditor.org/en/latest/reference/tmx-map-format/\r\nexport default function ParseGID(global_tile_id) {\r\n\r\n    // The global_tile_id is alredy parsed on Base64.decodeToUint32() phase.\r\n\r\n    /* unsigned global_tile_id = data[tile_index] |\r\n                              data[tile_index + 1] << 8 |\r\n                              data[tile_index + 2] << 16 |\r\n                              data[tile_index + 3] << 24;*/\r\n\r\n    // Read out the flags\r\n    let flipped_horizontally = Boolean(global_tile_id & FLIPPED_HORIZONTALLY_FLAG);\r\n    let flipped_vertically = Boolean(global_tile_id & FLIPPED_VERTICALLY_FLAG);\r\n    let flipped_diagonally = Boolean(global_tile_id & FLIPPED_DIAGONALLY_FLAG);\r\n\r\n    // Clear the flags\r\n     global_tile_id = global_tile_id & ~(FLIPPED_HORIZONTALLY_FLAG |\r\n        FLIPPED_VERTICALLY_FLAG |\r\n        FLIPPED_DIAGONALLY_FLAG);\r\n\r\n\r\n    let flags = ParseGIDFlags(flipped_horizontally, flipped_vertically, flipped_diagonally);\r\n\r\n    return {\r\n        gid : global_tile_id,\r\n        flipHorizontal : flipped_horizontally,\r\n        flipVertical : flipped_vertically,\r\n        flipDiagonal : flipped_diagonally,\r\n        flipped: flags.flipped,\r\n        rotation : flags.rotation        \r\n    };\r\n\r\n}","import TilemapObject from \"../data/TilemapObject\";\r\nimport DataList from \"../../../structures/List\";\r\n\r\nexport default function ParseObjectLayers(json, map) {\r\n\r\n    let size = json.layers.length;\r\n    let layers = new DataList();\r\n\r\n    if (size <= 0)\r\n        return layers;\r\n\r\n    for (let i = 0; i < size; i++) {\r\n\r\n        let jsonLayer = json.layers[i];\r\n\r\n        if (jsonLayer.type !== \"objectgroup\")\r\n            continue;\r\n\r\n        \r\n\r\n        if (jsonLayer.objects === undefined)\r\n            continue;\r\n\r\n        let newLayer = {\r\n            name :  jsonLayer.name || \"\",\r\n            objects : new DataList()\r\n        };\r\n\r\n        let objectsSize = jsonLayer.objects.length;\r\n\r\n        for (let j = 0; j < objectsSize; j++) {\r\n\r\n            let obj = new TilemapObject(jsonLayer.objects[j]);\r\n            newLayer.objects.push(obj);\r\n\r\n        }\r\n\r\n        layers.push(newLayer);\r\n\r\n\r\n    }\r\n\r\n    return layers;\r\n\r\n}","import ObjectGet from '../../../utils/object/ObjectGet';\r\nimport Base64Utils from '../../../utils/Base64Utils';\r\nimport DataSet from '../../../structures/Set';\r\nimport DataList from '../../../structures/List';\r\nimport ParseGID from './ParseGID';\r\nimport TileLayerData from '../data/TileLayerData';\r\nimport Tile from '../data/Tile';\r\n\r\nfunction GetTilesetByGID(tilesets, gid) {\r\n\r\n    return tilesets.each((set)=>{\r\n        if (set.hasGID(gid)) {\r\n            return set;\r\n        }\r\n    }) || null;\r\n\r\n}\r\n\r\nexport default function ParseTileLayers(json, tilesets) {\r\n\r\n    let size = json.layers.length;\r\n    let layers = new DataList();\r\n\r\n    if (size <= 0)\r\n        return layers;\r\n\r\n    for (let i = size - 1; i >= 0; i--) {\r\n\r\n        let jsonLayer = json.layers[i];\r\n\r\n        if (jsonLayer.type !== \"tilelayer\")\r\n            continue;\r\n\r\n        if (jsonLayer.enconding) {\r\n            if (jsonLayer.enconding === 'base64') {\r\n                //  should be interpreted as an array of unsigned 32-bit integers using little-endian byte ordering.\r\n                jsonLayer.data = Base64Utils.decodeToUint32(jsonLayer.data);\r\n                delete jsonLayer.enconding;\r\n            }\r\n        }\r\n\r\n        let newLayer = new TileLayerData({\r\n            name: jsonLayer.name,\r\n            x: ObjectGet.value(jsonLayer, 'offsetx', 0) + jsonLayer.x,\r\n            y: ObjectGet.value(jsonLayer, 'offsety', 0) + jsonLayer.y,\r\n            width: jsonLayer.width,\r\n            height: jsonLayer.height,\r\n            tileWidth: jsonLayer.tilewidth,\r\n            tileHeight: jsonLayer.tileheight,\r\n            alpha: jsonLayer.opacity,\r\n            visible: jsonLayer.visible,\r\n            //properties: GetFastValue(layer, 'properties', {})\r\n        });\r\n\r\n        let tiles = [];\r\n        let x = 0;\r\n        let y = 0;\r\n        let hasAnimatedTiles = false;\r\n        let animatedTilesGID = new DataSet();\r\n\r\n        for (let j = 0; j < jsonLayer.data.length; j++) {\r\n\r\n            let gidProp = ParseGID(jsonLayer.data[j]);\r\n            let id = x + y * newLayer.width;\r\n            let tile = null;\r\n\r\n            // The first tileset always has a firstgid value of 1. \r\n            if (gidProp.gid > 0) {\r\n                let gid = gidProp.gid;\r\n                let tileset = GetTilesetByGID(tilesets, gid); //map.getTilesetByGID(gid);\r\n                let tileData = tileset.getTileGID(gid);\r\n\r\n                if (tileData.isAnimated) {\r\n                    animatedTilesGID.insert(gid);\r\n                    hasAnimatedTiles = true;\r\n\r\n                }\r\n\r\n                tile = new Tile(newLayer, tileData, x, y, id);\r\n            }\r\n\r\n            tiles.push(tile);\r\n\r\n            x++;\r\n\r\n            if (x >= newLayer.width) {\r\n                x = 0;\r\n                y++;\r\n            }\r\n        }\r\n\r\n        newLayer.tiles = tiles;\r\n        newLayer.hasAnimatedTiles = hasAnimatedTiles;\r\n        newLayer.animatedTiles = (animatedTilesGID.size > 0) ? animatedTilesGID : undefined;\r\n\r\n        layers.push(newLayer);\r\n\r\n    }\r\n\r\n\r\n    return layers;\r\n\r\n}","import TilemapResource from \"../TilemapResource\";\r\nimport TilemapMetadata from \"../data/TilemapMetadata\";\r\nimport ParseTilesets from \"./ParseTileset\";\r\nimport ParseTileLayers from \"./ParseTileLayers\";\r\nimport ParseObjectLayers from \"./ParseObjectsLayers\";\r\n\r\nexport default function ParseTiledJSON(name, source, cache) {\r\n\r\n    var metadata = new TilemapMetadata({\r\n        name: source.name,\r\n        width: source.width,\r\n        height: source.height,\r\n        tileWidth: source.tilewidth,\r\n        tileHeight: source.tileheight,\r\n        orientation: source.orientation\r\n    });\r\n\r\n    var tilesets = ParseTilesets(source, cache);\r\n\r\n    var config = {\r\n        tilesets: tilesets,\r\n        tilelayers: ParseTileLayers(source, tilesets),\r\n        objectlayers: ParseObjectLayers(source)\r\n    };\r\n\r\n    return new TilemapResource(name, metadata, config);\r\n\r\n}","\r\nexport default function ParseTilesConfig(tileset, tilesetTilesConfig) {\r\n\r\n    for (let tileIndex in tilesetTilesConfig) {\r\n\r\n        let index = parseInt(tileIndex);\r\n        let tileData = tileset.getTile(index);\r\n       \r\n\r\n        if (tileData === null || tileData === undefined) continue;\r\n\r\n\r\n        let tileProperties = tilesetTilesConfig[tileIndex];\r\n\r\n        // check properties\r\n        for (let property in tileProperties) {\r\n        \r\n            let propertyContent = tileProperties[property];\r\n\r\n            if (property == 'animation') {\r\n\r\n                let animationSize = propertyContent.length;\r\n\r\n                if (animationSize > 1) {\r\n                    tileData.isAnimated = true;\r\n\r\n                    let keyFrames = [];\r\n\r\n                    for (let i = 0; i < animationSize; i++) {\r\n                        let anim = propertyContent[i];\r\n                        keyFrames.push({\r\n                            duration: anim.duration,\r\n                            tileID : anim.tileid \r\n                        });\r\n                    }\r\n                    \r\n                    tileData.keyFrames = keyFrames;\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n  \r\n}","\r\nexport default function ParseTileProperties(tileset, tileProperties) {\r\n\r\n    for (let tileIndex in tileProperties) {\r\n\r\n        let index = parseInt(tileIndex);\r\n        let tileData = tileset.getTile(index);\r\n\r\n        if (tileData === null || tileData === undefined) continue;\r\n\r\n\r\n        let props = tileProperties[tileIndex];\r\n        tileData.properties = props;\r\n\r\n        // check properties\r\n        /*for (let property in props) {\r\n        \r\n            let propertyContent = tileProperties[property];\r\n            tileData.properties = propertyContent;\r\n        }*/\r\n\r\n    }\r\n\r\n}","import Tileset from \"../data/Tileset\";\r\nimport DataList from \"../../../structures/List\";\r\nimport Path from '../../../utils/Path';\r\nimport ParseTilesConfig from \"./ParseTilesConfig\";\r\nimport ParseTileProperties from \"./ParseTilesProperties\";\r\n\r\n\r\nexport default function ParseTilesets(json, cache) {\r\n\r\n    let size = json.tilesets.length || 0;\r\n\r\n    let tileSets = new DataList();\r\n\r\n    for (let i = 0; i < size; i++) {\r\n\r\n        let jsonTileset = json.tilesets[i];\r\n\r\n        if (jsonTileset.image) {\r\n\r\n            var newTileSet = new Tileset(\r\n                jsonTileset.name,\r\n                jsonTileset.firstgid,\r\n                jsonTileset.tilewidth,\r\n                jsonTileset.tileheight,\r\n                jsonTileset.margin,\r\n                jsonTileset.spacing);\r\n\r\n            newTileSet.image = cache.image.get(Path.getFilenameWithoutExtension(jsonTileset.image) || jsonTileset.name);\r\n\r\n            newTileSet.updateData(jsonTileset.imagewidth, jsonTileset.imageheight);\r\n\r\n            // check tile properties\r\n            if (jsonTileset.tiles !== undefined) {\r\n                ParseTilesConfig(newTileSet, jsonTileset.tiles);\r\n            }\r\n\r\n            if (jsonTileset.tileproperties !== undefined) {\r\n                ParseTileProperties(newTileSet, jsonTileset.tileproperties);\r\n            }\r\n\r\n            tileSets.push(newTileSet);\r\n        }\r\n    }\r\n\r\n    return tileSets;\r\n\r\n}","import PostPreloadingScene from \"./components/PostPreloadingScene\";\r\n\r\nexport default class Scene {\r\n  \r\n  constructor(name) {\r\n\r\n    this.name = name || 'New Scene';\r\n\r\n  }\r\n\r\n\r\n  preloadDone(transition) {\r\n\r\n    if (this.scene === undefined) return;\r\n\r\n    PostPreloadingScene(this.scene, transition);\r\n  }\r\n\r\n  // instanceDestroy(gameObject) {\r\n\r\n  //   if (gameObject['destroy'])\r\n  //     gameObject.destroy();\r\n\r\n  //     //console.log(\"deleted \" + gameObject._id)\r\n\r\n  //   let index = this.instances.indexOf( gameObject);\r\n\r\n  //   this.instances.splice( index, 1 );\r\n\r\n  // }\r\n\r\n  // addGameObject(gameObject, clone) {\r\n\r\n  //   let obj;\r\n  //   let cl = false;\r\n\r\n  //   if (arguments.length == 0)\r\n  //     obj = new scintilla.GameObject();\r\n  //   else {\r\n\r\n  //     if (clone === undefined)\r\n  //       cl = false;\r\n  //     else\r\n  //       cl = clone;\r\n\r\n\r\n  //       if (cl)\r\n  //         obj = gameObject.clone();\r\n  //       else\r\n  //         obj = gameObject;\r\n\r\n  //   }\r\n\r\n  //   obj._id = this.instances.length;\r\n  //   obj._game = this.game;\r\n  //   this.instances.push(obj);\r\n\r\n  //   obj.start();\r\n  //   return obj;\r\n\r\n  // }\r\n\r\n  // setBounds(x,y,width,height) {\r\n\r\n  //   this.x = x;\r\n  //   this.y = y;\r\n  //   this.width = width;\r\n  //   this.height = height;\r\n    \r\n  // }\r\n\r\n}\r\n\r\n\r\n\r\n","\r\nimport System from '../core/system/System';\r\nimport DataMap from '../structures/Map';\r\nimport Scene from './Scene';\r\nimport ScintillaLoadingScreen from './builtin/ScintillaLoadingScene';\r\nimport SetScene from './components/SetScene';\r\nimport InjectSystems from '../core/system/components/InjectSystems';\r\nimport CreateSceneFrom from './components/CreateSceneFrom';\r\nimport Validate from '../utils/Validate';\r\n\r\nexport default class SceneManager {\r\n  \r\n  constructor(game) {\r\n\r\n    this.game = game;\r\n    this._scenes = new DataMap();\r\n\r\n    this.currentScene = null;\r\n    this._currentSceneName = '';\r\n    this._changeScene = null;\r\n    this._transition = null;\r\n    this._isTransitioning = false;\r\n\r\n    this._setup = false;\r\n    this._clearCache = false;\r\n\r\n    this._scintillaLoading = false;\r\n\r\n    // callbacks\r\n    \r\n    this.onStartCallback = null;\r\n    this.onLoadingCallback = null;\r\n    this.onLoadingRenderCallback = null;\r\n    this.onPreloadCallback = null;\r\n    this.onPostloadCallback = null;\r\n    this.onUpdateCallback = null;\r\n    this.onRenderCallback = null;\r\n    this.onDestroyCallback = null;\r\n    this._loadingPlaceHolder = new ScintillaLoadingScreen(this.game);\r\n\r\n  }\r\n\r\n  add(sceneName, scene) {\r\n\r\n    if (sceneName === undefined) {\r\n      throw new Error(\"SceneManager.add: Could not add Scene. \\'sceneName\\' is undefined.\"); \r\n    }\r\n\r\n    if (!Validate.isString(sceneName)) {\r\n      throw new Error(\"SceneManager.add: Could not add Scene. \\'sceneName\\' is not string.\"); \r\n    }\r\n\r\n    if (this._scenes.has(sceneName)) {\r\n      throw new Error(\"SceneManager.add: Could not add Scene. There is already a scene with name \\\"\" + sceneName + \"\\\".\"); \r\n    }\r\n\r\n    let newScene = CreateSceneFrom(scene, sceneName);\r\n    this._scenes.insert(sceneName, newScene);\r\n    return this;\r\n  }\r\n\r\n  new(sceneName) {\r\n\r\n    if (this._scenes.has(sceneName))\r\n    {\r\n      throw new Error(\"Could not create new Scene. The scene name \\\"\" + name + \"\\\" already exists.\"); \r\n    }\r\n\r\n    var newScene = new Scene(this.game, sceneName);\r\n    this._scenes.insert(sceneName,newScene);\r\n\r\n    return newScene;\r\n\r\n  }\r\n\r\n  set(sceneName, clearCache) {\r\n    return SetScene(this, sceneName, clearCache);\r\n  }\r\n\r\n  transition(sceneName, type) {\r\n    SetScene(this, sceneName, false, type);\r\n    /// TODO\r\n  }\r\n\r\n  restart(clearCache) {\r\n\r\n    if (clearCache === undefined) { clearCache = false; }\r\n\r\n    this._changeScene = this._currentSceneName;\r\n    this._clearCache = clearCache;\r\n\r\n  }\r\n\r\n  remove(sceneName) {\r\n\r\n    if (this._currentSceneName === sceneName) {\r\n\r\n      this.currentScene = null;\r\n\r\n      this.onStartCallback = null;\r\n      this.onLoadingCallback = null;\r\n      this.onLoadingRenderCallback = null;\r\n      this.onPreloadCallback = null;\r\n      this.onUpdateCallback = null;\r\n      this.onRenderCallback = null;\r\n      this.onDestroyCallback = null;\r\n\r\n\r\n    }\r\n\r\n    delete this.scenes[sceneName];\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\nSystem.register('SceneManager', SceneManager, 'scene', function()\r\n{\r\n  InjectSystems(this.game, this._loadingPlaceHolder);\r\n});\r\n","\r\n// TODO - FUTURE\r\nconst SceneState = {\r\n    NONE : 0,\r\n    START : 1,\r\n    LOADING : 2,\r\n    RUNNING : 3\r\n};\r\n\r\n\r\nObject.freeze(SceneState);\r\n\r\nmodule.exports = SceneState;","import Scene from \"../Scene\";\r\nimport Version from \"../../Define\";\r\nimport MathUtils from \"../../math/MathUtils\";\r\nimport TransitionBehavior from \"../../render/transition/TranstionBehavior\";\r\n\r\nexport default class ScintillaLoadingScreen extends Scene {\r\n\r\n    constructor(game) {\r\n        super('Scintilla Loading Scene');\r\n\r\n        let blob;\r\n        let logoData = [\"%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath d='M224%20387.814V512L32 320l192-192v126.912C447.375 260.152 437.794 103.016 380.93 0 521.287 151.707 491.48 394.785 224 387.814z'/%3E%3C/svg%3E\"];\r\n\r\n\r\n        try {\r\n            blob = new window.Blob(logoData, { type: 'data:image/svg+xml;charset=utf-8' });\r\n        } catch (e) {\r\n            console.error(e);\r\n        }\r\n\r\n \r\n        this.scintillaLogo = new Image();\r\n        this.scintillaLogo.src = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQwIiBoZWlnaHQ9IjI2MC45OCIgdmlld0JveD0iMCAwIDYzLjUgNjkuMDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2RjMzBhOSI+PHBhdGggZD0iTTQzLjQ5IDM2Ljg1NmwtMTQuMTgtNi40MzRMNi45NTYgNDkuNzg0bDE5LjM2Mi0yNy4yNC02LjU3Ni05LjU2OCAxNC40NTUgNi41NzVMNTYuNTUxLjE5IDM3LjE5IDI3LjQzeiIgcGFpbnQtb3JkZXI9InN0cm9rZSBtYXJrZXJzIGZpbGwiLz48cGF0aCBkPSJNMTEuMTIgMzYuOTA4bC0uNTQzLTEuMDQxLTEuMDM2LjU0My41MzggMS4wMzZ6bS0xLjg4OC00LjE3NmwtLjM2LTEuMTE2LTEuMTE2LjM2MS4zNjYgMS4xMTV6bS0xLjA2NC00LjQ1NmwtLjA5Ny0uNjM1di0uMDNsLS4wMDYtLjAzLS4wMy0uNDI5LTEuMTY2LjA4LjAzNC40OC4wMDYuMDQ3LjEwMy42ODZ6bS0uMTAzLTUuNjk4bC0xLjE2Ny0uMTA4LS4xMDggMS4xNjcgMS4xNjcuMTA4em0uODY0LTQuNDMzbC4wMDYtLjAzLjAwNi0uMDMtLjMwMy0uMDgtLjgxMi0uMjgxLS4wMDYuMDMtLjAxMi4wNDYtLjI4NiAxLjExNSAxLjEzMi4yOTN6bTEuNDE5LTMuNjMzbC4zMzctLjYyMy0xLjAzLS41NTUtLjM2LjY2My0uMDE4LjA0Mi0uMTcxLjM4MyAxLjA3NS40N3ptMi44NTQtNC40NWwtLjkyNi0uNzIxLS43MjEuOTI3LjkyNy43MTV6bTMuMTg3LTMuMjlsLS43OS0uODYzLS44NjQuNzk1Ljc5Ni44NTh6bTMuMTgtMi4yNjVsLjAzLS4wM2guMDExbC41MjEtLjI4LS41Ni0xLjAzLS41NjEuMzAyLS4wNC4wMy0uNDQ3LjI5My42NDEuOTg0ek00Mi42NDUgMi41bC0uMjUxLS4xMzItLjA0Ni0uMDMtLjgxOC0uMzQzLS40NTIgMS4wNzUuNzcyLjMyNi4yNTIuMTMyem0tMTguMzIzLS4xMzJsLS4zODMtMS4xMS0xLjEwNC4zODQuMzgzIDEuMTA0ek0zOC4xMi44MjhMMzYuOTgyLjU1M2wtLjI2OSAxLjE0NCAxLjEzOC4yN3ptLTkuNTA3LjUzOGguMTMzTDI4LjY0My4xOTloLS4xODNsLTEuMDE4LjE3OC4yIDEuMTU2em00LjgtMS4zMDRMMzIuNTIgMGgtLjMyNmwuMDEyIDEuMTY3aC4yMzVsLjg4Ni4wNjJ6TTUyLjM4IDEzLjA2NWwuNTM4IDEuMDQgMS4wNC0uNTQyLS41NDMtMS4wMzZ6bTEuODgyIDQuMTc2bC4zNjYgMS4xMTUgMS4xMS0uMzYtLjM2LTEuMTE2em0xLjA2NCA0LjQ1NmwuMTAzLjY0di4wM2wuMDA2LjAzLjAyOS40MyAxLjE2Ny0uMDc4LS4wMzQtLjQ4LS4wMDYtLjA0Ny0uMTAzLS42ODZ6bS4xMDkgNS42OThsMS4xNjcuMTA4LjEwMy0xLjE2Ny0xLjE2Ny0uMTA4em0tLjg2NCA0LjQzM2wtLjAwNi4wMy0uMDA2LjAzLjI5Mi4wOC44MTguMjgxLjAxMi0uMDMuMDEyLS4wNDguMjg1LTEuMTEtMS4xMzItLjI5MnptLTEuNDAyIDMuNTkzbC0uMDEyLjAzLS4wMTIuMDMtLjMzNy42MTcgMS4wMzUuNTU1LjM1NS0uNjYzLjAyMy0uMDQyLjE2Ni0uMzg0LTEuMDctLjQ2OXptLTIuODcxIDQuNDlsLjkyNi43MjEuNzE1LS45MjctLjkyNi0uNzE1em0tMy4xOTIgMy4yOWwuNzk1Ljg2My44NjMtLjc5NS0uNzk1LS44NTh6bS0zLjE3NSAyLjI2NWwtLjAzLjAzaC0uMDEybC0uNTIuMjguNTU1IDEuMDMuNTYtLjMwMy4wNDYtLjAzLjQ0Ni0uMjkzLS42NC0uOTg0em0tMjMuMDc2IDIuMDA4bC4yNTEuMTMyLjA0LjAzLjgxOS4zNDMuNDU3LTEuMDc2LS43NzgtLjMyNmgtLjAwNmwtLjAzNC0uMDMtLjIxMi0uMTE0em0xOC4zMTcuMTM4bC4zODMgMS4xMDQgMS4xMS0uMzg0LS4zODQtMS4xMDR6bS0xMy43OTggMS41MzNsMS4xNDQuMjc1LjI2OS0xLjE0NC0xLjE0NC0uMjd6bTkuNTEzLS41MzhoLS4xMzhsLjEwOCAxLjE2N2guMTgzbDEuMDE5LS4xNzgtLjItMS4xNTZ6bS00LjggMS4zMDRsLjg5My4wNjRoLjMybC0uMDEyLTEuMTY3aC0uMjI5bC0uODkyLS4wNjR6IiBjb2xvcj0iIzAwMCIgc29saWQtY29sb3I9IiMwMDAwMDAiIHN0eWxlPSJmb250LWZlYXR1cmUtc2V0dGluZ3M6bm9ybWFsO2ZvbnQtdmFyaWFudC1hbHRlcm5hdGVzOm5vcm1hbDtmb250LXZhcmlhbnQtY2Fwczpub3JtYWw7Zm9udC12YXJpYW50LWxpZ2F0dXJlczpub3JtYWw7Zm9udC12YXJpYW50LW51bWVyaWM6bm9ybWFsO2ZvbnQtdmFyaWFudC1wb3NpdGlvbjpub3JtYWw7aXNvbGF0aW9uOmF1dG87bWl4LWJsZW5kLW1vZGU6bm9ybWFsO3NoYXBlLXBhZGRpbmc6MDt0ZXh0LWRlY29yYXRpb24tY29sb3I6IzAwMDt0ZXh0LWRlY29yYXRpb24tbGluZTpub25lO3RleHQtZGVjb3JhdGlvbi1zdHlsZTpzb2xpZDt0ZXh0LWluZGVudDowO3RleHQtb3JpZW50YXRpb246bWl4ZWQ7dGV4dC10cmFuc2Zvcm06bm9uZSIgcGFpbnQtb3JkZXI9InN0cm9rZSBtYXJrZXJzIGZpbGwiIHdoaXRlLXNwYWNlPSJub3JtYWwiLz48cGF0aCBkPSJNNi4zMiA2NS43MjhxLS4xMDcgMS4zMzMtLjkxIDIuMjc2LS41MjguNjQyLTEuNDA1LjktLjQ3NS4xNDctMS4wODIuMTQ3LTEuMTMxIDAtMS44MTgtLjU1OS0uNTctLjQ2LS44NTgtMS4yNDMtLjI4OC0uNzg5LS4yNDUtMS44MTVsMS44MzQtLjEyNnEuMDIgMS4xMS40NCAxLjYwNi4zMDYuMzc3Ljc1NS4zNTYuNjMtLjAzIDEuMDY0LS42MTQuMjI0LS4zLjI3Ni0uODQ1LjA3Ny0uODAzLS41NjctMS41ODUtLjUyMS0uNTM4LTEuNTU2LTEuNjEzLS44NjktLjkyMi0xLjE5LTEuNjU1LS4zNDYtLjgyMy0uMjU0LTEuNzg3LjE2Ni0xLjczOCAxLjQxOC0yLjYzMlEyLjk5MiA1NiA0LjA2IDU2cTEuMDI2IDAgMS43MTUuNDYxLjUzMS4zNTYuODE5Ljk5OS4yODguNjM1LjI4NSAxLjQ2NmwtMS44NzUuMzM1cS0uMDAyLS43ODItLjMzLTEuMjE1LS4yMzUtLjMyMS0uNzMtLjMyMS0uNTI0IDAtLjg0OC40NjgtLjI2LjM3Ny0uMzEzLjkzNS0uMDg0Ljg3My41ODMgMS43OC4yNTQuMzQzLjc3NC44MS42MTcuNTU5LjgxMi43ODIuNjM3LjcxMi45NjIgMS40MDQuMTUuMzIuMjM2LjYuMjA3LjY3Ny4xNjkgMS4yMjJ6bTQuOTYgMy4zMnEtMS4yNyAwLTIuMDcyLS44ODctLjgwMi0uODg2LS42ODEtMi4xNWwuNjY3LTYuOTc1cS4xMjEtMS4yNjMgMS4xLTIuMTUuOTgtLjg5NCAyLjIzNi0uODk0IDEuMjcgMCAyLjA2NS44OTQuOC44OTMuNjggMi4xNWwtLjEzOSAxLjQ1MmgtMS45OWwuMTQzLTEuNDg3cS4wNDQtLjQ2LS4yNTMtLjc4Mi0uMjktLjMyOC0uNzUtLjMyOC0uNDU1IDAtLjgwNy4zMjgtLjM1Mi4zMjItLjM5Ni43ODJsLS42NyA2Ljk4OXEtLjA0My40Ni4yNDcuNzgyLjI5LjMyMS43NDQuMzIxLjQ2MSAwIC44MTMtLjMyMS4zNTktLjMyMS40MDMtLjc4MmwuMTY4LTEuNzUyaDEuOTlsLS4xNyAxLjc3M3EtLjEyMiAxLjI3LTEuMSAyLjE1Ny0uOTc4Ljg4LTIuMjI4Ljg4em03LjE5LS4xNmgtMS45MTNsMS4yMi0xMi43MzVoMS45MTJ6bTUuNzQtMTIuNzM0bDEuNzIzIDguNTUzLjgxOC04LjU1M2gxLjkybC0xLjIxOSAxMi43MzVoLTIuMDZsLTEuODY1LTguMTU1LS43OCA4LjE1NWgtMS45MTRsMS4yMi0xMi43MzV6bTguNTMgMS45MjFoLTIuMDM5bC4xODQtMS45Mmg1Ljk5bC0uMTgzIDEuOTJIMzQuNjZMMzMuNjI1IDY4Ljg5aC0xLjkyem03LjAzIDEwLjgxM2gtMS45MTNsMS4yMi0xMi43MzVoMS45MTJ6bTcuNiAwaC01LjIzbDEuMjItMTIuNzM1aDEuOTEzbC0xLjAzNyAxMC44MjloMy4zMTZ6bTcuMjEgMGgtNS4yM2wxLjIyLTEyLjczNWgxLjkxM2wtMS4wMzcgMTAuODI5aDMuMzE2em00LjczLTIuOTJsLS43NDggMi45MjVoLTEuOTk3bDMuMzc3LTEyLjczNWgyLjY0NmwuOTEgMTIuNzM1aC0yLjAxbC0uMTc0LTIuOTI1em0xLjY2NS02Ljg5MWwtMS4xOTMgNS4wMmgxLjQyNXoiLz48L2c+PC9zdmc+\"\r\n        this._loaded = false;\r\n        let self = this;\r\n        this._finished = false;\r\n        //\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAA0CAQAAABxuOPTAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfiBAEENCBdKapvAAABjklEQVRYw+2YSxKDIAyGA6seyiXH8mgsORS7dAFpUMNDJ9CNmakFAnz8MVIswCPbkT8L7IqS4REVgSO2HKiGvQOMa+7yGbhY5XKdhFPV2ZpMLaz3gqeIPd5PeeJaWBX3qiNYqqnn7VVrPayqu/JZl3ISSWstEb2wPtDaHjLhbo4nUwunrHQUOyWN2kBFpRJ26iMjp49qgHuPTDvQKkpbW5+i1n1wa5fAijp7P21/OP+wT0Hnws3uefDUdP7pNLtY5ULgPexE4Ohr4tR31H11er322muPdqXrealWYrPrkQNQgI8ZXVDqGbt/GRh20eSp/jERz7jUQn7qe10Ut5Z+HmdTM08WsaxJx02GUMvIgabsYwMA+AIcsuqQO3vk75CRoQhnyCN5LPu5nKQUYz1G5KmPq5V9tbaWn+aKCGABnAmFonAIijPXVUtKSHXd79H9lNqIAM4AbBm7/fDJNqF8biM1W3WMx9JnA3hkRaXqdD1GQW6j1AqdMVS3zgB49FkvXT16dIaDPFaq+5kC4MwX1X+rgjIvVdUAAAAASUVORK5CYII=\";\r\n        //this.scintillaLogo.src = blob;\r\n\r\n        this.progress = 0;\r\n        this.fromProgress = 0;\r\n        this.toProgress = 0;\r\n        this.t = 0;\r\n        this.game = game;\r\n        this.nextScene = null;\r\n        this.preloadingDone = false;\r\n\r\n\r\n        let setLoadingPos = function() {\r\n            this._midPos = {x : (320 / 2), y: (240/2)};\r\n            this._barColor = '#dc30a9';\r\n            this._barPosX = 160 - (this.scintillaLogo.width * 0.3 * 0.5);\r\n            this._barPosY = 120 - 16 + (this.scintillaLogo.height * 0.3 * 0.5) + 8;\r\n            this._barPosW = this.scintillaLogo.width * 0.3;\r\n        };\r\n\r\n        this.scintillaLogo.onload = function() {\r\n            self._loaded = true;\r\n            setLoadingPos.call(self);\r\n        };\r\n\r\n        let drawFunc = function(draw) {\r\n            if (this._loaded) {\r\n                draw.imageExtra(this.scintillaLogo,160, 120-16, 0.3, 0.3, 0.5, 0.5); //131,73);\r\n    \r\n                draw.color = this._barColor;\r\n                draw.outlineRect(this._barPosX, this._barPosY, this._barPosW, 7);\r\n                draw.rect(this._barPosX + 2, this._barPosY + 2, (this._barPosW - 4) * this.progress, 3);\r\n                draw.font('Verdana', 6);\r\n                draw.text('WIP - ' + Version.VERSION, 320 - 4, 240 - 4,'#490c37','right');\r\n                \r\n                \r\n            }\r\n\r\n            //draw.outlineRect(0, 0, 320, 240, 4, 'yellow');\r\n            \r\n        };\r\n\r\n        let loadingFunc = function(dt) {\r\n\r\n            if (!this._finished) {\r\n            this.t += dt / 0.15;\r\n\r\n            if (this.t >= 1)\r\n                this.t = 1.0;\r\n\r\n            if (!this.preloadingDone)\r\n            {\r\n                let prog = this.load.progress;\r\n\r\n                if (prog >= 1.0)\r\n                    this.preloadingDone = true;\r\n\r\n                if (prog > this.progress)\r\n                {\r\n                    this.fromProgress = this.progress;\r\n                    this.toProgress = prog;\r\n                    this.t = 0;   \r\n                }\r\n\r\n                \r\n\r\n            } else {\r\n                this.wait += dt;\r\n\r\n                if (this.wait >= 1.5) {\r\n                    //this.preloadDone(TransitionBehavior.FADEIN);\r\n                    let done = () => {\r\n                        this.transition.reset();\r\n                        this.preloadDone();          \r\n                        this.ui.setSize(this.userData.ui.w, this.userData.ui.h);\r\n                        this.ui.setViewport(this.userData.vp.x, this.userData.vp.y, this.userData.vp.w, this.userData.vp.h);       \r\n                        this.ui.resolution = this.userData.res;\r\n                        this.ui.viewportOffset.set(0,0);\r\n                    };\r\n                    this.transition.in();\r\n                    this.events.subscribeOnce('transition_end', done, this);\r\n                    this._finished = true;\r\n\r\n                }\r\n            }\r\n\r\n            this.progress = MathUtils.lerp(this.fromProgress, this.toProgress, this.t);\r\n           \r\n        }\r\n        };\r\n\r\n        this.loading = loadingFunc;\r\n        this.update = loadingFunc;\r\n        this.loadingGUI = drawFunc;\r\n        this.gui = drawFunc;\r\n\r\n        this.userData = {\r\n            ui : {\r\n                w : 0,\r\n                h : 0\r\n            },\r\n            vp : {\r\n                x : 0,\r\n                y : 0,\r\n                w : 1,\r\n                h : 1,\r\n            },\r\n            res : 1\r\n        }\r\n    }\r\n\r\n    init(next) {\r\n\r\n        this.userData.ui.w = this.ui.width;\r\n        this.userData.ui.h = this.ui.height;\r\n        this.userData.vp.x = this.ui.viewport.x;\r\n        this.userData.vp.y = this.ui.viewport.y;\r\n        this.userData.vp.w = this.ui.viewport.width;\r\n        this.userData.vp.h = this.ui.viewport.height;\r\n        this.userData.res = this.ui.resolution;\r\n\r\n        this.nextScene = next;\r\n        this.wait = 0;\r\n        this.t = 0;\r\n        this.progress = 0;\r\n        this.preloadingDone = false;\r\n        this.ui.setSize(320, 240);\r\n        this.ui.setViewportByAspectRatio(1.33333333333);\r\n        this.transition.settings.setInDuration(0.35);\r\n        \r\n    }\r\n\r\n    start() {\r\n        //this.progress = 1;\r\n    }\r\n\r\n}","import UnjectSystems from \"../../core/system/components/UnjectSystems\";\r\nimport ClearAudioSources from \"../../audio/manager/components/ClearAudioSources\";\r\nimport ClearEntities from \"../../entities/hierarchy/ClearEntities\";\r\nimport ResetKeyboard from \"../../input/keyboard/components/ResetKeyboard\";\r\n\r\nexport default function ClearScene(game, sceneManager) {\r\n\r\n    if (sceneManager.currentScene !== null && sceneManager.currentScene !== undefined)\r\n    {\r\n  \r\n      //game.system.unject(sceneManager.currentScene);\r\n      UnjectSystems(sceneManager.currentScene);\r\n\r\n      if (sceneManager.onDestroyCallback)\r\n      {\r\n        sceneManager.onDestroyCallback.call(sceneManager.currentScene);\r\n      }\r\n  \r\n      if (sceneManager._clearCache)\r\n      {\r\n        game.cache.clear();\r\n      }\r\n\r\n      ClearEntities(game.system.entityList, game);\r\n      ResetKeyboard.call(game.input.keyboard);\r\n      ClearAudioSources.call(game.audio);\r\n\r\n    }\r\n\r\n}","import Scene from \"../Scene\";\r\nimport Extend from '../../utils/object/Extend';\r\n\r\nexport default function CreateSceneFrom(value, sceneName) {\r\n\r\n    if (value === undefined) {\r\n        throw new Error(\"SceneManager.add: Could not add Scene. \\'scene\\' is undefined.\");\r\n    }\r\n\r\n    if (value === null) {\r\n        throw new Error(\"SceneManager.add: Could not add Scene. \\'scene\\' is null.\");\r\n    }\r\n\r\n    var newScene;\r\n\r\n    if (value instanceof Scene) {\r\n      newScene = scene;\r\n    } else if (typeof value === Scene) {\r\n      newScene = new value();\r\n    } else if (typeof value === 'object') {\r\n        let placeholder = new Scene(sceneName);\r\n        newScene = Extend(placeholder, value);\r\n    } else if (typeof value === 'function') {\r\n        let placeholder = new value();\r\n\r\n        if (value instanceof Scene) {\r\n            newScene = placeholder;\r\n        } else {\r\n            if (placeholder.name === undefined) {\r\n                placeholder.name = sceneName;\r\n            }\r\n            newScene = Extend(true, placeholder, Scene);\r\n            \r\n        }\r\n    }\r\n\r\n    return newScene;\r\n}","import startScene from \"./startScene\";\r\nimport TransitionBehavior from \"../../render/transition/TranstionBehavior\";\r\n\r\nexport default function PostPreloadingScene(sceneManger, transition) {\r\n\r\n    if (transition === undefined) transition = TransitionBehavior.NONE;\r\n\r\n    sceneManger._scintillaLoading = false;\r\n    sceneManger._transition = transition;\r\n\r\n    if (sceneManger.currentScene === undefined || sceneManger.currentScene === null) return;\r\n\r\n    startScene.call(sceneManger);\r\n\r\n    // function start() {\r\n\r\n    //     this._isTransitioning = false;\r\n\r\n    //     if (this.onStartCallback) {\r\n    //         this.onStartCallback.call(this.currentScene, this.game);\r\n    //     }\r\n    // }\r\n\r\n    // if (transition <= TransitionBehavior.NONE) {\r\n    //     start.call(sceneManger);\r\n    // } else {\r\n\r\n    //     TransitionBetweenScenes(sceneManger, start.bind(sceneManger));\r\n    // }\r\n}","import SetupScene from \"./SetupScene\";\r\nimport PreloadSceneComplete from \"./PreloadSceneComplete\";\r\nimport ClearScene from \"./ClearScene\";\r\nimport StartLoadAssets from \"../../loader/components/StartLoadAssets\";\r\n\r\nexport default function PreUpdateScene(sceneManager) {\r\n\r\n    if (!sceneManager.game.systemInited || sceneManager._changeScene === null)\r\n      return;\r\n\r\n\r\n      ClearScene(sceneManager.game, sceneManager);\r\n\r\n      SetupScene.call(sceneManager, sceneManager._changeScene);\r\n\r\n      if (sceneManager._currentSceneName !== sceneManager._changeScene)\r\n      {\r\n          return;\r\n      }\r\n      else\r\n      {\r\n        sceneManager._changeScene = null;\r\n      }\r\n\r\n      if (sceneManager.onPreloadCallback) {\r\n\r\n        sceneManager.game.system.load.reset();\r\n        sceneManager.onPreloadCallback.call(sceneManager.currentScene, sceneManager.game);\r\n\r\n         // should we run the loading screen\r\n        let bothIsNull = (sceneManager.onLoadingCallback === null && sceneManager.onLoadingRenderCallback === null);\r\n\r\n       \r\n        if (sceneManager.onLoadingCallback === null || sceneManager.onLoadingRenderCallback === null)\r\n        {\r\n          if (bothIsNull && sceneManager.game.system.load.totalQueuedFiles > 0)\r\n          {\r\n            sceneManager._loadingPlaceHolder.init(sceneManager.currentScene);\r\n            sceneManager._scintillaLoading = true;\r\n          } else {\r\n            sceneManager._scintillaLoading = false;\r\n          }\r\n        }\r\n\r\n        if (sceneManager.game.system.load.totalQueuedFiles === 0)\r\n        {\r\n          PreloadSceneComplete.call(sceneManager);\r\n\r\n        } else {\r\n\r\n            //sceneManager.game.system.load.start();\r\n            StartLoadAssets.call(sceneManager.game.system.load);\r\n        }\r\n\r\n      } else {\r\n\r\n        PreloadSceneComplete.call(sceneManager);\r\n      }\r\n}","import startScene from \"./startScene\";\r\n\r\n\r\nexport default function PreloadSceneComplete() {\r\n\r\n      if (this._setup === false && this.onLoadingCallback) {\r\n          this.onLoadingCallback.call(this.currentScene, this.game);\r\n      }\r\n\r\n\r\n      startScene.call(this);\r\n\r\n\r\n    //   const start = () => {\r\n    //     if (this._scintillaLoading) {\r\n    //       this._loadingPlaceHolder.start();\r\n    //     } else {\r\n\r\n    //       if (this.onPostloadCallback) {\r\n    //         this.onPostloadCallback.call(this.currentScene);\r\n    //       }\r\n\r\n    //       if (this.onStartCallback) {\r\n    //         this.onStartCallback.call(this.currentScene, this.game);\r\n    //       }\r\n    //     }\r\n    // }\r\n\r\n    // if (this._transition <= TransitionBehavior.NONE) {\r\n    //     start.call(this);\r\n    // } else {\r\n    //     TransitionBetweenScenes(this, start.bind(this));\r\n    // }\r\n\r\n      this._setup = true;\r\n\r\n      \r\n\r\n}","\r\nexport default function RenderScene(sceneManager, drawer) {\r\n\r\n    if (sceneManager._setup) {\r\n\r\n        if (sceneManager._scintillaLoading) {\r\n            sceneManager._loadingPlaceHolder.gui(drawer);\r\n        } else {\r\n        if (sceneManager.onRenderCallback)\r\n            sceneManager.onRenderCallback.call(sceneManager.currentScene, drawer);\r\n        \r\n        }\r\n    } else {\r\n        if (sceneManager._scintillaLoading) {\r\n            sceneManager._loadingPlaceHolder.loadingGUI(drawer);\r\n        } else {\r\n            if (sceneManager.onLoadingRenderCallback)\r\n                sceneManager.onLoadingRenderCallback.call(sceneManager.currentScene, drawer);\r\n            \r\n        }\r\n    }\r\n\r\n}","import TransitionBehavior from \"../../render/transition/TranstionBehavior\";\r\n\r\n\r\nexport default function SetScene(manager, sceneName, clearCache, type) {\r\n\r\nif (!manager._scenes.has(sceneName))\r\n    throw new Error('SceneManager.set: Scene \\'' + sceneName + '\\' does not exist.')\r\n\r\n  if (clearCache === undefined) { clearCache = false; }\r\n  if (type === undefined) {type = TransitionBehavior.NONE;}\r\n\r\n  manager._transition = type;\r\n  manager._changeScene = sceneName;\r\n  manager._clearCache = clearCache;\r\n\r\n  return manager;\r\n  \r\n}","import InjectSystems from \"../../core/system/components/InjectSystems\";\r\n\r\n  export default function SetupScene(sceneName) {\r\n\r\n    this.currentScene = this._scenes.get(sceneName);\r\n  \r\n    this.onLoadingCallback = this.currentScene['loading'] || null;\r\n    this.onLoadingRenderCallback = this.currentScene['loadingGUI'] || null;\r\n    this.onRenderCallback = this.currentScene['gui'] || null;\r\n    this.onUpdateCallback = this.currentScene['update'] || null;\r\n    this.onStartCallback = this.currentScene['start'] || null;\r\n    this.onPreloadCallback = this.currentScene['preload'] || null;    \r\n    this.onPostloadCallback = this.currentScene['postload'] || null;    \r\n    this.onDestroyCallback = this.currentScene['destroy'] || null;\r\n    \r\n  \r\n    InjectSystems(this.game, this.currentScene);\r\n    //this.game.system.inject(this.currentScene);\r\n  \r\n    this._currentSceneName = sceneName;\r\n  \r\n    this._setup = false;\r\n  \r\n}","import TransitionBehavior from \"../../render/transition/TranstionBehavior\";\r\n\r\nexport default function TransitionBetweenScenes(sceneManager, delegate) {\r\n\r\n    const transit = sceneManager._transition;\r\n\r\n    sceneManager.game.system.transition.by(transit);\r\n    if (transit === TransitionBehavior.FADEINOUT)\r\n    {\r\n        sceneManager.game.system.events.subscribeOnce('transition_pause_end', delegate);\r\n    } else {\r\n        sceneManager.game.system.events.subscribeOnce('transition_end', delegate);\r\n    }\r\n    sceneManager._transition = TransitionBehavior.NONE;\r\n    sceneManager._isTransitioning = true;\r\n\r\n}","\r\nexport default function UpdateScene(sceneManager, deltaTime) {\r\n\r\n    if (sceneManager._setup) {\r\n\r\n        if (sceneManager._scintillaLoading) {\r\n\r\n            sceneManager._loadingPlaceHolder.update(deltaTime);\r\n\r\n        } else {\r\n            if (sceneManager.onUpdateCallback)\r\n                sceneManager.onUpdateCallback.call(sceneManager.currentScene, deltaTime);\r\n        }\r\n    } else {\r\n        if (sceneManager._scintillaLoading) {\r\n\r\n            sceneManager._loadingPlaceHolder.loading(deltaTime);\r\n\r\n        } else {\r\n\r\n            if (sceneManager.onLoadingCallback)\r\n                sceneManager.onLoadingCallback.call(sceneManager.currentScene, deltaTime);\r\n        }\r\n    }\r\n\r\n}","import TransitionBetweenScenes from \"./TransitionBetweenScenes\";\r\nimport TransitionBehavior from \"../../render/transition/TranstionBehavior\";\r\n\r\n\r\n\r\n/**\r\n * @this SceneManager\r\n */\r\nfunction startScene() {\r\n\r\n  const start = () => {\r\n\r\n    if (this._scintillaLoading) {\r\n      this._loadingPlaceHolder.start();\r\n    } else {\r\n  \r\n      this._isTransitioning = false;\r\n  \r\n      if (this.onPostloadCallback) {\r\n        this.onPostloadCallback.call(this.currentScene);\r\n      }\r\n  \r\n      if (this.onStartCallback) {\r\n        this.onStartCallback.call(this.currentScene, this.game);\r\n      }\r\n    }\r\n  \r\n  };\r\n\r\n  if (this._transition <= TransitionBehavior.NONE) {\r\n    start();\r\n  } else {\r\n      TransitionBetweenScenes(this, start);\r\n  }\r\n\r\n}\r\n\r\nexport default startScene;","\r\nmodule.exports = {\r\n    State : require('./SceneState'),\r\n    Scene : require('./Scene'),\r\n    SceneManager : require('./SceneManager')    \r\n};","\r\nimport MergeSort from './useful/MergeSort'\r\n\r\nexport default class DataList\r\n{\r\n    constructor(elements, unique)\r\n    {\r\n        this.unique = unique || true;\r\n        this.childs = [];\r\n\r\n        if (elements !== null && Array.isArray(elements))\r\n        {\r\n            for (let i = 0; i < elements.length; i++)\r\n                this.push(elements[i]);\r\n        }\r\n\r\n    }\r\n\r\n    get size() {return this.childs.length;}\r\n    get length() {return this.childs.length;}\r\n\r\n    first() {\r\n        if (this.childs.length > 0) \r\n            return this.childs[0];\r\n        else\r\n            return null;\r\n        \r\n    }\r\n\r\n    last() {\r\n          if (this.childs.length > 0) {\r\n            let idx = this.childs.length - 1;\r\n            return this.childs[idx];\r\n          } else\r\n            return null;\r\n    }\r\n\r\n    push(child) {\r\n\r\n        if (this.unique) {\r\n            if (this.indexOf(child) === -1)\r\n                this.childs.push(child);\r\n        } else {\r\n            this.childs.push(child);\r\n        }\r\n\r\n        return child;\r\n    }\r\n\r\n    pushFront(child) {\r\n        if (this.unique) {\r\n            if (this.indexOf(child) === -1)\r\n                this.childs.unshift(child);\r\n        } else {\r\n            this.childs.unshift(child);\r\n        }\r\n        return child;\r\n    }\r\n\r\n    insert(child, index) {\r\n\r\n        if (index === undefined) \r\n            index = 0;\r\n\r\n        if (this.childs.length === 0) \r\n            return this.push(child);\r\n\r\n        if (index >= 0 && index <= this.childs.length) {\r\n        \r\n            if (this.unique) {\r\n                if (this.indexOf(child) === -1) \r\n                    this.childs.splice(index, 0, child);\r\n            } else {\r\n                this.childs.splice(index, 0, child);\r\n            }\r\n            \r\n        }\r\n\r\n        return child;\r\n    \r\n    }\r\n\r\n    indexOf(child) {\r\n        return this.childs.indexOf(child);\r\n    }\r\n\r\n    get(index) {\r\n        return  this.childs[index];\r\n    }\r\n\r\n    at(index) {\r\n        return this.childs[index];\r\n    }\r\n\r\n    erase(child) {\r\n\r\n        let idx = this.childs.indexOf(child);\r\n        var childToErase = null;\r\n\r\n        if (idx !== -1)\r\n            childToErase = this.childs.splice(idx, 1);\r\n        \r\n        return childToErase;\r\n    }\r\n\r\n    eraseAt(index) {\r\n        let child = this.childs[index];\r\n\r\n        if (child)\r\n            this.childs.splice(index, 1);\r\n\r\n        return child;\r\n    }\r\n\r\n    eraseList(listToRemove, size, destroy){\r\n\r\n        if (destroy === undefined) destroy = false;\r\n\r\n        if (Array.isArray(listToRemove)) {\r\n            if (size === undefined) size = listToRemove.length;\r\n\r\n            for (let i = 0; i < size; i++)\r\n            {\r\n                let child = listToRemove[i];\r\n                this.erase(child);           \r\n            }\r\n\r\n        } else {\r\n            if (size === undefined) size = listToRemove.size;\r\n\r\n            for (let i = 0; i < size; i++)\r\n            {\r\n                let child = listToRemove.childs[i];\r\n                this.erase(child);           \r\n            }\r\n        }        \r\n    }\r\n\r\n    eraseIndexedList(listToRemove) {\r\n\r\n        let size = listToRemove.length;\r\n\r\n        if (Array.isArray(listToRemove)) {\r\n            \r\n            for (let i = 0; i < size; i++)\r\n            {\r\n                let index = listToRemove[i];\r\n                this.eraseAt(index);   \r\n            }\r\n\r\n        } else {\r\n            for (let i = 0; i < size; i++)\r\n            {\r\n                let index = listToRemove.childs[i];\r\n                this.eraseAt(index);           \r\n            }\r\n        }\r\n        return this;\r\n    }\r\n\r\n    pop() {\r\n        return this.childs.pop();\r\n    }\r\n\r\n    popFront() {\r\n        return this.childs.shift();\r\n    }\r\n\r\n    has(child) {\r\n        return (this.childs.indexOf(child) > -1);\r\n    }\r\n\r\n    hasAt(index) {\r\n        return this.childs[index] !== undefined;\r\n    }\r\n\r\n    empty() {\r\n        return (this.childs.length === 0);\r\n    }\r\n\r\n    clear() {\r\n        /*let i = this.childs.length;\r\n\r\n        while(i--) {\r\n            this.erase(this.childs[i]);\r\n        }*/\r\n\r\n        this.childs.length = 0;\r\n\r\n        return this;\r\n    }\r\n\r\n    splice(start, count, items) {\r\n        if (items === undefined)\r\n        return this.childs.splice(start, count);\r\n        else \r\n        return this.childs.splice(start, count, items);\r\n    }\r\n\r\n    destroy() {\r\n        this.clear();\r\n        this.childs = [];\r\n        this.parent = null;\r\n    }\r\n\r\n    concat(otherList, clearOther) {\r\n        if (clearOther === undefined) clearOther = false;\r\n\r\n        if (clearOther) {\r\n            this.childs = this.childs.concat(otherList.childs.splice(0));\r\n        } else {\r\n            this.childs = this.childs.concat(otherList.childs);\r\n        }\r\n\r\n        \r\n        return this;\r\n    }\r\n\r\n    each(callback, context, ...args) {\r\n        //let params = [];\r\n\r\n        let content = this.childs;\r\n        let r;\r\n        // let istart = (context === undefined) ? 1 : 2;\r\n\r\n        // for (let i = istart; i < arguments.length; i++)\r\n        //     params.push(arguments[i]);\r\n\r\n        for (let i = 0; i < content.length; i++) {\r\n\r\n            if (context === undefined) {\r\n                r = callback(content[i], i, args);\r\n            } else { \r\n                r = callback.call(context, content[i], i, args);\r\n            }\r\n\r\n            if (r !== undefined) {\r\n                return r;\r\n            }\r\n           //break;\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    sort(predicate) {\r\n        if (predicate === undefined) return;\r\n        return MergeSort(this.childs, predicate);\r\n        \r\n        //childs.sort(predicate);\r\n    }\r\n\r\n    find(predicate) {\r\n        if (predicate === undefined) return;\r\n\r\n        let size = this.childs.length;\r\n\r\n        for (let i = 0; i < size; i++) {\r\n            if (predicate(this.childs[i])) {\r\n                return this.childs[i];\r\n            }\r\n        }\r\n    \r\n        return null;\r\n      }\r\n\r\n    swap(childA, childB) {\r\n\r\n        if (childA === childB)\r\n            return;\r\n\r\n        let idx0 = this.indexOf(childA);\r\n        let idx1 = this.indexOf(childB);\r\n\r\n        if (idx0 < 0 || idx1 < 0) {\r\n            throw new Error('DataList.swap: Could not swap childrens. The objects are not in the list.');\r\n        }\r\n\r\n        this.list[idx0] = childA;\r\n        this.list[idx1] = childB;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    swapByIndex(indexA, indexB) {\r\n        if (indexA === indexB)\r\n            return;\r\n\r\n        var cA = this.at(indexA);\r\n        var cB = this.at(indexB);\r\n\r\n        if (cA === undefined || cB === undefined) {\r\n            throw new Error('DataList.swapByIndex: Could not swap childrens by index. The objects are not in the list.');\r\n        }\r\n\r\n        this.list[indexA] = cA;\r\n        this.list[indexB] = cB;\r\n\r\n        return this;\r\n    }\r\n\r\n    reverse() {\r\n        this.childs.reverse();\r\n        return this;\r\n    }\r\n\r\n    content() {\r\n        return this.childs;\r\n    }\r\n\r\n\r\n    \r\n}","// DataMap simple class\r\nexport default class DataMap {\r\n\r\n  constructor() {\r\n    this._content = {};\r\n    this._size = 0;\r\n  }\r\n\r\n  get size() {\r\n    return this._size;\r\n  }\r\n\r\n  /* \r\n  Add or set value to the map\r\n  key = keyName\r\n  value = value\r\n  */\r\n  set(key, value) {\r\n    return this.insert(key, value);\r\n\r\n  }\r\n\r\n  insert(key, value) {\r\n     if (!this.has(key)) {\r\n      this._size++;\r\n    }\r\n\r\n    this._content[key] = value;\r\n\r\n    return this;\r\n  }\r\n\r\n  get(key) {\r\n\r\n    if (key === undefined) return null;\r\n\r\n    if (this.has(key)) {\r\n      return this._content[key];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  at(index) {\r\n    let n = 0;\r\n    for (let key in this._content) {\r\n      if (index === n) {\r\n        return this._content[key];\r\n      }\r\n      n++;\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  has(key) {\r\n    return this._content.hasOwnProperty(key);\r\n  }\r\n\r\n  contains(value) {\r\n    for (let key in this._content) {\r\n      if (entries[key] === value) {\r\n        return true;\r\n      } else\r\n        continue;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  keys() {\r\n    return Object.keys(this._content);\r\n  }\r\n\r\n  values() {\r\n    var values = [];\r\n    var content = this._content;\r\n\r\n    for (var key in content)\r\n      values.push(entries[key]);\r\n\r\n    return values;\r\n  }\r\n\r\n  remove(key) {\r\n\r\n    if (!this.has(key))\r\n      return null;\r\n\r\n    var prop = this._content[key];\r\n    delete this._content[key];\r\n    this._size--;\r\n    return prop;\r\n\r\n  }\r\n\r\n  erase(key) {\r\n\r\n    if (!this.has(key))\r\n      return null;\r\n\r\n    let content = this._content[key];\r\n    delete this._content[key];\r\n    this._size--;\r\n\r\n    return content;\r\n  }\r\n\r\n  /*eraseAt(key) {\r\n\r\n    //if (!this.hasTagInKey(key))\r\n    //  return false;\r\n      this._size--;\r\n     delete this._content[key];\r\n\r\n  }*/\r\n\r\n  eraseList(listToRemove) {\r\n\r\n    if (listToRemove === undefined) return this;\r\n\r\n    let size = listToRemove.length;\r\n\r\n    if (Array.isArray(listToRemove)) {\r\n\r\n      for (let i = 0; i < size; i++) {\r\n        let index = listToRemove[i];\r\n        this.erase(index);\r\n      }\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /*deleteByIndexedArray(array) {\r\n    for (let i = 0; i < array.length; i++) {\r\n      delete this._content[array[i]];\r\n      this._size--;\r\n    }\r\n\r\n  }*/\r\n\r\n  clear() {\r\n\r\n    for (let property in this._content)\r\n      delete this._content[property];\r\n\r\n\r\n    this._size = 0;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  slowSize() {\r\n    return Object.keys(_contents).length;\r\n  }\r\n\r\n  each(callback, context) {\r\n    let content = this._content;\r\n    let r;\r\n    if (context === undefined) {\r\n      for (let property in content) {\r\n        r = callback(property, content[property]);\r\n        if (r !== undefined)\r\n          break;\r\n      }\r\n    } else {\r\n      for (let property in content) {\r\n        r = callback.call(context, property, content[property]);\r\n        if (r !== undefined)\r\n          break;\r\n      }\r\n    }\r\n\r\n    return r;\r\n  }\r\n\r\n  find(predicate) {\r\n\r\n    if (predicate === undefined)\r\n      return;\r\n\r\n    let content = this._content;\r\n\r\n    for (let property in content) {\r\n\r\n      if (predicate(property, content[property])) {\r\n        return content[property];\r\n      }\r\n\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n\r\n\r\n}","import MergeSort from \"./useful/MergeSort\";\r\n\r\n\r\nexport default class DataSet {\r\n\r\n    constructor(elements) {\r\n        this._content = [];\r\n        this._size = 0;\r\n\r\n        if (Array.isArray(elements))\r\n        {\r\n            for (let i = 0; i < elements.length; i++)\r\n                this.insert(elements[i]);\r\n        }\r\n\r\n    }\r\n\r\n    get size () { return this._content.length; }\r\n    get length () { return this._content.length; }\r\n\r\n    insert(value) {\r\n        if (this._content.indexOf(value) === -1)\r\n            this._content.push(value);\r\n\r\n        return this;\r\n    }\r\n\r\n    get(value) {\r\n        let index = this._content.indexOf(value);\r\n        if (index > -1)\r\n        {\r\n            return this._content[index];\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    at(index) {\r\n        return this._content[index];\r\n    }\r\n\r\n    has(value) {\r\n        return (this._content.indexOf(value) > -1);\r\n    }\r\n\r\n    erase(value) {\r\n        var idx = this._content.indexOf(value);\r\n\r\n        if (idx > -1)\r\n            this._content.splice(idx, 1);\r\n\r\n        return this;\r\n    }\r\n\r\n    clear() {\r\n        this._content.length = 0;\r\n        return this;\r\n    }\r\n\r\n    each(callback, context) {\r\n        var content = this._content.slice();\r\n        var size = content.length;\r\n        var i;\r\n\r\n        if (context)\r\n        {\r\n            for (i = 0; i < size; i++)\r\n            {\r\n                if (callback.call(context, content[i], i) === false)\r\n                    break;                \r\n            }\r\n        } else {\r\n            for (i = 0; i < size; i++)\r\n            {\r\n                if (callback(content[i], i) === false)\r\n                    break;                \r\n            }\r\n        }\r\n\r\n      return this;\r\n    }\r\n\r\n    sort(predicate) {\r\n        if (predicate === undefined) return;\r\n        return MergeSort(this._content, predicate);\r\n    }\r\n\r\n   content() {\r\n       return this._content;\r\n   }\r\n\r\n}\r\n","\r\nexport const Utils = require('./useful');\r\nexport const Set = require('./Set').default;\r\nexport const Map = require('./Map').default;\r\nexport const List = require('./List').default;\r\n    ","\r\n// http://www.stoimen.com/blog/2010/07/02/friday-algorithms-javascript-merge-sort/\r\n// https://codereview.stackexchange.com/questions/87000/fast-merge-sort-in-javascript\r\nexport default function MergeSort(array, predicate)\r\n{\r\n    var size = array.length;\r\n\r\n    if (size < 2)\r\n        return array;\r\n\r\n    if (predicate === undefined)\r\n    {\r\n        predicate = function (a, b) {\r\n            return a < b ? -1 : a === b ? 0 : 1;\r\n        };\r\n    }\r\n\r\n\r\n    /*function merge(left, right)\r\n    {\r\n        var result = [];\r\n \r\n        while (left.length && right.length) {\r\n            if (left[0] <= right[0]) {\r\n                result.push(left.shift());\r\n            } else {\r\n                result.push(right.shift());\r\n            }\r\n        }\r\n     \r\n        while (left.length)\r\n            result.push(left.shift());\r\n     \r\n        while (right.length)\r\n            result.push(right.shift());\r\n     \r\n        return result;\r\n    }*/\r\n\r\n    function merge (begin, begin_right, end) {\r\n        // Create a copy of the left and right halves.\r\n        let left_size = begin_right - begin;\r\n        let right_size = end - begin_right;\r\n        let left = array.slice(begin, begin_right);\r\n        let right = array.slice(begin_right, end);\r\n        // Merge left and right halves back into original array.\r\n        let i = begin, j = 0, k = 0;\r\n        while (j < left_size && k < right_size)\r\n            if (predicate(left[j], right[k]) <= 0)\r\n                array[i++] = left[j++];\r\n            else\r\n                array[i++] = right[k++];\r\n        // At this point, at least one of the two halves is finished.\r\n        // Copy any remaining elements from left array back to original array.\r\n        while (j < left_size) \r\n            array[i++] = left[j++];\r\n        // Copy any remaining elements from right array back to original array.\r\n        while (k < right_size) \r\n            array[i++] = right[k++];\r\n\r\n        return array;\r\n    }\r\n\r\n    function msort(start, end)\r\n    {\r\n        let len = end - start;\r\n\r\n        if (len < 2)\r\n            return;\r\n\r\n        let mid = start + (len >>> 1);\r\n        //let left = list.slice(start, mid);\r\n        //let right = list.slice(mid, end);\r\n        msort(start, mid);\r\n        msort(mid, end);\r\n        return merge(start, mid, end);\r\n        \r\n    }\r\n\r\n    //let mid = 0 + (size >>> 1);\r\n\r\n    return msort(0,size);//mid,size);\r\n\r\n    \r\n}\r\n","\r\nmodule.exports = {\r\n    MergeSort : require('./MergeSort')\r\n}","export default function DetectAudioFeatures(browser) {\r\n\r\n    let audioFeatures = {\r\n        webAudio: false,\r\n        audioData: false,\r\n        format: {\r\n            ogg: false,\r\n            mp3: false,\r\n            wav: false,\r\n            webm: false,\r\n            dolby: false,\r\n            opus: false,\r\n        }\r\n    };\r\n\r\n    audioFeatures.audioData = !!(window['Audio']);\r\n    audioFeatures.webAudio = !!(window['AudioContext'] || window['webkitAudioContext']);\r\n\r\n    // test if we can play audio in the current document\r\n    // Edge:\r\n    // dolby: true\r\n    // m4a: true\r\n    // mp3: true\r\n    // ogg: false\r\n    // opus: false\r\n    // wav: true\r\n    // webm: false\r\n\r\n    let element = document.createElement('audio');\r\n    let result = !!element.canPlayType;\r\n\r\n    if (result) {\r\n\r\n        try {\r\n            if (element.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''))\r\n                audioFeatures.format.ogg = true;\r\n\r\n            if (element.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, '') || element.canPlayType('audio/opus;').replace(/^no$/, ''))\r\n                audioFeatures.format.opus = true;\r\n\r\n            if (element.canPlayType('audio/mpeg;').replace(/^no$/, ''))\r\n                audioFeatures.format.mp3 = true;\r\n\r\n            //  Mimetypes accepted:\r\n            //  developer.mozilla.org/En/Media_formats_supported_by_the_audio_and_video_elements\r\n            //  bit.ly/iphoneoscodecs\r\n            if (element.canPlayType('audio/wav; codecs=\"1\"').replace(/^no$/, ''))\r\n                audioFeatures.format.wav = true;\r\n\r\n            if (element.canPlayType('audio/x-m4a;') || element.canPlayType('audio/aac;').replace(/^no$/, ''))\r\n                audioFeatures.format.m4a = true;\r\n\r\n            if (element.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, ''))\r\n                audioFeatures.format.webm = true;\r\n\r\n            if (element.canPlayType('audio/mp4;codecs=\"ec-3\"') !== '') {\r\n                if (browser.manufacturer.edge) {\r\n                    audioFeatures.format.dolby = true;\r\n                } else if (browser.manufacturer.safari && browser.version >= 9) {\r\n                    if ((/Mac OS X (\\d+)_(\\d+)/).test(navigator.userAgent)) {\r\n                        var major = parseInt(RegExp.$1, 10);\r\n                        var minor = parseInt(RegExp.$2, 10);\r\n\r\n                        if ((major === 10 && minor >= 11) || major > 10) {\r\n                            audioFeatures.format.dolby = true;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            \r\n        } catch (exception) {\r\n\r\n        }\r\n    }\r\n\r\n\r\n\r\n    return audioFeatures;\r\n}","\r\nexport default function DetectBrowser(userAgent) {\r\n\r\n    let browser = {\r\n        name : undefined,\r\n        version : 0,\r\n        manufacturer : {\r\n            firefox : false,\r\n            opera : false,\r\n            ie : false,\r\n            edge : false,\r\n            chrome : false,\r\n            blink : false,\r\n            safari : false,\r\n            silk : false\r\n        }\r\n    };\r\n\r\n    /// MAYBE IS BETTER TODO WITH REGEX\r\n\r\n    // Opera 8.0+\r\n    browser.manufacturer.opera = (!!window.opr && !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;\r\n\r\n    // Firefox 1.0+\r\n    browser.manufacturer.firefox = typeof InstallTrigger !== 'undefined';\r\n\r\n    // Safari 3.0+ \"[object HTMLElementConstructor]\" \r\n    browser.manufacturer.safari = /constructor/i.test(window.HTMLElement) || (function (p) { return p.toString() === \"[object SafariRemoteNotification]\"; })(!window['safari'] || safari.pushNotification);\r\n\r\n    // Internet Explorer 6-11\r\n    browser.manufacturer.ie = /*@cc_on!@*/false || !!document.documentMode;\r\n\r\n    // Edge 20+\r\n    browser.manufacturer.edge = !browser.manufacturer.edge && !!window.StyleMedia;\r\n\r\n    // Chrome 1+\r\n    browser.manufacturer.chrome = !!window.chrome && !!window.chrome.webstore;\r\n\r\n    // Blink engine detection\r\n    browser.manufacturer.blink = (browser.manufacturer.chrome ||  browser.manufacturer.opera) && !!window.CSS;\r\n\r\n    /// GET VERSION\r\n\r\n    let pattern = /(\\w+)(?:\\D+|\\/)?((\\d+)?\\.?(\\d+)?)?;?/;\r\n    let match = pattern.exec(userAgent);\r\n    let version = 0;\r\n\r\n    browser.name = match[0];\r\n\r\n    if (match[1] !== undefined)\r\n        version = parseInt(match[1], 10);\r\n\r\n    browser.version = version;\r\n    \r\n\r\n    return browser;\r\n\r\n} ","export default function DetectFullscreen() {\r\n\r\n    // https://developer.mozilla.org/en-US/docs/Web/API/Fullscreen_API\r\n\r\n\r\n    let fullscreenFeature = {\r\n        available: false,\r\n        cancel: '',\r\n        //keyboard: false,\r\n        request: ''\r\n    };\r\n\r\n    let vendorsActiveFullscreen = [\r\n        'requestFullscreen',\r\n        'requestFullScreen',\r\n        'webkitRequestFullscreen',\r\n        'webkitRequestFullScreen',\r\n        'msRequestFullscreen',\r\n        'msRequestFullScreen',\r\n        'mozRequestFullScreen',\r\n        'mozRequestFullscreen'\r\n    ];\r\n\r\n\r\n    let tempElement = document.createElement('div');\r\n\r\n    for (let i = 0; i < vendorsActiveFullscreen.length; i++) {\r\n        if (tempElement[vendorsActiveFullscreen[i]]) {\r\n            fullscreenFeature.available = true;\r\n            fullscreenFeature.request = vendorsActiveFullscreen[i];\r\n            break;\r\n        }\r\n    }\r\n\r\n    if (fullscreenFeature.available) {\r\n\r\n        let vendorsCancelFullscreen = [\r\n            'cancelFullScreen',\r\n            'exitFullscreen',\r\n            'webkitCancelFullScreen',\r\n            'webkitExitFullscreen',\r\n            'msCancelFullScreen',\r\n            'msExitFullscreen',\r\n            'mozCancelFullScreen',\r\n            'mozExitFullscreen'\r\n        ];\r\n\r\n        for (let i = 0; i < vendorsCancelFullscreen.length; i++) {\r\n            if (document[vendorsCancelFullscreen[i]]) {\r\n                fullscreenFeature.cancel = vendorsCancelFullscreen[i];\r\n                break;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    return fullscreenFeature;\r\n\r\n}","\r\nexport default function DetectOS(userAgent) {\r\n\r\n    let silk = (/Silk/).test(userAgent);\r\n\r\n    // name, deviceType\r\n    let info = { \r\n        name: undefined, // pretty name\r\n        mobile: false, // is mobile\r\n        desktop: false, // is desktop\r\n        os : {  // operational system\r\n            windows : false,\r\n            windowsPhone : false,\r\n            macOS : false,\r\n            linux : false,\r\n            android : false,\r\n            iOS : false,\r\n            chromeOS : false,\r\n            kindle : false,\r\n        },\r\n        environment : { // environment\r\n            node : false,\r\n            electron : false,\r\n            cordova : false,\r\n            nodewebkit : false,\r\n            cocoonJS : false,\r\n            cocoonApp : false,\r\n            ejecta : false\r\n        }\r\n    };\r\n\r\n    if (/Windows/.test(userAgent)) {\r\n        info.name = 'Windows';\r\n        info.os.windows = true;\r\n    } else if (/Mac OS/.test(userAgent))  {\r\n        info.name = 'MacOS';\r\n        info.os.macOS = true;\r\n    }  else if (/Linux/.test(userAgent))  {\r\n        info.name = 'Linux';\r\n        info.os.linux = true;\r\n    } else if (/Android/.test(userAgent)) {\r\n        info.name = 'Android';\r\n        info.os.android = true;\r\n    } else if (/iP[ao]d|iPhone/i.test(userAgent)) {\r\n        info.name = 'iOS';\r\n        info.os.iOS = true;\r\n    } else if (/Kindle/.test(userAgent) || (/\\bKF[A-Z][A-Z]+/).test(userAgent) || (/Silk.*Mobile Safari/).test(userAgent)) {\r\n        info.name = \"Kindle\";\r\n        info.os.kindle = true;\r\n      \r\n    } else if (/CrOS/.test(userAgent)) {\r\n        info.name = 'ChromeOS';\r\n        info.os.chromeOS = true;\r\n    }\r\n\r\n    if (/Windows Phone/i.test(userAgent) || (/IEMobile/i).test(userAgent)) {\r\n        info.name = 'Windows Phone';\r\n        info.os.android = false;\r\n        info.os.iOS = false;\r\n        info.os.macOS = false;\r\n        info.os.windows = true;\r\n        info.os.windowsPhone = true;\r\n    }\r\n\r\n    if (info.os.windows || info.os.macOS || (info.os.linux && !silk) || info.os.chromeOS) {\r\n        info.desktop = true;\r\n        info.mobile = false;\r\n    }\r\n\r\n    if (info.os.windowsPhone || ((/Windows NT/i.test(userAgent)) && (/Touch/i.test(userAgent))))  {\r\n        info.os.desktop = false;\r\n        info.mobile = true;\r\n    }\r\n\r\n    if (window.cordova !== undefined) {\r\n        info.environment.cordova = true;\r\n    }\r\n    \r\n    if ((typeof process !== 'undefined') && (typeof process.versions.node !== 'undefined')) {\r\n        info.environment.node = true;\r\n    }\r\n    \r\n    if (info.environment.node && typeof process.versions === 'object') {\r\n        info.environment.nodeWebkit = !!process.versions['node-webkit'];\r\n        info.environment.electron = !!process.versions.electron;\r\n    }\r\n    \r\n    if (navigator.isCocoonJS) {\r\n        info.environment.cocoonJS = true;\r\n\r\n        try {\r\n            info.environment.cocoonApp = (typeof CocoonJS !== 'undefined');\r\n        } catch (error) {\r\n            info.environment.cocoonApp = false;\r\n        }\r\n    }\r\n\r\n    if (window.ejecta !== undefined) {\r\n        info.environment.ejecta = true;\r\n    }\r\n\r\n    return info;\r\n\r\n}","\r\nexport default function FeatureDetection(os) {\r\n\r\n    let features = {\r\n        canvas : false,\r\n        svg : false,\r\n        file : false,\r\n        fileSystem : false,\r\n        worker : false, // computationally expensive tasks\r\n        pointerLock : false, // restrict mouse movement to an element\r\n        vibration : false\r\n    };\r\n\r\n    features.canvas = !!window['CanvasRenderingContext2D'] || os.environment.cocoonJS;\r\n\r\n    features.file = !!window['File'] && !!window['FileReader'] && !!window['FileList'] && !!window['Blob'];\r\n    features.fileSystem = !!window['requestFileSystem'];\r\n\r\n    features.worker = !!window['Worker'];\r\n\r\n    features.pointerLock = 'pointerLockElement' in document || 'mozPointerLockElement' in document || 'webkitPointerLockElement' in document;\r\n\r\n    features.svg = (typeof SVGRect !== undefined && document.implementation.hasFeature('http://www.w3.org/TR/SVG11/feature#Image', '1.1')); \r\n\r\n    window.URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\r\n\r\n    navigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate || navigator.msVibrate;\r\n\r\n    if (navigator.vibrate)  {\r\n        features.vibration = true;\r\n    }\r\n\r\n    return features;\r\n}","import DetectOS from \"./DetectOS\";\r\nimport DetectBrowser from \"./DetectBrowser\";\r\nimport FeatureDetection from \"./FeatureDetection\";\r\nimport DetectAudioFeatures from \"./DetectAudioFeatures\";\r\nimport DeepFreeze from \"../utils/object/DeepFreeze\";\r\nimport DetectFullscreen from \"./DetectFullscreen\";\r\n\r\n\r\nclass PlatformEnvironment {\r\n\r\n    constructor() {\r\n\r\n        this._userAgent = navigator.userAgent;\r\n        this._osInfo = DetectOS(this._userAgent);\r\n        this._browser = DetectBrowser(this._userAgent);\r\n        this._features = FeatureDetection(this._osInfo);\r\n        this._audio = DetectAudioFeatures(this._browser);\r\n        this._fullscreen = DetectFullscreen();\r\n\r\n    }\r\n\r\n    get info() {\r\n        return this._userAgent;\r\n    }\r\n\r\n    get platformName() {\r\n        return this._osInfo.name;\r\n    }\r\n\r\n    get mobile() {\r\n        return this._osInfo.mobile;\r\n    }\r\n\r\n    get desktop() {\r\n        return this._osInfo.desktop;\r\n    }\r\n\r\n    get os() {\r\n        return this._osInfo.os;\r\n    }\r\n\r\n    get environment() {\r\n        return this._osInfo.environment;\r\n    }\r\n\r\n    get browserName() {\r\n        return this._browser.name;\r\n    }\r\n\r\n    get browserVersion() {\r\n        return this._browser.version;\r\n    }\r\n\r\n    get features() {\r\n        return this._features;\r\n    }\r\n\r\n    get fullscreenInfo() {\r\n        return this._fullscreen;\r\n    }\r\n\r\n    get supportFullscreen() {\r\n        return this._fullscreen.available;\r\n    }\r\n\r\n    get supportAudio() {\r\n        return this._audio.audioData;\r\n    }\r\n\r\n    get supportWebAudio() {\r\n        return this._audio.webAudio;\r\n    }\r\n\r\n    get audioFormats() {\r\n        return this._audio.format;\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\nlet Environment = new PlatformEnvironment();\r\n\r\nDeepFreeze(Environment);\r\n\r\nexport default Environment;\r\n","\r\n// Wrapper class for game time\r\n\r\nexport default class GameTime {\r\n\r\n    constructor(game) {\r\n        this.game = game;\r\n\r\n    }\r\n\r\n    init(gameLoop) {\r\n        this._updateStep = gameLoop.updateStep;\r\n    }\r\n\r\n    get now() {\r\n        return this._updateStep.time;\r\n    }\r\n\r\n    get fps() {\r\n        return this._updateStep.fps;\r\n    }\r\n\r\n    get desiredFps() {\r\n        return this._updateStep.fpsDesired;\r\n    }\r\n\r\n    get delta() {\r\n        return this._updateStep.deltaTime;\r\n    }\r\n\r\n    get elapsed() {\r\n        return this._updateStep.elapsed;\r\n    }\r\n\r\n    get rawDelta() {\r\n        return this._updateStep.hiDeltaTime;\r\n    }\r\n\r\n}","import RequestAnimationFrame from \"../dom/RequestAnimationFrame\";\r\nimport ObjectGet from \"../utils/object/ObjectGet\";\r\nimport MathUtils from '../math/MathUtils'\r\n\r\nexport default class UpdateStep {\r\n\r\n    constructor(game, config) {\r\n        // CORE\r\n        this.game = game;\r\n        this.requestAnimationFrame = new RequestAnimationFrame(config.time.timeoutMode);\r\n        this.isRunning = false;\r\n        this.loop = null;\r\n        this.render = null;\r\n\r\n        // TIMER\r\n        this.startTime = 0; // start time\r\n        this.time = 0; // current hi-time\r\n        this.previousTime = 0; // last hi-time\r\n        this.elapsed = 0; // elapsed time\r\n        this.hiDeltaTime = 0; // raw delta time\r\n        this.deltaTime = 0; // delta time in miliseconds\r\n        // FPS\r\n        this.requireFpsUpdate = true;\r\n        this.fpsDesired = ObjectGet.value(config, 'fps', 60);\r\n        this.fps = this.fpsDesired;\r\n        this.currentFps = 0;\r\n        this._nextFpsUpdate = 0;\r\n        this._framesThisSecond = 0;\r\n\r\n        // ACCUMALATOR METHOD\r\n        this.interpolation = false;\r\n        this.timeStep = Math.ceil(1000 / this.fpsDesired);\r\n        this.minTimeStep = this.timeStep * 1.25;\r\n        this.accumalator = 0;\r\n        this.accumulatorMax = this.timeStep * 10;\r\n        this.updateLast = 0;\r\n        this.updateAverageDelta = 0;\r\n        this.frameCounter = 0;\r\n    }\r\n\r\n    init(gameLoop) {\r\n        \r\n        if (this.isRunning)\r\n            return;\r\n\r\n        this.reset();\r\n\r\n        this.loop = gameLoop.loop.bind(gameLoop);\r\n        this.render = gameLoop.render.bind(gameLoop);\r\n\r\n        this.startTime = window.performance.now();\r\n\r\n        this.requestAnimationFrame.start(this.update.bind(this));\r\n\r\n        this.isRunning = true;\r\n\r\n    }\r\n\r\n    update(timeStamp) {\r\n\r\n        this.hiDeltaTime = timeStamp - this.previousTime;\r\n\r\n        // current\r\n        this.time = timeStamp;\r\n\r\n        // game elapsed time\r\n        this.elapsed += this.hiDeltaTime;\r\n\r\n        // FPS Update\r\n        if (this.requireFpsUpdate)\r\n            this.fpsUpdate(timeStamp);\r\n\r\n         // set previous time\r\n         this.previousTime = timeStamp;\r\n\r\n         // game loop\r\n        this.accumalatorMethod(this.hiDeltaTime, timeStamp);\r\n\r\n        // game render\r\n        this.render(this.hiDeltaTime);\r\n\r\n    }\r\n\r\n    fpsUpdate(timeStamp) {\r\n\r\n        \r\n\r\n        if (timeStamp > this._nextFpsUpdate) {\r\n            this.currentFps = 0.25 * this._framesThisSecond + 0.75 * this.fps;\r\n            this.fps = MathUtils.clamp(~~this.currentFps, 0, this.fpsDesired);\r\n     \r\n            this._nextFpsUpdate = timeStamp + 1000;\r\n            this._framesThisSecond = 0;\r\n        }\r\n     \r\n        this._framesThisSecond++;\r\n    }\r\n\r\n\r\n\r\n    accumalatorMethod(deltaTime, timeStamp) {\r\n\r\n        if ((++this.frameCounter % this.frameRate) === 0) {\r\n\r\n            this.frameCounter = 0;\r\n\r\n            this.accumalator += deltaTime;//Math.max(Math.min(this.timeStep * 3, this.elapsed),0);\r\n            this.accumulator = Math.min(this.accumalator, this.accumalatorMax); //, this.updateAverage);\r\n\r\n            let deltaUpdate = (this.interpolation) ? deltaTime : this.timeStep;\r\n            let accumulatorUpdateDelta = (this.interpolation) ? deltaUpdate : Math.max(deltaUpdate, this.updateAverageDelta);\r\n            this.deltaTime = deltaUpdate / 1000;\r\n\r\n            while (this.accumalator >= accumulatorUpdateDelta || this.interpolation) {\r\n\r\n                let updateStart = window.performance.now();\r\n\r\n                // UPDATE GAME\r\n                this.loop(deltaUpdate / 1000.0, timeStamp);\r\n\r\n                let updateLast = window.performance.now();\r\n                this.updateAverageDelta = updateLast - updateStart;\r\n\r\n                this.accumalator -= accumulatorUpdateDelta;\r\n                if (this.interpolation) {\r\n                    this.accumalator = 0;\r\n                    break;\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    accumalatorReset() {\r\n        this.frameCounter = 0;\r\n        this.frameRate = ~~(0.5 + 60 / this.fpsDesired);\r\n        this.accumalator = 0;\r\n        this.timeStep = 1000 / this.fpsDesired;\r\n        this.accumulatorMax = this.stepSize * 10;\r\n    }\r\n    \r\n    reset() {\r\n        let now = window.performance.now();\r\n\r\n        this.deltaTime = 0;\r\n        this.hiDeltaTime = 0;\r\n        this.time = now;\r\n        this.previousTimeTime = now;\r\n        this._nextFpsUpdate = now + 1000;\r\n        this._framesThisSecond = 0;\r\n\r\n        this.accumalatorReset();\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n/*\r\nif (this.game.systemInited) {\r\n\r\n    this.time.update(time);\r\n\r\n    if (this._spiraling > 1) {\r\n\r\n        this.time.deltaTime = 0;\r\n        this._spiraling = 0;\r\n        this.time.accumalator = 0;\r\n\r\n        this.render(this.time.accumulatorDelta);\r\n\r\n    } else {\r\n\r\n    var countFrames = 0;\r\n\r\n    while (this.time.accumalator >= this.time.accumulatorDelta) {\r\n\r\n      //  this.time.updateStart = window.performance.now();\r\n\r\n        this.time.deltaTime = Math.min(this.time.accumalator,this.time.accumulatorDelta) / 1000;\r\n\r\n        this.logic(this.time.deltaTime);\r\n\r\n        //this.time.updateLast =  window.performance.now();\r\n      //  this.time.updateAverage = this.time.updateLast - this.time.updateStart;\r\n\r\n        this.time.accumalator -= this.time.accumulatorDelta;\r\n\r\n        countFrames++;\r\n\r\n        this.time.refresh();\r\n\r\n        if (countFrames >= 240) { // SPIRAL\r\n            //panic();\r\n            this.time.accumalator = 0;\r\n\r\n            break;\r\n        }\r\n    }\r\n\r\n      if (countFrames > this._lastFrameCount)\r\n         this._spiraling++;\r\n     else if (countFrames < this._lastFrameCount)\r\n        this._spiraling = 0;\r\n\r\n        this._lastFrameCount = countFrames;\r\n\r\n        this.render(this.time.accumalator/this.time.accumulatorDelta);\r\n\r\n    }\r\n\r\n\r\n\r\n}*/","\r\nexport default function ComputeBounds(bounds, transform, width, height, origin) {\r\n    \r\n  if (origin === undefined) origin = {x:0,y:0}\r\n\r\n    let top = transform.matrix.transformPoint(-origin.x, -origin.y);\r\n    let left = transform.matrix.transformPoint(width - origin.x, -origin.y);\r\n    let bottom = transform.matrix.transformPoint(-origin.x, height - origin.y);\r\n    let right = transform.matrix.transformPoint(width - origin.x, height - origin.y);\r\n  \r\n    bounds.min.x = Math.min(top.x,left.x,bottom.x,right.x);\r\n    bounds.min.y = Math.min(top.y,left.y,bottom.y,right.y);\r\n    bounds.max.x = Math.max(top.x,left.x,bottom.x,right.x);\r\n    bounds.max.y = Math.max(top.y,left.y,bottom.y,right.y);\r\n  \r\n  }","\r\n\r\nexport default function ComputeDelimiterPoint(x, y, rotation, anchor) {\r\n\r\n    let coord = {x:0, y:0};\r\n\r\n\r\n    if (anchor === undefined) {\r\n        coord.x = (x * rotation.x) - (y * rotation.y);\r\n        coord.y = (x * rotation.y) - (y * rotation.x);\r\n    } else {\r\n      \r\n        \r\n        let xa = x - anchor.x;\r\n        let ya = y - anchor.y;\r\n    // cx = anchor.x + ((x-anchor.x) * Math.cos(rotation)) - ((y-anchor.y) * Math.sin(rotation));\r\n        coord.x = anchor.x + (xa * rotation.x) - (ya * rotation.y);\r\n    // cy = anchor.y - ((x-anchor.x) * Math.sin(rotation)) - ((y-anchor.y) * Math.cos(rotation));\r\n        coord.y = anchor.y - (xa * rotation.y) - (ya * rotation.x);\r\n    }\r\n\r\n    return coord;\r\n}","\r\nimport Vector2 from '../math/Vector2';\r\nimport Matrix3 from '../math/Matrix3';\r\nimport BoundingBox from '../math/BoundingBox';\r\n\r\nexport default class Transform {\r\n\r\n\r\n  constructor() {\r\n\r\n    this.matrix = new Matrix3(1);\r\n    this.position = new Vector2(0,0, this);\r\n    this.scale = new Vector2(1,1, this);\r\n    this.origin = new Vector2(0,0, this);\r\n    this.angle = 0;\r\n    this.rotation = 0;\r\n    this._cosSin = {x:1,y:0};\r\n    this._oldRotation = -1;\r\n    this._isDirty = true;\r\n    //this.worldPosition = new Vector2(0,0);\r\n    //this.worldScale =  new Vector2(1,1);\r\n    //this.worldRotation = 0;\r\n    //this.bounds = new BoundingBox(0,0,1,1); // the full bounds of the node - defined by render\r\n    //this.globalBounds = new BoundingBox(0,0,1,1); // defined by render\r\n  }\r\n\r\n  markDirty() {\r\n    this._isDirty = true;\r\n  }\r\n\r\n    destroy() {\r\n\r\n      delete this.position;\r\n      delete this.scale;\r\n      delete this.matrix;\r\n      delete this.worldPosition;\r\n      delete this.worldScale;\r\n      delete this.origin;\r\n      delete this.bounds;\r\n      delete this.globalBounds;\r\n      delete this._cosSin;\r\n\r\n    }\r\n\r\n    reset() {\r\n      this.matrix.setIdentity();\r\n      this._isDirty = true;\r\n      this._cosSin.x = 1;\r\n      this._cosSin.y = 0;\r\n      this.position.set(0,0);\r\n      this.angle = 0;\r\n      this.rotation = 0;\r\n      this._oldRotation = 0;\r\n      this.origin.set(0,0);\r\n      this.scale.set(0,0);\r\n\r\n    }\r\n  }\r\n\r\n","import ComputeDelimiterPoint from \"./ComputeDelimiterPoint\";\r\n\r\n\r\nexport default function UpdateBounds(bounds, x, y, width, height, cosSin, origin) {\r\n\r\n    let coords = [];\r\n\r\n    coords[0] = ComputeDelimiterPoint( x, y, cosSin, origin);\r\n    coords[1] = ComputeDelimiterPoint( x + width,  y, cosSin, origin);\r\n    coords[2] = ComputeDelimiterPoint( x, y + height, cosSin, origin);\r\n    coords[3] = ComputeDelimiterPoint( x + width , y + height, cosSin, origin);\r\n  \r\n    bounds.min.x = Math.min(coords[0].x,coords[1].x,coords[2].x,coords[3].x);\r\n    bounds.min.y = Math.min(coords[0].y,coords[1].y,coords[2].y,coords[3].y);\r\n\r\n    bounds.max.x = Math.max(coords[0].x,coords[1].x,coords[2].x,coords[3].x);\r\n    bounds.max.y = Math.max(coords[0].y,coords[1].y,coords[2].y,coords[3].y);\r\n\r\n    \r\n\r\n}","\r\nimport MathUtils from '../math/MathUtils';\r\nimport Matrix3 from '../math/Matrix3';\r\n\r\n/*\r\n\r\n* | a | b | x |\r\n* | c | d | y |\r\n* | 0 | 0 | 1 |\r\n\r\n* | 0 | 3 | 6 | * | a | d | x |\r\n* | 1 | 4 | 7 | * | b | e | y |\r\n* | 2 | 5 | 8 | * | c | f | 1 |\r\n\r\n*/\r\n\r\nexport default function UpdateTransform(transform, parentTransform) {\r\n\r\n    //if (parentMatrix === undefined) parentMatrix = null;\r\n    if (!transform._isDirty && !parentTransform._isDirty)\r\n        return;\r\n\r\n\r\n    transform.rotation = transform.angle * MathUtils.toRadian;\r\n\r\n     // if (transform.rotation % MathUtils.TAU) {\r\n      \r\n\r\n        if (transform.rotation !== transform._oldRotation)\r\n        {\r\n            transform._oldRotation = transform.rotation;\r\n            transform._cosSin.y = Math.sin(transform.rotation);\r\n            transform._cosSin.x = Math.cos(transform.rotation);\r\n        }\r\n\r\n\r\n        transform.matrix.setModelMatrix(\r\n          transform.position, \r\n          transform.scale, \r\n          transform._cosSin, \r\n          transform.origin)\r\n        .concat(parentTransform.matrix);\r\n\r\n\r\n\r\n     // } else {\r\n\r\n        /*a  = transform.scale.x;\r\n        d  = transform.scale.y;\r\n        x =  transform.position.x;\r\n        y =  transform.position.y;\r\n        x -= transform.origin.x * a;\r\n        y -= transform.origin.y * d;\r\n\r\n        wt.a  = a  * pt.a;\r\n        wt.b  = a  * pt.b;\r\n        wt.c  = d  * pt.c;\r\n        wt.d  = d  * pt.d;\r\n        wt.x = x * pt.a + y * pt.c + pt.x;\r\n        wt.y = x * pt.b + y * pt.d + pt.y;*/\r\n\r\n\r\n    //  }\r\n\r\n      //transform.worldPosition.set(wt.x ,wt.y);\r\n      //transform.worldScale.set(Math.sqrt(wt.a * wt.a + wt.b * wt.b), Math.sqrt(wt.c * wt.c + wt.d * wt.d));\r\n      //transform.worldRotation = Math.atan2(-wt.c, wt.d);\r\n    \r\n}\r\n","\r\nimport MathUtils from '../math/MathUtils';\r\nimport Vector2 from '../math/Vector2';\r\nimport ComputeDelimiterPoint from './ComputeDelimiterPoint';\r\n\r\n\r\n\r\nexport default function UpdateTransformBounds(bounds, frame, transform) {\r\n    \r\n  let coords = [];\r\n /* let scale = Vector2.abs(transform.scale);\r\n  let pos = transform.position;\r\n  let anchor = transform.origin;\r\n  let size = {\r\n    x : frame.width * scale.x,\r\n    y : frame.height * scale.y\r\n  };\r\n\r\n  anchor.x *= scale.x;\r\n  anchor.y *= scale.y;\r\n  pos.x -= anchor.x;\r\n  pos.y -= anchor.y;\r\n  anchor.x += pos.x;\r\n  anchor.y += pos.y;*/\r\n  \r\n  //coords[0] = ComputeDelimiterPoint( pos.x, pos.y, transform._cosSin, anchor);\r\n  //coords[1] = ComputeDelimiterPoint( pos.x + size.x,  pos.y, transform._cosSin, anchor);\r\n  //coords[2] = ComputeDelimiterPoint( pos.x , pos.y + size.y, transform._cosSin, anchor);\r\n  //coords[3] = ComputeDelimiterPoint( pos.x + size.x , pos.y + size.y, transform._cosSin, anchor);\r\n\r\n  let top = transform.matrix.transformPoint(0, 0);\r\n  let left = transform.matrix.transformPoint(frame.width, 0);\r\n  let bottom = transform.matrix.transformPoint(0, frame.height);\r\n  let right = transform.matrix.transformPoint(frame.width, frame.height);\r\n\r\n  bounds.min.x = Math.min(top.x,left.x,bottom.x,right.x);\r\n  bounds.min.y = Math.min(top.y,left.y,bottom.y,right.y);\r\n  bounds.max.x = Math.max(top.x,left.x,bottom.x,right.x);\r\n  bounds.max.y = Math.max(top.y,left.y,bottom.y,right.y);\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n  // position (vector)\r\n  // scale (vector)\r\n  // rotation (vector x = cos, y = sin)\r\n  /*\r\n  setup(pos, scale, rotation, anchor, width, height) {\r\n\r\n    var coords = [];\r\n    var negx = 1;\r\n    var negy = 1;\r\n\r\n    if (scale.x < 0)\r\n          negx = -1;\r\n    if (scale.y < 0)\r\n          negy = -1;\r\n\r\n\r\n\r\n    this.size.x = width*scale.x*negx;\r\n    this.size.y = height*scale.y*negy;\r\n    anchor.x *= scale.x*negx;\r\n    anchor.y *= scale.y*negy;\r\n    pos.x -= anchor.x;\r\n    pos.y -= anchor.y;\r\n    anchor.x += pos.x;\r\n    anchor.y += pos.y;\r\n\r\n    var callback = null;\r\n\r\n    if (rotation instanceof  scintilla.Vector2)\r\n        callback = this['calcCoordsCosSin'];\r\n      else\r\n        callback = this['calcCoords'];\r\n\r\n    coords[0] = callback( pos.x, pos.y, anchor, rotation);\r\n    coords[1] = callback( pos.x + this.size.x,  pos.y, anchor,rotation);\r\n\r\n    coords[2] = callback( pos.x , pos.y + this.size.y, anchor,rotation);\r\n    coords[3] = callback( pos.x + this.size.x , pos.y + this.size.y,anchor, rotation);\r\n\r\n\r\n\r\n    this.min.x = Math.min(coords[0].x,coords[1].x,coords[2].x,coords[3].x);\r\n    this.min.y = Math.min(coords[0].y,coords[1].y,coords[2].y,coords[3].y);\r\n\r\n    this.max.x = Math.max(coords[0].x,coords[1].x,coords[2].x,coords[3].x);\r\n    this.max.y = Math.max(coords[0].y,coords[1].y,coords[2].y,coords[3].y);\r\n    this.center.x = pos.x+(this.max.x-this.min.x)/2;\r\n    this.center.y = pos.y+(this.max.y-this.min.y)/2;\r\n    this.box.set(this.min.x,this.min.y,this.max.x-this.min.x,this.max.y-this.min.y);\r\n\r\n  }\r\n\r\n\r\n  setByGameObject(gameObject, local) {\r\n\r\n    //if (gameObject.render != null) {\r\n\r\n      if (local) {\r\n        this.setup(gameObject.position,\r\n                gameObject.scale,\r\n                gameObject._cosSin,\r\n                gameObject.render.origin,\r\n                gameObject.render.width,\r\n                gameObject.render.height\r\n              );\r\n      } else {\r\n\r\n        var frame = gameObject.component['render'].frame;\r\n\r\n        var pos = {x:gameObject.worldPosition.x, y:gameObject.worldPosition.y};\r\n        var org = {\r\n          x:gameObject.origin.x * frame.width,\r\n          y:gameObject.origin.y * frame.height};\r\n\r\n        pos.x += gameObject.game.camera.view.x;\r\n        pos.y += gameObject.game.camera.view.y;\r\n\r\n        this.setup(pos,\r\n                gameObject.worldScale,\r\n                gameObject.worldRotation,\r\n                org,\r\n                frame.width,\r\n                frame.height\r\n              );\r\n      }\r\n\r\n\r\n    return this;\r\n\r\n\r\n  }\r\n\r\n\r\n  setByShape(shape,position) {\r\n\r\n\r\n    var minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity;\r\n    var type = shape.getType();\r\n\r\n    if (type == \"Polygon\") {\r\n\r\n      var points = shape.getPoints();\r\n\r\n      points.forEach(function (point) {\r\n          minX = Math.min(minX, point.x);\r\n          minY = Math.min(minY, point.y);\r\n          maxX = Math.max(maxX, point.x);\r\n          maxY = Math.max(maxY, point.y);\r\n\r\n      });\r\n    }\r\n\r\n    if (position !== undefined) {\r\n      minX += position.x;\r\n      minY += position.y;\r\n      maxX += position.x;\r\n      maxY += position.y;\r\n    }\r\n\r\n\r\n    this.min.set(minX,minY);\r\n    this.max.set(maxX,maxY)\r\n    this.box.set(minX,minY,maxX-minX,maxY-minY);\r\n\r\n  }\r\n\r\n  calcCoordsCosSin(x, y, anchor, cos_and_sin) {\r\n\r\n    var coord = {x:0,y:0};\r\n\r\n    coord.x = anchor.x + ((x-anchor.x) * cos_and_sin.x) - ((y-anchor.y) * cos_and_sin.y);\r\n    coord.y = anchor.y - ((x-anchor.x) * cos_and_sin.y) - ((y-anchor.y) * cos_and_sin.x);\r\n\r\n      return coord;\r\n\r\n  }\r\n\r\n  calcCoords(x,y,anchor,rotation) {\r\n\r\n    var coord = {x:0,y:0};\r\n\r\n    coord.x = anchor.x + ((x-anchor.x) * Math.cos(rotation)) - ((y-anchor.y) * Math.sin(rotation));\r\n    coord.y = anchor.y - ((x-anchor.x) * Math.sin(rotation)) - ((y-anchor.y) * Math.cos(rotation));\r\n\r\n      return coord;\r\n\r\n  }*/","\r\nconst Base64Utils = {\r\n    decode(str) {\r\n        return window.atob(str);\r\n        // Base64.decode(encodedString);\r\n    },\r\n\r\n    decodeToUint32(str) {\r\n        let bin = window.atob(str);\r\n        let len = bin.length;\r\n        let bytes = new Array(len);\r\n\r\n        for (let i = 0; i < len; i += 4) {\r\n            bytes[i / 4] = (\r\n                bin.charCodeAt(i) |\r\n                bin.charCodeAt(i + 1) << 8 |\r\n                bin.charCodeAt(i + 2) << 16 |\r\n                bin.charCodeAt(i + 3) << 24\r\n            ) >>> 0;\r\n        }\r\n\r\n        return bytes;\r\n    },\r\n\r\n    encode(str) {\r\n        return window.btoa(str);\r\n        // Base64.encode(string);\r\n    }\r\n}\r\n\r\n\r\nObject.freeze(Base64Utils);\r\n\r\nexport default Base64Utils;","\r\nconst Path = {\r\n\r\n  getExtension(filename) {\r\n    return filename.substring(filename.lastIndexOf('.')+1, filename.length) || \"\";\r\n  },\r\n\r\n  getFilename(path) {\r\n    return path.split('\\\\').pop().split('/').pop() || path;\r\n  },\r\n  \r\n  getFilenameWithoutExtension(path) {\r\n    return this.removeExtension(this.getFilename(path));\r\n  },\r\n\r\n  removeExtension(path) {\r\n    return path.substr(0, path.lastIndexOf('.')) || path;\r\n  },\r\n\r\n  getPath(path) {\r\n    return path.substr(0, path.lastIndexOf(\"/\") + 1) || \"\";\r\n  },\r\n\r\n  getRootPath(path) {\r\n    return path.substr(0, path.indexOf(\"/\") + 1) || path;\r\n  },\r\n\r\n  getPathWithoutRoot(path) {\r\n    let s = (path.indexOf(\"/\") + 1) || 0;\r\n    let l = (path.lastIndexOf(\"/\") - s + 1) || path.length;\r\n    return path.substr(s, l) || path;\r\n  },\r\n\r\n  getDirectoryName(path) {\r\n      let dir = path.split('/');\r\n      let len = dir.length;\r\n      if (len <= 1)\r\n        return dir[dir.length - 1];\r\n      else\r\n        return dir[dir.length - 2];\r\n  },\r\n\r\n  getURL(url, baseURL) {\r\n    if (!url)\r\n        return null;\r\n    \r\n        \r\n    if (url.match(/^(?:blob:|data:|http:\\/\\/|https:\\/\\/|\\/\\/)/))\r\n        return url;\r\n    else\r\n        return baseURL + url;\r\n  }\r\n\r\n}\r\n\r\nObject.freeze(Path);\r\n\r\nexport default Path;","\r\nconst Validate = {\r\n    isFunction(value) {\r\n       // return (value instanceof Function);\r\n       return  typeof value === \"function\" && typeof value.nodeType !== \"number\";\r\n    },\r\n\r\n    isClass(value) {\r\n        return !!(value && value.constructor && value.call && value.apply);\r\n    },\r\n\r\n    isArray(value) {\r\n        return Array.isArray(value);\r\n    },\r\n\r\n    isNumber(value) {\r\n        return !isNaN(value);\r\n    },\r\n\r\n    isString(value) {\r\n        return typeof value === 'string' || value instanceof String;\r\n    }\r\n\r\n    \r\n};\r\n\r\nObject.freeze(Validate);\r\n\r\nexport default Validate;","\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\r\n// To do so, we use this function.\r\nexport default function DeepFreeze(obj) {\r\n\r\n    // Retrieve the property names defined on obj\r\n    var propNames = Object.getOwnPropertyNames(obj);\r\n\r\n    // Freeze properties before freezing self\r\n    propNames.forEach(function(name) {\r\n    var prop = obj[name];\r\n\r\n    // Freeze prop if it is an object\r\n    if (typeof prop == 'object' && prop !== null)\r\n        DeepFreeze(prop);\r\n    });\r\n\r\n    // Freeze self (no-op if already frozen)\r\n    return Object.freeze(obj);\r\n}","import IsPlainObject from \"./IsPlainObject\";\r\nimport Validate from '../Validate';\r\n\r\n// https://api.jquery.com/jQuery.extend/\r\n// Merge the contents of two or more objects together into the first object.\r\nexport default function Extend() {\r\n\r\n    let options, name, src, copy, copyIsArray, clone;\r\n    let target = arguments[0] || {};\r\n    let i = 1;\r\n    let length = arguments.length;\r\n    let deep = false;\r\n\r\n    // Handle a deep copy situation\r\n    if (typeof target === \"boolean\") {\r\n        deep = target;\r\n\r\n        // Skip the boolean and the target\r\n        target = arguments[i] || {};\r\n        i++;\r\n    }\r\n\r\n    // Handle case when target is a string or something (possible in deep copy)\r\n    if (typeof target !== \"object\" && !Validate.isFunction(target)) {\r\n        target = {};\r\n    }\r\n\r\n    // Extend scintilla itself if only one argument is passed\r\n    if (i === length) {\r\n        target = this;\r\n        i--;\r\n    }\r\n\r\n    for (; i < length; i++) {\r\n\r\n        // Only deal with non-null/undefined values\r\n        if ((options = arguments[i]) != null) {\r\n\r\n            for (name in options) {\r\n\r\n                src = target[name];\r\n                copy = options[name];\r\n\r\n                // Prevent never-ending loop\r\n                if (target === copy) {\r\n                    continue;\r\n                }\r\n\r\n                // Recurse if we're merging plain objects or arrays\r\n                if (deep && copy && (IsPlainObject(copy) || (copyIsArray = Array.isArray(copy)))) {\r\n\r\n                    if (copyIsArray) {\r\n                        copyIsArray = false;\r\n                        clone = src && Array.isArray(src) ? src : [];\r\n\r\n                    } else {\r\n                        clone = src && IsPlainObject(src) ? src : {};\r\n                    }\r\n\r\n                    // Never move original objects, clone them\r\n                    target[name] = Extend(deep, clone, copy);\r\n\r\n                    // Don't bring in undefined values\r\n                } else if (copy !== undefined) {\r\n                    target[name] = copy;\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    return target;\r\n\r\n}","\r\n/// From jQuery\r\n\r\nfunction HasOwn(classToType) {\r\n    return classToType.hasOwnProperty;\r\n}\r\n\r\nexport default function IsPlainObject(obj) {\r\n\r\n    // Detect obvious negatives\r\n    if (typeof(obj) !== 'object' || obj.nodeType || obj === obj.window) {\r\n        return false;\r\n    }\r\n\r\n    // Objects with no prototype (e.g., `Object.create( null )`) are plain\r\n    /*let proto = obj.getPrototypeOf;\r\n\r\n    if (!proto)\r\n        return true;*/\r\n\r\n    try\r\n    {\r\n        // Objects with prototype are plain if they were constructed by a global Object function\r\n        //  //!HasOwn.call(proto, 'constructor');\r\n        if ( obj.constructor && !({}).hasOwnProperty.call(obj.constructor.prototype, 'isPrototypeOf')) {\r\n            return false;\r\n        }\r\n    }\r\n    catch (e)\r\n    {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}","import DeepFreeze from \"./DeepFreeze\";\r\n\r\nexport default function MakeImmutable(value, deep) {\r\n\r\n    if (deep === undefined) deep = false;\r\n\r\n    if (Array.isArray(value))\r\n    {\r\n        for (let i = 0; i < value.length; i++)\r\n        {\r\n            if (deep) {\r\n                DeepFreeze(value[i])\r\n            } else {\r\n                Object.freeze(value[i]);\r\n            }\r\n        }\r\n    } else {\r\n\r\n        if (deep) {\r\n            DeepFreeze(value)\r\n        } else {\r\n            Object.freeze(value);\r\n        }\r\n    }\r\n\r\n    return value;\r\n\r\n}","\r\nclass ObjectGetter {\r\n\r\n  value(obj, key, defaultValue)\r\n  {\r\n    var type = typeof(obj);\r\n\r\n    if (!obj || type === 'number' || type === 'string')\r\n        return defaultValue;\r\n    else if (obj.hasOwnProperty(key) && obj[key] !== undefined)\r\n        return obj[key];\r\n    else\r\n        return defaultValue;\r\n\r\n  }\r\n\r\n  // Get value in complex object\r\n  propertyValue(source, key, defaultValue)\r\n    {\r\n        if (!source || typeof source === 'number')\r\n            return defaultValue;\r\n        else if (source.hasOwnProperty(key))\r\n            return source[key];\r\n        else if (key.indexOf('.'))\r\n        {\r\n            var keys = key.split('.');\r\n            var parent = source;\r\n            var value = defaultValue;\r\n\r\n            for (var i = 0; i < keys.length; i++)\r\n            {\r\n                if (parent.hasOwnProperty(keys[i]))\r\n                {\r\n                    value = parent[keys[i]];\r\n                    parent = parent[keys[i]];\r\n                }\r\n                else\r\n                {\r\n                    value = defaultValue;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            return value;\r\n        }\r\n        else\r\n        {\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n  \r\n\r\n};\r\n\r\nvar ObjectGet = new ObjectGetter();\r\n\r\nObject.freeze(ObjectGet);\r\n\r\nexport default ObjectGet;"],"sourceRoot":""}